{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      for (      IModule m : GlobalScope.getInstance().getVisibleModules()) {
        boolean hasStubs=false;
        for (        SModelDescriptor sd : m.getOwnModelDescriptors()) {
          if (SModelStereotype.isStubModelStereotype(sd.getStereotype())) {
            hasStubs=true;
            break;
          }
        }
        if (!(hasStubs)) {
          continue;
        }
        final List<BaseSNodeDescriptor> descriptors=new ArrayList<BaseSNodeDescriptor>();
        for (        SModelDescriptor model : m.getOwnModelDescriptors()) {
          descriptors.addAll(StubsNodeDescriptorsCache.getInstance().getSNodeDescriptors(model.getSModelReference()));
        }
        for (        BaseSNodeDescriptor descriptor : descriptors) {
          String name=getName(descriptor);
          List<BaseSNodeDescriptor> descriptorList=myPossibleNodes.get(name);
          if (descriptorList == null) {
            descriptorList=new ArrayList<BaseSNodeDescriptor>();
            myPossibleNodes.put(name,descriptorList);
          }
          descriptorList.add(descriptor);
        }
      }
    }
  }
);
}
