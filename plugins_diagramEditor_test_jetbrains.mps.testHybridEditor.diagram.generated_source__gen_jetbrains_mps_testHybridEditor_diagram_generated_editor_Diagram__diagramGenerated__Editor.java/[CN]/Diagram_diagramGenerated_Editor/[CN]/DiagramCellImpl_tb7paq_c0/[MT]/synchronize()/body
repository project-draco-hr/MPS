{
  Set<SNode> existingBlocks=new HashSet<SNode>(myBlocks);
  ListIterator<SNode> blocksIterator=myBlocks.listIterator();
  Set<SNode> existingConnectors=new HashSet<SNode>(myConnectors);
  ListIterator<SNode> connectorsIterator=myConnectors.listIterator();
  for (  SNode nextElement : ListSequence.fromList(SLinkOperations.getTargets(getSNode(),"blocks",true))) {
    if (existingBlocks.contains(nextElement)) {
      syncToNextNode(blocksIterator,existingBlocks,nextElement);
      getDirectChildCell(nextElement).synchronize();
      continue;
    }
 else     if (existingConnectors.contains(nextElement)) {
      syncToNextNode(connectorsIterator,existingConnectors,nextElement);
      getDirectChildCell(nextElement).synchronize();
      continue;
    }
    EditorCell cell=getContext().createNodeCell(nextElement);
    if (cell instanceof BlockCell) {
      blocksIterator.add(nextElement);
      existingBlocks.add(nextElement);
      addEditorCell(cell);
    }
 else     if (cell instanceof ConnectorCell) {
      connectorsIterator.add(nextElement);
      existingConnectors.add(nextElement);
      addEditorCell(cell);
    }
  }
  for (  SNode nextElement : ListSequence.fromList(SLinkOperations.getTargets(getSNode(),"connectors",true))) {
    if (existingBlocks.contains(nextElement)) {
      syncToNextNode(blocksIterator,existingBlocks,nextElement);
      getDirectChildCell(nextElement).synchronize();
      continue;
    }
 else     if (existingConnectors.contains(nextElement)) {
      syncToNextNode(connectorsIterator,existingConnectors,nextElement);
      getDirectChildCell(nextElement).synchronize();
      continue;
    }
    EditorCell cell=getContext().createNodeCell(nextElement);
    if (cell instanceof BlockCell) {
      blocksIterator.add(nextElement);
      existingBlocks.add(nextElement);
      addEditorCell(cell);
    }
 else     if (cell instanceof ConnectorCell) {
      connectorsIterator.add(nextElement);
      existingConnectors.add(nextElement);
      addEditorCell(cell);
    }
  }
  purgeTailNodes(blocksIterator);
  purgeTailNodes(connectorsIterator);
}
