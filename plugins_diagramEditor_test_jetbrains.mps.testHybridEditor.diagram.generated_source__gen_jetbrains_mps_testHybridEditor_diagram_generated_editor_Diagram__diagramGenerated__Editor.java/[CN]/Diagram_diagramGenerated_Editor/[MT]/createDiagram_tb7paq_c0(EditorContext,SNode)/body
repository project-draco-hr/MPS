{
  final Map<SNode,BlockCell> blockToCellMap=MapSequence.fromMap(new LinkedHashMap<SNode,BlockCell>(16,(float)0.75,false));
  final Map<SNode,ConnectorCell> connectorToCellMap=MapSequence.fromMap(new LinkedHashMap<SNode,ConnectorCell>(16,(float)0.75,false));
  createChildCells_tb7paq_c0(SLinkOperations.getTargets(node,"blocks",true),editorContext,blockToCellMap,connectorToCellMap);
  createChildCells_tb7paq_c0(SLinkOperations.getTargets(node,"connectors",true),editorContext,blockToCellMap,connectorToCellMap);
  jetbrains.mps.openapi.editor.cells.EditorCell_Collection wrappingCollection=EditorCell_Collection.createHorizontal(editorContext,node);
  wrappingCollection.setSelectable(false);
  final DiagramCell editorCell=new DiagramCell(editorContext,node){
    public Mapper<SNode,DiagramView> createMapper(){
      return new Mapper<SNode,DiagramView>(node,new ConnectionRoutingView(new OrthogonalRouter())){
        @Override protected void registerSynchronizers(        Mapper.SynchronizersConfiguration configuration){
          super.registerSynchronizers(configuration);
          configuration.add(Synchronizers.<SNode,View>forSimpleRole(this,ListSequence.fromListWithValues(new ArrayList<SNode>(),MapSequence.fromMap(blockToCellMap).keySet()),getTarget().itemsView.children(),new MapperFactory<SNode,View>(){
            public Mapper<? extends SNode,? extends View> createMapper(            SNode node){
              return MapSequence.fromMap(blockToCellMap).get(node).createMapper();
            }
          }
));
          configuration.add(Synchronizers.<SNode,Connection>forSimpleRole(this,ListSequence.fromListWithValues(new ArrayList<SNode>(),MapSequence.fromMap(connectorToCellMap).keySet()),getTarget().connections,new MapperFactory<SNode,Connection>(){
            public Mapper<? extends SNode,? extends Connection> createMapper(            SNode node){
              return MapSequence.fromMap(connectorToCellMap).get(node).createMapper();
            }
          }
));
          configuration.add(Synchronizers.forObservableRole(this,myConnectionSingleList,getTarget().connections,new MapperFactory<PolyLineConnection,Connection>(){
            public Mapper<? extends PolyLineConnection,? extends Connection> createMapper(            PolyLineConnection source){
              return new Mapper<PolyLineConnection,Connection>(source,source){
              }
;
            }
          }
));
        }
      }
;
    }
  }
;
  for (  BlockCell cell : Sequence.fromIterable(MapSequence.fromMap(blockToCellMap).values())) {
    editorCell.addEditorCell(cell);
  }
  for (  ConnectorCell cell : Sequence.fromIterable(MapSequence.fromMap(connectorToCellMap).values())) {
    editorCell.addEditorCell(cell);
  }
  editorCell.setSubstituteInfo(new CompositeSubstituteInfo(editorContext,new BasicCellContext(node),new SubstituteInfoPartExt[]{editorCell.createNewDiagramNodeActions(node,SConceptOperations.findConceptDeclaration("jetbrains.mps.testHybridEditor.structure.Block"),SLinkOperations.findLinkDeclaration("jetbrains.mps.testHybridEditor.structure.Diagram","blocks"),new _FunctionTypes._void_P3_E0<SNode,Integer,Integer>(){
    public void invoke(    SNode node,    Integer x,    Integer y){
      SNode a=SNodeOperations.cast(node,"jetbrains.mps.testHybridEditor.structure.Block");
      SNodeFactoryOperations.addNewChild(a,"inputPorts","jetbrains.mps.testHybridEditor.structure.InputPort");
      SNodeFactoryOperations.addNewChild(a,"outputPorts","jetbrains.mps.testHybridEditor.structure.OutputPort");
      SPropertyOperations.set(a,"x","" + (x));
      SPropertyOperations.set(a,"y","" + (y));
    }
  }
),editorCell.createNewDiagramConnectorActions(node,SConceptOperations.findConceptDeclaration("jetbrains.mps.testHybridEditor.structure.Connector"),SLinkOperations.findLinkDeclaration("jetbrains.mps.testHybridEditor.structure.Diagram","connectors"),new _FunctionTypes._return_P4_E0<Boolean,SNode,Object,SNode,Object>(){
    public Boolean invoke(    SNode from,    Object fromId,    SNode to,    Object toId){
      return SNodeOperations.isInstanceOf(from,"jetbrains.mps.testHybridEditor.structure.OutputPort") && SNodeOperations.isInstanceOf(to,"jetbrains.mps.testHybridEditor.structure.InputPort");
    }
  }
,new _FunctionTypes._void_P5_E0<SNode,SNode,Object,SNode,Object>(){
    public void invoke(    SNode node,    SNode from,    Object fromId,    SNode to,    Object toId){
      SNode connector=SNodeOperations.cast(node,"jetbrains.mps.testHybridEditor.structure.Connector");
      SLinkOperations.setTarget(connector,"outputPort",SNodeOperations.cast(from,"jetbrains.mps.testHybridEditor.structure.OutputPort"),false);
      SLinkOperations.setTarget(connector,"inputPort",SNodeOperations.cast(to,"jetbrains.mps.testHybridEditor.structure.InputPort"),false);
    }
  }
)}));
  editorCell.getRootMapper().attachRoot();
  editorCell.setCellId("Diagram_tb7paq_c0");
  wrappingCollection.addEditorCell(editorCell);
  return wrappingCollection;
}
