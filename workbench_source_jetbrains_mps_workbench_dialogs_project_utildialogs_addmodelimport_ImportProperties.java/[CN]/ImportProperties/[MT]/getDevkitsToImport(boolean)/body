{
  Set<ModuleReference> result=new HashSet<ModuleReference>();
  if (all) {
    for (    ModuleReference lang : myLanguages) {
      ModuleReference prefModule=getPreferredModuleForLanguage(lang);
      if (prefModule != null)       result.add(prefModule);
    }
  }
 else {
    for (    LanguageImportDescriptor l : myLanguageImports) {
      if (!l.getIsImported())       continue;
      if (l.getModule() == null)       continue;
      result.add(l.getModule());
    }
  }
  return new ArrayList<ModuleReference>(result);
}
