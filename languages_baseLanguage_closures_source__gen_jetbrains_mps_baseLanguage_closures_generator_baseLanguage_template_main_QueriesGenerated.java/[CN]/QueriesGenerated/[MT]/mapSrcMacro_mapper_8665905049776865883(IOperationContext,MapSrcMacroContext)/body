{
  SNode copy=((SNode)CopyUtil.copyAndPreserveId(_context.getNode(),false));
  List<SNode> args=SLinkOperations.getTargets(_context.getNode(),"actualArgument",true);
  List<SNode> copyArgs=SLinkOperations.getTargets(copy,"actualArgument",true);
  for (int idx=ListSequence.fromList(args).count() - 1; idx >= 0; idx--) {
    if (SNodeOperations.isInstanceOf(TypeChecker.getInstance().getTypeOf(ListSequence.fromList(args).getElement(idx)),"jetbrains.mps.baseLanguage.closures.structure.UnrestrictedFunctionType")) {
      SNode lvr=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null);
      SLinkOperations.setTarget(lvr,"variableDeclaration",SLinkOperations.getTarget(SNodeOperations.cast(ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(SNodeOperations.getAncestor(_context.getParentOutputNode(),"jetbrains.mps.baseLanguage.structure.BlockStatement",false,false),"statements",true),"statement",true)).first(),"jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement"),"localVariableDeclaration",true),false);
      SNodeOperations.replaceWithAnother(ListSequence.fromList(copyArgs).getElement(idx),lvr);
      break;
    }
  }
  return copy;
}
