{
  for (  SNode stmt : SModelOperations.getNodes(_context.getModel(),"jetbrains.mps.baseLanguage.structure.Statement")) {
    for (    SNode desc : SNodeOperations.getDescendants(stmt,null,false,new String[]{})) {
      if (SNodeOperations.isInstanceOf(desc,"jetbrains.mps.baseLanguage.closures.structure.InvokeFunctionOperation") && SNodeOperations.isInstanceOf(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(SNodeOperations.cast(SNodeOperations.getParent(desc),"jetbrains.mps.baseLanguage.structure.DotExpression"),"operand",true)),"jetbrains.mps.baseLanguage.closures.structure.UnrestrictedFunctionType")) {
        if (SNodeOperations.getAncestor(desc,"jetbrains.mps.baseLanguage.structure.Statement",false,false) == stmt && !(SNodeOperations.isInstanceOf(SNodeOperations.getParent(SNodeOperations.getParent(desc)),"jetbrains.mps.baseLanguage.structure.ExpressionStatement"))) {
          SNode de=SNodeOperations.cast(SNodeOperations.getParent(desc),"jetbrains.mps.baseLanguage.structure.DotExpression");
          jetbrains.mps.smodel.SNode lvd=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration",null);
          SLinkOperations.setTarget(lvd,"type",FunctionTypeUtil.unmeet(SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(de,"operand",true)),"jetbrains.mps.baseLanguage.closures.structure.UnrestrictedFunctionType"),"terminateType",true))),true);
          SPropertyOperations.set(lvd,"name","_tmp_" + de.getNodeId().toString());
          Flags.NEEDS_INITIALIZER.flag(_context,lvd);
          SNode lvds=SNodeOperations.insertPrevSiblingChild(stmt,SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement",null));
          SLinkOperations.setTarget(lvds,"localVariableDeclaration",lvd,true);
          SNode lvr=SNodeOperations.replaceWithAnother(de,SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null));
          SLinkOperations.setTarget(lvr,"variableDeclaration",lvd,false);
          SNode es=SNodeOperations.insertPrevSiblingChild(stmt,SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.ExpressionStatement",null));
          SLinkOperations.setTarget(es,"expression",de,true);
          Flags.PRODUCES_VALUE.flag(_context,de);
        }
      }
    }
  }
}
