{
  RuntimeEnvironment re=new RuntimeEnvironment();
  RBundle a=bundle("a",A.class);
  RBundle b=bundle("b",B.class).addDependency("a");
  re.add(a,b).init(a,b);
  ClassLoader ocl=b.getClassLoader();
  re.replace(bundle("a",A.class));
  assertNotSame(a,re.get("a"));
  assertSame(b,re.get("b"));
  assertNotSame(b.getClassLoader(),ocl);
}
