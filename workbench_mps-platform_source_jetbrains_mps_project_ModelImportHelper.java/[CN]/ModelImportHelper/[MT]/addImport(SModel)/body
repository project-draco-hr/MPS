{
  Condition<SModel> cond=new Condition<SModel>(){
    @Override public boolean met(    SModel modelDescriptor){
      boolean rightStereotype=SModelStereotype.isUserModel(modelDescriptor) || SModelStereotype.isStubModel(modelDescriptor);
      boolean hasModule=modelDescriptor.getModule() != null;
      return rightStereotype && hasModule;
    }
  }
;
  final BaseModelModel goToModelModel=new BaseModelModel(myProject,new ConditionalScope(myProject.getScope(),null,cond),new ConditionalScope(new FilteredGlobalScope(),null,cond));
  goToModelModel.setPromptText("Import model:");
  ChooseByNamePopup popup=MpsPopupFactory.createPackagePopup(myProject,goToModelModel,myInitialText);
  if (myShortcut != null) {
    popup.setCheckBoxShortcut(myShortcut);
  }
  popup.invoke(new AddImportCallback(myProject,model){
    @Override public void elementChosen(    Object element){
      doImport(goToModelModel.getModelObject(element));
    }
  }
,ModalityState.current(),false);
}
