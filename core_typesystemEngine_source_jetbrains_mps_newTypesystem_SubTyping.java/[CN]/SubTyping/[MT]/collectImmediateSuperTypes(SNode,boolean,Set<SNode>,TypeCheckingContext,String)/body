{
  if (term == null) {
    return;
  }
  Set<Pair<SubtypingRule_Runtime,IsApplicableStatus>> subTypingRules=myTypeChecker.getRulesManager().getSubtypingRules(term,isWeak);
  boolean possiblyBlindAlley=false;
  if (superTypeConceptFQName != null && !(superTypeConceptFQName.equals(term.getConceptFqName()))) {
    possiblyBlindAlley=myTypeChecker.getRulesManager().subtypingRulesByNodeAreAllByConcept(term,isWeak);
  }
  if (subTypingRules != null) {
    for (    final Pair<SubtypingRule_Runtime,IsApplicableStatus> subTypingRule : subTypingRules) {
      if (possiblyBlindAlley && subTypingRule.o1.surelyKeepsConcept()) {
        continue;
      }
      List<SNode> superTypes=FreezeUtil.freezeAndCompute(term,new Computable<List<SNode>>(){
        public List<SNode> compute(){
          return UndoHelper.getInstance().runNonUndoableAction(new Computable<List<SNode>>(){
            @Override public List<SNode> compute(){
              return subTypingRule.o1.getSubOrSuperTypes(term,context,subTypingRule.o2);
            }
          }
);
        }
      }
);
      result.addAll(superTypes);
    }
  }
}
