{
  try {
    final Class<Bootstrap> aClass=Bootstrap.class;
    final String selfRoot=PathManager.getResourceRoot(aClass,"/" + aClass.getName().replace('.','/') + ".class");
    final URL selfRootUrl=new File(selfRoot).getAbsoluteFile().toURL();
    classPath.add(selfRootUrl);
    final File libFolder=new File(aFolderPath + File.separator + "lib");
    addLibraries(classPath,libFolder,selfRootUrl);
    File jetbrainsIdeFrameworkDir=new File(selfRoot).getAbsoluteFile().getParentFile();
    if (!libFolder.equals(jetbrainsIdeFrameworkDir)) {
      addLibraries(classPath,jetbrainsIdeFrameworkDir,selfRootUrl);
    }
    final File antLib=new File(new File(libFolder,"ant"),"lib");
    addLibraries(classPath,antLib,selfRootUrl);
  }
 catch (  MalformedURLException e) {
    getLogger().error(e);
  }
}
