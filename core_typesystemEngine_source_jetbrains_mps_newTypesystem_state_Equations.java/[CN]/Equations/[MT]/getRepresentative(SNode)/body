{
  if (node == null || !TypesUtil.isVariable(node)) {
    return node;
  }
  SNode nameRepresentative=getNameRepresentative(node);
  SNode parent=myRepresentatives.get(nameRepresentative);
  SNode current=nameRepresentative;
  if (parent != null) {
    List<SNode> path=new LinkedList<SNode>();
    while (parent != null) {
      if (current != nameRepresentative) {
        path.add(current);
      }
      current=parent;
      parent=myRepresentatives.get(parent);
    }
    if (path.size() > 1) {
      for (      SNode elem : path) {
        substituteRepresentative(elem,current);
      }
    }
  }
  return current;
}
