{
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      SModelRepository.getInstance().saveAll();
    }
  }
);
  final Wrappers._T<IRefactoring> refactoring=new Wrappers._T<IRefactoring>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      SNode refactoringNode=(SNodeOperations.isInstanceOf(node,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration") ? SNodeOperations.getNode("r:de5b7214-45ee-4f6d-89bf-acde59cdb050(jetbrains.mps.lang.structure.refactorings)","1347577327951781517") : (SNodeOperations.isInstanceOf(node,"jetbrains.mps.lang.structure.structure.PropertyDeclaration") ? SNodeOperations.getNode("r:de5b7214-45ee-4f6d-89bf-acde59cdb050(jetbrains.mps.lang.structure.refactorings)","1347577327951781764") : (SNodeOperations.isInstanceOf(node,"jetbrains.mps.lang.structure.structure.LinkDeclaration") ? SNodeOperations.getNode("r:de5b7214-45ee-4f6d-89bf-acde59cdb050(jetbrains.mps.lang.structure.refactorings)","1347577327951781638") : null)));
      refactoring.value=(refactoringNode != null ? RefactoringUtil.getRefactoringByClassName(INamedConcept_Behavior.call_getFqName_1213877404258(refactoringNode)) : null);
    }
  }
);
  if (refactoring.value == null) {
    return;
  }
  final RefactoringContext refactoringContext=new RefactoringContext(refactoring.value);
  refactoringContext.setCurrentOperationContext(context);
  refactoringContext.setSelectedNode(node);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      refactoringContext.setSelectedModel(SNodeOperations.getModel(node).getModelDescriptor());
    }
  }
);
  refactoringContext.setSelectedModule(context.getModule());
  refactoringContext.setSelectedProject(context.getProject());
  refactoringContext.setParameter("newName",newName);
  final IRefactoring fRefactoring=refactoring.value;
  new Thread(){
    public void run(){
      refactoringContext.setRefactoring(fRefactoring);
      RefactoringAccess.getInstance().getRefactoringFacade().execute(refactoringContext);
    }
  }
.start();
}
