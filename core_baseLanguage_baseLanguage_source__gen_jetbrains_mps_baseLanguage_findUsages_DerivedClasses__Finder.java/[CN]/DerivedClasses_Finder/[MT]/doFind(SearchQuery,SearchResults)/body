{
  SNode searchedNode=searchQuery.getNodePointer().getNode();
  results.getSearchedNodePointers().add(new SNodePointer(searchedNode));
  List<SNode> derived=new ArrayList<SNode>();
  ListOperations.addElement(derived,(SNode)searchedNode);
  while (!(SequenceOperations.isEmpty(derived))) {
    List<SearchResult> nodeUsagesRes=new ArrayList<SearchResult>();
    try {
      GeneratedFinder _finder=(GeneratedFinder)Class.forName("jetbrains.mps.baseLanguage.findUsages.StraightDerivedClasses_Finder").newInstance();
      SNode _node=SequenceOperations.getFirst(derived);
      IScope _scope;
      _scope=searchQuery.getScope();
      boolean rightConcept=_node.isInstanceOfConcept("jetbrains.mps.baseLanguage.structure.ClassConcept");
      if (!(rightConcept)) {
        DerivedClasses_Finder.LOG.error("Trying to use finder that is not applicable to the concept. Returning empty results." + "[finder: \"" + _finder.getDescription() + "\" ; concept: "+ searchQuery.getNodePointer().getNode().getConceptFqName());
      }
 else {
        boolean isApplicable=_finder.isApplicable(_node);
        if (!(isApplicable)) {
          DerivedClasses_Finder.LOG.error("Trying to use finder that is not applicable to the node. Returning empty results." + "[finder: \"" + _finder.getDescription() + "\" ; node: "+ searchQuery.getNodePointer().getNode().toString());
        }
 else {
          SearchResults results_4=_finder.find(new SearchQuery(_node,_scope));
          for (          SearchResult result : results_4.getSearchResults()) {
            nodeUsagesRes.add(result);
          }
        }
      }
    }
 catch (    Throwable t) {
      DerivedClasses_Finder.LOG.error("Error instantiating finder \"" + "jetbrains.mps.baseLanguage.findUsages.StraightDerivedClasses_Finder" + "\"  Message:"+ t.getMessage());
    }
    for (    SearchResult result : nodeUsagesRes) {
      SNode node=(SNode)result.getNode();
      ListOperations.addElement(derived,node);
    }
    if (SequenceOperations.getFirst(derived) != searchedNode) {
      results.getSearchResults().add(new SearchResult(new SNodePointer(SequenceOperations.getFirst(derived)),"Derived Classes"));
    }
    ListOperations.removeElement(derived,SequenceOperations.getFirst(derived));
  }
}
