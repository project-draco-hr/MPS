{
{
    Map<IModule,List<SModel>> result=new HashMap<IModule,List<SModel>>();
    SModel model=refactoringContext.getSelectedNode().getModel();
    SModel targetModel=SNodeOperations.getModel(((SNode)refactoringContext.getParameter("targetConcept")));
    Language language=Language.getLanguageFor(model.getModelDescriptor());
    Language targetLanguage=Language.getLanguageFor(targetModel.getModelDescriptor());
    if (language != null) {
      List<SModel> aspectList=ListSequence.fromList(((List<SModelDescriptor>)new ArrayList<SModelDescriptor>(language.getAspectModelDescriptors()))).select(new ISelector<SModelDescriptor,SModel>(){
        public SModel select(        SModelDescriptor it){
          return it.getSModel();
        }
      }
).toListSequence();
      result.put(language,aspectList);
    }
    if (targetLanguage != null && targetLanguage != language) {
      List<SModel> aspectList=ListSequence.fromList(((List<SModelDescriptor>)new ArrayList<SModelDescriptor>(targetLanguage.getAspectModelDescriptors()))).select(new ISelector<SModelDescriptor,SModel>(){
        public SModel select(        SModelDescriptor it){
          return it.getSModel();
        }
      }
).toListSequence();
      result.put(targetLanguage,aspectList);
    }
    return result;
  }
}
