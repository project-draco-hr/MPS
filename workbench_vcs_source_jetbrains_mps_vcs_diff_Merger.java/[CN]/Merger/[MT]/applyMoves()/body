{
  Set<MoveNodeChange> moves=new LinkedHashSet<MoveNodeChange>(getChanges(MoveNodeChange.class));
  Map<SNodeId,MoveNodeChange> idsToMoves=new HashMap<SNodeId,MoveNodeChange>();
  for (  MoveNodeChange mnc : moves) {
    idsToMoves.put(mnc.getAffectedNodeId(),mnc);
  }
  while (!moves.isEmpty()) {
    executeMove(moves.iterator().next(),moves,idsToMoves);
  }
}
