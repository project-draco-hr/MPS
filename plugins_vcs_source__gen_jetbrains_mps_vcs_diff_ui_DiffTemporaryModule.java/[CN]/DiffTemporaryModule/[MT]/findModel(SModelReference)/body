{
  if (reference.equals(myModel.getSModelReference())) {
    return myModel.getModelDescriptor();
  }
  ProjectScope ps=myProject.getComponent(ProjectScope.class);
  GlobalScope gs=GlobalScope.getInstance();
  Iterable<IScope> scopes=Arrays.<IScope>asList(ps,gs);
  for (  IScope scope : Sequence.fromIterable(scopes)) {
    SModelDescriptor md=scope.getModelDescriptor(reference);
    if (md != null) {
      return md;
    }
  }
  for (  IScope scope : Sequence.fromIterable(scopes)) {
    SModelDescriptor md=scope.getModelDescriptor(reference.getSModelFqName());
    if (md != null) {
      return md;
    }
  }
  return null;
}
