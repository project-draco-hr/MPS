{
  Set<SNode> nodes=new HashSet<SNode>();
  nodes.add(node);
{
    ICursor<SNode> _zCursor=CursorFactory.createCursor(SNodeOperations.getDescendants(node,null,false));
    try {
      while (_zCursor.moveToNext()) {
        SNode child=_zCursor.getCurrent();
        nodes.add(child);
      }
    }
  finally {
      _zCursor.release();
    }
  }
  Set<SReference> resRefs=FindUsagesManager.getInstance().findUsages(nodes,scope,null);
  for (  SReference reference : resRefs) {
    if (!(nodes.contains(reference.getSourceNode()))) {
      ListOperations.addElement(_results,reference.getSourceNode());
    }
  }
}
