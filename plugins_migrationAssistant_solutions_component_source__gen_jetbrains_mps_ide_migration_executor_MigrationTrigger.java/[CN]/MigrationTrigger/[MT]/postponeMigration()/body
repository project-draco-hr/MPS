{
  if (myMigrationQueued) {
    return;
  }
  final com.intellij.openapi.project.Project ideaProject=ProjectHelper.toIdeaProject(myProject);
  StartupManager.getInstance(ideaProject).runWhenProjectIsInitialized(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          String[] choises=new String[]{"Clean sources and migrate","Migrate","Postpone"};
          int result=Messages.showChooseDialog(ideaProject,"Some of the modules in project require migration.\n" + "It is advised to clean generated files before you start the migration.\n" + "Would you like to reload project and start the migration immediately?","Migration required",null,choises,choises[0]);
          if (result == 2) {
            return;
          }
          if (result == 0) {
            removeGenSources();
          }
          removeClassesGen();
          FSRecords.invalidateCaches();
          ProjectManagerEx.getInstance().reloadProject(ideaProject);
        }
      }
);
    }
  }
);
  myMigrationQueued=true;
}
