{
  if (((jetbrains.mps.smodel.SModelInternal)model).canFireEvent() && !ModelAccess.instance().canWrite()) {
    throw new IllegalModelChangeError("You can change model only inside write actions");
  }
}
