{
  if (((jetbrains.mps.smodel.SModelInternal)model).canFireEvent() && !UndoHelper.getInstance().isInsideUndoableCommand()) {
    throw new IllegalModelChangeError("node un-registration is only allowed inside undoable command or in 'loading' model" + SNodeUtil.getDebugText(node));
  }
}
