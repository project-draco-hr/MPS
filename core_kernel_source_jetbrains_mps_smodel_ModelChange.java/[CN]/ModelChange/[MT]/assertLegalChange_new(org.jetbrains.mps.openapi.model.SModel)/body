{
  SRepository repo=model.getRepository();
  if (repo != null && model.isLoaded() && !repo.getModelAccess().canWrite()) {
    throw new IllegalModelChangeError("You can change model only inside write actions");
  }
}
