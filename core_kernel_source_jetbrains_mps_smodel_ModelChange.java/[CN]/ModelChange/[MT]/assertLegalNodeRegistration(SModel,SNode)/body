{
  if (!model.isLoading() && !UndoHelper.isInsideUndoableCommand()) {
    throw new IllegalModelChangeError("node registration is only allowed inside undoable command  or in 'loading' model " + node.getDebugText());
  }
}
