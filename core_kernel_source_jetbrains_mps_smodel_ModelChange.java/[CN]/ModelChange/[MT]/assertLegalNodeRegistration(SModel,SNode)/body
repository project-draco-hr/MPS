{
  if (!(model.isLoading())) {
    if (!CommandProcessor.instance().isInsideUndoableCommand()) {
      throw new IllegalModelChangeError("node registration is only allowed inside undoable command  or in 'loading' model " + node.getDebugText());
    }
  }
}
