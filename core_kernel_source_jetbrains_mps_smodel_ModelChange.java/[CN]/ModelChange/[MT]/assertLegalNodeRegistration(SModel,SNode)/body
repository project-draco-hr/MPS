{
  if (model.canFireEvent() && !UndoHelper.getInstance().isInsideUndoableCommand()) {
    throw new IllegalModelChangeError("node registration is only allowed inside undoable command  or in 'loading' model " + org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(node));
  }
}
