{
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      SModelRepository.getInstance().saveAll();
    }
  }
);
  boolean isOneTarget=!myRefactoring.getRefactoringTarget().allowMultipleTargets();
  final RefactoringContext context=new RefactoringContext(myRefactoring);
  context.setCurrentOperationContext(e.getData(MPSDataKeys.OPERATION_CONTEXT));
  context.setSelectedNode(e.getData(MPSDataKeys.NODE));
  context.setSelectedNodes(getNodes(e,isOneTarget));
  context.setSelectedModel(e.getData(MPSDataKeys.CONTEXT_MODEL));
  context.setSelectedModels(getModels(e,isOneTarget));
  context.setSelectedModule(e.getData(MPSDataKeys.MODULE));
  context.setSelectedModules(getModules(e,isOneTarget));
  context.setSelectedProject(e.getData(MPSDataKeys.PROJECT));
  context.setCurrentScope(e.getData(MPSDataKeys.SCOPE));
  new Thread(){
    public void run(){
      new RefactoringFacade().execute(myRefactoring,context);
    }
  }
.start();
}
