{
  for (  SNode templateBasedConcept : SModelOperations.getRoots(_context.getModel(),"jetbrains.mpslite.structure.TemplateBasedConcept")) {
    SLinkOperations.setTarget(templateBasedConcept,"lineList",SNodeOperations.copyNode(SLinkOperations.getTarget(SLinkOperations.getTarget(templateBasedConcept,"template",false),"lineList",true)),true);
    for (    SNode line : SLinkOperations.getTargets(SLinkOperations.getTarget(templateBasedConcept,"lineList",true),"line",true)) {
      for (      SNode linePart : SLinkOperations.getTargets(line,"linePart",true)) {
        if (SNodeOperations.isInstanceOf(linePart,"jetbrains.mpslite.structure.ChildPlaceholderReference")) {
          SNode concreteChildPart=SConceptOperations.createNewNode("jetbrains.mpslite.structure.ConcreteChildPart",null);
          SNode placeholderReference=linePart;
          SPropertyOperations.set(concreteChildPart,"multiple","" + SPropertyOperations.getBoolean(placeholderReference,"multiple"));
          SPropertyOperations.set(concreteChildPart,"vertical","" + SPropertyOperations.getBoolean(placeholderReference,"vertical"));
          SPropertyOperations.set(concreteChildPart,"separator",SPropertyOperations.getString(placeholderReference,"separator"));
          for (          SNode placeholderAssignment : SLinkOperations.getTargets(templateBasedConcept,"placeholderAssignment",true)) {
            if (SLinkOperations.getTarget(placeholderAssignment,"placeholder",false) == SLinkOperations.getTarget(placeholderReference,"placeholder",false)) {
              SNode part=SLinkOperations.getTarget(placeholderAssignment,"concretization",true);
              SLinkOperations.setTarget(concreteChildPart,"conceptReference",SNodeOperations.copyNode(SLinkOperations.getTarget(part,"conceptReference",true)),true);
              SPropertyOperations.set(concreteChildPart,"name",SPropertyOperations.getString(part,"name"));
              break;
            }
          }
          SNodeOperations.replaceWithAnother(placeholderReference,concreteChildPart);
        }
        if (SNodeOperations.isInstanceOf(linePart,"jetbrains.mpslite.structure.ReferencePlaceholderReference")) {
          SNode concreteReferencePart=SConceptOperations.createNewNode("jetbrains.mpslite.structure.ConcreteReferencePart",null);
          SNode placeholderReference=linePart;
          SPropertyOperations.set(concreteReferencePart,"optional","" + SPropertyOperations.getBoolean(placeholderReference,"optional"));
          for (          SNode placeholderAssignment : SLinkOperations.getTargets(templateBasedConcept,"placeholderAssignment",true)) {
            if (SLinkOperations.getTarget(placeholderAssignment,"placeholder",false) == SLinkOperations.getTarget(placeholderReference,"placeholder",false)) {
              SNode part=SLinkOperations.getTarget(placeholderAssignment,"concretization",true);
              SLinkOperations.setTarget(concreteReferencePart,"conceptReference",SNodeOperations.copyNode(SLinkOperations.getTarget(part,"conceptReference",true)),true);
              SPropertyOperations.set(concreteReferencePart,"name",SPropertyOperations.getString(part,"name"));
              break;
            }
          }
          SNodeOperations.replaceWithAnother(placeholderReference,concreteReferencePart);
        }
        if (SNodeOperations.isInstanceOf(linePart,"jetbrains.mpslite.structure.PropertyPlaceholderReference")) {
          SNode concretePropertyPart=SConceptOperations.createNewNode("jetbrains.mpslite.structure.ConcretePropertyPart",null);
          SNode placeholderReference=linePart;
          for (          SNode placeholderAssignment : SLinkOperations.getTargets(templateBasedConcept,"placeholderAssignment",true)) {
            if (SLinkOperations.getTarget(placeholderAssignment,"placeholder",false) == SLinkOperations.getTarget(placeholderReference,"placeholder",false)) {
              SNode part=SLinkOperations.getTarget(placeholderAssignment,"concretization",true);
              SPropertyOperations.set(concretePropertyPart,"name",SPropertyOperations.getString(part,"name"));
              SPropertyOperations.set(concretePropertyPart,"propertyType",SPropertyOperations.getString_def(part,"propertyType","string"));
              break;
            }
          }
          SNodeOperations.replaceWithAnother(placeholderReference,concretePropertyPart);
        }
        if (SNodeOperations.isInstanceOf(linePart,"jetbrains.mpslite.structure.ConstantPlaceholderReference")) {
          SNode constantLinePart=SConceptOperations.createNewNode("jetbrains.mpslite.structure.ConstantLinePart",null);
          SNode placeholderReference=linePart;
          for (          SNode placeholderAssignment : SLinkOperations.getTargets(templateBasedConcept,"placeholderAssignment",true)) {
            if (SLinkOperations.getTarget(placeholderAssignment,"placeholder",false) == SLinkOperations.getTarget(placeholderReference,"placeholder",false)) {
              SNode part=SLinkOperations.getTarget(placeholderAssignment,"concretization",true);
              SPropertyOperations.set(constantLinePart,"text",SPropertyOperations.getString(part,"text"));
              break;
            }
          }
          SNodeOperations.replaceWithAnother(placeholderReference,constantLinePart);
        }
      }
    }
  }
}
