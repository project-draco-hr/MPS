{
  return CommandProcessor.instance().executeLightweightCommand(new Calculable<IEditor>(){
    public IEditor calculate(){
      SNode containingRoot=node.getContainingRoot();
      EditorsPane editorsPane=context.getProject().getComponentSafe(EditorsPane.class);
      SNode baseNode=editorsPane.getBaseNode(context,containingRoot);
      if (baseNode == null) {
        baseNode=containingRoot;
      }
      MPSNodeVirtualFile file=MPSNodesVirtualFileSystem.getInstance().getFileFor(baseNode,context);
      FileEditorManager editorManager=FileEditorManager.getInstance(myProject);
      FileEditor[] result=editorManager.openFile(file,true);
      MPSFileNodeEditor fileNodeEditor=(MPSFileNodeEditor)result[0];
      IEditor nodeEditor=fileNodeEditor.getNodeEditor();
      if (nodeEditor instanceof TabbedEditor) {
        ((TabbedEditor)nodeEditor).selectLinkedEditor(containingRoot);
      }
      nodeEditor.selectNode(node);
      return nodeEditor;
    }
  }
);
}
