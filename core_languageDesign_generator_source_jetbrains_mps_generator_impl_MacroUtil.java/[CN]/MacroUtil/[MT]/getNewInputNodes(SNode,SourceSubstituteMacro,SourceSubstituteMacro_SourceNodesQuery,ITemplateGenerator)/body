{
  if (query != null) {
    List<SNode> list=QueryExecutor.evaluateSourceNodesQuery(currentInputNode,null,macro.getNode(),query,generator);
    if (list != null) {
      return list;
    }
    return new LinkedList<SNode>();
  }
  throw new GenerationFailureException("couldn't evaluate macro query",currentInputNode,BaseAdapter.fromAdapter(macro),null);
}
