{
  Map<Object,Integer> moi=MapSequence.fromMap(new WeakHashMap<Object,Integer>());
  Object o=new Object();
  MapSequence.fromMap(moi).put(o,1);
  Assert.assertSame(1,MapSequence.fromMap(moi).count());
  Assert.assertNotNull(o);
  o=null;
  System.gc();
  System.gc();
  try {
    Thread.sleep(1000);
  }
 catch (  InterruptedException e) {
  }
  System.gc();
  Assert.assertSame(0,MapSequence.fromMap(moi).count());
}
