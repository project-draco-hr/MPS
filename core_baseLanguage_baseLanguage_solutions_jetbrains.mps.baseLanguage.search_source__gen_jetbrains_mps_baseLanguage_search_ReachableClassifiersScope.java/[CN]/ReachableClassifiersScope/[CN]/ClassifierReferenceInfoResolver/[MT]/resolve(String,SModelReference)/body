{
  if (targetModelReference.getSModelId() != null) {
    SModelDescriptor targetModel=this.myScope.getModelDescriptor(targetModelReference);
    if (targetModel == null) {
      return null;
    }
    return ListSequence.fromList(ClassifiersCache.getInstance(targetModel).getClassifiersByRefName(referenceInfo)).first();
  }
  Collection<IModule> visibleModules=IterableUtil.asCollection(myScope.getVisibleModules());
  for (  SModelDescriptor model : ListSequence.fromList(SModelRepository.getInstance().getModelDescriptors())) {
    if (visibleModules.contains(model.getModule())) {
      if (model.getSModelReference().getSModelFqName().equals(targetModelReference.getSModelFqName())) {
        List<SNode> classifiers=ClassifiersCache.getInstance(model).getClassifiersByRefName(referenceInfo);
        if (ListSequence.fromList(classifiers).isNotEmpty()) {
          return ListSequence.fromList(classifiers).first();
        }
      }
    }
  }
  return null;
}
