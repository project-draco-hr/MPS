{
  if (contextNode == null) {
    myGenerator.showErrorMessage(applicableNode,rule.getRuleNode().getNode(),"weaving rule: cannot find context node");
    return false;
  }
  SNode contextRoot=contextNode.getContainingRoot();
  boolean wasError=false;
  if (contextRoot != null) {
    SNode inputRoot=applicableNode.getContainingRoot();
    SNode originalContextRoot=myGenerator.getOriginalRootByGenerated(contextRoot);
    if (originalContextRoot == null) {
      myGenerator.showErrorIfStrict(rule.getRuleNode().getNode(),"bad context for weaving rule: " + contextRoot + " is generated by 'create root' rule");
      wasError=true;
    }
 else {
      if (originalContextRoot != inputRoot && inputRoot != null) {
        myGenerator.showErrorIfStrict(rule.getRuleNode().getNode(),"bad context for weaving rule: " + contextRoot.toString() + " is generated from "+ originalContextRoot.toString()+ ", while input node is from "+ inputRoot.toString());
        wasError=true;
      }
    }
  }
 else {
    myGenerator.showErrorIfStrict(rule.getRuleNode().getNode(),"bad context for weaving rule: no root for context " + contextNode);
    wasError=true;
  }
  return !(wasError && myGenerator.isStrict());
}
