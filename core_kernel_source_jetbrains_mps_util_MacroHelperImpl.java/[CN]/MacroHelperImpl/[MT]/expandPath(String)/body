{
  if (path == null) {
    return null;
  }
  if (path.indexOf('\\') != -1) {
    LOG.warn("Using backslashes in macros: " + path);
    path=path.replace('\\',MacrosFactory.SEPARATOR_CHAR);
  }
  if (anchorFile == null || !anchorFile.isInArchive()) {
    path=path.replace(MacrosFactory.SEPARATOR_CHAR,File.separatorChar);
  }
  return macros.expand(path,anchorFile);
}
