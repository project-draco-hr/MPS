{
  List<SNode> rootsToCopy=new ArrayList<SNode>(myInputModel.getRoots());
  for (  SNode rootNode : myRootsNotToCopy) {
    rootsToCopy.remove(rootNode);
  }
  Iterator<SNode> iterator=rootsToCopy.iterator();
  while (iterator.hasNext()) {
    SNode rootNode=iterator.next();
    if (ruleManager.isRootToDrop(rootNode)) {
      iterator.remove();
    }
  }
  List<SNode> copiedRoots=new ArrayList<SNode>();
  for (  SNode rootToCopy : rootsToCopy) {
    SNode newroot=CloneUtil.clone(rootToCopy,myOutputModel,getGeneratorSessionContext().getOriginalInputModel() == myInputModel);
    myNewToOldRoot.put(newroot,rootToCopy);
    copiedRoots.add(newroot);
  }
  return copiedRoots;
}
