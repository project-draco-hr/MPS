{
  MPSProject mpsProject=project.getComponent(MPSProject.class);
  Set<IModule> modules=new HashSet<IModule>();
  for (  Solution s : mpsProject.getProjectModules(Solution.class)) {
    modules.addAll(IterableUtil.asCollection(s.getScope().getVisibleLanguages()));
    modules.addAll(IterableUtil.asCollection(s.getScope().getVisibleDevkits()));
  }
  for (  Language l : mpsProject.getProjectModules(Language.class)) {
    modules.add(l);
  }
  for (  DevKit dk : mpsProject.getProjectModules(DevKit.class)) {
    modules.add(dk);
  }
  modules.addAll(MPSModuleRepository.getInstance().getAllLanguages());
  modules.addAll(MPSModuleRepository.getInstance().getAllDevkits());
  return modules;
}
