{
  if (tests == null) {
    throw new ExecutionException("Tests to run are null.");
  }
  Tuples._2<List<ITestNodeWrapper>,TestRunParameters> testsToRun=Junit_Command.getTestsToRunWithParameters(tests);
  if (ListSequence.<ITestNodeWrapper>fromList(testsToRun._0()).isEmpty()) {
    throw new ExecutionException("Could not find tests to run.");
  }
  return new Java_Command().setVirtualMachineParameter(IterableUtils.join(ListSequence.<String>fromList(testsToRun._1().getVmParameters())," ") + ((StringUtils.isNotEmpty(myVirtualMachineParameter) ? " " + myVirtualMachineParameter : ""))).setDebuggerSettings(myDebuggerSettings).setClassPath(ListSequence.<String>fromList(testsToRun._1().getClassPath()).union(ListSequence.<String>fromList(Junit_Command.getClasspath(testsToRun._0()))).toListSequence()).setJrePath(myJrePath).setWorkingDirectory(myWorkingDirectory).setProgramParameter(Junit_Command.getProgramParameters(testsToRun._0())).createProcess(testsToRun._1().getTestRunner());
}
