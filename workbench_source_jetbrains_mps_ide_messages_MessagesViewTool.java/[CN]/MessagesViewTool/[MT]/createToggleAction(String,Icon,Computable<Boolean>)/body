{
  return new ToggleAction("",tooltip,icon){
    private Boolean myEnabled=false;
    private boolean mySelected=true;
    public boolean isSelected(    AnActionEvent e){
      return mySelected && myEnabled;
    }
    public void setSelected(    AnActionEvent e,    boolean state){
      mySelected=state;
      rebuildModel();
    }
    public void update(    AnActionEvent e){
      super.update(e);
      if (isEnabled != null) {
        myEnabled=isEnabled.compute();
        e.getPresentation().setEnabled(myEnabled);
      }
    }
  }
;
}
