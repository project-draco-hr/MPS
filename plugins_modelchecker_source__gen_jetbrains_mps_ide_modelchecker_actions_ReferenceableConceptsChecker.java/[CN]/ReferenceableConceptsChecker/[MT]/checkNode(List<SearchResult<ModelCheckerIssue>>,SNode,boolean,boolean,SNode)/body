{
  SNode conceptDecl=SModelUtil.findConceptDeclaration(node.getConcept().getQualifiedName(),GlobalScope.getInstance());
  if (conceptDecl == null) {
    addIssue(results,node,"No concept found for " + node.toString(),ModelChecker.SEVERITY_ERROR,"no concept",null);
  }
  if (SNodeOperations.isInstanceOf(conceptDecl,"jetbrains.mps.lang.structure.structure.ConceptDeclaration")) {
    SNode decl=SNodeOperations.cast(conceptDecl,"jetbrains.mps.lang.structure.structure.ConceptDeclaration");
    if (isAncestor) {
      if (SPropertyOperations.hasValue(decl,"childrenRefs","forbidden",null)) {
        addIssue(results,anchor,"Reference to a node under `enforce forbidden' references node: ancestor concept=" + SPropertyOperations.getString(decl,"name"),ModelChecker.SEVERITY_ERROR,"reference to a non-referenceable node",null);
      }
 else       if (SPropertyOperations.hasValue(decl,"childrenRefs","local",null) && !(sameRoot)) {
        addIssue(results,anchor,"Cross-root reference to a locally referenceable concept found: ancestor concept=" + SPropertyOperations.getString(decl,"name"),ModelChecker.SEVERITY_ERROR,"reference to a locally referenceable node",null);
      }
    }
 else {
      if (SPropertyOperations.hasValue(decl,"incomingRefs","forbidden",null)) {
        addIssue(results,anchor,"Reference to a non-referenceable node found: " + SPropertyOperations.getString(decl,"name"),ModelChecker.SEVERITY_ERROR,"reference to a non-referenceable node",null);
      }
 else       if (SPropertyOperations.hasValue(decl,"incomingRefs","local",null) && !(sameRoot)) {
        addIssue(results,anchor,"Cross-root reference to a locally referenceable node found: " + SPropertyOperations.getString(decl,"name"),ModelChecker.SEVERITY_ERROR,"reference to a locally referenceable node",null);
      }
    }
  }
 else {
    addIssue(results,node,"Interface instance found! " + node.toString(),ModelChecker.SEVERITY_ERROR,"no concept",null);
  }
}
