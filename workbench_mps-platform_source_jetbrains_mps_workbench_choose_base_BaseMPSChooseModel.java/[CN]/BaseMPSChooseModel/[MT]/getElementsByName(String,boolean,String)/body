{
  return ModelAccess.instance().runReadAction(new Computable<NavigationItem[]>(){
    @Override public NavigationItem[] compute(){
      DumbService ds=DumbService.getInstance(myProject);
      if (ds.isDumb()) {
        ds.showDumbModeNotification("Please wait until indices are built");
        return new NavigationItem[0];
      }
      Map<String,List<NavigationItem>> namesMap=checkBoxState ? getGlobalNamesCache() : getProjectNamesCache();
      List<NavigationItem> navigationItems=namesMap.get(name);
      if (navigationItems != null)       return navigationItems.toArray(new NavigationItem[navigationItems.size()]);
      return new NavigationItem[0];
    }
  }
);
}
