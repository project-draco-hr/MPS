{
  if (file.isReadOnly()) {
    if (log.isErrorEnabled()) {
      log.error("Can't save " + file.getPath());
    }
    return;
  }
  final Macros macros=MacrosFactory.libraryDescriptor();
  Element solElem=new _FunctionTypes._return_P0_E0<Element>(){
    public Element invoke(){
      final Element result_u6e1uy_a0a0d0b=new Element("library");
      if (descriptor.getNamespace() != null) {
        final String result_u6e1uy_a0a0a0a0d0b=descriptor.getNamespace();
        result_u6e1uy_a0a0d0b.setAttribute("name","" + result_u6e1uy_a0a0a0a0d0b);
      }
      if (descriptor.getUUID() != null) {
        final String result_u6e1uy_a0a1a0a0d0b=descriptor.getUUID();
        result_u6e1uy_a0a0d0b.setAttribute("uuid","" + result_u6e1uy_a0a1a0a0d0b);
      }
      final Element result_u6e1uy_a3a0a0d0b=new Element("models");
      ModuleDescriptorPersistence.saveModelRoots(result_u6e1uy_a3a0a0d0b,descriptor.getModelRoots(),file,macros);
      result_u6e1uy_a0a0d0b.addContent(result_u6e1uy_a3a0a0d0b);
      ModuleDescriptorPersistence.saveDependencies(result_u6e1uy_a0a0d0b,descriptor);
      return result_u6e1uy_a0a0d0b;
    }
  }
.invoke();
  try {
    OutputStream os=file.openOutputStream();
    JDOMUtil.writeDocument(new Document(solElem),os);
  }
 catch (  Exception e) {
    if (log.isErrorEnabled()) {
      log.error("",e);
    }
  }
  ModuleDescriptorPersistence.setTimestamp(descriptor,file);
}
