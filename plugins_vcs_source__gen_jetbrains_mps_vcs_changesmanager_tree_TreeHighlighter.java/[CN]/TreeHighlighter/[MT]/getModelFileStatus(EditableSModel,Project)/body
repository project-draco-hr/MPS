{
  DataSource ds=ed.getSource();
  IFile file=null;
  if (ds instanceof FileDataSource) {
    file=((FileDataSource)ds).getFile();
  }
 else   if (ds instanceof FilePerRootDataSource) {
    file=((FilePerRootDataSource)ds).getFile(FilePerRootDataSource.HEADER_FILE);
  }
  VirtualFile vf=VirtualFileUtils.getVirtualFile(file);
  return (vf == null ? null : FileStatusManager.getInstance(project).getStatus(vf));
}
