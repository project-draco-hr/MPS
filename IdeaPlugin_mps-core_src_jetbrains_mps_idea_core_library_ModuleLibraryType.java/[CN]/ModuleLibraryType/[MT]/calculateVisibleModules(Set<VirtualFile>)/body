{
  final List<ModuleReference> availableSolutions=new ArrayList<ModuleReference>();
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      for (      IModule module : ModuleRepositoryFacade.getInstance().getAllModules(IModule.class)) {
        if (module instanceof SolutionIdea || module.getDescriptorFile() == null) {
          continue;
        }
        if (excluded.contains(VirtualFileUtils.getVirtualFile(module.getDescriptorFile()))) {
          continue;
        }
        availableSolutions.add(module.getModuleReference());
      }
    }
  }
);
  return availableSolutions;
}
