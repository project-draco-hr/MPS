{
  final List<ModuleReference> availableSolutions=new ArrayList<ModuleReference>();
  final List<ModuleReference> availableLanguages=new ArrayList<ModuleReference>();
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      for (      IModule module : ModuleRepositoryFacade.getInstance().getAllModules(IModule.class)) {
        if (module instanceof SolutionIdea || module.getDescriptorFile() == null) {
          continue;
        }
        if (excluded.contains(VirtualFileUtils.getVirtualFile(module.getDescriptorFile()))) {
          continue;
        }
        if (module instanceof Solution) {
          availableSolutions.add(module.getModuleReference());
        }
 else {
          availableLanguages.add(module.getModuleReference());
        }
      }
    }
  }
);
  List<ModuleReference> result=new ArrayList<ModuleReference>();
  result.addAll(availableSolutions);
  result.addAll(availableLanguages);
  return result;
}
