{
  final Set<OrderRoot> roots=new LinkedHashSet<OrderRoot>();
  for (  ModuleReference module : chosenElements) {
    Solution solution=(Solution)ModuleRepositoryFacade.getInstance().getModule(module);
    roots.add(new OrderRoot(VirtualFileUtils.getVirtualFile(solution.getDescriptorFile()),ModuleXmlRootDetector.MPS_MODULE_XML,false));
    for (    VirtualFile virtualFile : getModuleJars(solution)) {
      roots.add(new OrderRoot(virtualFile,OrderRootType.CLASSES,false));
    }
  }
  return roots;
}
