{
  Set<ReloadableModule> lazyLoaded=new LinkedHashSet<ReloadableModule>();
  for (  ReloadableModule module : toLoadLazy) {
    SModuleReference mRef=module.getModuleReference();
    ClassLoadingProgress classLoadingProgress=myMPSLoadableModules.get(mRef);
    if (classLoadingProgress != null) {
      LOG.error("Illegal state: module is already loaded " + module,new Throwable());
    }
 else {
      myMPSLoadableModules.put(mRef,ClassLoadingProgress.LAZY_LOADED);
      lazyLoaded.add(module);
    }
  }
  return lazyLoaded;
}
