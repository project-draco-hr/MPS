{
  JMenu result=new JMenu("Generate");
  if (model != null) {
    result.setText("Generate From Model");
  }
  result.setIcon(Icons.GENERATORS_ICON);
  List<GeneratorConfiguration> configurations=myProject.getRootManager().getGeneratorConfigurations();
  sortConfigurations(configurations);
  if (configurations.isEmpty()) {
    result.add(new AbstractActionWithEmptyIcon("<EMPTY>"){
      public void actionPerformed(      ActionEvent e){
      }
    }
);
  }
  for (  final GeneratorConfiguration conf : configurations) {
    result.add(new AbstractActionWithEmptyIcon(conf.getName()){
      public void actionPerformed(      ActionEvent e){
        if (model == null) {
          myProject.getComponent(GeneratorManager.class).generate(conf,false);
        }
 else {
          Set<SModelDescriptor> set=new HashSet<SModelDescriptor>();
          set.add(model);
          myProject.getComponent(GeneratorManager.class).generate(conf,set,false);
        }
      }
    }
);
  }
  return result;
}
