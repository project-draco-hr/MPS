{
  IModule module=context.getModule();
  if (module == null || !myProject.isProjectModule(module)) {
    selectNode(node);
    return;
  }
  MPSTreeNode moduleTreeNode=findProjectModuleTreeNode(module);
  if (moduleTreeNode == null) {
    LOG.error("Couldn't find tree node for module: " + module);
    selectNode(node);
    return;
  }
  SModelDescriptor modelDescriptor=node.getModel().getModelDescriptor();
  SModelTreeNode modelTreeNode=findSModelTreeNode(moduleTreeNode,modelDescriptor);
  if (modelTreeNode == null) {
    selectNode(node);
    return;
  }
  MPSTreeNodeEx treeNodeToSelect=findTreeNode(modelTreeNode,node);
  if (treeNodeToSelect != null) {
    TreePath treePath=new TreePath(treeNodeToSelect.getPath());
    myTree.setSelectionPath(treePath);
    myTree.scrollPathToVisible(treePath);
  }
 else {
    LOG.warning("Couldn't select node " + node.getDebugText() + " : tree node not found.");
  }
}
