{
  if (semanticModel != null) {
    semanticModel.addSModelListener(new SModelListener(){
      private void update(){
        validate();
        repaint();
      }
      public void modelChanged(      SModel semanticModel){
        update();
      }
      public void modelChangedDramatically(      SModel semanticModel){
        rebuildTree(semanticModel);
        update();
      }
      public void nodeAdded(      SModel semanticModel,      SemanticNode child){
        rebuildTree(semanticModel);
        update();
      }
      public void nodeDeleted(      SModel model,      SemanticNode container){
        if (container != null) {
          selectNode(container);
        }
 else {
          selectModel(myProject.getModelDescriptor(model.getFQName()));
        }
        rebuildTree(model);
        update();
      }
    }
);
  }
}
