{
  if (MPSFileTypesManager.instance().isModelFile(f)) {
    HistoryDialog frame=new FileHistoryDialog(p,gw,f){
      private JComponent myComponent;
      @Override protected Pair<JComponent,Dimension> createDiffPanel(      JPanel root,      ExcludingTraversalPolicy traversalPolicy){
        myComponent=new JPanel(new BorderLayout());
        myComponent.add(new JLabel("Loading...",JLabel.CENTER),BorderLayout.CENTER);
        return new Pair<JComponent,Dimension>(myComponent,null);
      }
      @Override protected Runnable doUpdateDiffs(      FileHistoryDialogModel model){
        final FileDifferenceModel diffModel=model.getDifferenceModel();
        return new Runnable(){
          public void run(){
            ModelDiffToolOld diffTool=new ModelDiffToolOld();
            final ContentDiffRequest difference=createDifference(diffModel);
            final DiffRequest request=new DiffRequest(myProject){
              @NotNull @Override public DiffContent[] getContents(){
                final DiffContent[] contents=new DiffContent[difference.getContents().size()];
                return difference.getContents().toArray(contents);
              }
              @Override public String[] getContentTitles(){
                final String[] strings=new String[difference.getContentTitles().size()];
                return difference.getContentTitles().toArray(strings);
              }
              @Override public String getWindowTitle(){
                return difference.getTitle();
              }
            }
;
            JComponent diffView=diffTool.getDiffView(request);
            myComponent.removeAll();
            myComponent.add(diffView,BorderLayout.CENTER);
          }
        }
;
      }
      @Override public void dispose(){
      }
    }
;
    frame.show();
  }
 else {
    super.showDialog(p,gw,f,e);
  }
}
