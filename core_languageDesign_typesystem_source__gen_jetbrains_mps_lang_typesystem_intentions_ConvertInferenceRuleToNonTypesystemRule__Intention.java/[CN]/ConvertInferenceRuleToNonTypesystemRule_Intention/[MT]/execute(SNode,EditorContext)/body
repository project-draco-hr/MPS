{
  SNode nonTypesystemRule=SNodeFactoryOperations.createNewRootNode(SNodeOperations.getModel(node),"jetbrains.mps.lang.typesystem.structure.NonTypesystemRule",null);
  SPropertyOperations.set(nonTypesystemRule,"overrides","" + (SPropertyOperations.getBoolean(node,"overrides")));
  SPropertyOperations.set(nonTypesystemRule,"name",SPropertyOperations.getString(node,"name"));
  SLinkOperations.setTarget(nonTypesystemRule,"body",SNodeOperations.copyNode(SLinkOperations.getTarget(node,"body",true)),true);
  SLinkOperations.setTarget(nonTypesystemRule,"applicableNode",SNodeOperations.copyNode(SLinkOperations.getTarget(node,"applicableNode",true)),true);
  for (  SNode applicableNodeReference : SNodeOperations.getDescendants(SLinkOperations.getTarget(nonTypesystemRule,"body",true),"jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference",false,new String[]{})) {
    if (SLinkOperations.getTarget(applicableNodeReference,"applicableNode",false) == SLinkOperations.getTarget(node,"applicableNode",true)) {
      SLinkOperations.setTarget(applicableNodeReference,"applicableNode",SLinkOperations.getTarget(nonTypesystemRule,"applicableNode",true),false);
    }
  }
  SNodeOperations.deleteNode(node);
  IOperationContext operationContext=editorContext.getOperationContext();
  operationContext.getComponent(MPSEditorOpener.class).openNode(nonTypesystemRule);
}
