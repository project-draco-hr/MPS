{
  List<Dart> darts=face.getDarts();
  Direction2D prevDir=MapSequence.<Dart,Direction2D>fromMap(myDartDirections).get(ListSequence.<Dart>fromList(darts).last());
  Node node=null;
  Direction2D dir=null;
  Dart dartToSplit=null;
  for (  Dart dart : ListSequence.<Dart>fromList(darts)) {
    node=dart.getSource();
    dir=MapSequence.<Dart,Direction2D>fromMap(myDartDirections).get(dart);
    if (Sequence.<Node>fromIterable(specialNodes).contains(node) && prevDir == dir) {
      Direction2D opposite=MapSequence.<Dart,Direction2D>fromMap(myDartDirections).get(dart).opposite();
      List<Dart> oppositeDarts=getDirectionDarts(face,opposite);
      if (ListSequence.<Dart>fromList(oppositeDarts).count() == 1) {
        dartToSplit=ListSequence.<Dart>fromList(oppositeDarts).first();
        break;
      }
    }
    prevDir=dir;
  }
  if (dartToSplit != null) {
    Edge edgeToSplit=dartToSplit.getEdge();
    for (    Dart dart : ListSequence.<Dart>fromList(myEmbeddedGraph.getDarts(edgeToSplit))) {
      MapSequence.fromMap(myDartDirections).removeKey(dart);
    }
    List<Edge> newEdges=ListSequence.<Edge>fromList(new ArrayList<Edge>());
    Node newNode=myEmbeddedGraph.splitEdge(edgeToSplit,newEdges);
    for (    Dart dart : ListSequence.<Edge>fromList(newEdges).<Dart>translate(new ITranslator2<Edge,Dart>(){
      public Iterable<Dart> translate(      Edge it){
        return myEmbeddedGraph.getDarts(it);
      }
    }
)) {
      if (myEmbeddedGraph.getFace(dart) == face) {
        MapSequence.<Dart,Direction2D>fromMap(myDartDirections).put(dart,dir.opposite());
      }
 else {
        MapSequence.<Dart,Direction2D>fromMap(myDartDirections).put(dart,dir);
      }
    }
    Edge splittingEdge=myGraph.connect(node,newNode);
    List<Face> newFaces=myEmbeddedGraph.splitFace(face,ListSequence.<Edge>fromListAndArray(new ArrayList<Edge>(),splittingEdge),node,newNode);
    for (    Dart dart : ListSequence.<Dart>fromList(myEmbeddedGraph.getDarts(splittingEdge))) {
      if (dart.getSource() == node) {
        MapSequence.<Dart,Direction2D>fromMap(myDartDirections).put(dart,dir.turnClockwise(1));
      }
 else {
        MapSequence.<Dart,Direction2D>fromMap(myDartDirections).put(dart,dir.turnClockwise(1).opposite());
      }
    }
    for (    Face newFace : ListSequence.<Face>fromList(newFaces)) {
      connectSpecialNodesInFace(newFace,specialNodes);
    }
  }
}
