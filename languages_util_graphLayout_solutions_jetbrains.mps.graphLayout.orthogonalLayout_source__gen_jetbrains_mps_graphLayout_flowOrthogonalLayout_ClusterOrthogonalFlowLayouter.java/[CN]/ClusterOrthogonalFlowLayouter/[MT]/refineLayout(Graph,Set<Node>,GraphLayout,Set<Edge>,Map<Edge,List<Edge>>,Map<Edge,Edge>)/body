{
  ClusteredGraphLayout refinedLayout=((ClusteredGraphLayout)super.refineLayout(graph,initialNodes,layout,initialEdges,history,labeledEdges));
  for (  Node cluster : SetSequence.fromSet(MapSequence.fromMap(myClusterBorderMap).keySet())) {
    List<Edge> border=MapSequence.fromMap(myClusterBorderMap).get(cluster);
    List<Point> borderLayout=ListSequence.fromList(new LinkedList<Point>());
    for (    Edge borderEdge : ListSequence.fromList(border)) {
      List<Edge> borderEdgeHistory=MapSequence.fromMap(history).get(borderEdge);
      for (      Edge historyEdge : ListSequence.fromList(borderEdgeHistory)) {
        List<Point> copyEdgeLayout=layout.getEdgeLayout(historyEdge);
        ListSequence.fromList(borderLayout).addSequence(ListSequence.fromList(copyEdgeLayout));
      }
    }
    refinedLayout.setClusterLayout(cluster,borderLayout);
  }
  return refinedLayout;
}
