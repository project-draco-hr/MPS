{
  myState.reloadFinished=false;
  final MigrationAssistantWizard wizard=new MigrationAssistantWizard(myProject,myMigrationManager);
  wizard.showAndGetOk().doWhenDone(new Consumer<Boolean>(){
    @Override public void consume(    Boolean finished){
      if (!(finished)) {
        return;
      }
      if (!(wizard.isFinishSuccessful())) {
        return;
      }
      ModelAccess.instance().runWriteAction(new Runnable(){
        public void run(){
          MPSModuleRepository.getInstance().saveAll();
        }
      }
);
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          ProjectManagerEx.getInstance().reloadProject(myProject);
        }
      }
);
    }
  }
);
}
