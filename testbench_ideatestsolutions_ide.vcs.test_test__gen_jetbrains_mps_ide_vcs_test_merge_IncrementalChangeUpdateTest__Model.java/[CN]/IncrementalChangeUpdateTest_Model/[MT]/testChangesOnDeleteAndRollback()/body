{
  setAutoaddPolicy(VcsShowConfirmationOption.Value.DO_ACTION_SILENTLY);
  VirtualFile modelFile=getTestModelFile();
  final EditableSModel md=getTestModel();
  makeChangeAndWait(new Runnable(){
    public void run(){
      DeleteModelHelper.deleteModel(ProjectHelper.toMPSProject(myIdeaProject),md.getModule(),md,false,true);
    }
  }
);
  revertDiskChangesAndWait(modelFile);
  myDiff=CurrentDifferenceRegistry.getInstance(myIdeaProject).getCurrentDifference(getTestModel());
  myDiff.setEnabled(true);
  myWaitHelper.waitForChangesManager();
  Assert.assertTrue(ListSequence.fromList(check_2jv4hj_a0a11a2(myDiff.getChangeSet())).isNotEmpty());
  setAutoaddPolicy(VcsShowConfirmationOption.Value.DO_NOTHING_SILENTLY);
}
