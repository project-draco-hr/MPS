{
  ModelAccess.assertLegalWrite();
  Sdk sdk=ModuleRootManager.getInstance(module).getSdk();
  if (!(sdk instanceof SdkModificator)) {
    return;
  }
synchronized (LOCK) {
    if (myOnlySdk != null && !myModules.isEmpty()) {
      if (myOnlySdk.equals(sdk))       return;
      return;
    }
    if (myModules.isEmpty() && mySdkSolution != null) {
      MPSModuleRepository.getInstance().unregisterModule(mySdkSolution,JdkStubSolutionManager.this);
    }
    myOnlySdk=sdk;
    mySdkSolution=replaceJdkSolution(myOnlySdk);
    myModules.add(module);
  }
}
