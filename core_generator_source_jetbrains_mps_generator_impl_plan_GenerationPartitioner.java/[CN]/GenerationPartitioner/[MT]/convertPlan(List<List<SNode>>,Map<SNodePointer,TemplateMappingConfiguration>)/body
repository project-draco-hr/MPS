{
  List<List<TemplateMappingConfiguration>> result=new ArrayList<List<TemplateMappingConfiguration>>();
  for (  List<SNode> step : plan) {
    List<TemplateMappingConfiguration> s=new ArrayList<TemplateMappingConfiguration>(step.size());
    for (    SNode c : step) {
      TemplateMappingConfiguration configuration=mappingsMap.get(new SNodePointer(c));
      if (configuration == null) {
        throw new IllegalStateException("unknown configuration found: " + c.getName());
      }
      s.add(configuration);
    }
    result.add(s);
  }
  return result;
}
