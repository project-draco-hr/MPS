{
  ArrayList<TemplateMappingConfiguration> allMappingConfigurations=new ArrayList<TemplateMappingConfiguration>();
  for (  TemplateModule generator : myGenerators) {
    for (    TemplateModel model : generator.getModels()) {
      myPriorityMap.prepare(model.getConfigurations());
      allMappingConfigurations.addAll(model.getConfigurations());
    }
  }
  loadRules();
  myPriorityGraph.finalizeEdges(allMappingConfigurations);
  final PartitioningSolver partitioningSolver=new PartitioningSolver(myPriorityMap,myPriorityGraph,myCoherentMappings);
  final List<GenerationPhase> generationPhases=partitioningSolver.solveNew();
  return phaseAsPlainList(generationPhases);
}
