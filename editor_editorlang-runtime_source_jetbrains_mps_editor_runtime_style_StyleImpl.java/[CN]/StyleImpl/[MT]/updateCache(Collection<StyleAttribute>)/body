{
  if (attributes.isEmpty()) {
    return;
  }
  Set<StyleAttribute> changedAttributes=new StyleAttributeSet();
  for (  StyleAttribute<Object> attribute : attributes) {
    Collection<IntPair<Object>> parentValues=getParentStyle() == null ? null : getParentStyle().getAll(attribute);
    AttributeValue<Object> currentValues=ensureGetAttribute(attribute);
    Object cachedValue=getCached(attribute);
    if (parentValues != null) {
      if (currentValues == null || currentValues.values == null || currentValues.values.isEmpty()) {
        getAttribute(attribute).addValues(parentValues);
      }
 else {
        for (        IntPair<Object> pValue : parentValues) {
          Pair<Boolean,ListIterator<IntPair<Object>>> searchResult=currentValues.search(pValue.index);
          boolean found=searchResult.o1;
          ListIterator<IntPair<Object>> iterator=searchResult.o2;
          if (found) {
            Object currentValue=iterator.next().value;
            Object newValue=attribute.combine(pValue.value,currentValue);
            iterator.previous().value=newValue;
            if (!EqualUtil.equals(newValue,currentValue)) {
              changedAttributes.add(attribute);
            }
          }
 else {
            iterator.add(new IntPair<Object>(pValue.index,pValue.value));
            changedAttributes.add(attribute);
          }
        }
      }
    }
    getAttribute(attribute).cached=getTop(attribute);
    if (!EqualUtil.equals(getCached(attribute),cachedValue)) {
      changedAttributes.add(attribute);
    }
  }
  if (!changedAttributes.isEmpty()) {
    if (myChildren != null) {
      for (      Style style : myChildren) {
        style.setParent(this,changedAttributes);
      }
    }
    fireStyleChanged(new StyleChangeEvent(this,changedAttributes));
  }
}
