{
  Rectangle oldClipBounds=g.getClipBounds();
  Rectangle clipBounds=new Rectangle(oldClipBounds);
  int tableWidth=this.table.getColumnModel().getTotalColumnWidth();
  clipBounds.width=Math.min(clipBounds.width,tableWidth);
  g.setClip(clipBounds);
  this.paintGrid(g);
  int firstIndex=this.table.rowAtPoint(new Point(0,clipBounds.y));
  int lastIndex=this.lastVisibleRow(clipBounds);
  int rowMargin=this.table.getRowMargin();
  Rectangle rowRect=new Rectangle(0,0,tableWidth,((DiffRowTable)this.table).getRowHeight(firstIndex) + rowMargin);
  rowRect.y=0;
  for (int i=0; i < firstIndex; i++) {
    rowRect.y+=((DiffRowTable)this.table).getRowHeight(i) + rowMargin;
  }
  for (int index=firstIndex; index <= lastIndex; index++) {
    if (rowRect.intersects(clipBounds)) {
      this.paintRow(g,index);
    }
    rowRect.y+=((DiffRowTable)this.table).getRowHeight(index) + rowMargin;
  }
  g.setClip(oldClipBounds);
}
