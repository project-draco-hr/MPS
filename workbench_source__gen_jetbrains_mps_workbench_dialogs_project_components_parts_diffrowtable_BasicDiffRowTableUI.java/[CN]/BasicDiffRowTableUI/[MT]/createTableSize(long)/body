{
  int numCols=this.table.getColumnCount();
  int numRows=this.table.getRowCount();
  TableModel tm=this.table.getModel();
  int[] height=new int[numRows];
  for (int i=0; i < numCols; i++) {
    for (int j=0; j < numRows; j++) {
      height[j]=Math.max(height[j],((DiffRowTable)this.table).getHeight(tm.getValueAt(j,i),i));
    }
  }
  int totalMarginWidth=this.table.getColumnModel().getColumnMargin() * numCols;
  long widthWithMargin=width + totalMarginWidth;
  if (widthWithMargin > Integer.MAX_VALUE) {
    widthWithMargin=Integer.MAX_VALUE;
  }
  int totalHeight=0;
  for (int k=0; k < numRows; k++) {
    totalHeight+=height[k];
  }
  return new Dimension((int)widthWithMargin,totalHeight + numRows * this.table.getRowMargin());
}
