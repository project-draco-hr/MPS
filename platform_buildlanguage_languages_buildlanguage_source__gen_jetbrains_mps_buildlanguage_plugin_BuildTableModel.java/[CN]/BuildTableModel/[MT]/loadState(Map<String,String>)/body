{
  Map<SNodePointer,String> result=MapSequence.fromMap(new HashMap<SNodePointer,String>());
  if (state == null) {
    return result;
  }
  for (  String name : SetSequence.fromSet(MapSequence.fromMap(state).keySet())) {
    final SNodePointer pointer=stringToPointer(name);
    final Wrappers._T<SNode> node=new Wrappers._T<SNode>();
    ModelAccess.instance().runReadAction(new Runnable(){
      public void run(){
        node.value=pointer.getNode();
      }
    }
);
    if (node.value != null) {
      MapSequence.fromMap(result).put(pointer,MapSequence.fromMap(state).get(name));
    }
  }
  return result;
}
