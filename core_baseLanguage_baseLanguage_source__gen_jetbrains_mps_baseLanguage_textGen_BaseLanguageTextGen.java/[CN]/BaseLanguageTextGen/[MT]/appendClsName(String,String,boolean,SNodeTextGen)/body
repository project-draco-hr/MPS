{
  if (className == null) {
    textGen.foundError("class name is NULL");
    textGen.append("???");
    return;
  }
  if (packageName.contains("@") || className.contains("@")) {
    textGen.foundError("class name not contain '@'");
  }
  String importedFqName;
  String importedLongFqName;
  String importedShortName=className.split("\\.")[0];
  if (packageName.length() > 0) {
    importedFqName=packageName + "." + importedShortName;
    importedLongFqName=packageName + "." + className;
  }
 else {
    importedFqName=importedShortName;
    importedLongFqName=className;
  }
  Set<String> importedNames=BaseLanguageTextGen.getUserObjects(TextGenManager.IMPORT,textGen);
  if (SetSequence.fromSet(importedNames).contains(importedLongFqName)) {
    if (isInternal) {
      textGen.append(className);
    }
    return;
  }
  for (  String importedName : importedNames) {
    if (className.equals(JavaNameUtil.shortName(importedName))) {
      if (isInternal) {
        String fqName;
        if (packageName.length() > 0) {
          fqName=packageName + "." + className;
        }
 else {
          fqName=className;
        }
        textGen.append(fqName);
      }
      return;
    }
  }
  SetSequence.fromSet(importedNames).addElement(importedLongFqName);
  BaseLanguageTextGen.addDependency(InternUtil.intern(importedFqName),textGen);
  Set<String> addedImports=BaseLanguageTextGen.getUserObjects(TextGenManager.ADDED_IMPORT,textGen);
  if (!(packageName.equals("java.lang") || packageName.equals(textGen.getBuffer().getUserObject(TextGenManager.PACKAGE_NAME)) || SetSequence.fromSet(addedImports).contains(importedFqName))) {
    int currPartId=textGen.getBuffer().selectPart(TextGenBuffer.TOP);
    textGen.appendNewLine();
    textGen.append("import " + importedFqName + ";");
    textGen.getBuffer().selectPart(currPartId);
    SetSequence.fromSet(addedImports).addElement(importedFqName);
  }
  if (isInternal) {
    textGen.append(className);
  }
}
