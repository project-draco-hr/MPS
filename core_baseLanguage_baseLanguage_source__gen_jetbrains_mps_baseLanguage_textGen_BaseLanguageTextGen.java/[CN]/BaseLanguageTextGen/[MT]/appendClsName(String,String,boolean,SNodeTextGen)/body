{
  if (className == null) {
    textGen.foundError("class name is NULL");
    textGen.append("???");
    return;
  }
  if (packageName.contains("@") || className.contains("@")) {
    textGen.foundError("class name not contain '@'");
  }
  String importedFqName;
  String importedShortName=className.split("\\.")[0];
  if (packageName.length() > 0) {
    importedFqName=packageName + "." + importedShortName;
  }
 else {
    importedFqName=importedShortName;
  }
  Set<String> importedNames=BaseLanguageTextGen.getUserObjects(TextGenManager.IMPORT,textGen);
  if (SetSequence.fromSet(importedNames).contains(importedFqName)) {
    if (isInternal) {
      textGen.append(className);
    }
    return;
  }
  for (  String importedName : importedNames) {
    if (importedShortName.equals(JavaNameUtil.shortName(importedName))) {
      if (isInternal) {
        String fqName;
        if (packageName.length() > 0) {
          fqName=packageName + "." + className;
        }
 else {
          fqName=className;
        }
        textGen.append(fqName);
      }
      return;
    }
  }
  SetSequence.fromSet(importedNames).addElement(importedFqName);
  BaseLanguageTextGen.addDependency(InternUtil.intern(importedFqName),textGen);
  if (!(packageName.equals("java.lang") || packageName.equals(textGen.getBuffer().getUserObject(TextGenManager.PACKAGE_NAME)))) {
    int currPartId=textGen.getBuffer().selectPart(TextGenBuffer.TOP);
    textGen.appendNewLine();
    textGen.append("import " + importedFqName + ";");
    textGen.getBuffer().selectPart(currPartId);
  }
  if (isInternal) {
    textGen.append(className);
  }
}
