{
  super(project);
  myProject=project;
  myData=data;
  getContentPane().addNotify();
  setModal(true);
  myChooser=MpsPopupFactory.createPanelForPackage(project,data,hasExtraScope);
  myChooser.invoke(new MultiElementsCallback(){
    @Override public void elementsChosen(    List<Object> elements){
      if (!myOkDone) {
        myOkDone=true;
        mySelectedElements=elements;
        myIsCancelled=false;
        ChooserDialog.this.close(OK_EXIT_CODE);
      }
    }
  }
,ModalityState.stateForComponent(getWindow()),multiSelection);
  Disposer.register(getDisposable(),myChooser);
  init();
}
