{
  final TextGenSupport tgs=new TextGenSupport(ctx);
  if (reference == null) {
    tgs.reportError("null reference");
    tgs.append("???");
    return;
  }
  SNode targetNode=reference.getTargetNode();
  if (targetNode == null) {
    tgs.reportError(String.format("Unknown target for role %s",reference.getLink()));
    tgs.append("???");
    return;
  }
  String name=SNodeUtil.getResolveInfo(targetNode);
  if (name == null) {
    tgs.reportError(String.format("No resolve info for node %s",targetNode));
    name=targetNode.getName();
  }
  if (name == null) {
    tgs.append("???");
  }
 else {
    tgs.append(name);
  }
}
