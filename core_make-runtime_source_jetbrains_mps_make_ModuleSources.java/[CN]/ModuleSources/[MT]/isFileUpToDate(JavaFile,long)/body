{
  ttrace.push("check is up-to-date",false);
  try {
    if (javaFile.getLastModified() >= classFileLastModified) {
      return false;
    }
    for (    String fqName : myDependencies.getAllDependencies(javaFile.getClassName())) {
      final SModule module=myDependencies.getModule(fqName);
      if (module != null) {
        JavaFile file=myJavaFiles.get(fqName);
        if (file == null) {
          final ModuleSources targetModule=myAvailableSources.get(module);
          if (targetModule != null) {
            file=targetModule.getJavaFile(fqName);
          }
        }
        ttrace.push("in dependencies",false);
        long javaFileLastModified=file != null ? file.getLastModified() : myDependencies.getJavaFileLastModified(fqName);
        ttrace.pop();
        if (javaFileLastModified == 0 || javaFileLastModified > classFileLastModified) {
          return false;
        }
      }
    }
    return true;
  }
  finally {
    ttrace.pop();
  }
}
