{
  List<INodeSubstituteAction> result=ListSequence.fromList(new ArrayList<INodeSubstituteAction>());
{
    Calculable calc=new Calculable(){
      public Object calculate(){
        List<SNode> res=ListSequence.fromListAndArray(new ArrayList<SNode>(),SConceptOperations.findConceptDeclaration("jetbrains.mps.ypath.structure.GFReplaceFunWrapper"),SConceptOperations.findConceptDeclaration("jetbrains.mps.ypath.structure.GFRemoveFunWrapper"),SConceptOperations.findConceptDeclaration("jetbrains.mps.ypath.structure.GFInsertFunWrapper"));
        if (SNodeOperations.isInstanceOf(_context.getParentNode(),"jetbrains.mps.ypath.structure.GenericFeatureFunHolder")) {
          for (          SNode foo : ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.cast(_context.getParentNode(),"jetbrains.mps.ypath.structure.GenericFeatureFunHolder"),"functions",true))) {
            if (SNodeOperations.isInstanceOf(foo,"jetbrains.mps.ypath.structure.IGenericFeatureReplaceFun")) {
              ListSequence.fromList(res).removeElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.ypath.structure.GFReplaceFunWrapper"));
            }
 else             if (SNodeOperations.isInstanceOf(foo,"jetbrains.mps.ypath.structure.IGenericFeatureRemoveFun")) {
              ListSequence.fromList(res).removeElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.ypath.structure.GFRemoveFunWrapper"));
            }
 else             if (SNodeOperations.isInstanceOf(foo,"jetbrains.mps.ypath.structure.IGenericFeatureInsertFun")) {
              ListSequence.fromList(res).removeElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.ypath.structure.GFInsertFunWrapper"));
            }
          }
        }
        return res;
      }
    }
;
    Iterable queryResult=(Iterable)calc.calculate();
    if (queryResult != null) {
      for (      Object item : queryResult) {
        List<INodeSubstituteAction> defaultActions=ChildSubstituteActionsHelper.createDefaultActions((SNode)item,_context.getParentNode(),_context.getCurrentTargetNode(),_context.getChildSetter(),operationContext);
        ListSequence.fromList(result).addSequence(ListSequence.fromList(defaultActions));
      }
    }
  }
{
    SNode outputConcept=SConceptOperations.findConceptDeclaration("jetbrains.mps.ypath.structure.IGenericFeatureFunFragment");
    SNode childConcept=(SNode)_context.getChildConcept();
    if (SConceptOperations.isSuperConceptOf(childConcept,NameUtil.nodeFQName(outputConcept))) {
      Calculable calc=new Calculable(){
        public Object calculate(){
          List<SNode> types=ListSequence.fromList(new ArrayList<SNode>());
          ListSequence.fromList(types).addSequence(ListSequence.fromList(SEnumOperations.getEnumMembers(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"))));
          if (SNodeOperations.isInstanceOf(_context.getParentNode(),"jetbrains.mps.ypath.structure.GenericFeatureFunHolder")) {
            for (            SNode foo : ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.cast(_context.getParentNode(),"jetbrains.mps.ypath.structure.GenericFeatureFunHolder"),"functions",true))) {
              if (SNodeOperations.isInstanceOf(foo,"jetbrains.mps.ypath.structure.IGenericFeatureFunFragment")) {
                ListSequence.fromList(types).removeElement(SEnumOperations.enumMemberForValue(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),SPropertyOperations.getString_def(SNodeOperations.cast(foo,"jetbrains.mps.ypath.structure.IGenericFeatureFunFragment"),"fragmentType","REPLACE_SINGLE")));
              }
 else               if (SNodeOperations.isInstanceOf(foo,"jetbrains.mps.ypath.structure.IGenericFeatureReplaceFun")) {
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"replace single"));
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"replace selection"));
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"replace all"));
              }
 else               if (SNodeOperations.isInstanceOf(foo,"jetbrains.mps.ypath.structure.IGenericFeatureRemoveFun")) {
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"remove single"));
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"remove selection"));
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"remove all"));
              }
 else               if (SNodeOperations.isInstanceOf(foo,"jetbrains.mps.ypath.structure.IGenericFeatureInsertFun")) {
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert at start"));
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert at end"));
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert before"));
                ListSequence.fromList(types).removeElement(SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert after"));
              }
            }
          }
          return types;
        }
      }
;
      Iterable<SNode> queryResult=(Iterable)calc.calculate();
      if (queryResult != null) {
        for (        final SNode item : queryResult) {
          ListSequence.fromList(result).addElement(new DefaultChildNodeSubstituteAction(outputConcept,item,_context.getParentNode(),_context.getCurrentTargetNode(),_context.getChildSetter(),operationContext.getScope()){
            public SNode createChildNode(            Object parameterObject,            SModel model,            String pattern){
              SNode fragment=null;
              SNode type=(item);
              if (type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"replace single") || type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"replace selection") || type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"replace all")) {
                fragment=SConceptOperations.createNewNode("jetbrains.mps.ypath.structure.GFReplaceFunFragment",null);
                SPropertyOperations.set(fragment,"fragmentType",SEnumOperations.getEnumMemberValue(type));
                if ((SNodeOperations.getAncestor(_context.getParentNode(),"jetbrains.mps.ypath.structure.GenericParamFeature",false,false) != null)) {
                  SLinkOperations.setNewChild(fragment,"fragmentFun","jetbrains.mps.ypath.structure.GFReplacerParamFun");
                }
              }
 else               if (type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"remove single") || type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"remove selection") || type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"remove all")) {
                fragment=SConceptOperations.createNewNode("jetbrains.mps.ypath.structure.GFRemoveFunFragment",null);
                SPropertyOperations.set(fragment,"fragmentType",SEnumOperations.getEnumMemberValue(type));
                if ((SNodeOperations.getAncestor(_context.getParentNode(),"jetbrains.mps.ypath.structure.GenericParamFeature",false,false) != null)) {
                  SLinkOperations.setNewChild(fragment,"fragmentFun","jetbrains.mps.ypath.structure.GFRemoverParamFun");
                }
              }
 else               if (type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert at start") || type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert at end") || type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert before") || type == SEnumOperations.getEnumMember(SEnumOperations.getEnum("r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)","FragmentTypeEnum"),"insert after")) {
                fragment=SConceptOperations.createNewNode("jetbrains.mps.ypath.structure.GFInsertFunFragment",null);
                SPropertyOperations.set(fragment,"fragmentType",SEnumOperations.getEnumMemberValue(type));
                if ((SNodeOperations.getAncestor(_context.getParentNode(),"jetbrains.mps.ypath.structure.GenericParamFeature",false,false) != null)) {
                  SLinkOperations.setNewChild(fragment,"fragmentFun","jetbrains.mps.ypath.structure.GFInserterParamFun");
                }
              }
              return fragment;
            }
            public String getMatchingText(            String pattern){
              return SEnumOperations.getEnumMemberName((item));
            }
            public String getVisibleMatchingText(            String pattern){
              return this.getMatchingText(pattern);
            }
          }
);
        }
      }
    }
  }
  return result;
}
