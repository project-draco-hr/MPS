{
  SNode classifier=CreateMethodDeclarationUtil.getClassifier(node);
  boolean isSameClassifier=SNodeOperations.getAncestor(node,"jetbrains.mps.baseLanguage.structure.Classifier",false,false) == classifier;
  final String name=CreateMethodDeclarationUtil.getMethodName(editorContext);
  SNode method=new _Quotations.QuotationClass_12().createNode(name);
  if (!(isSameClassifier)) {
    SLinkOperations.setTarget(method,"visibility",new _Quotations.QuotationClass_16().createNode(),true);
  }
  SLinkOperations.addChild(classifier,"method",method);
  SNodeOperations.replaceWithAnother(node,new _Quotations.QuotationClass_13().createNode(method));
  if (isSameClassifier) {
    editorContext.selectWRTFocusPolicy(method);
  }
 else {
    IOperationContext operationContext=editorContext.getOperationContext();
    IEditor editor=operationContext.getComponent(MPSEditorOpener.class).editNode(classifier,operationContext);
    editor.getEditorContext().selectWRTFocusPolicy(method);
  }
}
