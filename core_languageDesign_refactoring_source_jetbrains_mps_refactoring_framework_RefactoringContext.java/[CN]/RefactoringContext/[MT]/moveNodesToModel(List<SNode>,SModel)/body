{
  if (sourceNodes.isEmpty()) {
    return new ArrayList<SNode>();
  }
  SModel sourceModel=sourceNodes.get(0).getModel();
  HashMap<SNode,SNode> mapping=new HashMap<SNode,SNode>();
  List<SNode> targetNodes=CopyUtil.copy(sourceNodes,mapping);
  for (  SNode node : targetNodes) {
    targetModel.addRoot(node);
  }
  for (  SNode key : mapping.keySet()) {
    SNode target=mapping.get(key);
    myMoveMap.put(new FullNodeId(key),new FullNodeId(target));
    mySourceMap.put(new FullNodeId(target),new FullNodeId(sourceModel));
  }
  for (  SNode node : sourceNodes) {
    node.delete();
  }
  targetModel.validateLanguagesAndImports(false,true);
  myCachesAreUpToDate=false;
  return targetNodes;
}
