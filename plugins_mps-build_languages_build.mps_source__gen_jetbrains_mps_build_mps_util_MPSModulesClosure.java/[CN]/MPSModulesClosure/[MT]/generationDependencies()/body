{
  List<SNode> required=new ArrayList<SNode>();
  for (  SNode language : getUsedLanguages(initial)) {
    ListSequence.fromList(required).addElement(language);
    for (    SNode rdep : SLinkOperations.getTargets(language,"runtime",true)) {
      if (!(SNodeOperations.isInstanceOf(rdep,"jetbrains.mps.build.mps.structure.BuildMps_ModuleSolutionRuntime"))) {
        continue;
      }
      SNode runtimeSolution=SNodeOperations.as(toOriginal(SLinkOperations.getTarget(SNodeOperations.cast(rdep,"jetbrains.mps.build.mps.structure.BuildMps_ModuleSolutionRuntime"),"solution",false)),"jetbrains.mps.build.mps.structure.BuildMps_Solution");
      required.add(runtimeSolution);
    }
  }
  for (  SNode m : required) {
    collectAllDependencies(m,false,false);
  }
  return this;
}
