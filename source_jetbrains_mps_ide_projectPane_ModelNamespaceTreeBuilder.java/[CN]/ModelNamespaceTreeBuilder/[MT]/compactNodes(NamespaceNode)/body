{
  for (int i=0; i < node.getChildCount(); i++) {
    MPSTreeNode child=(MPSTreeNode)node.getChildAt(i);
    if (child instanceof NamespaceNode) {
      compactNodes((NamespaceNode)child);
    }
  }
  if (node.getParent() != null && node.getChildCount() == 1 && node.getChildAt(0) instanceof NamespaceNode) {
    NamespaceNode child=(NamespaceNode)node.getChildAt(0);
    node.setName(node.getName() + "." + child.getName());
    for (    MPSTreeNode c : (List<MPSTreeNode>)CollectionUtil.iterableAsList(CollectionUtil.enumerationAsIterable(child.children()))) {
      child.remove(c);
      node.add(c);
    }
    node.remove(child);
  }
}
