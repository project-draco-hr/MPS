{
  myNodesWithSize=nodesWithSize;
  myEdgeLengths=MapSequence.<Edge,Integer>fromMap(new HashMap<Edge,Integer>());
  for (  Node node : Sequence.<Node>fromIterable(nodesWithSize)) {
    List<Edge> oldEdges=ListSequence.<Edge>fromList(new ArrayList<Edge>());
    ListSequence.<Edge>fromList(oldEdges).addSequence(ListSequence.<Edge>fromList(node.getEdges()));
    for (    Edge oldEdge : ListSequence.<Edge>fromList(oldEdges)) {
      this.splitEdge(oldEdge);
    }
    Map<Direction2D,List<Edge>> rectEdges=makeRectangleForNode(node);
    for (    Direction2D dir : Direction2D.values()) {
      int length=MapSequence.<Node,Dimension>fromMap(nodeSizes).get(node).width;
      if (dir.isVertical()) {
        length=MapSequence.<Node,Dimension>fromMap(nodeSizes).get(node).height;
      }
      List<Edge> edges=MapSequence.<Direction2D,List<Edge>>fromMap(rectEdges).get(dir);
      int edgeLength=length / ListSequence.<Edge>fromList(edges).count();
      for (      Edge edge : ListSequence.<Edge>fromList(edges)) {
        if (edge == ListSequence.<Edge>fromList(edges).last()) {
          MapSequence.<Edge,Integer>fromMap(myEdgeLengths).put(edge,length - (edgeLength * (ListSequence.<Edge>fromList(edges).count() - 1)));
        }
 else {
          MapSequence.<Edge,Integer>fromMap(myEdgeLengths).put(edge,edgeLength);
        }
      }
    }
  }
  if (ConstraintsGraphProcessor.SHOW_INFO > 0) {
    System.out.println("after modification: ");
    this.print();
  }
}
