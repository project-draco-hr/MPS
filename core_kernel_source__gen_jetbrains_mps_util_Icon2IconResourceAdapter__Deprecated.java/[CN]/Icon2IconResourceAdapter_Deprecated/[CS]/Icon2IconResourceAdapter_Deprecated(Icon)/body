{
  super(null,null);
  BufferedImage image=new BufferedImage(icon.getIconWidth(),icon.getIconHeight(),BufferedImage.TYPE_INT_ARGB);
  Graphics2D g=image.createGraphics();
  icon.paintIcon(null,g,0,0);
  g.dispose();
  try {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ImageOutputStream ios=ImageIO.createImageOutputStream(baos);
    try {
      ImageIO.write(image,"png",ios);
    }
  finally {
      ios.close();
    }
    myIcon=baos.toByteArray();
  }
 catch (  IOException ex) {
    if (LOG.isEnabledFor(Level.ERROR)) {
      LOG.error("Can't read icon",ex);
    }
  }
}
