{
  SNode exceptionResultPart=SConceptOperations.createNewNode("jetbrains.mps.console.base.structure.ExceptionResultPart",null);
  SPropertyOperations.set(exceptionResultPart,"text",exception.getClass().getName());
  console.addClosure(exceptionResultPart,new _FunctionTypes._void_P0_E0(){
    public void invoke(){
      StringWriter writer=new StringWriter();
      exception.printStackTrace(new PrintWriter(writer));
      StringSelection contents=new StringSelection(writer.toString());
      CopyPasteManagerEx.getInstanceEx().setContents(contents);
      final AnalyzeStacktraceDialog dialog=new AnalyzeStacktraceDialog(ProjectHelper.toIdeaProject(context.getProject()),new ProjectOperationContext(context.getProject()));
      dialog.show();
    }
  }
);
}
