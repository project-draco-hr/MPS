{
  String path=getBaseMPSPath();
  if (path != null) {
    if (path.endsWith(".jar")) {
      try {
        return ClassPathFactory.getInstance().createFromPath(path);
      }
 catch (      Throwable e) {
        LOG.error(e);
      }
    }
 else {
      return ClassPathFactory.getInstance().createFromPath(path);
    }
  }
  File file=new File(PathManager.getResourceRoot(ClassLoaderManager.class,"/" + ClassLoaderManager.class.getName().replace('.','/') + ".class"));
  if (file.exists()) {
    return ClassPathFactory.getInstance().createFromPath(file.getAbsolutePath());
  }
  LOG.error("Can't find mps classpath");
  return null;
}
