{
  SNode node=convert(SLinkOperations.getTarget(quotation,"quotedNode",true));
  if (!(SNodeOperations.isInstanceOf(node,"jetbrains.mps.lang.quotation.structure.NodeBuilderNode"))) {
    return node;
  }
  SNode q=SConceptOperations.createNewNode("jetbrains.mps.lang.quotation.structure.NodeBuilder",null);
  SLinkOperations.setTarget(q,"quotedNode",SNodeOperations.cast(node,"jetbrains.mps.lang.quotation.structure.NodeBuilderNode"),true);
  SLinkOperations.setTarget(q,"modelToCreate",SLinkOperations.getTarget(quotation,"modelToCreate",true),true);
  return q;
}
