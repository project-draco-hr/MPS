{
  if (myCaches.containsKey(key)) {
    throw new RuntimeException("can't put another cache by key " + key);
  }
  myCaches.put(key,cache);
  myDependsOnModels.put(key,new ArrayList<SModelDescriptor>(dependsOnModels));
  ModelEventRouter eventRouter=new ModelEventRouter(cache);
  myModelEventRouters.put(cache,eventRouter);
  for (  SModelDescriptor dependsOnModel : dependsOnModels) {
    dependsOnModel.addModelListener(eventRouter);
  }
  cache.cacheAttached();
}
