{
  mySModelRepository.addModelRepositoryListener(new SModelRepositoryAdapter(){
    public void modelRemoved(    SModelDescriptor modelDescriptor){
      List<Object> keysToRemove=new ArrayList<Object>();
      SModelReference reference=modelDescriptor.getSModelReference();
      for (      Object key : myDependsOnModels.keySet()) {
        List<SModelDescriptor> dependsOnModels=myDependsOnModels.get(key);
        if (dependsOnModels == null) {
          continue;
        }
        for (        SModelDescriptor dependsOnModel : dependsOnModels) {
          if (dependsOnModel.getSModelReference().equals(reference)) {
            keysToRemove.add(key);
          }
        }
      }
      for (      Object key : keysToRemove) {
        removeCache(key);
      }
    }
  }
);
  myClassLoaderManager.addReloadHandler(new ReloadAdapter(){
    public void unload(){
      removeAllCaches();
    }
  }
);
}
