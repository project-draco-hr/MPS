{
  if (myCurrentReferent != myTargetNode) {
    if (!myTargetNode.getConcept().isSubConceptOf(myLink.getTargetConcept())) {
      throw new RuntimeException("Couldn't set referent node: " + SNodeOperations.getDebugText(myTargetNode));
    }
    SNodeAccessUtil.setReferenceTarget(getSourceNode(),myLink,myTargetNode);
    if (editorContext != null) {
      editorContext.flushEvents();
      EditorCell selectedCell=editorContext.getSelectedCell();
      if (selectedCell instanceof EditorCell_Label && ((EditorCell_Label)selectedCell).isEditable()) {
        EditorCell_Label cell=(EditorCell_Label)selectedCell;
        cell.end();
      }
    }
  }
  return null;
}
