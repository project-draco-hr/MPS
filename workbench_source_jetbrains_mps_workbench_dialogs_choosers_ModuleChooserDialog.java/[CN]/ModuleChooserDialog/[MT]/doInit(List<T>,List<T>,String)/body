{
  setModal(true);
  myModules.addAll(options);
  if (nonProjectLanguages != null) {
    myNonProjectModules.addAll(nonProjectLanguages);
  }
  DataContext dataContext=DataManager.getInstance().getDataContext();
  final MPSProject mpsProject=MPSDataKeys.MPS_PROJECT.getData(dataContext);
  BaseModuleModel goToModuleModel=new BaseModuleModel(mpsProject){
    public NavigationItem doGetNavigationItem(    final IModule module){
      return new BaseModuleItem(module){
        public void navigate(        boolean requestFocus){
        }
      }
;
    }
    public IModule[] find(    boolean checkboxState){
      if (checkboxState) {
        return myNonProjectModules.toArray(new IModule[myNonProjectModules.size()]);
      }
 else {
        return myModules.toArray(new IModule[myModules.size()]);
      }
    }
    public IModule[] find(    IScope scope){
      throw new UnsupportedOperationException("must not be used");
    }
    @Nullable public String getPromptText(){
      return NameUtil.capitalize(entityString) + " name:";
    }
    @Nullable public String getCheckBoxName(){
      return "Include non-project " + NameUtil.pluralize(entityString);
    }
    @Override public String getNotInMessage(){
      return "no " + NameUtil.pluralize(entityString) + " found in project";
    }
    @Override public boolean loadInitialCheckBoxState(){
      return false;
    }
  }
;
  myChooser=new SmartChooseByNamePanel(goToModuleModel,!myNonProjectModules.isEmpty());
  myChooser.invoke(new Callback(){
    public void elementChosen(    Object element){
      if (!myOkDone) {
        myOkDone=true;
        onOk();
      }
    }
  }
,ModalityState.NON_MODAL,false);
}
