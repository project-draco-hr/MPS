{
  if (mySourceVirtualFile == null) {
    final SRepository repo=ProjectHelper.getProjectRepository(getProject());
    repo.getModelAccess().runReadAction(new Runnable(){
      @Override public void run(){
        SModel model=myModelReference.resolve(repo);
        DataSource source=model.getSource();
        if (source instanceof FileDataSource) {
          File file=new File(((FileDataSource)source).getFile().getPath());
          VirtualFile vfile=LocalFileSystem.getInstance().findFileByIoFile(file);
          mySourceVirtualFile=vfile;
        }
 else         if (source instanceof FilePerRootDataSource) {
          mySourceVirtualFile=VirtualFileUtils.getVirtualFile(((FilePerRootDataSource)source).getFolder()).findChild(MPSExtentions.DOT_MODEL_HEADER);
        }
      }
    }
);
  }
  return mySourceVirtualFile;
}
