{
  ModelAccess.assertLegalWrite();
  MPSPsiNode mpsPsiNode=lookupNode(sNodeId);
  if (mpsPsiNode == null)   return null;
  SNode sNode=mpsPsiNode.getSNodeReference().resolve(MPSModuleRepository.getInstance());
  MPSPsiNode replacement=convert(sNode);
  ((MPSPsiNodeBase)mpsPsiNode.getParent()).replaceChild(mpsPsiNode,replacement);
  return replacement;
}
