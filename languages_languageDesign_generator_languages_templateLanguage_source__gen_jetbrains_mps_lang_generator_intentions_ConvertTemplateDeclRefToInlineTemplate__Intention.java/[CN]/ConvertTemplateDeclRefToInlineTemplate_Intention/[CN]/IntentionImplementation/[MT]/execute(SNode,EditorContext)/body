{
  List<SNode> TFs=SNodeOperations.getNodeDescendants(SLinkOperations.getTarget(TemplateDeclarationReference_BehaviorDescriptor.getTemplate_idQzR6ThtRo7.invoke(node),MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0xfe43cb41d0L,0xfe43de823bL,"contentNode")),MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xff1b29b76cL,"jetbrains.mps.lang.generator.structure.TemplateFragment"),true,new SAbstractConcept[]{});
  if (ListSequence.fromList(TFs).isEmpty()) {
    JOptionPane.showMessageDialog(null,"No fragments found");
    return;
  }
  if (ListSequence.fromList(TFs).count() > 1) {
    JOptionPane.showMessageDialog(null,"Too many fragments");
    return;
  }
  SNode oldTemplate=TemplateDeclarationReference_BehaviorDescriptor.getTemplate_idQzR6ThtRo7.invoke(node);
  SNode fragmentToSet=SNodeOperations.copyNode(SNodeOperations.getParent(ListSequence.fromList(TFs).first()));
  SNode TFtoDelete=AttributeOperations.getAttribute(fragmentToSet,new IAttributeDescriptor.NodeAttribute(MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xff1b29b76cL,"jetbrains.mps.lang.generator.structure.TemplateFragment")));
  SNodeOperations.deleteNode(TFtoDelete);
  SNode inlineTemplate=SNodeFactoryOperations.replaceWithNewChild(node,SNodeFactoryOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x112103dd1e8L,"jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence")));
  SLinkOperations.setTarget(inlineTemplate,MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0x112103dd1e8L,0x112103ebf76L,"templateNode"),fragmentToSet);
  int option=JOptionPane.showConfirmDialog(null,"Delete old template?","",JOptionPane.YES_NO_OPTION);
  if (option == JOptionPane.YES_OPTION) {
    SNodeOperations.deleteNode(oldTemplate);
  }
}
