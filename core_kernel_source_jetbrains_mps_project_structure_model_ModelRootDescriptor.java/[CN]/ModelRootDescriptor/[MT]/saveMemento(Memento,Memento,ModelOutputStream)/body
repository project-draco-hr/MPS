{
  if (mem == null) {
    stream.writeByte(0x70);
    return;
  }
  stream.writeByte(0x55);
  if (parent != null)   stream.writeString(mem.getType());
  Collection<String> keys=IterableUtil.asCollection(mem.getKeys());
  stream.writeInt(keys.size());
  for (  String key : keys) {
    stream.writeString(key);
    stream.writeString(mem.get(key));
  }
  Collection<Memento> children=IterableUtil.asCollection(mem.getChildren());
  stream.writeInt(children.size());
  for (  Memento child : children) {
    saveMemento(mem,child,stream);
  }
  stream.writeString(mem.getText());
}
