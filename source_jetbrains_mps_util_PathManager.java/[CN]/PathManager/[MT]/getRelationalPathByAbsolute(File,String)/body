{
  File absoluteFile=new File(absolutePath);
  if (!absoluteFile.isAbsolute()) {
    return absolutePath;
  }
  if (!baseFile.isDirectory()) {
    baseFile=baseFile.getParentFile();
  }
  StringBuffer relativePath=new StringBuffer(absoluteFile.getName());
  File parent=absoluteFile.getParentFile();
  while (parent != null) {
    if (baseFile.equals(parent)) {
      break;
    }
    relativePath.insert(0,File.separator);
    relativePath.insert(0,parent.getName());
    parent=parent.getParentFile();
  }
  return relativePath.toString();
}
