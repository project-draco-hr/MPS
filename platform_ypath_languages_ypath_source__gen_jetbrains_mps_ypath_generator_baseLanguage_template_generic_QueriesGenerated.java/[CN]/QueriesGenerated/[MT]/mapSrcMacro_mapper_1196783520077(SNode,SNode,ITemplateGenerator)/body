{
  SNode protoRange=SLinkOperations.getTarget(node,"range",true);
  SNode insertRange=SConceptOperations.createNewNode("jetbrains.mps.ypath.structure.IndexRange",null);
  SPropertyOperations.set(insertRange,"has_start","" + (SPropertyOperations.getBoolean(protoRange,"has_start")));
  SPropertyOperations.set(insertRange,"has_end","" + (SPropertyOperations.getBoolean(protoRange,"has_end")));
  SPropertyOperations.set(insertRange,"includes_start","" + (SPropertyOperations.getBoolean(protoRange,"includes_start")));
  SPropertyOperations.set(insertRange,"includes_end","" + (SPropertyOperations.getBoolean(protoRange,"includes_end")));
  if (SPropertyOperations.getBoolean(insertRange,"has_start")) {
    SLinkOperations.setNewChild(insertRange,"start","jetbrains.mps.baseLanguageInternal.structure.InternalVariableReference");
    SPropertyOperations.set(SLinkOperations.getTarget(insertRange,"end",true),"name","startIdx");
  }
  if (SPropertyOperations.getBoolean(insertRange,"has_end")) {
    SLinkOperations.setNewChild(insertRange,"end","jetbrains.mps.baseLanguageInternal.structure.InternalVariableReference");
    SPropertyOperations.set(SLinkOperations.getTarget(insertRange,"end",true),"name","endIdx");
  }
  return insertRange;
}
