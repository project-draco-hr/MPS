{
  final TextTreeNode[] root=new TextTreeNode[1];
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      root[0]=new TextTreeNode("Loaded Modules"){
{
          setIcon(Icons.PROJECT_ICON);
        }
        @Override protected boolean propogateErrorUpwards(){
          return false;
        }
        @Override public ActionGroup getActionGroup(){
          BaseAction refreshAction=new BaseAction("Refresh"){
            @Override protected void doExecute(            AnActionEvent e,            Map<String,Object> _params){
              myTree.rebuildNow();
            }
          }
;
          return ActionUtils.groupFromActions(refreshAction);
        }
      }
;
      if (MPSCore.getInstance().isTestMode())       return;
      for (      SModule module : SortUtil.sortModules(MPSModuleRepository.getInstance().getAllModules())) {
        root[0].add(new LanguageTreeNode(module));
      }
    }
  }
);
  return root[0];
}
