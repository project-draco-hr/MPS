{
  SNode enclosingMacro=findOuterMacro(contextNode);
  if ((enclosingMacro == null)) {
    return QueriesUtil.getApplicableConcept_fromEnvironment(contextNode);
  }
  if (SNodeOperations.isInstanceOf(enclosingMacro,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x10fef52f5efL,"jetbrains.mps.lang.generator.structure.SourceSubstituteMacro"))) {
    return getConceptFrom(SNodeOperations.cast(enclosingMacro,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x10fef52f5efL,"jetbrains.mps.lang.generator.structure.SourceSubstituteMacro")));
  }
  return null;
}
