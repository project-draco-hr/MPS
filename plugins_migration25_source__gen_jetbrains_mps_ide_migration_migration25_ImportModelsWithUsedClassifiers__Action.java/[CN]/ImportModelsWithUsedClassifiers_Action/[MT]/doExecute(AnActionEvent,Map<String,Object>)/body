{
  try {
    MPSProject mpsProject=((Project)MapSequence.fromMap(_params).get("project")).getComponent(MPSProject.class);
    List<IModule> allModules=ListSequence.fromListWithValues(new ArrayList<IModule>(),mpsProject.getModulesWithGenerators());
    for (    IModule module : ListSequence.fromList(allModules)) {
      ModuleDescriptor descriptor=module.getModuleDescriptor();
      if (descriptor == null) {
        continue;
      }
      for (      SModelDescriptor modelDescriptor : ListSequence.fromList(module.getOwnModelDescriptors())) {
        if (SModelStereotype.isStubModelStereotype(modelDescriptor.getStereotype())) {
          continue;
        }
        SModel model=modelDescriptor.getSModel();
        Set<SModelReference> dependencies=SetSequence.fromSet(new HashSet<SModelReference>());
        for (        SNode node : ListSequence.fromList(SModelOperations.getNodes(model,null))) {
          for (          SReference ref : ListSequence.fromList(node.getReferences())) {
            SModelReference mref=check_rft9c_a0a0a0e0d0c0a(check_rft9c_a0a0a0a4a3a2a0(ref.getTargetNodeSilently()));
            if (mref == null) {
              continue;
            }
            SetSequence.fromSet(dependencies).addElement(mref);
          }
        }
        SetSequence.fromSet(dependencies).removeElement(modelDescriptor.getSModelReference());
        for (        SModelDescriptor importedModel : ListSequence.fromList(jetbrains.mps.smodel.SModelOperations.allImportedModels(model,GlobalScope.getInstance()))) {
          SetSequence.fromSet(dependencies).removeElement(importedModel.getSModelReference());
        }
        for (        SModelReference modelToImport : SetSequence.fromSet(dependencies)) {
          model.addModelImport(modelToImport,false);
        }
      }
    }
  }
 catch (  Throwable t) {
    LOG.error("User's action execute method failed. Action:" + "ImportModelsWithUsedClassifiers",t);
  }
}
