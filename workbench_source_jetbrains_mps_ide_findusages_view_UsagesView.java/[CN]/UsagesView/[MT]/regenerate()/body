{
  List<SModelDescriptor> models=new ArrayList<SModelDescriptor>();
  for (  SModelDescriptor modelDescriptor : myTreeComponent.getIncludedModels()) {
    if (!GenerationFacade.canGenerate(modelDescriptor))     continue;
    models.add(modelDescriptor);
  }
  ProjectOperationContext context=ProjectOperationContext.get(myProject.getComponent(MPSProject.class));
  if (myMakeSession.compareAndSet(null,new MakeSession(context))) {
    try {
      if (IMakeService.INSTANCE.get().openNewSession(myMakeSession.get())) {
        IMakeService.INSTANCE.get().make(myMakeSession.get(),new ModelsToResources(context,models).resources(false));
      }
    }
  finally {
      myMakeSession.set(null);
    }
  }
}
