{
  Point newLocation=new Point();
  Component component=myRelativeCell.getEditorContext().getNodeEditorComponent();
  Point anchor=component.getLocationOnScreen();
  Point location=new Point(anchor.x + myRelativeCell.getX(),anchor.y + myRelativeCell.getY() + myRelativeCell.getHeight());
  int screenHeight=Toolkit.getDefaultToolkit().getScreenSize().height;
  if (location.getY() + PopupWindow.PREFERRED_HEIGHT > screenHeight - 150) {
    getPopupWindow().setPosition(PopupWindowPosition.TOP);
  }
 else {
    getPopupWindow().setPosition(PopupWindowPosition.BOTTOM);
  }
  newLocation=location;
  DefaultListModel model=(DefaultListModel)myList.getModel();
  int oldIndex=getSelectionIndex();
  model.removeAllElements();
  for (  String value : getStrings()) {
    model.addElement(value);
  }
  setSelectionIndex(oldIndex);
  myList.ensureIndexIsVisible(getSelectionIndex());
  Border border=myScroller.getBorder();
  Insets insets=border.getBorderInsets(myScroller);
  int scrollerBorderHeight=insets.top + insets.bottom;
  setSize(Math.max(PREFERRED_WIDTH,myList.getPreferredSize().width + 50),Math.min(PREFERRED_HEIGHT,myList.getPreferredSize().height + scrollerBorderHeight));
  if (getPosition() == PopupWindowPosition.TOP) {
    newLocation=new Point(newLocation.x,newLocation.y - getHeight() - myRelativeCell.getHeight());
  }
  int screenWidth=Toolkit.getDefaultToolkit().getScreenSize().width;
  if (getWidth() >= screenWidth) {
    setSize(screenWidth,getSize().height + myList.getFontMetrics(myList.getFont()).getHeight());
  }
  if (newLocation.x < 0) {
    newLocation.x=0;
  }
  if (getWidth() + newLocation.x > screenWidth) {
    newLocation=new Point(screenWidth - getWidth(),newLocation.y);
  }
  setLocation(newLocation);
  validateTree();
  repaint();
}
