{
  myPopupWindow=new PopupWindow(getEditorWindow());
  Component component=cell.getEditorContext().getNodeEditorComponent();
  Point anchor=component.getLocationOnScreen();
  Point location=new Point(anchor.x + cell.getX(),anchor.y + cell.getY() + cell.getHeight());
  int screenHeight=Toolkit.getDefaultToolkit().getScreenSize().height;
  if (location.getY() + PopupWindow.PREFERRED_HEIGHT > screenHeight - 150) {
    location=new Point(location.x,location.y - PopupWindow.PREFERRED_HEIGHT - cell.getHeight());
    getPopupWindow().setPosition(PopupWindowPosition.TOP);
  }
 else {
    getPopupWindow().setPosition(PopupWindowPosition.BOTTOM);
  }
  getPopupWindow().setLocation(location);
  getPopupWindow().relayout();
  myPatternEditorLocation=new Point(anchor.x + cell.getX(),anchor.y + +cell.getY());
  myPatternEditorSize=new Dimension(cell.getWidth() + 1,cell.getHeight());
}
