{
  if (isChooserActivated != b) {
    if (b) {
      getPatternEditor().activate(getEditorWindow(),myPatternEditorLocation,myPatternEditorSize);
      if (myNodeSubstituteActionsList != null) {
        myNodeSubstituteActionsList.invalidate();
        rebuildMenuEntries();
        getPopupWindow().setSelectionIndex(0);
        getPopupWindow().relayout();
        getPopupWindow().setVisible(true);
        isPopupActivated=true;
      }
    }
 else {
      getPopupWindow().setVisible(false);
      getPatternEditor().done();
      isPopupActivated=false;
    }
  }
  isChooserActivated=b;
}
