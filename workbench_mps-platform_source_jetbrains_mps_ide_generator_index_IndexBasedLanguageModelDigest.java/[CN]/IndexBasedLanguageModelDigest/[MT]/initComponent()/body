{
  ModelDigestHelper.getInstance().addDigestProvider(new DigestProvider(){
    @Override public Map<String,String> getGenerationHashes(    final IOperationContext operationContext,    @NotNull DataSource source){
      if (!(source instanceof FileDataSource))       return null;
      IFile iFile=((FileDataSource)source).getFile();
      if (iFile == null)       return null;
      try {
        VirtualFile file=VirtualFileUtils.getVirtualFile(iFile);
        if (file == null)         return null;
        final Map<String,String>[] valueArray=new Map[]{null};
        FileBasedIndex.getInstance().processValues(LanguageModelDigestIndex.NAME,FileBasedIndex.getFileId(file),file,new ValueProcessor<Map<String,String>>(){
          public boolean process(          VirtualFile file,          Map<String,String> values){
            valueArray[0]=values;
            return true;
          }
        }
,new EverythingGlobalScope());
        return valueArray[0];
      }
 catch (      IndexNotReadyException e) {
      }
catch (      ProcessCanceledException e) {
      }
      return null;
    }
  }
);
}
