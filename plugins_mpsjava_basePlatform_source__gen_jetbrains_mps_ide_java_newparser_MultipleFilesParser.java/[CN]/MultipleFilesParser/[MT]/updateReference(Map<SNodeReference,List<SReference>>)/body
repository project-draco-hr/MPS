{
  for (  SNodeReference nodeRef : SetSequence.fromSet(MapSequence.fromMap(refMap).keySet())) {
    final SNode node=nodeRef.resolve(myRepository);
    if (node == null) {
      continue;
    }
    ListSequence.fromList(MapSequence.fromMap(refMap).get(nodeRef)).visitAll(new IVisitor<SReference>(){
      public void visit(      SReference it){
        SModelReference targetModelRef=it.getTargetSModelReference();
        ((SModelInternal)node.getModel()).addModelImport(targetModelRef,true);
        node.setReference(it.getRole(),it);
      }
    }
);
  }
}
