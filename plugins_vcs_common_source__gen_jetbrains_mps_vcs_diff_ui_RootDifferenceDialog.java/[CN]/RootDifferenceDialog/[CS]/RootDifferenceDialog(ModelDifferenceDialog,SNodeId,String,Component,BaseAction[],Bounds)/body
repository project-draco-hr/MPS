{
  super(parent,true);
  setTitle("Difference for " + rootName);
  myModelDialog=modelDialog;
  myRootId=rootId;
  myOldEditor=addEditor(0,myModelDialog.getChangeSet().getOldModel());
  myNewEditor=addEditor(1,myModelDialog.getChangeSet().getNewModel());
  linkEditors(true);
  linkEditors(false);
  JSplitPane splitPane=new JSplitPane(JSplitPane.VERTICAL_SPLIT,myTopPanel,myBottomPanel);
  splitPane.setResizeWeight(0.7);
  myActionGroup=new DefaultActionGroup();
  if (actions != null) {
    myActionGroup.addAll(actions);
    myActionGroup.addSeparator();
  }
  final NextPreviousTraverser neighbourTraverser=new NextPreviousTraverser(myChangeGroupLayouts,myNewEditor.getMainEditor());
  myActionGroup.addAll(neighbourTraverser.previousAction(),neighbourTraverser.nextAction());
  myActionGroup.addSeparator();
  if (myModelDialog.isEditable()) {
    myActionGroup.add(new RevertRootsAction(rootName){
      protected Iterable<ModelChange> getChanges(){
        return myModelDialog.getChangesForRoot(myRootId);
      }
      protected void after(){
        rehighlight();
      }
    }
);
  }
  myActionToolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,myActionGroup,true);
  neighbourTraverser.setActionToolbar(myActionToolbar);
  myContainer.add(myActionToolbar.getComponent(),BorderLayout.NORTH);
  myContainer.add(splitPane,BorderLayout.CENTER);
  myContainer.add(myStatusBar,BorderLayout.SOUTH);
  highlightAllChanges();
  if (firstChange != null) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        neighbourTraverser.goToBounds(firstChange);
      }
    }
);
  }
 else {
    neighbourTraverser.goToFirstChangeLater();
  }
  DisplayMode displayMode=check_vu2gar_a0hb0a(check_vu2gar_a0a33a0(GraphicsEnvironment.getLocalGraphicsEnvironment()));
  int width=(displayMode == null ? 800 : displayMode.getWidth() - 100);
  int height=(displayMode == null ? 600 : displayMode.getHeight() - 100);
  myContainer.setPreferredSize(new Dimension(width,height));
  Dimension size=DimensionService.getInstance().getSize(getDimensionServiceKey());
  if (size == null) {
    myContainer.setPreferredSize(new Dimension(width,height));
  }
  init();
}
