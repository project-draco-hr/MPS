{
  Collection<ReloadableModule> loadedModules=new LinkedHashSet<ReloadableModule>();
  try {
    monitor.start("Loading modules...",toLoad.size());
    for (    ReloadableModule module : toLoad) {
      ModuleClassLoader classLoader=createModuleClassLoader(module);
      SModuleReference moduleReference=((ReloadableModuleBase)module).getModuleReference();
      putClassLoader(moduleReference,classLoader);
      if (getClassLoadingProgress(moduleReference) == ClassLoadingProgress.UNLOADED)       loadedModules.add(module);
      onLoaded(moduleReference);
      monitor.advance(1);
    }
  }
  finally {
    monitor.done();
  }
  return loadedModules;
}
