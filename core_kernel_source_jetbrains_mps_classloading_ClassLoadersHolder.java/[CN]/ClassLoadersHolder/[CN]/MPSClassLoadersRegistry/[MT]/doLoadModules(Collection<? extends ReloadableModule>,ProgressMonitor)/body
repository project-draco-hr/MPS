{
  try {
    monitor.start("Loading modules...",toLoad.size());
    for (    ReloadableModule module : toLoad) {
      SModuleReference moduleReference=module.getModuleReference();
      if (getClassLoadingProgress(moduleReference) == ClassLoadingProgress.UNLOADED)       throw new IllegalStateException("Module " + moduleReference + " is in UNLOADED state, i.e. no listeners know about this module");
      if (getClassLoadingProgress(moduleReference) == ClassLoadingProgress.LOADED)       continue;
      ModuleClassLoader classLoader=createModuleClassLoader(module);
      putClassLoader(moduleReference,classLoader);
      onLoaded(moduleReference);
      monitor.advance(1);
    }
  }
  finally {
    monitor.done();
  }
}
