{
  String fqName=convertCompoundToFqName(cf.getCompoundName());
  String containerClassName=getContainerClassName(fqName);
  if (!myModulesContainer.containsClass(containerClassName)) {
    mySender.error(String.format(MODULE_FOR_CLASS_NOT_FOUND,fqName));
  }
 else {
    SModule moduleForClass=myModulesContainer.getModuleContainingClass(containerClassName);
    myChangedModulesTracker.addChanged(moduleForClass);
    File outputDir=createOutputDir(fqName,moduleForClass);
    String className=NameUtil.shortNameFromLongName(fqName);
    File output=new File(outputDir,className + MPSExtentions.DOT_CLASSFILE);
    if (!myErrorsTracker.hasError(containerClassName)) {
      writeClassFile(cf,output);
    }
 else {
      if (output.exists() && !output.delete()) {
        String errMsg=String.format(OUTPUT_CANNOT_BE_DELETED,output.getPath());
        mySender.error(errMsg);
      }
    }
  }
}
