{
  Set<ModuleBuildTarget> processed=new HashSet<ModuleBuildTarget>();
  for (  ModuleBuildTarget target : targets) {
    if (processed.contains(target))     continue;
    processed.add(target);
    JpsMPSModuleExtension mpsModule=JpsMPSExtensionService.getInstance().getExtension(target.getModule());
    if (mpsModule != null) {
      final BuildDataManager dataManager=myContext.getProjectDescriptor().dataManager;
      OutputPathsCalculator pathsCalculator=new OutputPathsCalculator(mpsModule,dataManager.getDataPaths());
      final File tmpOutputRoot=pathsCalculator.getTmpOutputRoot();
      final File cachesOutputRoot=pathsCalculator.getCachesOutputRoot();
      final boolean transientOutputFolder=pathsCalculator.isTransientOutputFolder();
      myRedirects.addRedirects(myOutputPaths,tmpOutputRoot.getPath(),cachesOutputRoot.getPath(),transientOutputFolder);
      myOutputRootsPerTarget.put(target,pathsCalculator.getOutputPath());
    }
  }
}
