{
  TemplateDeclaration templateForSwitch=generator.getTemplateForSwitch(sourceNode,templateSwitch);
  if (templateForSwitch != null) {
    List<TemplateFragment> templateFragments=getTemplateFragments(templateForSwitch);
    if (templateFragments.isEmpty()) {
      LOG.error("WARN: no template fragments found in " + templateForSwitch.getDebugText());
      return null;
    }
    if (templateFragments.size() > 1) {
      LOG.error("WARN: more when one fragments found in " + templateForSwitch.getDebugText());
      return null;
    }
    TemplateFragment templateFragment=templateFragments.get(0);
    SNode templateNode=templateFragment.getParent();
    return templateNode;
  }
  return null;
}
