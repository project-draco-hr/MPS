{
  if (weavingRules.isEmpty())   return;
  generator.getSourceModel().allNodes(new Condition<SNode>(){
    public boolean met(    SNode sourceNode){
      ConceptDeclaration nodeConcept=sourceNode.getConceptDeclaration(generator.getScope());
      for (      Weaving_MappingRule weavingRule : weavingRules) {
        if (checkPremiseForBaseMappingRule(sourceNode,nodeConcept,weavingRule,generator)) {
          TemplateDeclaration templateDeclaration=weavingRule.getTemplate();
          if (templateDeclaration == null) {
            generator.showErrorMessage(sourceNode,null,weavingRule,"weaving rule has no template");
            continue;
          }
          List<INodeBuilder> contextBuilders=getContextNodeBuilderForWeavingingRule(sourceNode,weavingRule,generator);
          if (contextBuilders == null) {
            generator.showErrorMessage(sourceNode,weavingRule,"couldn't create context node builder");
            continue;
          }
          for (          INodeBuilder b : contextBuilders) {
            weaveTemplateDeclaration(sourceNode,templateDeclaration,b,generator,weavingRule);
          }
        }
      }
      return false;
    }
  }
);
}
