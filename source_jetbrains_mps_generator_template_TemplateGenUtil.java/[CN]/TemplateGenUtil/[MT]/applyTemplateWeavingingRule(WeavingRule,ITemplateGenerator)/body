{
  TemplateDeclaration templateDeclaration=rule.getTemplate();
  List<SNode> sourceNodes=createSourceNodeListForTemplateWeavingRule(rule,generator);
  for (  SNode sourceNode : sourceNodes) {
    INodeBuilder contextBuilder=getContextNodeBuilderForTemplateWeavingingRule(sourceNode,rule,generator);
    if (contextBuilder == null) {
      generator.showErrorMessage(sourceNode,rule,"Couldn't create context node builder");
      continue;
    }
    weaveTemplateDeclaration(sourceNode,templateDeclaration,contextBuilder,generator);
  }
}
