{
  SemanticNode sourceNode=nodeBuilder.getSourceNode();
  SemanticNode templateNode=nodeBuilder.getTemplateNode();
  Map<SemanticNode,INodeBuilder> map=(Map<SemanticNode,INodeBuilder>)sourceNode.getUserObject("templateNodeToBuilderMap");
  if (map == null) {
    map=new HashMap<SemanticNode,INodeBuilder>();
    sourceNode.putUserObject("templateNodeToBuilderMap",map);
  }
  INodeBuilder mappedNodeBuilder=map.get(templateNode);
  if (mappedNodeBuilder != null && mappedNodeBuilder != nodeBuilder) {
    IdeMain.instance().getMessageView().add(new Message(MessageKind.WARNING,sourceNode,"WARNING: Couldn't put node builder to map, there is enother builder is in the map already"));
    System.err.println("WARNING: Couldn't put node builder to map, there is enother builder is in the map already");
    System.err.println("Source node  : " + sourceNode.getDebugText());
    System.err.println("Template node: " + templateNode.getDebugText());
  }
 else {
    map.put(templateNode,nodeBuilder);
  }
}
