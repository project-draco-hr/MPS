{
  if (!targetNode.isAcceptableReferent(role,targetReferentNode,generator.getScope())) {
    generator.showErrorMessage(sourceNode,templateNode,"unacceptable referent: " + targetReferentNode.getDebugText() + " for role \""+ role+ "\" in "+ targetNode.getDebugText());
    return false;
  }
  SModel referentNodeModel=targetReferentNode.getModel();
  if (referentNodeModel != targetNode.getModel()) {
    if (TemplateLanguageUtil.isTemplatesModel(referentNodeModel)) {
      generator.showErrorMessage(sourceNode,templateNode,"unacceptable referent on template node: " + targetReferentNode.getDebugText() + " for role \""+ role+ "\" in "+ targetNode.getDebugText());
      return false;
    }
    if (referentNodeModel.getModelDescriptor().isTransient()) {
      generator.showErrorMessage(sourceNode,templateNode,"unacceptable referent on transient node: " + targetReferentNode.getDebugText() + " for role \""+ role+ "\" in "+ targetNode.getDebugText());
      return false;
    }
  }
  return true;
}
