{
  TemplateDeclaration template=null;
  RuleConsequence ruleConsequence=rule.getRuleConsequence();
  if (ruleConsequence != null) {
    if (ruleConsequence instanceof DismissTopMappingRule) {
      showGeneratorMessage(((DismissTopMappingRule)ruleConsequence).getGeneratorMessage(),sourceNode,rule,generator);
      throw new ReductionNotNeededException();
    }
 else     if (ruleConsequence instanceof TemplateDeclarationReference) {
      template=((TemplateDeclarationReference)ruleConsequence).getTemplate();
    }
 else {
      generator.showErrorMessage(sourceNode,null,rule,"unsapported rule consequence");
    }
  }
 else {
    template=rule.getTemplate();
  }
  return applyReductionRuleTemplate(template,generator,sourceNode,rule);
}
