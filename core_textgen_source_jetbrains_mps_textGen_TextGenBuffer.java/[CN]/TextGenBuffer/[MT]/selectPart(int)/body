{
  if (myPrevBufferKey == partId) {
    int rv=myCurrBufferKey;
    myCurrBufferKey=partId;
    myPrevBufferKey=-1;
    myBuffer.popTextArea();
    return rv;
  }
  myPrevBufferKey=myCurrBufferKey;
  myCurrBufferKey=partId;
  myBuffer.pushTextArea(new BasicToken(partId));
  return myPrevBufferKey;
}
