{
  if (StringUtils.isEmpty(javaHome) || !(new File(javaHome).exists())) {
    javaHome=Java_Command.getJdkHome();
  }
  String result=javaHome + Java_Command.fs() + "bin"+ Java_Command.fs();
  String osName=System.getProperty("os.name");
  if (osName.startsWith("Mac OS")) {
    result+="java";
  }
 else   if (osName.startsWith("Windows")) {
    result+="java.exe";
  }
 else {
    result+="java";
  }
  return Java_Command.protect(result);
}
