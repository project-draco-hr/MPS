{
  if (StringUtils.isEmpty(javaHome) || !(new File(javaHome).exists())) {
    javaHome=Java_Command.getJdkHome();
  }
  if (StringUtils.isEmpty(javaHome)) {
    throw new ExecutionException("Could not find valid java home.");
  }
  return Java_Command.protect(Java_Command.getJavaCommandUnprotected(javaHome));
}
