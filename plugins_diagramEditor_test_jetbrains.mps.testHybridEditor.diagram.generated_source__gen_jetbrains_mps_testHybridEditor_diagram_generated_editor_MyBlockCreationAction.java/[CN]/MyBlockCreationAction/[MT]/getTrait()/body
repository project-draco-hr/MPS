{
  if (myTrait == null) {
    myTrait=new ViewTraitBuilder().on(ViewEvents.MOUSE_PRESSED,new ViewEventHandler<MouseEvent>(){
      public void handle(      View view,      final MouseEvent event){
        if (view.viewAt(event.location()) != view) {
          return;
        }
        if (!(view.focused().get())) {
          view.container().focusedView().set(view);
        }
        ModelAccess.instance().runWriteActionInCommand(new Runnable(){
          public void run(){
            SNode newBlockInstance=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec43f49dL,"jetbrains.mps.testHybridEditor.structure.BlockInstance"));
            SLinkOperations.setTarget(newBlockInstance,MetaAdapterFactory.getReferenceLink(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec43f49dL,0x20a804e2ec4404a9L,"metaBlock"),myMetaBlock);
            SPropertyOperations.set(newBlockInstance,MetaAdapterFactory.getProperty(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec43f49dL,0x20a804e2ec440489L,"x"),"" + (event.x()));
            SPropertyOperations.set(newBlockInstance,MetaAdapterFactory.getProperty(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec43f49dL,0x20a804e2ec44048aL,"y"),"" + (event.y()));
            ListSequence.fromList(SLinkOperations.getChildren(((SNode)myDiagramCell.getSNode()),MetaAdapterFactory.getContainmentLink(0x913a1d639e1948faL,0xad03e33ecccd3814L,0xa10615a65702ec1L,0x20a804e2ec43f4b6L,"newBlocks"))).addElement(newBlockInstance);
          }
        }
);
        event.consume();
      }
    }
).build();
  }
  return myTrait;
}
