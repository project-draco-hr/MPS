{
  SNode enclosingMacro=SNodeOperations.getAncestorWhereConceptInList(contextNode,new String[]{"jetbrains.mps.lang.generator.structure.PropertyMacro","jetbrains.mps.lang.generator.structure.ReferenceMacro","jetbrains.mps.lang.generator.structure.NodeMacro"},false,false);
  if (enclosingMacro != null) {
    if (SNodeOperations.isInstanceOf(enclosingMacro,"jetbrains.mps.lang.generator.structure.MapSrcNodeMacro")) {
      if ((SNodeOperations.getAncestorWhereConceptInList(contextNode,new String[]{"jetbrains.mps.lang.generator.structure.MapSrcMacro_MapperFunction","jetbrains.mps.lang.generator.structure.MapSrcMacro_PostMapperFunction"},true,false) != null)) {
        SNode query=SLinkOperations.getTarget(SNodeOperations.cast(enclosingMacro,"jetbrains.mps.lang.generator.structure.MapSrcNodeMacro"),"sourceNodeQuery",true);
        if (query != null) {
          QueriesUtil.equate_outputNodeType_fromSourceQuery(typeCheckingContext,query,InputNodeType);
          return;
        }
      }
    }
    if (SNodeOperations.isInstanceOf(enclosingMacro,"jetbrains.mps.lang.generator.structure.MapSrcListMacro")) {
      if ((SNodeOperations.getAncestorWhereConceptInList(contextNode,new String[]{"jetbrains.mps.lang.generator.structure.MapSrcMacro_MapperFunction","jetbrains.mps.lang.generator.structure.MapSrcMacro_PostMapperFunction"},true,false) != null)) {
        SNode query=SLinkOperations.getTarget(SNodeOperations.cast(enclosingMacro,"jetbrains.mps.lang.generator.structure.MapSrcListMacro"),"sourceNodesQuery",true);
        if (query != null) {
          QueriesUtil.equate_outputNodeType_fromSourceQuery(typeCheckingContext,query,InputNodeType);
          return;
        }
      }
    }
    SNode enclosingNodeMacro=(SNodeOperations.isInstanceOf(enclosingMacro,"jetbrains.mps.lang.generator.structure.NodeMacro") ? enclosingMacro : null);
    SNode macroOwner=SNodeOperations.getParent(enclosingMacro);
    SNode prevSourceSubstituteMacro=QueriesUtil.getEnclosing_SourceSubstituteMacro(macroOwner,enclosingNodeMacro);
    if (prevSourceSubstituteMacro != null) {
      SNode query=QueriesUtil.getQueryFunction_fromSourceSubstituteMacro(prevSourceSubstituteMacro);
      QueriesUtil.equate_outputNodeType_fromSourceQuery(typeCheckingContext,query,InputNodeType);
      return;
    }
  }
  SNode applicableConcept=QueriesUtil.getApplicableConcept_fromEnvironment(contextNode);
{
    SNode _nodeToCheck_1029348928467=null;
    BaseQuickFixProvider intentionProvider=null;
    EquationInfo _info_12389875345=new EquationInfo(_nodeToCheck_1029348928467,null,"r:00000000-0000-4000-0000-011c895902e4(jetbrains.mps.lang.generator.typesystem)","1206286374200",0,intentionProvider);
    typeCheckingContext.createEquation((SNode)new QueriesUtil.QuotationClass_w9106s_a0a4a0().createNode(applicableConcept,typeCheckingContext),(SNode)InputNodeType,_info_12389875345);
  }
}
