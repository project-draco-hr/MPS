{
  myPosInLayer=new NodeMap<Integer>(graph);
  myNumLayer=new NodeMap<Integer>(graph);
  for (int layer=0; layer < order.getNumLayers(); layer++) {
    List<Node> layerOrder=order.getOrder(layer);
    for (int pos=0; pos < ListSequence.fromList(layerOrder).count(); pos++) {
      MapSequence.fromMap(myPosInLayer).put(ListSequence.fromList(layerOrder).getElement(pos),pos);
      MapSequence.fromMap(myNumLayer).put(ListSequence.fromList(layerOrder).getElement(pos),layer);
    }
  }
  badEdges=SetSequence.fromSet(new HashSet<Edge>());
  for (int layer=0; layer < order.getNumLayers() - 1; layer++) {
    SetSequence.fromSet(badEdges).addSequence(SetSequence.fromSet(findBadEdgesInLayer(order.getOrder(layer))));
  }
}
