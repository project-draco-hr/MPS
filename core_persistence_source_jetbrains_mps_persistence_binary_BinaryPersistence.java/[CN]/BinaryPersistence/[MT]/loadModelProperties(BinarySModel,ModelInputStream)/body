{
  for (  ModuleReference ref : loadModuleRefList(is))   ((jetbrains.mps.smodel.SModel)model).addLanguage(ref);
  for (  ModuleReference ref : loadModuleRefList(is))   ((jetbrains.mps.smodel.SModel)model).addEngagedOnGenerationLanguage(ref);
  for (  ModuleReference ref : loadModuleRefList(is))   ((jetbrains.mps.smodel.SModel)model).addDevKit(ref);
  for (  ImportElement imp : loadImports(is))   ((jetbrains.mps.smodel.SModel)model).addModelImport(imp);
  for (  ImportElement imp : loadImports(is))   ((jetbrains.mps.smodel.SModel)model).addAdditionalModelVersion(imp);
  if (is.readInt() != 0xbaba) {
    throw new IOException("bad stream, no sync token");
  }
}
