{
  BinaryModelHeader modelHeader=loadHeader(is);
  if (modelReference == null) {
    modelReference=modelHeader.getReference();
  }
  BinarySModel model=new BinarySModel(modelHeader);
  loadModelProperties(model,is);
  ModelEnvironmentInfo env=PersistenceRegistry.getInstance().getModelEnvironmentInfo();
  NodesReader reader=new NodesReader(modelReference,env instanceof LightModelEnvironmentInfo ? (LightModelEnvironmentInfo)env : null,interfaceOnly);
  List<Pair<String,SNode>> roots=reader.readNodes(model,is);
  for (  Pair<String,SNode> r : roots) {
    model.addRootNode(r.o2);
  }
  return new ModelLoadResult(model,reader.hasSkippedNodes() ? ModelLoadingState.INTERFACE_LOADED : ModelLoadingState.FULLY_LOADED);
}
