{
  os.writeInt(HEADER);
  os.writeInt(STREAM_ID);
  os.writeModelReference(model.getReference());
  os.writeInt(((jetbrains.mps.smodel.SModelInternal)model).getVersion());
  os.writeBoolean(model instanceof BinarySModel && ((BinarySModel)model).getHeader().isDoNotGenerate());
  os.writeInt(0xabab);
  saveModuleRefList(((jetbrains.mps.smodel.SModelInternal)model).importedLanguages(),os);
  saveModuleRefList(((jetbrains.mps.smodel.SModelInternal)model).engagedOnGenerationLanguages(),os);
  saveModuleRefList(((jetbrains.mps.smodel.SModelInternal)model).importedDevkits(),os);
  saveImports(((jetbrains.mps.smodel.SModelInternal)model).importedModels(),os);
  saveImports(((jetbrains.mps.smodel.SModelInternal)model).getAdditionalModelVersions(),os);
  os.writeInt(0xbaba);
}
