{
  os.writeInt(HEADER);
  os.writeInt(STREAM_ID);
  os.writeModelReference(model.getReference());
  os.writeInt(model.getVersion());
  org.jetbrains.mps.openapi.model.SModel md=model.getModelDescriptor();
  os.writeBoolean((md instanceof GeneratableSModel) && ((GeneratableSModel)md).isDoNotGenerate());
  os.writeInt(0xabab);
  os.writeInt(0x5a5a);
  saveDebugInfo(IterableUtil.asCollection(IterableUtil.merge(model.usedLanguages(),model.implicitlyUsedLanguagesWithVersions().keySet())),model.importedModels(),model.getRootNodes(),os);
  saveUsedLanguagesList(model.usedLanguagesWithVersions(),model.implicitlyUsedLanguagesWithVersions(),os);
  saveModuleRefList(model.engagedOnGenerationLanguages(),os);
  saveModuleRefList(model.importedDevkits(),os);
  saveImports(model.importedModels(),os);
  saveImports(model.getAdditionalModelVersions(),os);
  os.writeInt(0xbaba);
}
