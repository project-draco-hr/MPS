{
  ModelInputStream mis=null;
  try {
    mis=new ModelInputStream(new ByteArrayInputStream(content));
    BinaryModelHeader modelHeader=loadHeader(mis);
    BinarySModel model=new BinarySModel(modelHeader);
    loadModelProperties(model,mis);
    for (    ImportElement element : model.importedModels()) {
      consumer.consume(element.getModelReference().getModelName());
    }
    new NodesReader(modelHeader.getReference()){
      @Override protected String readConceptQualifiedName(      ModelInputStream is) throws IOException {
        String name=super.readConceptQualifiedName(is);
        consumer.consume(NameUtil.shortNameFromLongName(name));
        return name;
      }
      @Override protected SNodeId readTargetNodeId(      ModelInputStream is) throws IOException {
        SNodeId id=super.readTargetNodeId(is);
        consumer.consume(id.toString());
        return id;
      }
    }
.readNodes(model,mis);
  }
 catch (  IOException e) {
    throw new ModelReadException("Couldn't read model: " + e.getMessage(),e);
  }
 finally {
    FileUtil.closeFileSafe(mis);
  }
}
