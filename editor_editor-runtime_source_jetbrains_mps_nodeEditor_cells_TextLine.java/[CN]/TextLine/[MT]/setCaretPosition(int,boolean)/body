{
  if (!duringSelection) {
    doSetCaretPosition(Math.min(myText.length(),position));
    setStartTextSelectionPosition(getCaretPosition());
    setEndTextSelectionPosition(getCaretPosition());
    return;
  }
  int old=getCaretPosition();
  doSetCaretPosition(Math.min(myText.length(),position));
  if (getEndTextSelectionPosition() == old) {
    setEndTextSelectionPosition(getCaretPosition());
  }
 else {
    setStartTextSelectionPosition(getCaretPosition());
  }
  if (getEndTextSelectionPosition() < getStartTextSelectionPosition()) {
    int temp=getEndTextSelectionPosition();
    setEndTextSelectionPosition(getStartTextSelectionPosition());
    setStartTextSelectionPosition(temp);
  }
}
