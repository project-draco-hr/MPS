{
  int x=_x - getPaddingLeft();
  FontMetrics metrics=getFontMetrics();
  char[] chars=getText().toCharArray();
  int caretPosition=myText.length();
  int len=0;
  for (int i=0; i < myText.length(); i++) {
    int newLen=metrics.charsWidth(chars,0,i + 1);
    if (x <= (len + newLen + 1) / 2) {
      caretPosition=i;
      break;
    }
    len=newLen;
  }
  return caretPosition;
}
