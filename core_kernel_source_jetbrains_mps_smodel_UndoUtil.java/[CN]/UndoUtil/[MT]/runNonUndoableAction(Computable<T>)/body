{
  if (!ThreadUtils.isEventDispatchThread()) {
    return t.compute();
  }
 else {
    if (ourUndoBlocked) {
      LOG.errorWithTrace("non-undoable actions can not be nested");
      return null;
    }
    setUndoBlocked();
    try {
      return t.compute();
    }
  finally {
      setUndoUnblocked();
    }
  }
}
