{
  if (!ThreadUtils.isEventDispatchThread()) {
    r.run();
  }
 else {
    setUndoBlocked();
    r.run();
    setUndoUnblocked();
  }
}
