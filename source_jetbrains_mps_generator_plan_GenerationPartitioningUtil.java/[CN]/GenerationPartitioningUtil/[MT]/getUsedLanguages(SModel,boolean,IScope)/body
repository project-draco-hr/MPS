{
  Set<String> namespaces=new HashSet<String>(model.getEngagedOnGenerationLanguages());
  for (  SNode root : model.getRoots()) {
    collectLanguageNamespaces(root,namespaces,excludeTLBase);
  }
  List<Language> result=new ArrayList<Language>();
  for (  String namespace : namespaces) {
    Language language=scope.getLanguage(namespace);
    if (language != null) {
      result.add(language);
    }
 else {
      LOG.error("couldn't find language for namespace '" + namespace + "' in scope: "+ scope);
    }
  }
  return result;
}
