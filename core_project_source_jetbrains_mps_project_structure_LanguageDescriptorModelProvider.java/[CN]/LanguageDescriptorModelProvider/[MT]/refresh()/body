{
  ModelAccess.assertLegalWrite();
  Set<SModelReference> old=new HashSet<SModelReference>(myModels.keySet());
  for (  SModule module : myRepository.getModules()) {
    if (!Language.class.isInstance(module)) {
      continue;
    }
    final Language langModule=(Language)module;
    SModelReference ref=getSModelReference(langModule);
    if (myModels.containsKey(ref)) {
      old.remove(ref);
      LanguageModelDescriptor languageModelDescriptor=myModels.get(ref);
      if (languageModelDescriptor != null) {
        languageModelDescriptor.invalidate();
      }
    }
 else {
      createModel(langModule);
    }
  }
  for (  SModelReference mm : old) {
    LanguageModelDescriptor model=myModels.get(mm);
    if (model != null) {
      removeModel(model);
    }
  }
}
