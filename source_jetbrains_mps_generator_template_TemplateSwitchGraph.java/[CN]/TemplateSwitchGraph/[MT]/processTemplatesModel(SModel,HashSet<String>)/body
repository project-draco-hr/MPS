{
  if (processedModes.contains(templatesModel.getFQName())) {
    return;
  }
  processedModes.add(templatesModel.getFQName());
  for (  SemanticNode root : templatesModel.getRoots()) {
    if (root instanceof TemplateSwitch) {
      if (myTemplateSwitchToGraphNodeMap.get((TemplateSwitch)root) == null) {
        addSwitch((TemplateSwitch)root);
      }
    }
  }
  Iterator<SModel> iterator=templatesModel.importedModels();
  while (iterator.hasNext()) {
    SModel importedModel=iterator.next();
    if (importedModel.importsLanguage("jetbrains.mps.transformation.TLBase")) {
      processTemplatesModel(importedModel,processedModes);
    }
  }
}
