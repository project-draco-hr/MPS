{
  boolean useIoFile=MPSCore.getInstance().isTestMode() && "true".equals(System.getProperty("mps.vfs.useIoFile"));
  if (!useIoFile) {
    FileSystem.getInstance().setFileSystemProvider(new IdeaFileSystemProvider());
  }
  UndoHelper.getInstance().setUndoHandler(new WorkbenchUndoHandler());
  ModelAccess.setInstance(new WorkbenchModelAccess());
  MPSCore.getInstance().init();
  MPSTypesystem.getInstance().init();
  MPSGenerator.getInstance().init();
  MPSFindUsages.getInstance().init();
}
