{
  if (RoleIdsComponent.isEnabled()) {
    SNodeId roleId=RoleIdsComponent.getReferenceRolePointer(ref).getNodeId();
    return genReferenceId(getModelReferenceForConcept(ref.getSourceNode()),roleId);
  }
  SNode linkDecl=SLinkOperations.findLinkDeclaration(ref);
  return ((linkDecl == null) ? null : genReferenceId(linkDecl));
}
