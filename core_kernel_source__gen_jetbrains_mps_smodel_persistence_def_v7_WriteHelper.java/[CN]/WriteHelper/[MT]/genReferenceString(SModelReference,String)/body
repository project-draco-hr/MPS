{
  String index=MapSequence.fromMap(myModelIndex).get(ref);
  if (index == null) {
    if (log.isErrorEnabled()) {
      log.error("model " + ref + " not found in index");
    }
    return encode(text);
  }
  StringBuilder result=new StringBuilder();
  if (!(ref.equals(myModelRef))) {
    result.append(index).append(MODEL_SEPARATOR_CHAR);
  }
  return result.append(encode(text)).toString();
}
