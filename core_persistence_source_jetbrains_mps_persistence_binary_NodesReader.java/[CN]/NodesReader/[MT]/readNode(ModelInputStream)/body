{
  byte b=is.readByte();
  SConceptId cid=null;
  if (b == 0x71) {
    cid=readConceptId(is);
  }
  String cname=is.readString();
  SNodeId nodeId=is.readNodeId();
  String linkStr=is.readString();
  String linkName=is.readString();
  SContainmentLinkId nodeRole=linkStr == null ? null : SContainmentLinkId.deserialize(linkStr);
  byte nodeInfo=is.readByte();
  if (is.readByte() != '{') {
    throw new IOException("bad stream, no '{'");
  }
  boolean interfaceNode=false;
  if (myInterfaceOnly) {
    ConceptKind kind=getConceptKind(nodeInfo);
    interfaceNode=(kind == ConceptKind.INTERFACE || nodeRole == null);
  }
  SConcept c=cid == null ? MetaAdapterFactoryByName.getConcept(cname) : MetaAdapterFactory.getConcept(cid,cname);
  jetbrains.mps.smodel.SNode node=interfaceNode ? new InterfaceSNode(c) : new jetbrains.mps.smodel.SNode(c);
  node.setId(nodeId);
  readProperties(is,node);
  readReferences(is,node);
  readChildren(is,node);
  readUserObjects(is,node);
  if (is.readByte() != '}') {
    throw new IOException("bad stream, no '}'");
  }
  SContainmentLink linkAdapter=nodeRole == null ? null : MetaAdapterFactory.getContainmentLink(nodeRole,linkName);
  return new Pair<SContainmentLink,jetbrains.mps.smodel.SNode>(linkAdapter,node);
}
