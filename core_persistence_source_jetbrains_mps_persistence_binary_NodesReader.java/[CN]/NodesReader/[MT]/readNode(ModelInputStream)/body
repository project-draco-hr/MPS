{
  String conceptFqName=readConceptQualifiedName(is);
  SNodeId nodeId=is.readNodeId();
  String nodeRole=is.readString();
  byte nodeInfo=is.readByte();
  if (is.readByte() != '{') {
    throw new IOException("bad stream, no '{'");
  }
  boolean interfaceNode=false;
  if (myInterfaceOnly) {
    ConceptKind kind=getConceptKind(nodeInfo);
    interfaceNode=(kind == ConceptKind.INTERFACE || nodeRole == null);
  }
  jetbrains.mps.smodel.SNode node=interfaceNode ? new InterfaceSNode(InternUtil.intern(conceptFqName)) : new jetbrains.mps.smodel.SNode(InternUtil.intern(conceptFqName));
  node.setId(nodeId);
  readProperties(is,node);
  readReferences(is,node);
  readChildren(is,node);
  readUserObjects(is,node);
  if (is.readByte() != '}') {
    throw new IOException("bad stream, no '}'");
  }
  return new Pair<String,SNode>(nodeRole,node);
}
