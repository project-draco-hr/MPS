{
  super(editorContext);
  NodeReadAccessCasterInEditor.runReadTransparentAction(new Runnable(){
    public void run(){
      LinkDeclaration genuineLink=(LinkDeclaration)BaseAdapter.fromNode(SModelUtil.getGenuineLinkDeclaration(linkDeclaration));
      myLinkDeclaration=linkDeclaration;
      if (genuineLink == null) {
        return;
      }
      if (genuineLink.getMetaClass() != LinkMetaclass.reference) {
        LOG.error("only reference links are allowed here",linkDeclaration);
      }
      Cardinality sourceCardinality=genuineLink.getSourceCardinality();
      if (!(sourceCardinality == Cardinality._1 || sourceCardinality == Cardinality._0__1)) {
        LOG.error("only cardinalities 1 or 0..1 are allowed here",linkDeclaration);
      }
      mySourceNode=sourceNode;
      myCurrentReferent=sourceNode.getReferent(SModelUtil.getGenuineLinkRole(linkDeclaration));
    }
  }
);
}
