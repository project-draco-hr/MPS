{
  String templateModelsPath=myTemplateModelsDir.getText();
  if (templateModelsPath.length() == 0) {
    setErrorText("No template models root");
    return;
  }
  final File dir=new File(templateModelsPath);
  if (!dir.isAbsolute()) {
    setErrorText("Path should be absolute");
    return;
  }
  if (!dir.exists()) {
    dir.mkdirs();
  }
  final String name=myGeneratorName.getText();
  if (!isValidName(name)) {
    setErrorText("Only letters, digits and '_' can be used in generator name.");
    return;
  }
  dispose();
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      createNewGenerator(mySourceLanguage,dir,name);
    }
  }
);
}
