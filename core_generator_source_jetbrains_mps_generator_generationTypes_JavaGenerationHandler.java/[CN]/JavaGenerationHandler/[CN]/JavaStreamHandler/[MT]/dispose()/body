{
  Set<File> directories=new HashSet<File>();
  directories.add(myOutputDir);
  directories.add(myCachesOutputDir);
  for (  File f : myTouched) {
    directories.add(f.getParentFile());
  }
  for (  File f : myCreated) {
    directories.add(f.getParentFile());
  }
  final List<File> filesToDelete=new ArrayList<File>();
  for (  File dir : directories) {
    File[] files=dir.listFiles();
    if (files == null)     continue;
    for (    File outputDirectoryFile : files) {
      if (outputDirectoryFile.isDirectory())       continue;
      if (myTouched.contains(outputDirectoryFile))       continue;
      if (myCreated.contains(outputDirectoryFile))       continue;
      filesToDelete.add(outputDirectoryFile);
    }
  }
  FileProcessor.processVCSAddition(myCreated);
  FileProcessor.processVCSDeletion(filesToDelete);
  FileProcessor.invalidateRoot(myOutputDir,myContext);
  FileProcessor.invalidateRoot(myCachesOutputDir,myContext);
}
