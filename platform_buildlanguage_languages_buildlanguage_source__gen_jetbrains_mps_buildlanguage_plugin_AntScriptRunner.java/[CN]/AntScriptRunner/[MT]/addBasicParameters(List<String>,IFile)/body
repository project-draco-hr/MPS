{
  String javaHome=this.getJavaHome();
  ListSequence.fromList(parameters).addElement(AntScriptRunner.getJavaCommand(javaHome));
  addVmOptions(parameters);
  ListSequence.fromList(parameters).addElement("-Djava.home=" + javaHome);
  String antHome=PathManager.getHomePath() + File.separator + "lib"+ File.separator+ "ant";
  ListSequence.fromList(parameters).addElement("-Dant.home=" + antHome);
  ListSequence.fromList(parameters).addElement("-cp");
  String antLib=antHome + File.separator + "lib"+ File.separator;
  String pathSeparator=System.getProperty("path.separator");
  String classpath=antLib + "ant-launcher.jar" + pathSeparator+ antLib+ "ant.jar"+ pathSeparator+ antLib+ "ant-nodeps.jar";
  classpath+=pathSeparator + javaHome + File.separator+ "lib"+ File.separator+ "tools.jar";
  ListSequence.fromList(parameters).addElement(classpath);
  ListSequence.fromList(parameters).addElement("org.apache.tools.ant.launch.Launcher");
  ListSequence.fromList(parameters).addElement("-f");
  ListSequence.fromList(parameters).addElement(file.getPath());
}
