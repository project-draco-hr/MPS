{
  Iterable<String> classpath=getClasspath(withSvnkit);
  if (InternalFlag.isInternalMode()) {
    classpath=Sequence.<String>fromIterable(classpath).where(new IWhereFilter<String>(){
      public boolean accept(      String cpi){
        return cpi.endsWith(".jar");
      }
    }
).concat(ListSequence.<String>fromList(Arrays.asList(InternalRuntimePacker.getPath())));
  }
  String javaExecutable=System.getProperty("java.home") + File.separator + "bin"+ File.separator+ "java";
  String classpathString=StringUtils.join(Sequence.<String>fromIterable(classpath).toListSequence(),File.pathSeparator);
  String escapedLogPath=(PathManager.getLogPath() + File.separator + "mergedriver.log").replace("\\","\\\\");
  return String.format("\"%s\" -D%s=\"%s\" -cp \"%s\" %s",javaExecutable,MergeDriverMain.LOG_PROPERTY,escapedLogPath,classpathString,MergeDriverMain.class.getName());
}
