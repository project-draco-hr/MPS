{
  if (ApplicationManager.getApplication().isDisposed()) {
    return;
  }
  List<SModelEvent> events=new ArrayList<SModelEvent>();
synchronized (EVENTS_LOCK) {
    events.addAll(myLastEvents);
    myLastEvents.clear();
  }
  Set<IEditorChecker> checkers=new LinkedHashSet<IEditorChecker>();
  Set<IEditorChecker> checkersToRemove=new LinkedHashSet<IEditorChecker>();
synchronized (CHECKERS_LOCK) {
    checkers.addAll(myCheckers);
    checkersToRemove.addAll(myCheckersToRemove);
    myCheckersToRemove.clear();
  }
  boolean isUpdated=false;
  boolean inspectorIsUpdated=false;
  EditorComponent inspector=null;
  List<EditorComponent> allEditorComponents=getAllEditorComponents();
  cleanupCheckedOnce(allEditorComponents);
  try {
    TypeChecker.getInstance().enableGlobalSubtypingCache();
    for (    EditorComponent editorComponent : allEditorComponents) {
      if (updateEditorComponent(editorComponent,events,checkers,checkersToRemove,false)) {
        isUpdated=true;
      }
    }
    if (myInspectorTool != null && myInspectorTool.getInspector() != null) {
      inspector=myInspectorTool.getInspector();
      if (updateEditorComponent(inspector,events,checkers,checkersToRemove,isUpdated)) {
        inspectorIsUpdated=true;
      }
    }
  }
  finally {
    TypeChecker.getInstance().clearGlobalSubtypingCache();
  }
  if (isUpdated) {
    for (    EditorComponent editorComponent : allEditorComponents) {
      editorComponent.repaint();
      editorComponent.getMessagesGutter().repaint();
    }
  }
  if (inspectorIsUpdated) {
    inspector.repaint();
    inspector.getMessagesGutter().repaint();
  }
  for (  IEditorChecker checker : checkers) {
    checker.checkingIterationFinished();
  }
}
