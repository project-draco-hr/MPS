{
  if (SPropertyOperations.getString(routineDefinition,"name") == null) {
    return;
  }
  Iterable<SNode> defs;
  SNode parentScript=SNodeOperations.getAncestor(routineDefinition,"jetbrains.mps.samples.Kaja.structure.Script",false,false);
  if (parentScript != null) {
    defs=ListSequence.fromList(SNodeOperations.getDescendants(parentScript,"jetbrains.mps.samples.Kaja.structure.RoutineDefinition",false,new String[]{})).where(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return SPropertyOperations.getString(routineDefinition,"name").equals(SPropertyOperations.getString(it,"name"));
      }
    }
);
  }
 else {
    defs=ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.getAncestor(routineDefinition,"jetbrains.mps.samples.Kaja.structure.Library",false,false),"definitions",true)).where(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return SPropertyOperations.getString(routineDefinition,"name").equals(SPropertyOperations.getString(it,"name"));
      }
    }
);
  }
  if (Sequence.fromIterable(defs).count() > 1) {
{
      MessageTarget errorTarget=new NodeMessageTarget();
      IErrorReporter _reporter_2309309498=typeCheckingContext.reportTypeError(routineDefinition,"Routine names must be unique within a Script or a Library","r:af5f8eb9-49c0-4279-87d3-3c80b1a56988(jetbrains.mps.samples.Kaja.typesystem)","1904811872814128956",null,errorTarget);
    }
  }
}
