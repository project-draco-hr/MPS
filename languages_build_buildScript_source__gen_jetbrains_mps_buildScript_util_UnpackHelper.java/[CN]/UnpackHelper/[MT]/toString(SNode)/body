{
  StringBuilder sb=new StringBuilder();
  for (  SNode n : ListSequence.fromList(SLinkOperations.getTargets(text,"parts",true))) {
    if (SNodeOperations.isInstanceOf(n,"jetbrains.mps.buildScript.structure.BuildVarRefStringPart")) {
      sb.append("${");
      SNode macro=SLinkOperations.getTarget(SNodeOperations.cast(n,"jetbrains.mps.buildScript.structure.BuildVarRefStringPart"),"macro",false);
      sb.append("varsof." + SPropertyOperations.getString(SNodeOperations.getAncestor(macro,"jetbrains.mps.buildScript.structure.BuildProject",false,false),"name") + "."+ SPropertyOperations.getString(macro,"name"));
      sb.append("}");
      continue;
    }
    sb.append(BuildStringPart_Behavior.call_getText_4380385936562037054(n));
  }
  return sb.toString();
}
