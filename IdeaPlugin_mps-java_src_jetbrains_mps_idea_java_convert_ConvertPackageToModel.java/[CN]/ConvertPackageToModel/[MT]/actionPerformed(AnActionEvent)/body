{
  final PsiElement element=e.getData(LangDataKeys.PSI_ELEMENT);
  Module module=e.getData(LangDataKeys.MODULE);
  MPSFacet facet=FacetManager.getInstance(module).getFacetByType(MPSFacetType.ID);
  SModule mpsModule=facet.getSolution();
  MPSProject mpsProject=e.getProject().getComponent(MPSProject.class);
  VirtualFile dir=((PsiDirectory)element).getVirtualFile();
  IFile ifile=new IdeaFileSystemProvider().getFile(dir.getPath());
  final DirParser dirParser=new DirParser(mpsModule,mpsProject,ifile);
  try {
    dirParser.parseDirs();
  }
 catch (  JavaParseException exc) {
    throw new RuntimeException(exc);
  }
catch (  IOException exc) {
    throw new RuntimeException(exc);
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      element.delete();
    }
  }
);
}
