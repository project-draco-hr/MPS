{
  for (  PsiFile f : dir.getFiles()) {
    if (f instanceof PsiJavaFile) {
      result.add((PsiJavaFile)f);
    }
  }
  for (  PsiDirectory d : dir.getSubdirectories()) {
    collectPsiJavaFiles(d,result);
  }
}
