{
  if (myAdded) {
    throw new IllegalStateException(String.format("Trying to add tree node which have already been added, tree=%s, node=%s",myTree != null ? myTree.getClass().getName() : "null",getClass().getName()));
  }
  try {
    onAdd();
  }
 catch (  Throwable t) {
    LOG.error(t);
  }
  myAdded=true;
  if (!isInitialized()) {
    return;
  }
  for (int i=0; i < getChildCount(); i++) {
    MPSTreeNode node=(MPSTreeNode)getChildAt(i);
    node.addThisAndChildren();
  }
}
