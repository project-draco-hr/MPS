{
  updateLastGenerationTime(sm);
  for (  SNode outputRootNode : outputNodeContents.keySet()) {
    try {
      SNode originalInputNode=null;
      if (status.getTraceMap() != null) {
        originalInputNode=status.getTraceMap().getOriginalInputNode(outputRootNode);
      }
      IFileGenerator fileGenerator=gm.chooseFileGenerator(outputRootNode,originalInputNode);
      if (fileGenerator == null) {
        LOG.error("couldn't find file generator for output node: " + outputRootNode.getDebugText());
        gm.chooseFileGenerator(outputRootNode,originalInputNode);
      }
 else {
        File generatedFile=fileGenerator.generateFile(outputRootNode,originalInputNode,status.getSourceModel(),outputNodeContents.get(outputRootNode),outputRootDirectory);
        if (generatedFile != null) {
          generatedFiles.add(generatedFile);
          directories.add(generatedFile.getParentFile());
        }
      }
    }
 catch (    IOException e) {
      LOG.error(e);
    }
  }
}
