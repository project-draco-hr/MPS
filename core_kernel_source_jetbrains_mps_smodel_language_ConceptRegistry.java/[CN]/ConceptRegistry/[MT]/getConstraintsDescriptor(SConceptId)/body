{
  ConstraintsDescriptor descriptor=constraintsDescriptors.get(conceptId);
  if (descriptor != null) {
    return descriptor;
  }
  ConceptDescriptor conceptDescriptor=getConceptDescriptor(conceptId);
  if (!startLoad(conceptId,LanguageAspect.CONSTRAINTS)) {
    return new IllegalConstraintsDescriptor(conceptId,conceptDescriptor.getConceptFqName());
  }
  try {
    try {
      LanguageRuntime languageRuntime=myLanguageRegistry.getLanguage(conceptId.getLanguageId());
      ConstraintsAspectDescriptor constraintsAspectDescriptor;
      if (languageRuntime == null) {
        LOG.warn("No language for: " + conceptId + ", while looking for constraints descriptor.",new Throwable());
        constraintsAspectDescriptor=ConstraintsAspectInterpreted.getInstance();
      }
 else {
        constraintsAspectDescriptor=languageRuntime.getAspect(ConstraintsAspectDescriptor.class);
      }
      descriptor=constraintsAspectDescriptor != null ? constraintsAspectDescriptor.getDescriptor(conceptDescriptor.getId()) : null;
    }
 catch (    Throwable e) {
      LOG.warn("Exception while constraints descriptor creating",e);
    }
    if (descriptor == null) {
      descriptor=new IllegalConstraintsDescriptor(conceptId,conceptDescriptor.getConceptFqName());
    }
    constraintsDescriptors.put(conceptId,descriptor);
    return descriptor;
  }
  finally {
    finishLoad(conceptId,LanguageAspect.CONSTRAINTS);
  }
}
