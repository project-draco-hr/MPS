{
  SModel model=SNodeOperations.getModel(node);
  if (SNodeOperations.getParent(node) == null) {
    SNodeOperations.deleteNode(node);
    node.setId(id);
    SModelOperations.addRootNode(model,node);
  }
 else {
    SNode stubNode=new SNode(model,((String)BehaviorManager.getInstance().invoke(Object.class,SNodeOperations.cast(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.core.structure.BaseConcept"),"jetbrains.mps.lang.core.structure.INamedConcept"),"virtual_getFqName_1213877404258",new Class[]{SNode.class})));
    SNodeOperations.replaceWithAnother(node,stubNode);
    node.setId(id);
    SNodeOperations.replaceWithAnother(stubNode,node);
  }
}
