{
  PersistenceFacade persistenceRegistry=PersistenceFacade.getInstance();
  for (  String ext : persistenceRegistry.getModelFactoryExtensions()) {
    final ModelFactory mf=persistenceRegistry.getModelFactory(ext);
    if (mf instanceof IndexAwareModelFactory) {
      final FileType ft=MPSFileTypeFactory.findByExtension(ext);
      if (ft != null) {
        myIndexAwareFileTypes.put(ft,(IndexAwareModelFactory)mf);
      }
    }
  }
  IndexAwareModelFactory mf=myIndexAwareFileTypes.get(MPSFileTypeFactory.MPS_FILE_TYPE);
  if (mf != null) {
    myIndexAwareFileTypes.put(MPSFileTypeFactory.MPS_HEADER_FILE_TYPE,mf);
    myIndexAwareFileTypes.put(MPSFileTypeFactory.MPS_ROOT_FILE_TYPE,mf);
  }
}
