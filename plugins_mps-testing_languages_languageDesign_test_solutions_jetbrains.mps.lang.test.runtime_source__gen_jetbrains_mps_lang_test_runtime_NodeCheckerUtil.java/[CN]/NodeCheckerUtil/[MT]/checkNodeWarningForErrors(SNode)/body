{
  checkNodeWithCheckingAction(node,new NodeCheckerUtil.CheckingAction(node){
    public void checkOperation(    TypeCheckingContext context,    SNode operation){
      if (SNodeOperations.isInstanceOf(operation,"jetbrains.mps.lang.test.structure.NodeWarningCheckOperation")) {
        String errorString="node <" + NodeCheckerUtil.nodeWithIdToString(node) + "> has error instead of warning";
        Assert.assertTrue(errorString,context.getTypeMessageDontCheck(node) != null);
        MessageStatus status=context.getTypeMessageDontCheck(node).getMessageStatus();
        Assert.assertFalse(errorString,status == MessageStatus.ERROR);
        errorString="node <" + NodeCheckerUtil.nodeWithIdToString(node) + "> does not have expected warning message";
        Assert.assertTrue(errorString,status == MessageStatus.WARNING && NodeCheckerUtil.nodeHasExpectedRuleMessage(node,context,operation));
      }
    }
  }
);
}
