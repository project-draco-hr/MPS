{
  List<SModule> result=new ArrayList<SModule>();
  final Logger log=LogManager.getLogger(ModulesScope.class);
  for (  Element moduleXml : element.getChildren(MODULE_TAG)) {
    try {
      final String moduleRef=moduleXml.getAttributeValue(MODULE_ID);
      if (moduleRef == null) {
        continue;
      }
      SModuleReference mr=PersistenceFacade.getInstance().createModuleReference(moduleRef);
      final SModule module=mr.resolve(repo);
      if (module != null) {
        result.add(module);
      }
 else {
        log.warn("module not found " + moduleRef);
      }
    }
 catch (    IllegalArgumentException e) {
      throw new CantLoadSomethingException(e);
    }
  }
  return result;
}
