{
  SNode var=myNodesToTypes.get(node);
  SNode type=myState.getEquations().expandNode(var,finalExpansion);
  updateNodeToType(node,type,null);
  if (finalExpansion && (type == null || TypesUtil.isVariable(type))) {
    if (!ValidationSettings.getInstance().getModelValidationSettings().isDisableTypeWasNotCalculated()) {
      myState.getTypeCheckingContext().reportWarning(node,"Type " + type + " was not calculated",null,null,null,new NodeMessageTarget());
    }
  }
}
