{
  processAccumulatedEvents();
  final Set<EditorCheckerWrapper> checkers=new LinkedHashSet<>();
  if (!EditorSettings.getInstance().isPowerSaveMode() || myForceUpdateInPowerSaveModeFlag) {
    for (    EditorCheckerWrapper checker : myCheckers) {
      if (checker.isEssential() || !essentialOnly) {
        checkers.add(checker);
      }
    }
    checkers.addAll(myCheckers);
    myForceUpdateInPowerSaveModeFlag=false;
  }
  if (EditorSettings.getInstance().isPowerSaveMode()) {
    myEditorTracker.markEverythingUnchecked();
  }
 else {
    myEditorTracker.markOnlyEditorsChecked(activeEditors);
  }
  return new HighlighterUpdateSession(Highlighter.this,checkers,activeEditors,getInspector());
}
