{
  LocalFileSystem.WatchRequest request=myGlobalRequests.get(requestor);
  myGlobalRequests.remove(requestor);
  if (request != null) {
    myLocalFileSystem.removeWatchedRoot(request);
  }
  List<String> pathsToWatch=ListSequence.fromList(new ArrayList<String>());
  for (  String path : myRequestedPaths.keySet()) {
    if (!(FileUtil.isSubPath(requestor.getDirectory(),path))) {
      continue;
    }
    if (!(myOtherRequests.containsKey(path))) {
      ListSequence.fromList(pathsToWatch).addElement(path);
    }
  }
  ListSequence.fromList(pathsToWatch).visitAll(new IVisitor<String>(){
    public void visit(    String it){
      maybeAddWatchRequest(it);
    }
  }
);
}
