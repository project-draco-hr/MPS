{
  Set<Language> languages=new HashSet<Language>(LibraryManager.getInstance().getGlobalModules(Language.class));
  for (  Project p : ProjectManager.getInstance().getOpenProjects()) {
    MPSProject mpsProject=p.getComponent(MPSProjectHolder.class).getMPSProject();
    for (    Solution s : mpsProject.getProjectSolutions()) {
      languages.addAll(s.getScope().getVisibleLanguages());
    }
    for (    Language l : mpsProject.getProjectLanguages()) {
      languages.add(l);
    }
  }
  return languages;
}
