{
  Set<IModule> modules=new HashSet<IModule>();
  modules.add(PluginUtil.getIDEModule());
  for (  Project p : ProjectManager.getInstance().getOpenProjects()) {
    MPSProject mpsProject=p.getComponent(MPSProjectHolder.class).getMPSProject();
    modules.addAll(PluginUtil.collectPluginModules(mpsProject));
  }
  List<BaseApplicationPlugin> plugins=PluginUtil.createPlugins(modules,new ApplicationPluginCreator());
  for (  BaseApplicationPlugin p : plugins) {
    if (p.getClass().getName().equals(Ide_ApplicationPlugin.class.getName())) {
      myIDEPlugin=p;
      break;
    }
  }
  return plugins;
}
