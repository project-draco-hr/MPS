{
  Object result=resolveReference();
  if (result instanceof SNode) {
    myOutputTargetNode=(SNode)result;
  }
 else   if (result != null) {
    myResolveInfoForDynamicResolve=(String)result;
  }
  if (myOutputTargetNode == null) {
    return;
  }
  if (myOutputTargetNode.getModel() == generator.getInputModel()) {
    SNode outputTargetNode_output=generator.findCopiedOutputNodeForInputNode(myOutputTargetNode);
    if (outputTargetNode_output != null) {
      myOutputTargetNode=outputTargetNode_output;
    }
 else {
      final String msg="reference macro returned node from input model; role: %s in %s";
      generator.getLogger().warning(getMacroNodeRef(),String.format(msg,getReferenceRole(),SNodeOperations.getDebugText(getOutputSourceNode())),GeneratorUtil.describe(getOutputSourceNode(),"source node"),GeneratorUtil.describeIfExists(myOutputTargetNode,"target node in input model"));
    }
  }
}
