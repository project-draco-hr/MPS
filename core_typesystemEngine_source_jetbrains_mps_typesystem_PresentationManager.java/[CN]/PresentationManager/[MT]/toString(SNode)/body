{
  if (type == null)   return null;
  if (HUtil.isRuntimeTypeVariable(type)) {
    return (type).getName();
  }
  if (jetbrains.mps.util.SNodeOperations.isUnknown(type)) {
    String persistentName=type.getName();
    if (persistentName == null) {
      return "?" + NameUtil.shortNameFromLongName(type.getConcept().getQualifiedName()) + "?";
    }
    return "?" + persistentName + "?";
  }
  try {
    return SNodeUtil.getDetailedPresentation(type);
  }
 catch (  RuntimeException t) {
    LOG.error(null,t);
    return "[can't calculate presentation : " + t.getMessage() + "]";
  }
}
