{
  final CyclicBarrier barrier=new CyclicBarrier(3);
  try {
    Process p=pb.start();
    copyStream(p.getErrorStream(),System.err,barrier);
    copyStream(p.getInputStream(),System.out,barrier);
    p.waitFor();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
catch (  InterruptedException e) {
    e.printStackTrace();
  }
  try {
    barrier.await();
  }
 catch (  InterruptedException e) {
  }
catch (  BrokenBarrierException e) {
  }
}
