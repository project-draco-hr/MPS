{
  Font defaultFont=EditorSettings.getInstance().getDefaultEditorFont();
  Integer styleFontSize=myStyle.get(StyleAttributes.FONT_SIZE);
  String family=defaultFont.getFamily();
  Integer style=myStyle.get(StyleAttributes.FONT_STYLE);
  int fontSize=styleFontSize != null ? styleFontSize : defaultFont.getSize();
  myFont=new Font(family,style,fontSize);
  FontMetrics metrics=getFontMetrics();
  myHeight=(int)(metrics.getHeight() * myLineSpacing + getPaddingTop() + getPaddingBottom());
  myTextHeight=(int)(metrics.getHeight() * myLineSpacing);
  int minWidth=calculateMinWidth(metrics);
  int width=metrics.charsWidth(myText.toCharArray(),0,myText.length()) + getPaddingLeft() + getPaddingRight();
  myWidth=Math.max(minWidth,width);
  myDescent=metrics.getDescent();
}
