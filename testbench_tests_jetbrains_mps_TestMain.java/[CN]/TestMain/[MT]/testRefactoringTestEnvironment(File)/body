{
  IdeMain.setTestMode(TestMode.CORE_TEST);
  TestMain.configureMPS();
  File projectFile=new File(projectDirectory,"testRefactoring" + MPSExtentions.DOT_MPS_PROJECT);
  final MPSProject project=loadProject(projectFile);
  final boolean[] b=new boolean[]{true};
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      if (getSandbox1(project) == null) {
        b[0]=false;
        return;
      }
      if (getSandbox2(project) == null) {
        b[0]=false;
        return;
      }
      if (getTestRefactoringLanguage(project) == null) {
        b[0]=false;
        return;
      }
      if (getTestRefactoringTargetLanguage(project) == null) {
        b[0]=false;
        return;
      }
    }
  }
);
  ThreadUtils.runInUIThreadNoWait(new Runnable(){
    public void run(){
      project.dispose();
    }
  }
);
  return b[0];
}
