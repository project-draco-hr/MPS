{
  if (myDisposed)   throw new IllegalStateException(myDisposedTrace);
  myDisposed=true;
  myDisposedTrace=new Throwable("Editor was disposed by: ");
  if (IdeMain.getTestMode() != TestMode.CORE_TEST) {
    hideMessageToolTip();
  }
  myHighlightManager.dispose();
  removeOurListeners();
  EditorSettings.getInstance().removeEditorSettingsListener(mySettingsListener);
  ClassLoaderManager.getInstance().removeReloadHandler(myReloadListener);
  KeyboardFocusManager.getCurrentKeyboardFocusManager().removePropertyChangeListener("focusOwner",myFocusListener);
  clearCaches();
  myEventsCollector.dispose();
  myLeftHighlighter.dispose();
  myMessagesGutter.dispose();
  setEditorContext(null);
  if (myNodeSubstituteChooser != null) {
    myNodeSubstituteChooser.dispose();
  }
  if (myRootCell != null) {
    ((EditorCell_Basic)myRootCell).onRemove();
    myRootCell=null;
  }
  mySelectedCell=null;
}
