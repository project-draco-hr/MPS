{
  Set<SNode> nodesWhichEditorDependedOn=myCellsToNodesToDependOnMap.get(myRootCell);
  if (nodesWhichEditorDependedOn == null) {
    nodesWhichEditorDependedOn=new HashSet<SNode>();
  }
  if (myRootCell != null) {
    ((EditorCell_Basic)myRootCell).onRemove();
  }
  myRootCell=rootCell;
  if (myRootCell != null) {
    ((EditorCell_Basic)myRootCell).onAdd();
  }
  requestRelayout();
  Set<SNode> nodesWhichEditorDependsOn=myCellsToNodesToDependOnMap.get(myRootCell);
  if (nodesWhichEditorDependsOn == null) {
    nodesWhichEditorDependsOn=new HashSet<SNode>();
  }
  Set<SModelReference> oldsDeps=getModels(nodesWhichEditorDependedOn);
  Set<SModelReference> newDeps=getModels(nodesWhichEditorDependsOn);
  IScope scope=GlobalScope.getInstance();
  for (  SModelReference newDep : newDeps) {
    if (!oldsDeps.contains(newDep)) {
      SModelDescriptor sm=scope.getModelDescriptor(newDep);
      if (sm != null) {
        addOurListeners(sm);
      }
    }
  }
  for (  SModelReference oldDep : oldsDeps) {
    if (!newDeps.contains(oldDep)) {
      SModelDescriptor sm=scope.getModelDescriptor(oldDep);
      if (sm != null) {
        removeOurListeners(sm);
      }
    }
  }
  Set<SNodePointer> refTargetsWhichEditorDependsOn=myCellsToRefTargetsToDependOnMap.get(myRootCell);
  if (refTargetsWhichEditorDependsOn != null) {
    Set<SNodePointer> nodeProxiesToDelete=new HashSet<SNodePointer>();
    for (    SNodePointer nodeProxy : refTargetsWhichEditorDependsOn) {
      SModelDescriptor model=nodeProxy.getModel();
      if (model == null) {
        nodeProxiesToDelete.add(nodeProxy);
        continue;
      }
      if (!newDeps.contains(model.getSModelReference())) {
        addOurListeners(model);
      }
    }
    refTargetsWhichEditorDependsOn.removeAll(nodeProxiesToDelete);
  }
  revalidate();
  repaint();
}
