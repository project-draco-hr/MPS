{
  for (  SNode node : new NodesIterable(myModel)) {
    addRoleLocation(ptr(SNodeOperations.getContainingLinkDeclaration(node)),node);
    addTypeLocation(ptr(SNodeOperations.getConceptDeclaration(node)),node);
    for (    String prop : SetSequence.fromSet(jetbrains.mps.util.SNodeOperations.getProperties(node).keySet())) {
      addNameLocation(ptr(((jetbrains.mps.smodel.SNode)node).getPropertyDeclaration(prop)),node,prop);
    }
    for (    SReference ref : Sequence.fromIterable(SNodeOperations.getReferences(node))) {
      addRoleLocation(ptr(SLinkOperations.findLinkDeclaration(ref)),ref);
      if (ref instanceof StaticReference) {
        addTargetLocation(ptr(SLinkOperations.getTargetNode(ref)),(StaticReference)ref);
      }
 else {
        addDynamicReference(ref.getTargetSModelReference(),(DynamicReference)ref);
      }
    }
  }
  return this;
}
