{
  List<SNodeReference> ptrList=SetSequence.fromSet(MapSequence.fromMap(map).keySet()).where(new IWhereFilter<SNodeReference>(){
    public boolean accept(    SNodeReference it){
      return oldModel.equals(it.getModelReference());
    }
  }
).toListSequence();
  for (  SNodeReference ptr : ListSequence.fromList(ptrList)) {
    List<T> list=MapSequence.fromMap(map).removeKey(ptr);
    MapSequence.fromMap(map).put(new SNodePointer(newModel,ptr.getNodeId()),list);
  }
}
