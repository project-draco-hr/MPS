{
  List<SNodePointer> ptrList=SetSequence.<SNodePointer>fromSet(MapSequence.fromMap(map).keySet()).where(new IWhereFilter<SNodePointer>(){
    public boolean accept(    SNodePointer it){
      return oldModel.equals(it.getModelReference());
    }
  }
).toListSequence();
  for (  SNodePointer ptr : ListSequence.<SNodePointer>fromList(ptrList)) {
    List<T> list=MapSequence.fromMap(map).removeKey(ptr);
    MapSequence.<SNodePointer,List<T>>fromMap(map).put(new SNodePointer(newModel,ptr.getNodeId()),list);
  }
}
