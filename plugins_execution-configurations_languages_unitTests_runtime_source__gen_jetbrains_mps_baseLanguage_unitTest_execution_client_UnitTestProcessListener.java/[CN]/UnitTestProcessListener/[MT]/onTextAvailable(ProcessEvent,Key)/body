{
  if (this.isTerminatedEvent()) {
    this.myDispatcher.onProcessTerminated(event.getText());
  }
  boolean error=ProcessOutputTypes.STDERR.equals(k);
  boolean system=ProcessOutputTypes.SYSTEM.equals(k);
  String text=(error || system ? event.getText() : this.getLine(event.getText()));
  if (text == null) {
    return;
  }
  String textTrimmed=StringUtils.trimBoth(text);
  TestEvent testEvent=TestEvent.parse(textTrimmed);
  if (testEvent != null) {
    myLastEvent=testEvent;
    this.myDispatcher.onTestEvent(testEvent);
  }
 else {
    if (myLastEvent != null && (TestEvent.FAILURE_TEST_PREFIX.equals(myLastEvent.getToken()) || TestEvent.ERROR_TEST_PREFIX.equals(myLastEvent.getToken()))) {
      k=ProcessOutputTypes.STDERR;
    }
    this.myDispatcher.onSimpleTextAvailable(text,k);
  }
}
