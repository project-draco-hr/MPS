{
  ModelCheckerViewer viewer=createViewerForTab();
  viewer.checkModels(models,"models");
  SearchResults<ModelCheckerIssue> issues=viewer.getSearchResults();
  if (issues == null) {
    return CheckinHandler.ReturnResult.CANCEL;
  }
  int warnings=ModelCheckerUtils.getIssueCountForSeverity(issues,ModelChecker.SEVERITY_WARNING);
  int errors=ModelCheckerUtils.getIssueCountForSeverity(issues,ModelChecker.SEVERITY_ERROR);
  if (errors != 0) {
    String dialogMessage="Model checker found " + errors + " errors and "+ warnings+ " warnings. Would you like to review them?";
    int dialogAnswer=Messages.showDialog(myProject,dialogMessage,"Model Checking",new String[]{"Review","Commit","Cancel"},0,null);
    if (dialogAnswer == 0) {
      this.showTabWithResults(viewer,"Pre-commit check",IdeIcons.MODEL_ICON);
      return CheckinHandler.ReturnResult.CLOSE_WINDOW;
    }
 else     if (dialogAnswer == 1) {
      return CheckinHandler.ReturnResult.COMMIT;
    }
 else     if (dialogAnswer == 2 || dialogAnswer == -1) {
      return CheckinHandler.ReturnResult.CANCEL;
    }
  }
  return CheckinHandler.ReturnResult.COMMIT;
}
