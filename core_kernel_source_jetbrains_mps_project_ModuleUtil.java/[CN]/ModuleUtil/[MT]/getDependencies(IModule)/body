{
  Iterable<IModule> dependencies=new TranslatingIterator<SDependency,IModule>(module.getDeclaredDependencies().iterator()){
    @Override protected IModule translate(    SDependency dep){
      return (IModule)dep.getTarget();
    }
  }
;
  Iterable<IModule> solutionsFromDevkits=new TranslatingIterator<SModuleReference,IModule>(new CollectingManyIterator<DevKit,SModuleReference>(includingExtended(usedDevkits(module)).iterator()){
    @Override protected Iterator<SModuleReference> translate(    DevKit devkit){
      return devkit.getExportedSolutions_internal().iterator();
    }
  }
){
    @Override protected IModule translate(    SModuleReference node){
      return ModuleRepositoryFacade.getInstance().getModule(node,Solution.class);
    }
  }
;
  if (module instanceof Language) {
    Language core=BootstrapLanguages.coreLanguage();
    return IterableUtil.distinct(IterableUtil.merge(dependencies,solutionsFromDevkits,Collections.<IModule>singleton(core)));
  }
  return IterableUtil.distinct(IterableUtil.merge(dependencies,solutionsFromDevkits));
}
