{
  this.oldLevel=org.apache.log4j.Logger.getRootLogger().getLevel();
  org.apache.log4j.Logger.getRootLogger().setLevel(WATCH_LEVEL);
  initCaches();
  this.app=new CachingAppender();
  org.apache.log4j.Logger.getRootLogger().addAppender(app);
  ExpectLogEvent ignoreEvent=desc.getAnnotation(ExpectLogEvent.class);
  if (ignoreEvent != null) {
    for (    String text : ignoreEvent.text()) {
      app.expectEvent(ignoreEvent.level(),text);
    }
  }
  for (  Logger ignore : IGNORED_LOGGERS) {
    ignore.setLevel(Level.FATAL);
  }
  this.threadWatcher=new ThreadWatcher(true);
}
