{
  if (b == -1) {
    return a;
  }
  if (a == -1) {
    return b;
  }
  VcsRevisionNumber aRevision=myFileAnnotation.getLineRevisionNumber(a);
  VcsRevisionNumber bRevision=myFileAnnotation.getLineRevisionNumber(b);
  if (bRevision == null) {
    return a;
  }
  if (aRevision == null) {
    return b;
  }
  int c=aRevision.compareTo(bRevision);
  if (MapSequence.<VcsRevisionNumber,VcsFileRevision>fromMap(myRevisionNumberToRevision).get(aRevision) != null && MapSequence.<VcsRevisionNumber,VcsFileRevision>fromMap(myRevisionNumberToRevision).get(bRevision) != null) {
    c=MapSequence.<VcsRevisionNumber,VcsFileRevision>fromMap(myRevisionNumberToRevision).get(aRevision).getRevisionDate().compareTo(MapSequence.<VcsRevisionNumber,VcsFileRevision>fromMap(myRevisionNumberToRevision).get(bRevision).getRevisionDate());
  }
  if (c < 0) {
    return b;
  }
  return a;
}
