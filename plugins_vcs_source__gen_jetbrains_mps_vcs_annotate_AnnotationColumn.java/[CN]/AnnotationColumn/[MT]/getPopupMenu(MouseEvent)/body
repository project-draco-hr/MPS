{
  List<AnAction> actions=ListSequence.<AnAction>fromList(new ArrayList<AnAction>());
  final int fileLine=findFileLineByY(event.getY());
  ListSequence.<AnAction>fromList(actions).addElement(new BaseAction("Close Annotations"){
    protected void doExecute(    AnActionEvent e,    Map<String,Object> _params){
      close();
    }
  }
);
  ListSequence.<AnAction>fromList(actions).addElement(Separator.getInstance());
  ListSequence.<AnAction>fromList(actions).addElement(myViewActionGroup);
  if (fileLine != -1) {
    ListSequence.<AnAction>fromList(actions).addElement(new AnnotationColumn.ShowDiffFromAnnotationAction(fileLine));
    ListSequence.<AnAction>fromList(actions).addElement(new BaseAction("Copy revision number"){
      protected void doExecute(      AnActionEvent e,      Map<String,Object> params){
        String asString=myFileAnnotation.getLineRevisionNumber(fileLine).asString();
        CopyPasteManager.getInstance().setContents(new TextTransferrable(asString,asString));
      }
    }
);
  }
  ListSequence.<AnAction>fromList(actions).addElement(Separator.getInstance());
  ListSequence.<AnAction>fromList(actions).addElement(myRevisionRange);
  ListSequence.<AnAction>fromList(actions).addElement(new ShowAdditionalInfoAction(this));
  DefaultActionGroup actionGroup=ActionUtils.groupFromActions(ListSequence.<AnAction>fromList(actions).toGenericArray(AnAction.class));
  return ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UNKNOWN,actionGroup).getComponent();
}
