{
  if (myRoleId != null && role != null) {
    return true;
  }
  if (myRoleId == null) {
    SNode concept=SModelUtil.findConceptDeclaration(conceptName);
    SConceptId cid=IdHelper.getConceptId((jetbrains.mps.smodel.SNode)concept);
    final ConceptAndSuperConceptsScope scope=new ConceptAndSuperConceptsScope(concept);
    SNode linkNode=scope.getLinkDeclarationByRole(role);
    myRoleId=new SReferenceLink111(cid,IdHelper.getNodeId((jetbrains.mps.smodel.SNode)linkNode));
  }
 else {
    SAbstractConceptAdapter adapter=new SAbstractConceptAdapter(myRoleId.getConcept());
    conceptName=adapter.getQualifiedName();
    SNode node=adapter.getConceptDeclarationNode();
    if (node == null) {
      return false;
    }
    role=node.getModel().getNode(new SNodeId.Regular(myRoleId.getReferenceLinkId())).getProperty("role");
  }
  return true;
}
