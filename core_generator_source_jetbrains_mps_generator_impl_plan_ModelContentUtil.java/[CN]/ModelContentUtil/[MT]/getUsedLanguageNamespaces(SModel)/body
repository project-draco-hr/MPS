{
  Set<String> namespaces=new HashSet<String>();
  for (  SModuleReference ref : ((jetbrains.mps.smodel.SModelInternal)model).engagedOnGenerationLanguages()) {
    namespaces.add(ref.getModuleName());
  }
  if (SModelStereotype.isGeneratorModel(model)) {
    TemplateModelScanner templateModelScanner=new TemplateModelScanner(model);
    templateModelScanner.scan();
    namespaces.addAll(templateModelScanner.getQueryLanguages());
    return namespaces;
  }
  for (  SNode child : SNodeUtil.getDescendants(model)) {
    namespaces.add(child.getConcept().getLanguage().getQualifiedName());
  }
  if (model.getModule() instanceof Language && LanguageAspect.BEHAVIOR.is(model)) {
    namespaces.add(BootstrapLanguages.BEHAVIOR_NAMESPACE);
  }
  return namespaces;
}
