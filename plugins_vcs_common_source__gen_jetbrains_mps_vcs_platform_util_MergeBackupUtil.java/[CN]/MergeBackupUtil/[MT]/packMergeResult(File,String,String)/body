{
  try {
    File tmp=FileUtil.createTmpDir();
    ZipUtil.extract(file,tmp,null);
    FileUtil.writeFile(new File(tmp + File.separator + fileName+ ".result"),resultContent);
    File logsDir=new File(PathManager.getLogPath());
    File[] logfiles=logsDir.listFiles(new FilenameFilter(){
      @Override public boolean accept(      File dir,      String name){
        return name.matches("mpsvcs\\.log(\\.1)?") || name.matches("mps\\.log(\\.1)?");
      }
    }
);
    File tmpLogDir=new File(tmp + File.separator + "logs");
    tmpLogDir.mkdir();
    for (    File logfile : logfiles) {
      FileUtil.copyFile(logfile,new File(tmpLogDir + File.separator + logfile.getName()));
    }
    FileUtil.zip(tmp,file);
    FileUtil.delete(tmp);
  }
 catch (  IOException e) {
    if (LOG.isEnabledFor(Priority.ERROR)) {
      LOG.error("",e);
    }
  }
}
