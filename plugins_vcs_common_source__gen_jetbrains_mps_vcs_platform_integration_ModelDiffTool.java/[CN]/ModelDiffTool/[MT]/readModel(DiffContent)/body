{
  if ((content instanceof DocumentContent || content instanceof FileContent) && content.getFile() != null) {
    final org.jetbrains.mps.openapi.model.SModel modelDescriptor=SModelFileTracker.getInstance().findModel(VirtualFileUtils.toIFile(content.getFile()));
    if (modelDescriptor != null) {
      return ((BaseSModelDescriptor)modelDescriptor).getSModelInternal();
    }
  }
  try {
    byte[] bytes=content.getBytes();
    if (bytes.length == 0) {
      return new DefaultSModel(new jetbrains.mps.smodel.SModelReference("",""));
    }
    return ModelPersistence.readModel(new String(bytes,FileUtil.DEFAULT_CHARSET),false);
  }
 catch (  IOException ioe) {
    throw new ModelReadException("Couldn't read content: " + ioe.getMessage(),ioe);
  }
}
