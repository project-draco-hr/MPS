{
  if ((content instanceof DocumentContent || content instanceof FileContent) && content.getFile() != null) {
    IFile file=VirtualFileUtils.toIFile(content.getFile());
    SModel model=SModelFileTracker.getInstance().findModel(file);
    if (model == null && FilePerRootDataSource.isPerRootPersistenceFile(file)) {
      model=SModelFileTracker.getInstance().findModel(file.getParent());
    }
    if (model != null) {
      return model;
    }
  }
  try {
    byte[] bytes=content.getBytes();
    FileType contentType=content.getContentType();
    if (bytes.length == 0) {
      return new MergeTemporaryModel(new SModelReference("",""),true);
    }
    return PersistenceUtil.loadModel(new String(bytes,FileUtil.DEFAULT_CHARSET),MPSExtentions.MODEL);
  }
 catch (  IOException ioe) {
    throw new ModelReadException("Couldn't read content: " + ioe.getMessage(),ioe);
  }
}
