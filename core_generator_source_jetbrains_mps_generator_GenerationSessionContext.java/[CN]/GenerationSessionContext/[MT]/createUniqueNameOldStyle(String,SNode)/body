{
  if (contextNode != null) {
    SNode topmostNamed=null;
    SNode node_=contextNode;
    final SAbstractConcept namedConcept=SConceptRepository.getInstance().getConcept(SNodeUtil.concept_INamedConcept);
    while (node_ != null) {
      if (node_.getConcept().isSubConceptOf(namedConcept)) {
        topmostNamed=node_;
      }
      node_=node_.getParent();
    }
    if (topmostNamed != null) {
      String name=topmostNamed.getName();
      if (name != null) {
        String contextSuffix=String.valueOf(name.hashCode());
        if (contextSuffix.length() > 4) {
          contextSuffix=contextSuffix.substring(contextSuffix.length() - 4);
        }
        roughName=roughName + contextSuffix + "_";
      }
    }
  }
  String uniqueName;
  int count=0;
  final Set<String> usedNames=getUsedNames(null);
  while (true) {
    uniqueName=roughName + (count++);
    if (!usedNames.contains(uniqueName))     break;
  }
  usedNames.add(uniqueName);
  return uniqueName;
}
