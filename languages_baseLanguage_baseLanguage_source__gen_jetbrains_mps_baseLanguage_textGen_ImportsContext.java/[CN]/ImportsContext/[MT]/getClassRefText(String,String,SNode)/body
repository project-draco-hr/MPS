{
  String simpleName=JavaNameUtil.shortName(fqName);
  Map<String,String> nestedClassifiersBinding=getContextClassifiers(contextNode);
  if (SetSequence.fromSet(classifiersInRoot).contains(fqName)) {
    return new ImportsContext.ClassifierRefText(nestedName(packageName,fqName),false);
  }
  if (MapSequence.fromMap(nestedClassifiersBinding).containsKey(simpleName)) {
    if (fqName.equals(MapSequence.fromMap(nestedClassifiersBinding).get(simpleName))) {
      return new ImportsContext.ClassifierRefText(simpleName,false);
    }
 else {
      return new ImportsContext.ClassifierRefText(fqName,false);
    }
  }
  if (MapSequence.fromMap(bindings).containsKey(simpleName)) {
    if (fqName.equals(MapSequence.fromMap(bindings).get(simpleName))) {
      return new ImportsContext.ClassifierRefText(simpleName,false);
    }
 else {
      return new ImportsContext.ClassifierRefText(fqName,false);
    }
  }
  MapSequence.fromMap(bindings).put(simpleName,fqName);
  addDependency(packageName,fqName);
  if (packageName.equals(this.packageName)) {
    boolean isRootClassifier=(packageName.length() + simpleName.length() + 1) == fqName.length();
    return new ImportsContext.ClassifierRefText(simpleName,!(isRootClassifier));
  }
  if (packageName.equals("java.lang")) {
    return new ImportsContext.ClassifierRefText(simpleName,SetSequence.fromSet(packageSimpleNames).contains(simpleName));
  }
  return new ImportsContext.ClassifierRefText(simpleName,true);
}
