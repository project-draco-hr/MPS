{
  SModel model=new SModel(descriptor.getSModelReference(),new ForeignNodeIdMap());
  model.setLoading(true);
  try {
    for (    Language l : getLanguagesToImport()) {
      model.addLanguage(l.getModuleReference());
      module.addUsedLanguage(l.getModuleReference());
    }
    for (    String dir : getStubPaths()) {
      new ASMModelLoader(module,FileSystem.getInstance().getFileByPath(dir),model).updateModel();
    }
  }
  finally {
    model.setLoading(false);
  }
  return new ModelLoadResult(model,ModelLoadingState.FULLY_LOADED);
}
