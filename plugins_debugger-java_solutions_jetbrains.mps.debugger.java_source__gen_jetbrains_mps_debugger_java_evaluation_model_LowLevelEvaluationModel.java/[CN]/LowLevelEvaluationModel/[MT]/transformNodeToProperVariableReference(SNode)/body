{
  if ((int)ListSequence.fromList(SNodeOperations.getReferences(node)).count() == 1) {
    final SReference reference=ListSequence.fromList(SNodeOperations.getReferences(node)).first();
    if (neq_qkk2f2_a0a1a0a8(SNodeOperations.getModel(SLinkOperations.getTargetNode(reference)),myAuxModel.getSModel()) && SNodeOperations.isInstanceOf(SLinkOperations.getTargetNode(reference),"jetbrains.mps.lang.core.structure.INamedConcept")) {
      SNode matchingVar=ListSequence.fromList(SLinkOperations.getTargets(myEvaluator,"variables",true)).findFirst(new IWhereFilter<SNode>(){
        public boolean accept(        SNode variable){
          return eq_qkk2f2_a0a0a0a0a0a0a1a0a8(SPropertyOperations.getString(variable,"highLevelNodeId"),SLinkOperations.getTargetNode(reference).getSNodeId().toString());
        }
      }
);
      if (matchingVar == null) {
        matchingVar=ListSequence.fromList(SLinkOperations.getTargets(myEvaluator,"variables",true)).findFirst(new IWhereFilter<SNode>(){
          public boolean accept(          SNode variable){
            return eq_qkk2f2_a0a0a0a0a0a0a1a1a0a8(SPropertyOperations.getString(variable,"name"),SPropertyOperations.getString(SNodeOperations.cast(SLinkOperations.getTargetNode(reference),"jetbrains.mps.lang.core.structure.INamedConcept"),"name"));
          }
        }
);
      }
      if (matchingVar != null) {
        SNode newVariableReference=SConceptOperations.createNewNode("jetbrains.mps.debug.evaluation.structure.LowLevelVariableReference",null);
        SLinkOperations.setTarget(newVariableReference,"baseVariableDeclaration",matchingVar,false);
        SNodeOperations.replaceWithAnother(node,newVariableReference);
      }
    }
  }
}
