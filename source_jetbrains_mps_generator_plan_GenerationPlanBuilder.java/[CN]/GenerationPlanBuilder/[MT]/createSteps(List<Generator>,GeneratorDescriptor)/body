{
  for (  Generator generator : generators) {
    myAllMappings.addAll(generator.getOwnMappings());
  }
  Map<MappingConfiguration,Map<MappingConfiguration,MappingPriorityRule>> priorityMap=new HashMap<MappingConfiguration,Map<MappingConfiguration,MappingPriorityRule>>();
  for (  MappingConfiguration mapping : myAllMappings) {
    if (!priorityMap.containsKey(mapping)) {
      priorityMap.put(mapping,new HashMap<MappingConfiguration,MappingPriorityRule>());
    }
  }
  for (  Generator generator : generators) {
    GeneratorDescriptor descriptor=(GeneratorDescriptor)generator.getModuleDescriptor();
    List<MappingPriorityRule> rules;
    if (descriptorWorkingCopy != null && descriptorWorkingCopy.getGeneratorUID().equals(descriptor.getGeneratorUID())) {
      rules=descriptorWorkingCopy.getPriorityRules();
    }
 else {
      rules=descriptor.getPriorityRules();
    }
    for (    MappingPriorityRule rule : rules) {
      fillPriorityMap(rule,generator,priorityMap);
    }
  }
  List<List<MappingConfiguration>> steps=createSteps(priorityMap);
  List<MappingPriorityRule> conflictingRules=new ArrayList<MappingPriorityRule>();
  for (  Map<MappingConfiguration,MappingPriorityRule> value : priorityMap.values()) {
    for (    MappingPriorityRule rule : value.values()) {
      if (!conflictingRules.contains(rule)) {
        conflictingRules.add(rule);
      }
    }
  }
  return new GenerationPlanBuilderStatus(steps,generators,conflictingRules);
}
