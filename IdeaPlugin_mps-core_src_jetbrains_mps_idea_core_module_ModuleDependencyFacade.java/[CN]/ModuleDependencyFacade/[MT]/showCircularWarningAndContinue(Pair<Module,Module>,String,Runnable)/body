{
  final String message=QuickFixBundle.message("orderEntry.fix.circular.dependency.warning",moduleName,circularModules.getFirst().getName(),circularModules.getSecond().getName());
  if (ApplicationManager.getApplication().isUnitTestMode())   throw new RuntimeException(message);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      if (!myProject.isOpen())       return;
      int ret=Messages.showOkCancelDialog(myProject,message,QuickFixBundle.message("orderEntry.fix.title.circular.dependency.warning"),Messages.getWarningIcon());
      if (ret == 0) {
        ApplicationManager.getApplication().runWriteAction(doIt);
      }
    }
  }
);
}
