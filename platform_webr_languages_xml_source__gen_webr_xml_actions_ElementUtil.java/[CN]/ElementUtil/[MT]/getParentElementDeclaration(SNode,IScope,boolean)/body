{
  SNode elementDeclaration=null;
  SNode currentNode=node;
  if (!(includeThis)) {
    currentNode=SNodeOperations.getParent(node,null,false,false);
  }
  while (true) {
    if ((currentNode == null)) {
      break;
    }
    if (SNodeOperations.isInstanceOf(currentNode,"webr.xml.structure.Element")) {
      elementDeclaration=SLinkOperations.getTarget(currentNode,"elementDeclaration",false);
      break;
    }
    if (SNodeOperations.isInstanceOf(currentNode,"webr.xml.structure.Content")) {
      SNode content=currentNode;
      elementDeclaration=SequenceOperations.getFirst(SLinkOperations.getConceptLinkTargets(content,"elementForChildren"));
      if ((elementDeclaration != null)) {
        break;
      }
      elementDeclaration=SequenceOperations.getFirst(SLinkOperations.getConceptLinkTargets(content,"correspondingElement"));
      if ((elementDeclaration != null)) {
        break;
      }
    }
    currentNode=SNodeOperations.getParent(currentNode,null,false,false);
  }
  return elementDeclaration;
}
