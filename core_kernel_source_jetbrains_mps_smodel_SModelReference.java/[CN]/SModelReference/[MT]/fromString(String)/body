{
  if (s == null)   return null;
  s=s.trim();
  Matcher matcher=MODEL_UID_PATTERN.matcher(s);
  if (matcher.matches()) {
    SModelId modelId=jetbrains.mps.smodel.SModelId.fromString(matcher.group(1));
    SModelId nid=StubMigrationHelper.convertModelId(modelId,false);
    return new jetbrains.mps.smodel.SModelReference(SModelFqName.fromString(matcher.group(2)),nid == null ? modelId : nid);
  }
  return new jetbrains.mps.smodel.SModelReference(SModelFqName.fromString(s),null);
}
