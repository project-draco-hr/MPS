{
  String shortFileName="unknown.mps";
  if (modelName != null) {
    shortFileName=NameUtil.shortNameFromLongName(SModelStereotype.withoutStereotype(modelName)) + MPSExtentions.DOT_MODEL;
  }
  File tmp=FileUtil.createTmpDir();
  writeContentsToFile(contents[MergeConstants.ORIGINAL],shortFileName,tmp,MergeVersion.BASE.getSuffix());
  writeContentsToFile(contents[MergeConstants.CURRENT],shortFileName,tmp,MergeVersion.MINE.getSuffix());
  writeContentsToFile(contents[MergeConstants.LAST_REVISION],shortFileName,tmp,MergeVersion.REPOSITORY.getSuffix());
  File zipfile=chooseZipFileForModelLongName("unknown.mps",modelName);
  zipfile.getParentFile().mkdirs();
  FileUtil.zip(tmp,zipfile);
  FileUtil.delete(tmp);
  return zipfile;
}
