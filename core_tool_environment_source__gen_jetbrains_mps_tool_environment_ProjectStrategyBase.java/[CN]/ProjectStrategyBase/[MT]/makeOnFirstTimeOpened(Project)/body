{
  MPSCompilationResult result=makeAllInCreatedEnvironment(project);
  if (!(result.isOk())) {
    throw new IllegalStateException("Cannot proceed with compilation errors");
  }
  try {
    Set<SModule> changedModules=result.getChangedModules();
    if (result.isReloadingNeeded()) {
      reloadAllAfterMake(project,changedModules);
    }
    updateModelsInModules(project,changedModules);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  return project;
}
