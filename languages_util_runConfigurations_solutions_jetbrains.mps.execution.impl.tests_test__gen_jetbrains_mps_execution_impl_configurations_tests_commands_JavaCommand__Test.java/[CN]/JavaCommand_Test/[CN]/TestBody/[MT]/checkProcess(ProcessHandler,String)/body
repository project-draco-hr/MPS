{
  final ProcessEvent[] failed=new ProcessEvent[1];
  final boolean[] printed=new boolean[1];
  OutputRedirector.redirect(process,new ProcessAdapter(){
    @Override public void onTextAvailable(    ProcessEvent event,    Key key){
      if (ProcessOutputTypes.STDERR.equals(key)) {
        if (neq_849b2c_a0a0a0a0a1a3a3a(event.getText(),expectedSysErr)) {
          failed[0]=event;
          System.err.println(event.getText());
        }
 else {
          printed[0]=true;
        }
      }
 else       if (!(ProcessOutputTypes.SYSTEM.equals(key))) {
        failed[0]=event;
        System.err.println("Unknown event " + event.getText());
      }
    }
  }
);
  int exitCode=ProcessHandlerBuilder.startAndWait(process);
  if (failed[0] != null) {
    Assert.fail(failed[0].getText());
  }
  if (!(printed[0])) {
    Assert.fail("Did not print required message!");
  }
  if (exitCode != 0) {
    Assert.fail("Exit with code " + exitCode);
  }
}
