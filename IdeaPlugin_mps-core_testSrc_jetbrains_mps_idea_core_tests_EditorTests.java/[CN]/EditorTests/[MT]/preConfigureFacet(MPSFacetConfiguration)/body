{
  super.preConfigureFacet(configuration);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      IFile modelsDir=FileSystem.getInstance().getFileByPath(myModule.getModuleFilePath()).getDescendant("models");
      modelsDir.mkdirs();
      IFile tests=modelsDir.getDescendant("test.mps");
      IFile modelFile=FileSystem.getInstance().getFileByPath(System.getProperty("idea.plugins.path") + "/tests/editorTests/models/test.mps");
      if (modelFile.exists()) {
        IFileUtils.copyFileContent(modelFile,tests);
      }
 else {
        InputStream is=null;
        OutputStream os=null;
        try {
          is=new BufferedInputStream(EditorTests.class.getResourceAsStream("test.mps"));
          os=new BufferedOutputStream(tests.openOutputStream());
          int c;
          while ((c=is.read()) >= 0) {
            os.write(c);
          }
        }
 catch (        IOException e) {
        }
 finally {
          if (is != null)           try {
            is.close();
          }
 catch (          IOException ignore) {
          }
          if (os != null)           try {
            os.close();
          }
 catch (          IOException ignore) {
          }
        }
      }
      configuration.getState().setModelRootPaths(new String[]{modelsDir.getPath()});
    }
  }
);
}
