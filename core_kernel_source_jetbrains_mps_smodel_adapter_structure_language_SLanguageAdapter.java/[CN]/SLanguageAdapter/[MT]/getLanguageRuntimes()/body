{
  Set<SModuleReference> runtimes=new HashSet<SModuleReference>();
  Language sourceModule=getSourceModule();
  if (sourceModule == null) {
    return Collections.emptyList();
  }
  HashSet<Language> processed=new HashSet<>();
  ArrayDeque<Language> queue=new ArrayDeque<>(sourceModule.getAllExtendedLanguages());
  while (!queue.isEmpty()) {
    Language language=queue.removeFirst();
    if (!processed.add(language)) {
      continue;
    }
    runtimes.addAll(language.getRuntimeModulesReferences());
    for (    SDependency dep : language.getDeclaredDependencies()) {
      if (dep.getScope() == SDependencyScope.GENERATES_INTO && dep.getTarget() instanceof Language) {
        Language target=(Language)dep.getTarget();
        queue.addAll(target.getAllExtendedLanguages());
      }
    }
  }
  return runtimes;
}
