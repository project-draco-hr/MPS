{
  Edge edge=dart.getEdge();
  Node opposite;
  if (MapSequence.fromMap(edgeMap).containsKey(edge)) {
    opposite=MapSequence.fromMap(edgeMap).get(edge).getSource();
  }
 else {
    opposite=MapSequence.fromMap(nodeMap).get(dart.getEdge().getOpposite(dart.getSource()));
  }
  if (edge.getSource() == dart.getSource()) {
    MapSequence.fromMap(edgeMap).put(edge,newSource.addEdgeTo(opposite));
  }
 else {
    MapSequence.fromMap(edgeMap).put(edge,opposite.addEdgeTo(newSource));
  }
  return MapSequence.fromMap(edgeMap).get(edge);
}
