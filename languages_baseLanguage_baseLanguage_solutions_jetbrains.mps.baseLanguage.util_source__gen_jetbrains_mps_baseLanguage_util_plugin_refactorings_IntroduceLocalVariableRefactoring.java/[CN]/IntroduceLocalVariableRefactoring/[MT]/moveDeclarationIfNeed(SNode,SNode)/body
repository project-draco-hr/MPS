{
  List<SNode> declAncestors=SNodeOperations.getNodeAncestors(declaration,null,false);
  ListSequence.fromList(declAncestors).addElement(declaration);
  SNode commonList=SNodeOperations.getNodeAncestor(node,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xf8cc56b200L,"jetbrains.mps.baseLanguage.structure.StatementList"),false,false);
  while ((commonList != null) && !(ListSequence.fromList(declAncestors).contains(commonList))) {
    commonList=SNodeOperations.getNodeAncestor(commonList,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xf8cc56b200L,"jetbrains.mps.baseLanguage.structure.StatementList"),false,false);
  }
  if ((commonList != null)) {
    SNode firstAncestor=null;
    for (    SNode statement : ListSequence.fromList(SLinkOperations.getChildren(commonList,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xf8cc56b200L,0xf8cc6bf961L,"statement")))) {
      List<SNode> nodeAncestors=SNodeOperations.getNodeAncestors(node,null,false);
      if (ListSequence.fromList(declAncestors).contains(statement) || ListSequence.fromList(nodeAncestors).contains(statement)) {
        firstAncestor=statement;
        break;
      }
    }
    if (firstAncestor != declaration) {
      SNodeOperations.insertPrevSiblingChild(firstAncestor,SNodeOperations.detachNode(declaration));
    }
  }
}
