{
  this.findDuplicates();
  SNode var=_quotation_createNode_nngwe4_a0b0b(this.getExpressionType(),this.getExpression(),this.getName());
  if (myIsFinal) {
    SPropertyOperations.set(SLinkOperations.getTarget(var,"localVariableDeclaration",true),"isFinal","" + (true));
  }
  SNode varDeclaration=SLinkOperations.getTarget(var,"localVariableDeclaration",true);
  SNode parentStatement=SNodeOperations.getAncestor(this.getExpression(),"jetbrains.mps.baseLanguage.structure.Statement",false,false);
  while (!(SNodeOperations.isInstanceOf(SNodeOperations.getParent(parentStatement),"jetbrains.mps.baseLanguage.structure.StatementList"))) {
    parentStatement=SNodeOperations.getAncestor(parentStatement,"jetbrains.mps.baseLanguage.structure.Statement",false,false);
  }
  SNodeOperations.insertPrevSiblingChild(parentStatement,var);
  replaceNode(getExpression(),varDeclaration);
  if (myIsReplacingAll) {
    for (    SNode duplicate : ListSequence.fromList(myDuplicates)) {
      replaceNode(duplicate,varDeclaration);
    }
  }
  return varDeclaration;
}
