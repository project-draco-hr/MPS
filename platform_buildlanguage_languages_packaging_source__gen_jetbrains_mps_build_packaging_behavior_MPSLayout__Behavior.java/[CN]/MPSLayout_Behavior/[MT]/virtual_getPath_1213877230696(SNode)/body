{
  String mpsHomeWithBucks="$MPS_HOME$";
  if (SPropertyOperations.getString(thisNode,"basedir").startsWith(mpsHomeWithBucks)) {
    String pathEnd=SPropertyOperations.getString(thisNode,"basedir").substring(mpsHomeWithBucks.length());
    if (pathEnd.equals("")) {
      return PathManager.getHomePath();
    }
    return PathManager.getHomePath() + File.separator + pathEnd;
  }
  Set<String> macroNames=PathMacros.getInstance().getAllMacroNames();
  for (  String macroName : Sequence.fromIterable(macroNames)) {
    String macroNameWithBuckString="$" + macroName + "$";
    if (SPropertyOperations.getString(thisNode,"basedir").startsWith(macroNameWithBuckString)) {
      String pathEnd=SPropertyOperations.getString(thisNode,"basedir").substring(macroNameWithBuckString.length());
      if (pathEnd.equals("")) {
        return PathMacros.getInstance().getValue(macroName);
      }
      return PathMacros.getInstance().getValue(macroName) + File.separator + pathEnd;
    }
  }
  if (SPropertyOperations.getString(thisNode,"basedir").equals(".")) {
    return "";
  }
  return SPropertyOperations.getString(thisNode,"basedir");
}
