{
synchronized (LOCK) {
    if (myCache.containsKey(path))     return myCache.get(path);
    boolean jared=path.contains("!/");
    boolean exists=jared ? FileSystem.getInstance().getFileByPath(path).exists() : new File(path).exists();
    if (!exists) {
      String moduleString=requestor == null ? "" : (" in " + requestor.toString());
      String message="Can't load class path item " + path + moduleString+ "."+ (new File(path).isDirectory() ? " Execute make in IDEA." : "");
      LOG.debug(message,new Throwable());
      NonExistingClassPathItem item=new NonExistingClassPathItem(path);
      myCache.put(path,item);
      return item;
    }
    if (!jared && new File(path).isDirectory()) {
      myCache.put(path,new FileClassPathItem(path));
    }
 else {
      myCache.put(path,new JarFileClassPathItem(path));
    }
    return myCache.get(path);
  }
}
