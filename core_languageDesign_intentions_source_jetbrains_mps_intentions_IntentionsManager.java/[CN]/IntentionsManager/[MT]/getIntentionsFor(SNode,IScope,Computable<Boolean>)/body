{
  String conceptFqName=node.getConceptFqName();
  Set<Language> visibleLanguages=new HashSet<Language>(node.getModel().getLanguages(scope));
  List<Intention> result=new ArrayList<Intention>();
  for (  String ancestor : LanguageHierarchyCache.getInstance().getAncestorsNames(conceptFqName)) {
    Set<Intention> intentions=myIntentions.get(ancestor);
    if (intentions == null)     continue;
    for (    Intention intention : intentions) {
      if (terminated != null && terminated.compute())       return new ArrayList<Intention>();
      Language language=getIntentionLanguage(intention);
      if (language != null && !visibleLanguages.contains(language))       continue;
      result.add(intention);
    }
  }
  return result;
}
