{
  for (  Entry<String,Map<SNode,Object>> o : myMappingNameAndInputNodeToOutputNodeMap.entrySet()) {
    String label=o.getKey();
    for (    Entry<SNode,Object> i : o.getValue().entrySet()) {
      SNode inputNode=i.getKey();
      SNode originalRoot=inputNode == null ? null : builder.getOriginalForInput(inputNode.getTopmostAncestor());
      MappingsMemento mappingsMemento=model.getMappingsMemento(originalRoot,true);
      mappingsMemento.addOutputNodeByInputNodeAndMappingName(inputNode == null ? null : inputNode.getSNodeId(),label,i.getValue());
    }
  }
  for (  Entry<SNode,Object> o : myCopiedOutputNodeForInputNode.entrySet()) {
    SNode inputNode=o.getKey();
    Object value=o.getValue();
    if (value instanceof SNode) {
      SNodeId targetId=((SNode)value).getSNodeId();
      if (inputNode.getSNodeId().equals(targetId)) {
        continue;
      }
      MappingsMemento mappingsMemento=model.getMappingsMemento(builder.getOriginalForInput(inputNode.getTopmostAncestor()),true);
      mappingsMemento.addOutputNodeByInputNode(inputNode.getSNodeId(),targetId,true);
    }
 else     if (value instanceof List) {
      SNodeId targetId=((List<SNode>)value).get(0).getSNodeId();
      MappingsMemento mappingsMemento=model.getMappingsMemento(builder.getOriginalForInput(inputNode.getTopmostAncestor()),true);
      mappingsMemento.addOutputNodeByInputNode(inputNode.getSNodeId(),targetId,false);
    }
  }
}
