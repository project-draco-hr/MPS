{
  for (  Entry<String,Map<SNode,Object>> o : myMappingNameAndInputNodeToOutputNodeMap.entrySet()) {
    String label=o.getKey();
    for (    Entry<SNode,Object> i : o.getValue().entrySet()) {
      SNode inputNode=i.getKey();
      SNode originalRoot=inputNode == null ? null : builder.getOriginalForInput(inputNode.getContainingRoot());
      MappingsMemento mappingsMemento=model.getMappingsMemento(originalRoot,true);
      mappingsMemento.addOutputNodeByInputNodeAndMappingName(inputNode == null ? null : inputNode.getNodeId(),label,i.getValue());
    }
  }
  for (  Entry<SNode,Object> o : myCopiedOutputNodeForInputNode.entrySet()) {
    SNode inputNode=o.getKey();
    Object value=o.getValue();
    if (value instanceof SNode) {
      SNodeId targetId=((SNode)value).getNodeId();
      if (inputNode.getNodeId().equals(targetId)) {
        continue;
      }
      MappingsMemento mappingsMemento=model.getMappingsMemento(builder.getOriginalForInput(inputNode.getContainingRoot()),true);
      mappingsMemento.addOutputNodeByInputNode(inputNode.getNodeId(),targetId,true);
    }
 else     if (value instanceof List) {
      SNodeId targetId=((List<SNode>)value).get(0).getNodeId();
      MappingsMemento mappingsMemento=model.getMappingsMemento(builder.getOriginalForInput(inputNode.getContainingRoot()),true);
      mappingsMemento.addOutputNodeByInputNode(inputNode.getNodeId(),targetId,false);
    }
  }
}
