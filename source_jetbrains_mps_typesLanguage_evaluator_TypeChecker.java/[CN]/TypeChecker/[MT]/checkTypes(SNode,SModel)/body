{
  clearForTypesModel(typesModel);
  for (  ContextDeclaration contextDeclaration : typesModel.getRoots(ContextDeclaration.class)) {
    if (contextDeclaration.getMain()) {
      ContextsManager.getInstance().registerMainContext(contextDeclaration.getName());
    }
 else {
      ContextsManager.getInstance().registerNewContext(contextDeclaration.getName());
    }
  }
  for (  VariableSetDeclaration varset : typesModel.getRoots(VariableSetDeclaration.class)) {
    TypeVariablesManager.getInstance().registerNewVarset(varset);
  }
  for (  EquationSetDeclaration equationSet : typesModel.getRoots(EquationSetDeclaration.class)) {
  }
  ourRules=new ArrayList<Rule>();
  for (  Rule rule : typesModel.getRoots(Rule.class)) {
    ourRules.add(rule);
  }
  doCheckTypes(root);
  Set<Pair<SNode,NodeWrapperType>> mainContext=ContextsManager.getInstance().getMainContext();
  for (  Pair<SNode,NodeWrapperType> contextEntry : mainContext) {
    SNode term=contextEntry.o1;
    term.putUserObject(TYPE_OF_TERM,contextEntry.o2);
  }
}
