{
  if (!workerStarted) {
    return;
  }
  try {
    long deadline=System.currentTimeMillis() + MAX_EXECUTION_TIME;
    do {
      Task t=myTasks.peek();
      if (t == null) {
        return;
      }
      boolean remove=true;
      try {
        if (!t.tryRun()) {
          remove=false;
          return;
        }
      }
 catch (      TaskIsOutdated e) {
      }
catch (      Exception e) {
        LOG.error("run in EDT failure",e);
      }
 finally {
        if (remove) {
synchronized (myLock) {
            myTasks.remove();
          }
        }
      }
    }
 while (deadline > System.currentTimeMillis());
  }
  finally {
synchronized (myLock) {
      workerStarted=false;
      myLock.notifyAll();
    }
  }
}
