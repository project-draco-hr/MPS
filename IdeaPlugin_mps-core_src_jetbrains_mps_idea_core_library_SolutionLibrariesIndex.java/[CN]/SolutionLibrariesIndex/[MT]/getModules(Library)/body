{
  final Set<ModuleReference> modules=new HashSet<ModuleReference>();
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      Collection<Solution> allSolutions=ModuleRepositoryFacade.getInstance().getAllModules(Solution.class);
      for (      Solution solution : allSolutions) {
        if (hasModule(library,solution)) {
          modules.add(solution.getModuleReference());
        }
      }
    }
  }
);
  return modules;
}
