{
  SNode node=getSNode();
  if (node == null)   return;
  if (CommandProcessor.getInstance().getCurrentCommand() == null)   return;
  if (EqualUtil.equals(oldText,text))   return;
  if (isValidText(text))   return;
  UndoHelper.getInstance().addUndoableAction(new SNodeUndoableAction(node){
    @Override protected void doUndo(){
    }
    @Override protected void doRedo(){
    }
  }
);
  if (node.getModel() == null)   return;
  MPSNodesVirtualFileSystem.getInstance().getFileFor(node.getContainingRoot()).setModificationStamp(LocalTimeCounter.currentTime());
}
