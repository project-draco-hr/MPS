{
  EditorComponent editor=getEditor();
  CellInfo cellInfo=getCellInfo();
  if (getSNode() != null && !EqualUtil.equals(oldText,text) && !isValidText(text) && CommandProcessor.getInstance().getCurrentCommand() != null) {
    UndoHelper.getInstance().addUndoableAction(new MySNodeUndoableAction(getSNode(),cellInfo,editor,oldText,text));
    SNode root=getSNode().getContainingRoot();
    if (root != null) {
      MPSNodesVirtualFileSystem.getInstance().getFileFor(root).setModificationStamp(LocalTimeCounter.currentTime());
    }
  }
}
