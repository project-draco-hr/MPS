{
  if (SNodeOperations.isInstanceOf(type,"jetbrains.mps.baseLanguage.structure.TypeVariableReference") && ListSequence.<SNode>fromList(actTypes).count() > 0) {
    int idx=0;
    for (    SNode tvd : vars) {
      if (tvd == SLinkOperations.getTarget(SNodeOperations.cast(type,"jetbrains.mps.baseLanguage.structure.TypeVariableReference"),"typeVariableDeclaration",false) && idx < ListSequence.<SNode>fromList(actTypes).count()) {
        return SNodeOperations.copyNode(getTypeCoercedToClassifierType(ListSequence.<SNode>fromList(actTypes).getElement(idx)));
      }
      idx++;
    }
  }
 else   if (SNodeOperations.isInstanceOf(type,"jetbrains.mps.baseLanguage.structure.ClassifierType")) {
    for (    SNode pt : SLinkOperations.getTargets(SNodeOperations.cast(type,"jetbrains.mps.baseLanguage.structure.ClassifierType"),"parameter",true)) {
      SNode rt=resolveType(pt,actTypes,vars);
      if (pt != rt) {
        SNodeOperations.replaceWithAnother(pt,rt);
      }
    }
  }
  return type;
}
