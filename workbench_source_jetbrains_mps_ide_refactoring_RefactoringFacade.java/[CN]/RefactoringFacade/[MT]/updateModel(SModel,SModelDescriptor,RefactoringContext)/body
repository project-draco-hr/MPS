{
  model.runLoadingAction(new Runnable(){
    public void run(){
      IRefactoring refactoring=refactoringContext.getRefactoring();
      try {
        ((ILoggableRefactoring)refactoring).updateModel(model,refactoringContext);
      }
 catch (      Throwable t) {
        LOG.error("An exception was thrown by refactoring " + refactoring.getUserFriendlyName() + " while updating model "+ model.getLongName()+ ". Models could have been corrupted.",t);
      }
      if (!refactoringContext.isLocal()) {
        model.updateImportedModelUsedVersion(usedModel.getSModelReference(),((EditableSModelDescriptor)usedModel).getVersion());
      }
      SModelRepository.getInstance().markChanged(model);
    }
  }
);
}
