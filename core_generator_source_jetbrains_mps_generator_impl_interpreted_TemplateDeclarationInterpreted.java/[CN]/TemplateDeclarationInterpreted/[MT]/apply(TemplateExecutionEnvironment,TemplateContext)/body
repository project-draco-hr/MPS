{
  TemplateContext applyContext=new DefaultTemplateContext(context.getEnvironment(),context.getInput(),null);
  if (myArguments.length > 0) {
    applyContext=applyContext.subContext(getArgumentsAsMap());
  }
  if (myIsTemplateDeclNode) {
    final TemplateContainer tc=getTemplates();
    return tc.processRuleConsequence(context);
  }
 else {
    return environment.getTemplateProcessor().apply(myTemplateNode,applyContext);
  }
}
