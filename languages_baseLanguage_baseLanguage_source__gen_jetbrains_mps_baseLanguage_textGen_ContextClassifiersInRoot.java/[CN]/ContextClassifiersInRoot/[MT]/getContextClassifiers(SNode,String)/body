{
  Map<String,String> bindings=new HashMap<String,String>();
  SNode current=contextNode;
  while ((current != null)) {
    if (SNodeOperations.isInstanceOf(current,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x101d9d3ca30L,"jetbrains.mps.baseLanguage.structure.Classifier"))) {
      boolean processNestedClassifiers=false;
      if (SNodeOperations.isInstanceOf(current,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x1107e0cb103L,"jetbrains.mps.baseLanguage.structure.AnonymousClass")) || SNodeOperations.isInstanceOf(current,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfc367070a5L,"jetbrains.mps.baseLanguage.structure.EnumClass"))) {
        processNestedClassifiers=true;
      }
 else       if (SNodeOperations.isInstanceOf(current,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x101edd46144L,"jetbrains.mps.baseLanguage.structure.Interface"))) {
        processNestedClassifiers=!("extendedInterface".equals(sourceChildRole));
      }
 else       if (SNodeOperations.isInstanceOf(current,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xf8c108ca66L,"jetbrains.mps.baseLanguage.structure.ClassConcept"))) {
        processNestedClassifiers=!(("superclass".equals(sourceChildRole) || "implementedInterface".equals(sourceChildRole)));
      }
 else {
        if (LOG.isEnabledFor(Level.WARN)) {
          LOG.warn("Illegal classifier node in bl textgen: " + current);
        }
      }
      addClassifierToBindingMap(bindings,SNodeOperations.cast(current,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x101d9d3ca30L,"jetbrains.mps.baseLanguage.structure.Classifier")));
      if (processNestedClassifiers) {
        for (        Map.Entry<String,String> simpleToFqName : nestedClassifiersCache.get(SNodeOperations.cast(current,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x101d9d3ca30L,"jetbrains.mps.baseLanguage.structure.Classifier"))).entrySet()) {
          if (!(bindings.containsKey(simpleToFqName.getKey()))) {
            bindings.put(simpleToFqName.getKey(),simpleToFqName.getValue());
          }
        }
      }
    }
    sourceChildRole=current.getRoleInParent();
    current=SNodeOperations.getParent(current);
  }
  return bindings;
}
