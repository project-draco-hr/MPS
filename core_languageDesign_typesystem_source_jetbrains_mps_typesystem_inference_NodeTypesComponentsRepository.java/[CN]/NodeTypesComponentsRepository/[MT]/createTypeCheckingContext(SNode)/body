{
  if (node == null)   return null;
  SNode root=node.getContainingRoot();
  TypeCheckingContext typeCheckingContext=getTypeCheckingContext(root);
  if (typeCheckingContext != null) {
    return typeCheckingContext;
  }
  typeCheckingContext=new TypeCheckingContext(root,myTypeChecker);
  myNodesToContexts.put(typeCheckingContext.getNode(),typeCheckingContext);
  SModelRepository.getInstance().removeModelRepositoryListener(myModelRepositoryListener);
  SModelRepository.getInstance().addModelRepositoryListener(myModelRepositoryListener);
  return typeCheckingContext;
}
