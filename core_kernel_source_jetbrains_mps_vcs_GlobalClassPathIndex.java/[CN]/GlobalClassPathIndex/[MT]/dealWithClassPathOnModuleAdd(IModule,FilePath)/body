{
  if (isClassPathExcludedInModule(module,classPathFile)) {
    ArrayList<IModule> modules=myClassPathIndex.get(classPathFile);
    if (!myExcludedClassPath.contains(classPathFile) && (modules != null) && !modules.isEmpty()) {
      module.excludeClassPath(classPathFile.getPath(),false);
      modules.add(module);
    }
 else     if (modules == null) {
      putModuleInIndex(module,classPathFile);
      myExcludedClassPath.add(classPathFile);
    }
 else {
      modules.add(module);
      myExcludedClassPath.add(classPathFile);
    }
  }
 else {
    ArrayList<IModule> modules=myClassPathIndex.get(classPathFile);
    if (modules == null) {
      putModuleInIndex(module,classPathFile);
    }
 else {
      if (myExcludedClassPath.remove(classPathFile)) {
        for (        IModule m : modules) {
          m.excludeClassPath(classPathFile.getPath(),false);
        }
      }
      modules.add(module);
    }
  }
}
