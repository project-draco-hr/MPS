{
  SNode newNode=SNodeFactoryOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-2363163772790029805l,-6024047381933761144l),937236280924494202l,"jetbrains.mps.baseLanguageInternal.structure.ExtractStaticInnerClassConcept"),null);
  for (  SNode child : jetbrains.mps.util.SNodeOperations.getChildren(newNode)) {
    newNode.removeChild(child);
  }
  HashMap<SNode,SNode> mapping=new HashMap<SNode,SNode>();
  mapping.put(node,newNode);
  List<SNode> children=jetbrains.mps.util.SNodeOperations.getChildren(node);
  CopyUtil.copy(children,mapping);
  for (  SNode child : children) {
    newNode.addChild(child.getRoleInParent(),mapping.get(child));
  }
  for (  SReference reference : node.getReferences()) {
    SNodeAccessUtil.setReferenceTarget(newNode,reference.getRole(),reference.getTargetNode());
  }
  for (  String propertyName : jetbrains.mps.util.SNodeOperations.getProperties(node).keySet()) {
    SNodeAccessUtil.setProperty(newNode,propertyName,SNodeAccessUtil.getProperty(node,propertyName));
  }
  SNodeOperations.replaceWithAnother(node,newNode);
}
