{
  Graph graph=embeddedGraph.getGraph();
  List<Edge> initialEdges=ListSequence.<Edge>fromList(new ArrayList<Edge>());
  List<Node> initialNodes=ListSequence.<Node>fromList(new ArrayList<Node>());
  ListSequence.<Edge>fromList(initialEdges).addSequence(ListSequence.<Edge>fromList(graph.getEdges()));
  ListSequence.<Node>fromList(initialNodes).addSequence(ListSequence.<Node>fromList(graph.getNodes()));
  EmbeddedGraphModifier modifier=new EmbeddedGraphModifier(embeddedGraph);
  Map<Edge,Edge> replacedEdges=MapSequence.<Edge,Edge>fromMap(new HashMap<Edge,Edge>());
  modifier.reduceNodesDegree(MapSequence.<Node,List<Node>>fromMap(new HashMap<Node,List<Node>>()),replacedEdges,true);
  Map<Dart,Integer> bends=MapSequence.<Dart,Integer>fromMap(new HashMap<Dart,Integer>());
  Map<Dart,Integer> angles=MapSequence.<Dart,Integer>fromMap(new HashMap<Dart,Integer>());
  OrthogonalRepresentationWithNodesProcessing.getRepresentation(embeddedGraph,MapSequence.fromMap(modifier.getNodeFaces()).values(),bends,angles);
  OrthogonalRepresentationWithNodesProcessing.replaceBendsByNodes(embeddedGraph,bends,angles);
  Map<Dart,Direction2D> directions=OrthogonalRepresentation.getDirections(embeddedGraph,angles);
}
