{
  FileEditor[] editors=FileEditorManager.getInstance(project).getEditors(file);
  if (editors != null && editors.length > 0) {
    FileEditor editor=editors[0];
    if (editor instanceof MPSFileNodeEditor) {
      IEditor nodeEditor=((MPSFileNodeEditor)editor).getNodeEditor();
      if (nodeEditor instanceof TabbedEditor) {
        TabbedEditor tabbedEditor=(TabbedEditor)nodeEditor;
        EditorComponent tabEditor=tabbedEditor.getTabbedPane().getCurrentTab().getCurrentEditorComponent();
        if (tabEditor instanceof NodeEditorComponent) {
          return ((NodeEditorComponent)tabEditor).getEditedNode();
        }
      }
    }
  }
  return null;
}
