{
  return new ModelAccessHelper(myProject.getModelAccess()).runReadAction(new Computable<List<DefaultActionGroup>>(){
    @Override public List<DefaultActionGroup> compute(){
      List<DefaultActionGroup> groups=new ArrayList<DefaultActionGroup>();
      List<RelationDescriptor> tabs=new ArrayList<RelationDescriptor>(possibleTabs);
      Collections.sort(tabs,new RelationComparator());
      if (currentAspect != null) {
        tabs.remove(currentAspect);
        tabs.add(0,currentAspect);
      }
      for (      final RelationDescriptor d : tabs) {
        List<SNode> nodes=d.getNodes(myBaseNode.resolve(myProject.getRepository()));
        if (!nodes.isEmpty() && d.isSingle()) {
          continue;
        }
        DefaultActionGroup group=doGetCreateGroup(d);
        if (tabs.indexOf(d) == 0) {
          group.setPopup(false);
        }
        groups.add(group);
      }
      return groups;
    }
  }
);
}
