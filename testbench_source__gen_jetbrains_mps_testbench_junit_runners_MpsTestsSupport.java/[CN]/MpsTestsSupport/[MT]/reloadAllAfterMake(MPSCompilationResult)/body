{
  if (LOG.isInfoEnabled()) {
    LOG.info("Reloading modules");
  }
  if (mpsCompilationResult.isReloadingNeeded()) {
    ModelAccess.instance().runWriteAction(new Runnable(){
      public void run(){
        ClassLoaderManager.getInstance().reloadModules(mpsCompilationResult.getChangedModules());
      }
    }
);
  }
  ModelAccess.instance().runWriteAction(new Runnable(){
    @Override public void run(){
      for (      SModule mod : MPSModuleRepository.getInstance().getModules()) {
        if (!(mod instanceof AbstractModule)) {
          continue;
        }
        ((AbstractModule)mod).updateModelsSet();
      }
    }
  }
);
  if (ActiveEnvironment.getInstance().hasIdeaInstance()) {
    SwingUtilities.invokeAndWait(new Runnable(){
      @Override public void run(){
        ApplicationManager.getApplication().runWriteAction(new Runnable(){
          @Override public void run(){
            LocalFileSystem.getInstance().refresh(false);
          }
        }
);
      }
    }
);
  }
 else {
  }
}
