{
  try {
    SwingUtilities.invokeAndWait(new Runnable(){
      @Override public void run(){
        ModelAccess.instance().runWriteAction(new Runnable(){
          public void run(){
            MPSModuleOwner mpsModuleOwner=new BaseMPSModuleOwner();
            for (            ModulesMiner.ModuleHandle handle : handles) {
              if (handle.getFile().getName().endsWith(".iml")) {
                continue;
              }
              ModuleRepositoryFacade.createModule(handle,mpsModuleOwner);
            }
            ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
          }
        }
);
      }
    }
);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
