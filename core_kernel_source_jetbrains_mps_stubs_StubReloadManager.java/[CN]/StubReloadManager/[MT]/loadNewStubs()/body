{
  Map<StubPath,PathData> oldp2d=myPath2Data;
  myPath2Data=new HashMap<StubPath,PathData>();
  for (  AbstractModule m : getAllModules()) {
    for (    StubPath sp : getModuleStubPaths(m)) {
      BaseStubModelRootManager manager=createStubManager(m,sp);
      if (manager == null) {
        LOG.warning("Manager for path " + sp + " can't be created. Path will be ignored.");
        continue;
      }
      PathData data=new PathData(sp);
      data.setModelRootManager(manager);
      myPath2Data.put(sp,data);
      PathData oldData=oldp2d.get(sp);
      if (oldData == null || !oldData.isFresh()) {
        Set<BaseStubModelDescriptor> descriptors=manager.updateModels(sp.getPath(),"",m);
        data.setDescriptors(copyDescriptors(descriptors));
      }
 else {
        Set<BaseStubModelDescriptor> descriptors=oldData.getDescriptors();
        manager.updateModels(m,copyDescriptors(descriptors));
        data.setDescriptors(descriptors);
      }
    }
  }
}
