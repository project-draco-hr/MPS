{
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          myTmpDir=IFileUtils.createTmpDir();
          try {
            ProjectFactory factory=new ProjectFactory(null,projectOptionsProvider.getProjectOptions(myTmpDir));
            myProject=factory.createProject();
            factory.activate();
            myProject.save();
          }
 catch (          ProjectNotCreatedException e) {
            Assert.fail();
          }
        }
      }
);
    }
  }
,ModalityState.defaultModalityState());
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      ProjectUtil.closeAndDispose(myProject);
    }
  }
);
  checkFilePathList(myTmpDir,expectedPathList);
}
