{
  MultiMap<SModelReference,SModelEvent> modelToEvents=new MultiMap<SModelReference,SModelEvent>();
  for (  SModelEvent event : ListSequence.fromList(list)) {
    SModelReference mr=event.getModel().getReference();
    modelToEvents.putValue(mr,event);
  }
  for (  SModelReference mr : SetSequence.fromSet(modelToEvents.keySet())) {
    Collection<ModelEventListener> listeners=myListeners.get(mr);
    if (listeners == null) {
      continue;
    }
    final Collection<SModelEvent> eventsForTheModel=modelToEvents.get(mr);
    for (    ModelEventListener l : new ArrayList<ModelEventListener>(listeners)) {
      l.handle(eventsForTheModel);
    }
  }
}
