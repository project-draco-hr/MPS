{
  MultiMap<SModelReference,SModelEvent> modelToEvents=new MultiMap<SModelReference,SModelEvent>();
  for (  SModelEvent event : ListSequence.fromList(list)) {
    SModelReference mr=event.getModel().getReference();
    modelToEvents.putValue(mr,event);
  }
  for (  SModelReference mr : SetSequence.fromSet(modelToEvents.keySet())) {
    Collection<SModelCommandListener> listeners=myListeners.get(mr);
    if (listeners == null) {
      continue;
    }
    final ArrayList<SModelEvent> eventsForTheModel=new ArrayList<SModelEvent>(modelToEvents.get(mr));
    for (    SModelCommandListener l : new ArrayList<SModelCommandListener>(listeners)) {
      l.eventsHappenedInCommand(eventsForTheModel);
    }
  }
}
