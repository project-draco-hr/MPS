{
  if (!(TraceSettings.isTraceForSelectedNode())) {
    return true;
  }
  if (mySelectedNode == null) {
    return true;
  }
  if (myNodes.contains(diff.getSource())) {
    return true;
  }
  if (diff instanceof AddEquationOperation) {
    AddEquationOperation eq=(AddEquationOperation)diff;
    if (myNodes.contains(eq.getChild()) || myNodes.contains(eq.getParent())) {
      return true;
    }
  }
  if (diff instanceof AbstractBlockOperation) {
    Block block=((AbstractBlockOperation)diff).getBlock();
    for (    SNode node : block.getInputs()) {
      if (myNodes.contains(node)) {
        return true;
      }
    }
  }
  return false;
}
