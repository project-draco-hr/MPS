{
  if (diff == null) {
    return;
  }
  if (diff instanceof AddEquationOperation) {
    AddEquationOperation eq=(AddEquationOperation)diff;
    SNode child=eq.getChild();
    SNode parent=eq.getParent();
    if (myNodes.contains(child)) {
      myNodes.addAll(TypesUtil.getVariables(parent,myContextTracker.getStateCopy()));
    }
    if (myNodes.contains(parent)) {
      myNodes.addAll(TypesUtil.getVariables(child,myContextTracker.getStateCopy()));
    }
  }
  if (diff instanceof AssignTypeOperation) {
    AssignTypeOperation typeDifference=(AssignTypeOperation)diff;
    if (myNodes.contains(typeDifference.getNode()) && TypesUtil.isVariable(typeDifference.getType())) {
      myNodes.add(typeDifference.getType());
    }
  }
  for (  AbstractOperation childDiff : diff.getConsequences()) {
    getSliceVars(childDiff);
  }
}
