{
  for (  IFacet fct : Sequence.<IFacet>fromIterable(MapSequence.fromMap(facetsView).values())) {
    ScriptBuilder.FacetRefs facetRefs=new ScriptBuilder.FacetRefs();
    this.collectRequired(fct,fct.extended(),facetRefs.extended);
    this.collectRequired(fct,fct.required(),facetRefs.required);
    this.collectOptional(fct,fct.optional(),facetRefs.optional);
    MapSequence.<IFacet.Name,ScriptBuilder.FacetRefs>fromMap(refs).put(fct.getName(),facetRefs);
  }
}
