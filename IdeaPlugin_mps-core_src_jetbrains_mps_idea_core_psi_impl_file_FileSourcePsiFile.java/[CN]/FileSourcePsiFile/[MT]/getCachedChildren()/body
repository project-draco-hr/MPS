{
  if (myCachedChildren.get() == null) {
    CachedValuesManager valuesManager=CachedValuesManager.getManager(getProject());
    CachedValue<List<RootNodePsiElement>> cachedValue=valuesManager.createCachedValue(new CachedValueProvider<List<RootNodePsiElement>>(){
      @Nullable @Override public Result<List<RootNodePsiElement>> compute(){
        MPSPsiProvider mpsPsiProvider=MPSPsiProvider.getInstance(getManager().getProject());
        MPSPsiModel psiModel=mpsPsiProvider.getPsi(myModelReference);
        List<RootNodePsiElement> children=new ArrayList<RootNodePsiElement>();
        collectChildren(psiModel.getChildren(),children);
        return Result.create(children,PsiModificationTracker.MODIFICATION_COUNT);
      }
    }
,false);
    myCachedChildren.compareAndSet(null,cachedValue);
  }
  return myCachedChildren.get();
}
