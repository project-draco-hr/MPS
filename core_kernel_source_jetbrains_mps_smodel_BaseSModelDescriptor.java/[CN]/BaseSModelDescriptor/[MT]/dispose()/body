{
  ModelAccess.assertLegalWrite();
  SModel smodel=getCurrentModelInternal();
  if (smodel != null) {
    fireBeforeModelDisposed(smodel);
    ((jetbrains.mps.smodel.SModel)smodel).dispose();
  }
  clearListeners();
}
