{
  ModelLoadingState oldState;
  SModel model=mySModel;
  if (myLoadingState != ModelLoadingState.NOT_LOADED && model != null)   return model;
synchronized (myLoadingLock) {
    if (myLoadingState != ModelLoadingState.NOT_LOADED)     return mySModel;
    if (myInsideLoad) {
      LOG.error("getSModel inside of itself",new Throwable());
    }
    myInsideLoad=true;
    oldState=myLoadingState;
    ModelLoadResult result=runModelLoading(new Computable<ModelLoadResult>(){
      public ModelLoadResult compute(){
        return initialLoad();
      }
    }
);
    mySModel=result.model;
    mySModel.setModelDescriptor(this);
    myLoadingState=result.state;
    if (oldState != myLoadingState) {
      fireModelStateChanged(oldState,myLoadingState);
    }
    myInsideLoad=false;
    return mySModel;
  }
}
