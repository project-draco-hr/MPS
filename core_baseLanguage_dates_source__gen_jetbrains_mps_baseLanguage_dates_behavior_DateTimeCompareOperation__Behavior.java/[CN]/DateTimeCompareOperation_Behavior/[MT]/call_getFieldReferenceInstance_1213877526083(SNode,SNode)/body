{
  SNode instance=null;
  if (SNodeOperations.isInstanceOf(fr,"jetbrains.mps.baseLanguage.structure.FieldReference")) {
    instance=SLinkOperations.getTarget(fr,"instance",true);
  }
 else   if (SNodeOperations.isInstanceOf(fr,"jetbrains.mps.baseLanguage.structure.DotExpression") && SNodeOperations.isInstanceOf(SLinkOperations.getTarget(fr,"operation",true),"jetbrains.mps.baseLanguage.structure.FieldReferenceOperation")) {
    instance=SLinkOperations.getTarget(fr,"operand",true);
  }
 else   if (SNodeOperations.isInstanceOf(fr,"jetbrains.mps.baseLanguageInternal.structure.InternalPartialFieldReference")) {
    instance=SLinkOperations.getTarget(fr,"instance",true);
  }
  return instance;
}
