{
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      List<SNode> nodes=myTab.getNodes();
      if (nodes.size() == 1) {
        myCallback.changeNode(nodes.get(0).getContainingRoot());
        return;
      }
      Component component=myTab.getComponentForPopup();
      DefaultActionGroup group=getGotoGroup(nodes);
      ActionPopupMenu popup=ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UNKNOWN,group);
      JPopupMenu popupMenu=popup.getComponent();
      popupMenu.show(component,0,0);
      TabColorProvider tabColorProvider=myTab.getColorProvider();
      if (tabColorProvider != null && popupMenu.getComponents().length == nodes.size()) {
        for (int i=0; i < nodes.size(); i++) {
          SNode node=nodes.get(i);
          Component menuItem=popupMenu.getComponents()[i];
          if (node != null) {
            Color color=tabColorProvider.getNodeColor(node);
            if (color != null) {
              menuItem.setForeground(color);
            }
          }
        }
      }
    }
  }
);
}
