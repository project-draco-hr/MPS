{
  SNode linkDeclaration=SLinkOperations.addNewChild(concept,"linkDeclaration","jetbrains.mps.lang.structure.structure.LinkDeclaration");
  SPropertyOperations.set(linkDeclaration,"metaClass","reference");
  SPropertyOperations.set(linkDeclaration,"role",SPropertyOperations.getString(thisNode,"name"));
  if (SPropertyOperations.getBoolean(thisNode,"optional")) {
    SPropertyOperations.set(linkDeclaration,"sourceCardinality","0..1");
  }
 else {
    SPropertyOperations.set(linkDeclaration,"sourceCardinality","1");
  }
  SLinkOperations.setTarget(linkDeclaration,"target",BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),SLinkOperations.getTarget(thisNode,"conceptReference",true),"virtual_getConcept_1238594571574",new Object[]{conceptsToTargets}),false);
  MapSequence.fromMap(partsToLinks).put(thisNode,linkDeclaration);
}
