{
  try {
    myStack.push(current);
    if (myVisited.contains(current))     return;
    myVisited.add(current);
    addPart(current.getClassPathItem());
    ArrayList<IModule> dependOnCopy=new ArrayList<IModule>(current.getDependenciesManager().getDependOnModules());
    for (    IModule dep : dependOnCopy) {
      doCollect(dep);
    }
    for (    Language l : current.getDependenciesManager().getAllUsedLanguages()) {
      myStack.push(l);
      addPart(l.getLanguageRuntimeClasspath());
      for (      IModule runtimeModule : ((LanguageDepsManager)l.getDependenciesManager()).getRuntimeDependOnModules()) {
        doCollect(runtimeModule);
      }
      myStack.pop();
    }
    if (current instanceof Language) {
      Language l=(Language)current;
      doCollect(BootstrapLanguages.coreLanguage());
      for (      Language extended : l.getExtendedLanguages()) {
        doCollect(extended);
      }
    }
  }
  finally {
    myStack.pop();
  }
}
