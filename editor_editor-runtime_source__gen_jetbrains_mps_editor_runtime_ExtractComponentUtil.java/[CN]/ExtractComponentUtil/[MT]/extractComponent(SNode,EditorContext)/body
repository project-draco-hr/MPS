{
  final SNode container=SNodeOperations.getNodeAncestor(node,MetaAdapterFactory.getConcept(0x18bc659203a64e29L,0xa83a7ff23bde13baL,0xfba0eb7c50L,"jetbrains.mps.lang.editor.structure.BaseEditorComponent"),false,false);
  final String componentName=Messages.showInputDialog(ProjectHelper.toIdeaProject(editorContext.getOperationContext().getProject()),"Enter a component name:","",null);
  if (componentName == null) {
    return;
  }
  editorContext.getRepository().getModelAccess().executeCommand(new Runnable(){
    public void run(){
      SModel model=SNodeOperations.getModel(node);
      SNode component=SModelOperations.createNewRootNode(model,SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0x18bc659203a64e29L,0xa83a7ff23bde13baL,0xfb35c2bb47L,"jetbrains.mps.lang.editor.structure.EditorComponentDeclaration")));
      SPropertyOperations.set(component,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x110396eaaa4L,0x110396ec041L,"name"),componentName);
      SLinkOperations.setTarget(component,MetaAdapterFactory.getReferenceLink(0x18bc659203a64e29L,0xa83a7ff23bde13baL,0x10f7df344a9L,0x10f7df451aeL,"conceptDeclaration"),BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),container,"virtual_getConceptDeclaration_7055725856388417603",new Object[]{}));
      SLinkOperations.setTarget(component,MetaAdapterFactory.getContainmentLink(0x18bc659203a64e29L,0xa83a7ff23bde13baL,0xfba0eb7c50L,0xfba0ec5415L,"cellModel"),SNodeOperations.copyNode(node));
      SNode toReplace=SConceptOperations.createNewNode(SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0x18bc659203a64e29L,0xa83a7ff23bde13baL,0xfb35c96896L,"jetbrains.mps.lang.editor.structure.CellModel_Component")));
      SLinkOperations.setTarget(toReplace,MetaAdapterFactory.getReferenceLink(0x18bc659203a64e29L,0xa83a7ff23bde13baL,0xfb35c96896L,0xfb35c96897L,"editorComponent"),component);
      SNodeOperations.replaceWithAnother(node,toReplace);
    }
  }
);
}
