{
  mySearchResults=refactoringContext.getUsages();
  if (mySearchResults == null) {
    throw new IllegalArgumentException("search result is null");
  }
  myActionContext=actionContext;
  myRefactoringContext=refactoringContext;
  myProject=actionContext.get(MPSProject.class);
  myName=myRefactoringContext.getRefactoring().getUserFriendlyName();
  myPanel=new JPanel(new BorderLayout());
  myUsageView=new UsageView(actionContext.get(MPSProject.class),new ViewOptions()){
    public void close(){
      cancel();
    }
    public String getCaption(){
      return "";
    }
    public Icon getIcon(){
      return null;
    }
    public void read(    Element element,    MPSProject project){
    }
    public void write(    Element element,    MPSProject project){
    }
  }
;
  myButtonsPanel=new JPanel(new FlowLayout(FlowLayout.LEFT));
  myDoRefactorButton=new JButton(new AbstractAction("Do Refactor"){
    public void actionPerformed(    ActionEvent e){
      doRefactor();
    }
  }
);
  myCancelButton=new JButton(new AbstractAction("Cancel"){
    public void actionPerformed(    ActionEvent e){
      cancel();
    }
  }
);
  myButtonsPanel.add(myDoRefactorButton);
  myButtonsPanel.add(myCancelButton);
  myPanel.add(myUsageView.getComponent(),BorderLayout.CENTER);
  myPanel.add(myButtonsPanel,BorderLayout.SOUTH);
  initUsagesView();
}
