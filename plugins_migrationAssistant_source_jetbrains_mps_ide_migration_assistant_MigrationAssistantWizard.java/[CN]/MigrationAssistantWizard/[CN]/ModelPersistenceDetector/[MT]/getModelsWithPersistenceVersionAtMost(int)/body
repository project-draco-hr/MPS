{
  final List<String> result=new ArrayList<String>();
  final MPSProject mpsProject=myProject.getComponent(MPSProject.class);
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      for (      IModule module : mpsProject.getModulesWithGenerators()) {
        for (        SModelDescriptor smd : SModelRepository.getInstance().getModelDescriptors(module)) {
          if (smd instanceof DefaultSModelDescriptor) {
            int modelVersion=((DefaultSModelDescriptor)smd).getSModelHeader().getPersistenceVersion();
            if (modelVersion <= version) {
              result.add(((DefaultSModelDescriptor)smd).getModelFile().getPath());
            }
          }
        }
      }
    }
  }
);
  return result;
}
