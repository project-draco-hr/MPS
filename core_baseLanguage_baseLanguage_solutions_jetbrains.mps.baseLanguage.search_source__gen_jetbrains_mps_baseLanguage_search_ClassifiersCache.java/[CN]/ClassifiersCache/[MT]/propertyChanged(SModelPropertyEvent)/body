{
  SNode node=event.getNode();
  if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.baseLanguage.structure.Classifier") && "name".equals(event.getPropertyName())) {
    SNode classifier=SNodeOperations.cast(node,"jetbrains.mps.baseLanguage.structure.Classifier");
    List<SNode> classifiersToUpdate=new ArrayList<SNode>();
    ListSequence.<SNode>fromList(classifiersToUpdate).addElement(classifier);
    collectInnerClasses(classifier,classifiersToUpdate);
    for (    SNode cl : classifiersToUpdate) {
      String oldRefName=MapSequence.<SNode,String>fromMap(myNameByClassifier).get(cl);
      List<SNode> nodes=MapSequence.<String,List<SNode>>fromMap(myClassifiersByName).get(oldRefName);
      if (nodes != null) {
        nodes.remove(cl);
      }
      if (nodes == null || nodes.isEmpty()) {
        MapSequence.fromMap(myClassifiersByName).removeKey(oldRefName);
      }
      MapSequence.fromMap(myNameByClassifier).removeKey(cl);
    }
    this.putClassifier(classifier);
  }
}
