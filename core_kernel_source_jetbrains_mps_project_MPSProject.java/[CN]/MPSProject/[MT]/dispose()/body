{
  super.dispose();
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      ClassLoaderManager.getInstance().unloadAll(new EmptyProgressMonitor());
      MPSModuleRepository.getInstance().unRegisterModules(MPSProject.this);
      CleanupManager.getInstance().cleanup();
      if (ProjectManager.getInstance().getOpenProjects().length > 0) {
        ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
      }
      ClassLoaderManager.getInstance().updateClassPath();
    }
  }
);
  if (myProject != null) {
    if (MPSCore.getInstance().isTestMode() && !(myProject.isDisposed())) {
      ProjectUtil.closeAndDispose(myProject);
    }
  }
}
