{
  CommandProcessor.instance().executeCommand(new Runnable(){
    public void run(){
      MPSProjects projects=ApplicationComponents.getInstance().getComponentSafe(MPSProjects.class);
      projects.removeProject(MPSProject.this);
      MPSModuleRepository.getInstance().removeTransientModules();
      myContext.get(Highlighter.class).stopUpdater();
      myPluginManager.disposePlugins();
      myPluginManager.dispose();
      for (      Object pc : getComponents()) {
        if (pc instanceof IDisposable) {
          try {
            ((IDisposable)pc).dispose();
          }
 catch (          Throwable t) {
            LOG.error(t);
          }
        }
      }
      CommandProcessor.instance().removeCommandListener(myEventTranslator);
      MPSModuleRepository.getInstance().unRegisterModules(MPSProject.this);
      SModelRepository.getInstance().unRegisterModelDescriptors(MPSProject.this);
      TypeChecker.getInstance().clearForReload();
      UndoManager.instance().clear();
      ActionManager.instance().clearAll();
      MPSModuleRepository.getInstance().removeUnusedModules();
      SModelRepository.getInstance().removeUnusedDescriptors();
      if (reloadAll) {
        ClassLoaderManager.getInstance().reloadAll();
      }
    }
  }
);
}
