{
  super(project);
  myProject=project;
  myData=data;
  getContentPane().addNotify();
  setModal(true);
  myChooser=MpsPopupFactory.createPanelForPackage(myProject,data,hasExtraScope);
  myChooser.invoke(new MultiElementsCallback(){
    private int myDialogExitCode=CANCEL_EXIT_CODE;
    @Override public void elementsChosen(    List<Object> elements){
      if (!myOkDone) {
        myOkDone=true;
        mySelectedElements=elements;
        myIsCancelled=false;
        myDialogExitCode=OK_EXIT_CODE;
      }
    }
    @Override public void onClose(){
      ChooserDialog.this.close(myDialogExitCode);
    }
  }
,ModalityState.current(),multiSelection);
  init();
}
