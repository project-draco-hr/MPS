{
  if (myIsAggregation) {
    SNode parentNode=getSNode();
    List<? extends SNode> ch=IterableUtil.asList(parentNode.getChildren(myGenuineRole));
    SNode currentChild=ch.iterator().hasNext() ? ch.iterator().next() : null;
    return new AggregationCellContext(parentNode,currentChild,myLinkDeclaration);
  }
  SNode referenceNode=getSNode();
  SNode currentReferent=(SNode)referenceNode.getReferenceTarget(myGenuineRole);
  return new ReferenceCellContext(referenceNode,currentReferent,myLinkDeclaration);
}
