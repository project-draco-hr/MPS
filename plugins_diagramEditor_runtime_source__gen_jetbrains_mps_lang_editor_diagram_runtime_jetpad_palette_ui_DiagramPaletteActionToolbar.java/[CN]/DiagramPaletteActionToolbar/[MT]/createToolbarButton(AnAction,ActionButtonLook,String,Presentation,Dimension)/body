{
  if (action.displayTextInToolbar()) {
    return super.createToolbarButton(action,look,place,presentation,minimumSize);
  }
  ActionButton button=new ActionButton(action,presentation,place,minimumSize){
    @Override protected DataContext getDataContext(){
      return getToolbarDataContext();
    }
    @Override protected void processMouseEvent(    MouseEvent event){
      if (event.getID() == MouseEvent.MOUSE_RELEASED) {
        updateChildren();
      }
      super.processMouseEvent(event);
      if (event.getID() == MouseEvent.MOUSE_RELEASED) {
        removeChildren();
      }
    }
    @Override public void click(){
      updateChildren();
      super.click();
      removeChildren();
    }
    private void updateChildren(){
      if (myAction instanceof PopupPaletteActionGroupAdapter) {
        ((PopupPaletteActionGroupAdapter)myAction).updateChildren();
      }
    }
    private void removeChildren(){
      if (myAction instanceof PopupPaletteActionGroupAdapter) {
        ((PopupPaletteActionGroupAdapter)myAction).removeChildren();
      }
    }
  }
;
  button.setLook(look);
  return button;
}
