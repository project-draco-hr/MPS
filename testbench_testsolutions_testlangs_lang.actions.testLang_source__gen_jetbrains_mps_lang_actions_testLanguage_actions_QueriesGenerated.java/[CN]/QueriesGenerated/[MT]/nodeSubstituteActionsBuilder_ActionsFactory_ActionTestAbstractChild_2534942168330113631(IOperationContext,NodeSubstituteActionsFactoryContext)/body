{
  List<SubstituteAction> result=ListSequence.fromList(new ArrayList<SubstituteAction>());
  final StringHolder firstMatchingText=new Computable<StringHolder>(){
    public StringHolder compute(){
      boolean tmpVar=_context.getParentNode() != null;
      tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
      tmpVar=tmpVar && _context.getChildConcept() != null;
      tmpVar=tmpVar && _context.getModel() != null;
      tmpVar=tmpVar && operationContext != null;
      return new StringHolder();
    }
  }
.compute();
{
    boolean tmpVar=_context.getParentNode() != null;
    tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
    tmpVar=tmpVar && _context.getChildConcept() != null;
    tmpVar=tmpVar && _context.getModel() != null;
    tmpVar=tmpVar && operationContext != null;
    firstMatchingText.matchingText="newChild1";
  }
{
    SNode outputConcept=MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e167220f9L,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild1").getDeclarationNode();
    SNode childConcept=(SNode)_context.getChildConcept();
    if (outputConcept == null || SConceptOperations.isSuperConceptOf(SNodeOperations.asSConcept(childConcept),SNodeOperations.asSConcept(outputConcept))) {
      ListSequence.fromList(result).addElement(new DefaultSimpleSubstituteAction(outputConcept,_context.getParentNode(),_context.getCurrentTargetNode(),_context.getChildSetter()){
        public SNode createChildNode(        Object parameterObject,        SModel model,        String pattern){
          boolean tmpVar=pattern != null;
          tmpVar=tmpVar && _context.getParentNode() != null;
          tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
          tmpVar=tmpVar && _context.getChildConcept() != null;
          tmpVar=tmpVar && model != null;
          tmpVar=tmpVar && operationContext != null;
          SNode result=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e167220f9L,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild1"));
          SLinkOperations.addNewChild(result,MetaAdapterFactory.getContainmentLink(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e167220f9L,0x7f805f0c2dd46343L,"child1"),SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x7f805f0c2dd45b4eL,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild1Child")));
          return result;
        }
        @Override protected SNode selectChildNode(        SNode createdNode,        SModel model,        String pattern,        EditorContext editorContext){
          return ListSequence.fromList(SLinkOperations.getChildren(createdNode,MetaAdapterFactory.getContainmentLink(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e167220f9L,0x7f805f0c2dd46343L,"child1"))).first();
        }
        public boolean hasSubstitute(){
          return true;
        }
        public boolean canSubstitute_internal(        String pattern,        boolean strictly){
          boolean tmpVar=pattern != null;
          tmpVar=tmpVar && strictly;
          tmpVar=tmpVar && _context.getParentNode() != null;
          tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
          tmpVar=tmpVar && _context.getChildConcept() != null;
          tmpVar=tmpVar && _context.getModel() != null;
          tmpVar=tmpVar && operationContext != null;
          return (strictly ? firstMatchingText.matchingText.equals(pattern) : firstMatchingText.matchingText.startsWith(pattern));
        }
        public String getDescriptionText(        String pattern){
          boolean tmpVar=pattern != null;
          tmpVar=tmpVar && _context.getParentNode() != null;
          tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
          tmpVar=tmpVar && _context.getChildConcept() != null;
          tmpVar=tmpVar && _context.getModel() != null;
          tmpVar=tmpVar && operationContext != null;
          return "Description of " + firstMatchingText.matchingText;
        }
        public String getMatchingText(        String pattern){
          boolean tmpVar=pattern != null;
          tmpVar=tmpVar && _context.getParentNode() != null;
          tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
          tmpVar=tmpVar && _context.getChildConcept() != null;
          tmpVar=tmpVar && _context.getModel() != null;
          tmpVar=tmpVar && operationContext != null;
          return firstMatchingText.matchingText;
        }
        public String getVisibleMatchingText(        String pattern){
          return getMatchingText(pattern);
        }
        public SNode getIconNode(        String pattern){
          boolean tmpVar=pattern != null;
          tmpVar=tmpVar && _context.getParentNode() != null;
          tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
          tmpVar=tmpVar && _context.getChildConcept() != null;
          tmpVar=tmpVar && _context.getModel() != null;
          tmpVar=tmpVar && operationContext != null;
          return MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e167220f9L,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild1").getDeclarationNode();
        }
        public SNode getActionType(        String pattern){
          boolean tmpVar=pattern != null;
          tmpVar=tmpVar && _context.getParentNode() != null;
          tmpVar=tmpVar && _context.getCurrentTargetNode() != null;
          tmpVar=tmpVar && _context.getChildConcept() != null;
          tmpVar=tmpVar && _context.getModel() != null;
          tmpVar=tmpVar && operationContext != null;
          return _quotation_createNode_mw8afp_a8a0a0a();
        }
      }
);
    }
  }
{
    SNode outputConcept=MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e167220f9L,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild1").getDeclarationNode();
    SNode childConcept=(SNode)_context.getChildConcept();
    if (outputConcept == null || SConceptOperations.isSuperConceptOf(SNodeOperations.asSConcept(childConcept),SNodeOperations.asSConcept(outputConcept))) {
      ListSequence.fromList(result).addElement(new DefaultSimpleSubstituteAction(outputConcept,_context.getParentNode(),_context.getCurrentTargetNode(),_context.getChildSetter()){
        public SNode createChildNode(        Object parameterObject,        SModel model,        String pattern){
          return SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2c99ba4dd5ff2533L,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild1SubConcept"));
        }
        public boolean hasSubstitute(){
          return true;
        }
        public boolean canSubstitute_internal(        String pattern,        boolean strictly){
          return false;
        }
        public String getMatchingText(        String pattern){
          return "newChild2_fake_filtered";
        }
        public String getVisibleMatchingText(        String pattern){
          return getMatchingText(pattern);
        }
      }
);
    }
  }
{
    SNode outputConcept=MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e1672224dL,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild2").getDeclarationNode();
    SNode childConcept=(SNode)_context.getChildConcept();
    if (outputConcept == null || SConceptOperations.isSuperConceptOf(SNodeOperations.asSConcept(childConcept),SNodeOperations.asSConcept(outputConcept))) {
      ListSequence.fromList(result).addElement(new DefaultSimpleSubstituteAction(outputConcept,_context.getParentNode(),_context.getCurrentTargetNode(),_context.getChildSetter()){
        public SNode createChildNode(        Object parameterObject,        SModel model,        String pattern){
          return SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x737ed1fffa634ebcL,0xa834435499b23c64L,0x2365c14e1672224dL,"jetbrains.mps.lang.actions.testLanguage.structure.ActionTestChild2"));
        }
        @Override protected SNode selectChildNode(        SNode createdNode,        SModel model,        String pattern,        EditorContext editorContext){
          boolean tmpVar=pattern != null;
          tmpVar=tmpVar && _context.getParentNode() != null;
          tmpVar=tmpVar && createdNode != null;
          tmpVar=tmpVar && _context.getChildConcept() != null;
          tmpVar=tmpVar && model != null;
          tmpVar=tmpVar && operationContext != null;
          tmpVar=tmpVar && editorContext != null;
          editorContext.flushEvents();
          EditorCell createdNodeCell=editorContext.getEditorComponent().findNodeCell(createdNode);
          if (createdNodeCell != null) {
            EditorCell firstLeaf=CellTraversalUtil.getFirstLeaf(createdNodeCell);
            editorContext.getEditorComponent().changeSelection(firstLeaf);
            if (firstLeaf instanceof EditorCell_Label) {
              ((EditorCell_Label)firstLeaf).setCaretPosition(3);
            }
            return null;
          }
          return createdNode;
        }
        public String getDescriptionText(        String pattern){
          return "NewChild2 description text";
        }
        public String getMatchingText(        String pattern){
          return "newChild2";
        }
        public String getVisibleMatchingText(        String pattern){
          return getMatchingText(pattern);
        }
        public SNode getActionType(        String pattern){
          return _quotation_createNode_mw8afp_a0a0a1a();
        }
      }
);
    }
  }
  return result;
}
