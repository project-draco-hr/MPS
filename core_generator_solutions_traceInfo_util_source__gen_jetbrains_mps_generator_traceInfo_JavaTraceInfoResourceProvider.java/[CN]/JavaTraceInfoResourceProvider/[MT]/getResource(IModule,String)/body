{
  ModuleDescriptor descriptor=module.getModuleDescriptor();
  if (SModuleOperations.isCompileInMps(module) || (descriptor != null && !(descriptor.getAdditionalJavaStubPaths().isEmpty()))) {
    return JavaModuleOperations.createClassPathItem(module.getFacet(JavaModuleFacet.class).getClassPath(),JavaTraceInfoResourceProvider.class.getName()).getResource(resourceName);
  }
  if (SModuleOperations.isCompileInIdea(module)) {
    return CommonPaths.getMPSClassPath().getResource(resourceName);
  }
  return null;
}
