{
  mySubstituteAction=new NodeSubstituteActionWrapper(action){
    @Override public SNode substitute(    @Nullable EditorContext context,    String string){
      SNode result=super.substitute(context,string);
      setNodePositionCallback.invoke(result,myX,myY);
      return result;
    }
  }
;
  myDiagramCell=diagramCell;
  myEditorContext=editorContext;
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      myIcon=getIconInternal();
      myPresentation=mySubstituteAction.getMatchingText("");
    }
  }
);
}
