{
  File[] files=dir.listFiles();
  if (files == null) {
    return dir.lastModified();
  }
  long result=dir.lastModified();
  for (  File file : files) {
    if (isIgnoredDir(file.getName())) {
      continue;
    }
    if (recursive) {
      result=Math.max(result,getNewestFileTime(file));
    }
 else {
      result=Math.max(result,file.lastModified());
    }
  }
  return result;
}
