{
  SNode selectedNode=editorContext.getSelectedNode();
  SNode linePart=SNodeOperations.getAncestor(selectedNode,"jetbrains.mpslite.structure.LinePart",true,false);
  SNode prevLinePart=null;
  while (linePart != null) {
    prevLinePart=linePart;
    linePart=SNodeOperations.getAncestor(linePart,"jetbrains.mpslite.structure.LinePart",false,false);
  }
  if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(prevLinePart),"jetbrains.mpslite.structure.Line")) {
    SNode line=SNodeOperations.getParent(prevLinePart);
    SNode nextLine=SNodeOperations.insertNextSiblingChild(line,SConceptOperations.createNewNode("jetbrains.mpslite.structure.Line",null));
    SNode sibling=SNodeOperations.getNextSibling(prevLinePart);
    while (sibling != null) {
      SNode currentSibling=sibling;
      sibling=SNodeOperations.getNextSibling(sibling);
      line.removeChild(currentSibling);
      SLinkOperations.addChild(nextLine,"linePart",currentSibling);
    }
  }
}
