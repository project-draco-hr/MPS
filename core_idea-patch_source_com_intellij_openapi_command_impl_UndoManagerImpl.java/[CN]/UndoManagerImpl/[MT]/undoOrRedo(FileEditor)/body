{
  final RuntimeException[] exception=new RuntimeException[1];
  Runnable executeUndoOrRedoAction=new Runnable(){
    public void run(){
      try {
        if (isUndoInProgress()) {
          myMerger.undoOrRedo(editor,true);
        }
 else {
          myMerger.undoOrRedo(editor,false);
        }
      }
 catch (      RuntimeException ex) {
        exception[0]=ex;
      }
 finally {
        myCurrentOperationState=NONE;
      }
    }
  }
;
  ModelAccess.instance().executeCommand(executeUndoOrRedoAction);
  if (exception[0] != null)   throw exception[0];
}
