{
  for (  SNode inputNode : inputNodes) {
    if (inputNode == null) {
      continue;
    }
    SNode outputNode=mapping.get(inputNode);
    for (    SReference ref : inputNode.getReferencesArray()) {
      SNode inputTargetNode=ref.getTargetNode();
      if (cloneRefs || inputTargetNode == null) {
        if (ref instanceof StaticReference) {
          StaticReference staticReference=(StaticReference)ref;
          outputNode.addReference(new StaticReference(staticReference.getRole(),outputNode,staticReference.getTargetSModelReference(),staticReference.getTargetNodeId(),staticReference.getResolveInfo()));
        }
      }
 else       if (mapping.containsKey(inputTargetNode)) {
        outputNode.setReferent(ref.getRole(),mapping.get(inputTargetNode),false);
      }
 else {
        outputNode.setReferent(ref.getRole(),inputTargetNode,false);
      }
    }
    addReferences(inputNode.getChildren(copyAttributes),mapping,copyAttributes,cloneRefs);
  }
}
