{
  SNode result;
  if (node == null) {
    result=null;
  }
 else {
    result=new SNode(node.getModel(),node.getConceptFqName(),false);
    mapping.put(node,result);
    result.putProperties(node);
    for (    String role : node.getChildRoles(copyAttributes)) {
      for (      SNode child : node.getChildren(role)) {
        result.addChild(role,clone(child,mapping,copyAttributes));
      }
    }
  }
  return result;
}
