{
  if (ourLoggingOff)   return;
  SModel model=getSourceNode().getModel();
  if (model != null && SModelStereotype.isStubModelStereotype(jetbrains.mps.util.SNodeOperations.getModelStereotype(model)))   return;
synchronized (ourErrorReportedRefs) {
    if (ourErrorReportedRefs.contains(this))     return;
    ourErrorReportedRefs.add(this);
    Logger log=Logger.getLogger(this.getClass());
    log.error("\ncouldn't resolve reference '" + getRole() + "' from "+ org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(getSourceNode()),validNode(getSourceNode()));
    if (message != null)     log.error(" -- " + message);
    if (problems != null) {
      for (      ProblemDescription pd : problems) {
        log.error(pd.getMessage(),validNode(pd.getNode().resolve(MPSModuleRepository.getInstance())));
      }
    }
  }
}
