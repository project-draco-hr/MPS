{
  String methodName=new String(x.selector);
  SNode result=null;
  SNode call=null;
  if (x.receiver instanceof ThisReference && ((ThisReference)x.receiver).isImplicitThis()) {
    SNode lmc=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.LocalMethodCall",null);
    org.jetbrains.mps.openapi.model.SReference ref=new DynamicReference("baseMethodDeclaration",lmc,null,methodName);
    lmc.setReference("baseMethodDeclaration",ref);
    result=lmc;
    call=lmc;
  }
 else {
    Expression receiver=x.receiver;
    if (receiver instanceof NameReference) {
      SNode unkDotCall=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.UnknownDotCall",null);
      SPropertyOperations.set(unkDotCall,"callee",methodName);
      String[] tokens;
      if (x.receiver instanceof SingleNameReference) {
        tokens=new String[1];
        tokens[0]=new String(((SingleNameReference)x.receiver).token);
      }
 else       if (x.receiver instanceof QualifiedNameReference) {
        QualifiedNameReference nameRef=((QualifiedNameReference)x.receiver);
        tokens=new String[nameRef.tokens.length];
        for (int i=0; i < tokens.length; i++) {
          tokens[i]=new String(nameRef.tokens[i]);
        }
      }
 else {
        return null;
      }
      StringBuilder sb=new StringBuilder();
      for (      String tok : tokens) {
        sb.append(tok);
        sb.append('.');
      }
      sb.deleteCharAt(sb.length() - 1);
      SPropertyOperations.set(unkDotCall,"tokens",sb.toString());
      result=unkDotCall;
      call=unkDotCall;
    }
 else     if (x.receiver instanceof SuperReference) {
      SNode smc=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.SuperMethodCall",null);
      org.jetbrains.mps.openapi.model.SReference ref=new DynamicReference("baseMethodDeclaration",smc,null,methodName);
      smc.setReference(ref.getRole(),ref);
      result=smc;
      call=smc;
    }
 else {
      SNode dotExpr=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.DotExpression",null);
      SLinkOperations.setTarget(dotExpr,"operand",convertExpressionWrap(x.receiver),true);
      SNode instCall=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation",null);
      SLinkOperations.setTarget(dotExpr,"operation",instCall,true);
      org.jetbrains.mps.openapi.model.SReference sref=new DynamicReference("baseMethodDeclaration",instCall,null,methodName);
      instCall.setReference(sref.getRole(),sref);
      result=dotExpr;
      call=instCall;
    }
  }
  if ((call != null)) {
    addCallArgs(call,x.arguments);
    addTypeArgs(x.typeArguments,SLinkOperations.getTargets(call,"typeArgument",true));
  }
  return result;
}
