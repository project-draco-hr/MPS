{
  SNode compType=convertTypeReference(x.type);
  if (x.initializer != null) {
    if (x.dimensions.length > 1) {
      compType=buildArrayType(compType,x.dimensions.length - 1,false);
    }
    List<SNode> initializers=new ArrayList<SNode>();
    if (x.initializer.expressions != null) {
      for (      Expression expression : x.initializer.expressions) {
        ListSequence.fromList(initializers).addElement(convertExpressionWrap(expression));
      }
    }
    SNode arrayCreator=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1154542696413l,"jetbrains.mps.baseLanguage.structure.ArrayCreatorWithInitializer"));
    for (    SNode initializer : initializers) {
      ListSequence.fromList(SLinkOperations.getChildren(arrayCreator,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1154542696413l,1154542803372l,"initValue"))).addElement(initializer);
    }
    SLinkOperations.setTarget(arrayCreator,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1154542696413l,1154542793668l,"componentType"),compType);
    SNode genericNewExpression=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1145552977093l,"jetbrains.mps.baseLanguage.structure.GenericNewExpression"));
    SLinkOperations.setTarget(genericNewExpression,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1145552977093l,1145553007750l,"creator"),arrayCreator);
    return genericNewExpression;
  }
 else {
    List<SNode> dims=new ArrayList<SNode>();
    for (    Expression dimension : x.dimensions) {
      if (dimension == null) {
        ListSequence.fromList(dims).addElement(null);
      }
 else {
        ListSequence.fromList(dims).addElement(convertExpressionWrap(dimension));
      }
    }
    SNode arrayCreator=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1184950988562l,"jetbrains.mps.baseLanguage.structure.ArrayCreator"));
    for (    SNode dim : dims) {
      SNode dimensionExpression=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1184952934362l,"jetbrains.mps.baseLanguage.structure.DimensionExpression"));
      ListSequence.fromList(SLinkOperations.getChildren(arrayCreator,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1184950988562l,1184952969026l,"dimensionExpression"))).addElement(dimensionExpression);
      if (dim != null) {
        SLinkOperations.setTarget(dimensionExpression,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1184952934362l,1184953288404l,"expression"),dim);
      }
    }
    SNode deepestComponentType=compType;
    while (SNodeOperations.isInstanceOf(deepestComponentType,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534760951l,"jetbrains.mps.baseLanguage.structure.ArrayType"))) {
      deepestComponentType=SLinkOperations.getTarget(SNodeOperations.cast(deepestComponentType,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534760951l,"jetbrains.mps.baseLanguage.structure.ArrayType")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1070534760951l,1070534760952l,"componentType"));
    }
    SLinkOperations.setTarget(arrayCreator,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1184950988562l,1184951007469l,"componentType"),deepestComponentType);
    SNode genericNewExpression=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1145552977093l,"jetbrains.mps.baseLanguage.structure.GenericNewExpression"));
    SLinkOperations.setTarget(genericNewExpression,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1145552977093l,1145553007750l,"creator"),arrayCreator);
    return genericNewExpression;
  }
}
