{
  ArrayList<SNode> roots=new ArrayList<SNode>();
  for (  SNode root1 : model.getRootNodes()) {
    roots.add(root1);
  }
  TransientModelWithMetainfo metainfo=new TransientModelWithMetainfo((SModelReference)model.getReference(),roots);
  Iterator<SNode> it=model.getRootNodes().iterator();
  while (it.hasNext()) {
    SNode root=it.next();
    SNode node=builder.getOriginalForOutput(root);
    metainfo.myRootToOriginal.put(root.getNodeId(),node == null ? null : node.getNodeId());
  }
  builder.updateUnchanged(metainfo);
  return metainfo;
}
