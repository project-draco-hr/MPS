{
  TransientModelWithMetainfo metainfo=new TransientModelWithMetainfo(model);
  Iterator<SNode> it=model.roots();
  while (it.hasNext()) {
    SNode root=it.next();
    SNode node=builder.getOriginalForOutput(root);
    String originalId=node == null ? CONDITIONALS_ID : node.getId();
    metainfo.myRootToOriginal.put(root.getId(),originalId);
  }
  if (mappings != null) {
    mappings.serialize(metainfo);
  }
  return metainfo;
}
