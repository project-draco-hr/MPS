{
  Iterator<SNode> iterator=rootsToCopy.iterator();
  while (iterator.hasNext()) {
    SNode rootNode=iterator.next();
    if (isRootToDrop(rootNode)) {
      iterator.remove();
    }
  }
  List<SNode> copiedRoots=new ArrayList<SNode>(rootsToCopy.size());
  for (  SNode rootToCopy : rootsToCopy) {
    boolean[] changed=new boolean[]{false};
    SNode newroot=copyNodeFromInputRoot(rootToCopy,changed);
    if (changed[0]) {
      setChanged(true);
    }
    registerRoot(newroot,rootToCopy);
    copiedRoots.add(newroot);
  }
  return copiedRoots;
}
