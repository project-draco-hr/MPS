{
  if (clonedOutputNode.getParent() != null) {
    List<SNode> outputNodes=tryToReduce(inputNode,null);
    if (outputNodes != null) {
      SNode parent=clonedOutputNode.getParent();
      String childRole=parent.getRoleOf(clonedOutputNode);
      for (      SNode outputNode : outputNodes) {
        if (!GeneratorUtil.checkChild(parent,childRole,outputNode)) {
          showWarningMessage(inputNode," -- was input: " + inputNode.getDebugText());
        }
      }
      parent.replaceChild(clonedOutputNode,outputNodes);
      return;
    }
  }
  myGenerationTracer.pushCopyOperation();
  for (  SNode childInputNode : inputNode.getChildren()) {
    SNode childOutputNode=findOutputNodeById(childInputNode.getSNodeId());
    applyReductionRules(childInputNode,childOutputNode);
  }
  myGenerationTracer.pushOutputNode(clonedOutputNode);
}
