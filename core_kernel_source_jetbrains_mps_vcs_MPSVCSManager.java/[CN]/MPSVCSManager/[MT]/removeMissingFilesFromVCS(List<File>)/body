{
  myTasksQueue.invokeLater(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          for (          File file : filesToRemove) {
            FilePath path=VcsContextFactory.SERVICE.getInstance().createFilePathOnDeleted(file,file.isDirectory());
            AbstractVcs fromVCS=myManager.getVcsFor(path);
            if (fromVCS != null) {
              CheckinEnvironment ci=fromVCS.getCheckinEnvironment();
              if (ci != null) {
                ci.scheduleMissingFileForDeletion(Collections.singletonList(path));
              }
            }
          }
        }
      }
);
    }
  }
);
}
