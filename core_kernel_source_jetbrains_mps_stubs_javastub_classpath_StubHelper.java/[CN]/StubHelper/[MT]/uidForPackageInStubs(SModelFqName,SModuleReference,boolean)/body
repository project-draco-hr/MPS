{
  String moduleName=null;
  SModelId id;
  if (moduleRef != null) {
    moduleName=moduleRef.getModuleName();
    id=jetbrains.mps.smodel.SModelId.foreign(name.getStereotype(),moduleRef.getModuleId().toString(),name.getLongName());
  }
 else {
    id=StubMigrationHelper.convertModelUIDAny(name.getStereotype() + "#" + name.getLongName(),forceResolve);
  }
  SModelFqName fqName=new SModelFqName(moduleName,name.getLongName(),name.getStereotype());
  return new jetbrains.mps.smodel.SModelReference(fqName,id);
}
