{
  String moduleFqName=null;
  SModelId id;
  if (moduleRef != null) {
    moduleFqName=moduleRef.getModuleFqName();
    id=SModelId.foreign(name.getStereotype(),moduleRef.getModuleId().toString(),name.getLongName());
  }
 else {
    id=StubMigrationHelper.convertModelUIDAny(name.getStereotype() + "#" + name.getLongName(),forceResolve);
  }
  SModelFqName fqName=new SModelFqName(moduleFqName,name.getLongName(),name.getStereotype());
  return new SModelReference(fqName,id);
}
