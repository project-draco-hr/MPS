{
  try {
    Map<SNodeId,SNode> roots=new HashMap<SNodeId,SNode>();
    for (    SNode n : model.getRootNodes()) {
      roots.put(n.getNodeId(),SNodeOperations.cast(n,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x101d9d3ca30L,"jetbrains.mps.baseLanguage.structure.Classifier")));
    }
    ClassifierLoader loader=new ClassifierLoader(new StubReferenceFactory(myModule,model),myOnlyPublic,mySkipPrivate);
    for (    IFile classfile : getTopClassFiles()) {
      SNodeId nodeId=ASMNodeId.createId(ClassifierLoader.getClassName(classfile));
      SNode root=roots.get(nodeId);
      if (root != null) {
        loader.updateClassifier(root,classfile);
      }
    }
  }
 catch (  Exception e) {
    LOG.error("Exception",e);
  }
}
