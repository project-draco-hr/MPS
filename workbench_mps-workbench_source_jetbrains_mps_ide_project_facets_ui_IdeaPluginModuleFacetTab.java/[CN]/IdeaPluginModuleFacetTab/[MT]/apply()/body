{
  ((IdeaPluginModuleFacetImpl)myNewIdeaPluginModuleFacet).setPluginId(myTextField.getText());
  myTableModel.apply();
  Memento memento=new MementoImpl();
  ((SModuleFacet)myNewIdeaPluginModuleFacet).save(memento);
  ModuleFacetDescriptor facetDescriptor=new ModuleFacetDescriptor(((ModuleFacetBase)myNewIdeaPluginModuleFacet).getFacetType(),memento);
  ModuleDescriptor descriptor=((IModule)((SModuleFacet)myIdeaPluginModuleFacet).getModule()).getModuleDescriptor();
  Iterator<ModuleFacetDescriptor> iterator=descriptor.getModuleFacetDescriptors().iterator();
  while (iterator.hasNext()) {
    ModuleFacetDescriptor mfd=iterator.next();
    if (mfd.getType().equals(facetDescriptor.getType())) {
      iterator.remove();
      break;
    }
  }
  if (!myNewIdeaPluginModuleFacet.getPluginId().isEmpty() || !myNewIdeaPluginModuleFacet.getContainedModules().isEmpty())   descriptor.getModuleFacetDescriptors().add(facetDescriptor);
}
