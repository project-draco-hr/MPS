{
  SModelReference trgsmref=this.gwtstubResolver.stubModelReference(namespace(fqName));
  if (SNodeOperations.getModel(src).getSModelReference().equals(trgsmref)) {
    SNode trg=ListSequence.fromList(SModelOperations.getRoots(SNodeOperations.getModel(src),"jetbrains.mps.gwt.client.structure.GWTModule")).findFirst(new IWhereFilter<SNode>(){
      public boolean accept(      SNode gwtmod){
        return SPropertyOperations.getString(gwtmod,"name").equals(shortName(fqName));
      }
    }
);
    src.addReference(SReference.create(SPropertyOperations.getString(link,"role"),src,trg));
  }
 else {
    jetbrains.mps.smodel.SModelOperations.addImportedModel(SNodeOperations.getModel(src),trgsmref);
    src.addReference(SReference.create(SPropertyOperations.getString(link,"role"),src,trgsmref,createId(fqName)));
  }
}
