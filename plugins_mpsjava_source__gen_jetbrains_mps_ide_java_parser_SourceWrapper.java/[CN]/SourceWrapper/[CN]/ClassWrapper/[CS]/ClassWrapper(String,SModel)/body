{
  super(source,model);
  int index=source.indexOf("class");
  if (index == -1) {
    throw new ConversionFailedException("not a class");
  }
 else {
    int i=index + "class".length();
    while (Character.isWhitespace(source.charAt(i))) {
      i++;
    }
    StringBuilder sb=new StringBuilder();
    while (!((Character.isWhitespace(source.charAt(i)))) && !((source.charAt(i) == '{'))) {
      char c=source.charAt(i);
      sb.append(c);
      i++;
    }
    myClassName=sb.toString();
    int iPackage=source.indexOf("package ");
    if (0 <= iPackage && iPackage < i || StringUtils.isEmpty(jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations.getModelName(model))) {
      myWrappedSource=source;
    }
 else {
      myWrappedSource="package " + jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations.getModelName(model) + ";\n"+ source;
    }
  }
}
