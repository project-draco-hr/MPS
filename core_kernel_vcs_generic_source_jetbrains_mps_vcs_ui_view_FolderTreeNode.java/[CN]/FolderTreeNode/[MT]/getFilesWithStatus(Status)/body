{
  List<IFile> files=new LinkedList<IFile>();
  files.addAll(super.getFilesWithStatus(statuses));
  for (int i=0; i < getChildCount(); i++) {
    TreeNode child=getChildAt(i);
    if (!(child instanceof AbstractFileTreeNode)) {
      throw new IllegalStateException("Tree only consists of file or folder nodes");
    }
 else {
      files.addAll(((AbstractFileTreeNode)child).getFilesWithStatus(statuses));
    }
  }
  return files;
}
