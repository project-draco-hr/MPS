{
  Language language=(Language)model.getModule();
  LanguageAspect aspect=language.getAspectForModel(model);
  for (  ModuleReference impLang : aspect.getAllLanguagesToImport(language)) {
    model.getSModel().addLanguage(impLang);
  }
  if (ThreadUtils.isEventDispatchThread()) {
    model.save();
  }
 else {
    ModelAccess.instance().runCommandInEDT(new Runnable(){
      @Override public void run(){
        model.save();
      }
    }
);
  }
  language.setLanguageDescriptor(language.getLanguageDescriptor(),false);
  language.save();
}
