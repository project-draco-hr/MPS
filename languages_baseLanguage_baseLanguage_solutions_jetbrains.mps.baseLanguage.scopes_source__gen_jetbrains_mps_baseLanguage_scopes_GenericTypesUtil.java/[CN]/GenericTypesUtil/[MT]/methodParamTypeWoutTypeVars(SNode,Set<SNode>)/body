{
  SNode typeCopy=SNodeOperations.copyNode(type);
  for (  SNode typeVariableRef : ListSequence.fromList(SNodeOperations.getNodeDescendants(typeCopy,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1109283449304l,"jetbrains.mps.baseLanguage.structure.TypeVariableReference"),false,new SAbstractConcept[]{}))) {
    if (!(SetSequence.fromSet(typeParams).contains(SLinkOperations.getTarget(typeVariableRef,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1109283449304l,1109283546497l,"typeVariableDeclaration"))))) {
      continue;
    }
    if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(typeVariableRef),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1171903916106l,"jetbrains.mps.baseLanguage.structure.UpperBoundType")) && SNodeOperations.hasRole(typeVariableRef,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1171903916106l,1171903916107l,"bound")) || SNodeOperations.isInstanceOf(SNodeOperations.getParent(typeVariableRef),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1171903862077l,"jetbrains.mps.baseLanguage.structure.LowerBoundType")) && SNodeOperations.hasRole(typeVariableRef,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1171903862077l,1171903869531l,"bound"))) {
      SNodeOperations.replaceWithNewChild(SNodeOperations.getParent(typeVariableRef),"jetbrains.mps.baseLanguage.structure.WildCardType");
    }
 else {
      SNodeOperations.replaceWithNewChild(typeVariableRef,"jetbrains.mps.baseLanguage.structure.WildCardType");
    }
  }
  return typeCopy;
}
