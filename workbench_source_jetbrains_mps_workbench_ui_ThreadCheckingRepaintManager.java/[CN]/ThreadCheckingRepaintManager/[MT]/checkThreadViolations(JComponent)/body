{
  if (!SwingUtilities.isEventDispatchThread() && c.isShowing()) {
    Throwable t=new Throwable("Invalid access to EDT");
    boolean repaint=false;
    boolean fromSwing=false;
    StackTraceElement[] trace=t.getStackTrace();
    for (    StackTraceElement element : trace) {
      if (repaint && element.getClassName().startsWith("javax.swing")) {
        fromSwing=true;
      }
      if ("repaint".equals(element.getMethodName())) {
        repaint=true;
      }
    }
    if (repaint && !fromSwing) {
      return;
    }
    t.printStackTrace();
  }
}
