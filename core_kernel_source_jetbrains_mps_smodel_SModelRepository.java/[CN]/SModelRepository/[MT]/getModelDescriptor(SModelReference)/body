{
  if (modelReference == null)   return null;
synchronized (myModelsLock) {
    SModelId id=modelReference.getSModelId();
    if (id == null) {
      SModelFqName fqName=modelReference.getSModelFqName();
      if (fqName == null)       return null;
      if (!myWasError) {
        myWasError=true;
      }
      for (      SModelDescriptor d : myModelsWithOwners.keySet()) {
        if (EqualUtil.equals(fqName,d.getSModelReference().getSModelFqName()))         return d;
      }
      return null;
    }
    return myIdToModelDescriptorMap.get(id);
  }
}
