{
  ModelAccess.assertLegalWrite();
  fireBeforeModelRemoved(md);
  myModelsToOwners.clearFirst(md);
  myModelDescriptors.remove(md);
  if (md instanceof EditableSModelDescriptor) {
    boolean result=removeModelFromFileCache(((EditableSModelDescriptor)md));
    LOG.assertLog(result,"model " + md + " do not have a path in file cache");
  }
  if (md.getSModelReference().getSModelId() != null) {
    if (md.getSModelReference().getSModelId() != null) {
      myIdToModelDescriptorMap.remove(md.getSModelReference().getSModelId());
    }
    myFqNameToModelDescriptorMap.remove(md.getSModelReference().getSModelFqName());
    myModelsWithNoOwners.remove(md);
    removeListeners(md);
    fireModelRemoved(md);
    md.dispose();
  }
}
