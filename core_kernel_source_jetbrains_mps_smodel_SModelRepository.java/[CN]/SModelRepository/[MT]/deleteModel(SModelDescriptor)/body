{
  ModelAccess.assertLegalWrite();
  fireModelWillBeDeletedEvent(d);
  removeModelDescriptor(d);
  if (d instanceof BaseSModelDescriptorWithSource) {
    ModelDataSource source=((BaseSModelDescriptorWithSource)d).getSource();
    if (source instanceof FileBasedModelDataSource) {
      for (      String file : ((FileBasedModelDataSource)source).getFilesToListen()) {
        IFile modelFile=FileSystem.getInstance().getFileByPath(file);
        if (modelFile != null && modelFile.exists()) {
          modelFile.delete();
        }
      }
    }
  }
  SModelRepository.getInstance().fireModelDeletedEvent(d);
}
