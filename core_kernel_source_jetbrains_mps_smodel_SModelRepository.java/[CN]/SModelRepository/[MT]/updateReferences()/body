{
  ModelAccess.assertLegalWrite();
  for (  SModelDescriptor sm : getModelDescriptors()) {
    if (SModelStereotype.isStubModelStereotype(sm.getStereotype()))     continue;
    boolean needSaving=false;
    if (sm.getSModel().updateSModelReferences() && sm.getModelFile() != null && !sm.isReadOnly()) {
      needSaving=true;
    }
    if (sm.getSModel().updateModuleReferences() && sm.getModelFile() != null && !sm.isReadOnly()) {
      needSaving=true;
    }
    if (needSaving) {
      markChanged(sm,true);
    }
  }
}
