{
  ModelAccess.assertLegalWrite();
  List<EditableSModelDescriptor> modelsToRefresh;
synchronized (myModelsLock) {
    modelsToRefresh=getModelsToSave();
  }
  for (  EditableSModelDescriptor emd : modelsToRefresh) {
    DataSource source=emd.getSource();
    if (!(source instanceof DataSourceBase))     continue;
    ((DataSourceBase)source).refresh();
  }
synchronized (myModelsLock) {
    for (    EditableSModelDescriptor emd : getModelsToSave()) {
      try {
        emd.save();
      }
 catch (      Throwable t) {
        LOG.error(t);
      }
    }
  }
}
