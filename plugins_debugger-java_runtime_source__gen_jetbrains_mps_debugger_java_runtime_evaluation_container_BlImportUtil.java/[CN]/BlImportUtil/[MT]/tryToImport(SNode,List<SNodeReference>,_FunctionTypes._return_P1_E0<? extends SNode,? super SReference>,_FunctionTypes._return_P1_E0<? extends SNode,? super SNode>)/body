{
  List<SNode> nodes=CopyUtil.copy(ListSequence.fromList(nodesToImport).select(new ISelector<SNodeReference,SNode>(){
    public SNode select(    SNodeReference it){
      return (SNode)((SNodePointer)it).getNode();
    }
  }
).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return (it != null);
    }
  }
).toListSequence());
  for (  SNode node : ListSequence.fromList(nodes)) {
    if (node == null) {
      continue;
    }
    if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.baseLanguage.structure.Expression")) {
      SNode clone=_quotation_createNode_qvsuy0_a0a0b0b0a(node);
      transformNode(clone,SNodeOperations.getModel(container),findVariable,createReference);
      ListSequence.fromList(SLinkOperations.getTargets(container,"statement",true)).addElement(clone);
    }
 else     if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.baseLanguage.structure.Statement")) {
      transformNode(node,SNodeOperations.getModel(container),findVariable,createReference);
      ListSequence.fromList(SLinkOperations.getTargets(container,"statement",true)).addElement(SNodeOperations.cast(node,"jetbrains.mps.baseLanguage.structure.Statement"));
    }
  }
}
