{
  if (testReporter == null) {
    return;
  }
  if (currentTestName != null) {
    testReporter.testFinished(currentTestName);
  }
  testReporter.runFinished();
  if (isRunningOnTeamCity()) {
    BufferedOutputStream os=null;
    try {
      File reportFile=File.createTempFile("gentest_report-",".xml",gentestdir);
      os=new BufferedOutputStream(new FileOutputStream(reportFile));
      ((XmlTestReporter)testReporter).dump(os);
      System.out.println("##teamcity[importData type='junit' path='" + reportFile.getAbsolutePath() + "']");
    }
 catch (    IOException ex) {
    }
 finally {
      if (os != null) {
        try {
          os.close();
        }
 catch (        IOException ignore) {
        }
      }
    }
  }
  this.testReporter=null;
}
