{
  super.update(e);
  ActionPlace place=MPSDataKeys.PLACE.getData(DataManager.getInstance().getDataContext());
  Set<ActionPlace> places=getPlaces();
  if (place == null) {
    disable(e.getPresentation());
    return;
  }
  if (places != null) {
    if (!places.contains(place)) {
      disable(e.getPresentation());
      return;
    }
  }
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      if (myDisableOnNoProject && e.getData(PlatformDataKeys.PROJECT) == null) {
        disable(e.getPresentation());
        return;
      }
      if (!collectActionData(e)) {
        disable(e.getPresentation());
        return;
      }
      doUpdate(e);
    }
  }
);
}
