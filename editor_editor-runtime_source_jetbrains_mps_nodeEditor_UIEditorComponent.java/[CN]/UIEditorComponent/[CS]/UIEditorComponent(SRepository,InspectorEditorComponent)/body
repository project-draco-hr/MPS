{
  super(repository);
  unregisterKeyboardAction(KeyStroke.getKeyStroke("ESCAPE"));
  myInspector=inspector;
  if (myInspector == null)   return;
  getSelectionManager().addSelectionListener(new SingularSelectionListenerAdapter(){
    @Override protected void selectionChangedTo(    jetbrains.mps.openapi.editor.EditorComponent editorComponent,    SingularSelection newSelection){
      SNode node=newSelection.getEditorCell().getSNode();
      final String[] enabledHints=getEditorHintsForNode(node);
      boolean needToEdit=myInspector.getUpdater().setInitialEditorHints(enabledHints);
      if (needToEdit || myInspector.getEditedNode() != node) {
        myInspector.editNode(node);
      }
    }
  }
);
}
