{
  final boolean[] cancelled=new boolean[]{true};
  ThreadUtils.runInUIThreadAndWait(new Runnable(){
    public void run(){
      IRefactoring refactoring=refactoringContext.getRefactoring();
      Frame mainFrame=refactoringContext.getCurrentOperationContext().getMainFrame();
      RefactoringOptionsDialog dialog=new RefactoringOptionsDialog(mainFrame,refactoringContext,refactoring);
      dialog.showDialog();
      cancelled[0]=dialog.isCancelled();
    }
  }
);
  if (cancelled[0])   return;
  doExecute(refactoringContext);
}
