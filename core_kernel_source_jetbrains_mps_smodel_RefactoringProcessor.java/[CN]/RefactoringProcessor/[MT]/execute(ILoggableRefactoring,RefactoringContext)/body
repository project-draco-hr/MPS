{
  refactoringContext.setRefactoring(refactoring);
  boolean success=refactoring.askForInfo(refactoringContext);
  if (!success)   return;
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      if (refactoring.showsAffectedNodes()) {
        showRefactoring(refactoringContext,refactoring);
      }
 else {
        executeRefactoring(refactoringContext);
      }
    }
  }
);
}
