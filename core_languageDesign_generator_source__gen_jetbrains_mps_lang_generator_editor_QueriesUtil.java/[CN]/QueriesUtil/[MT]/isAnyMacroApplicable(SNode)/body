{
  if (SNodeOperations.getAncestor(node,"jetbrains.mps.lang.generator.structure.RootTemplateAnnotation",true,false) != null) {
    return false;
  }
  SNode ancestorMacro=SNodeOperations.getAncestorWhereConceptInList(node,new String[]{"jetbrains.mps.lang.generator.structure.NodeMacro","jetbrains.mps.lang.generator.structure.PropertyMacro","jetbrains.mps.lang.generator.structure.ReferenceMacro","jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence"},true,false);
  if (ancestorMacro != null) {
    if (SNodeOperations.isInstanceOf(ancestorMacro,"jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence")) {
      return true;
    }
    return false;
  }
  if (SLinkOperations.getTarget(SNodeOperations.getContainingRoot(node),AttributesRolesUtil.childRoleFromAttributeRole("rootTemplateAnnotation"),true) != null) {
    return true;
  }
  if (SNodeOperations.getAncestorWhereConceptInList(node,new String[]{"jetbrains.mps.lang.generator.structure.TemplateDeclaration","jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence"},false,false) != null) {
    return true;
  }
  return false;
}
