{
  for (  SNode child : ListSequence.fromList(SNodeOperations.getChildren(node)).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return !(SNodeOperations.isAttribute(it));
    }
  }
)) {
    SNode link=SNodeOperations.getContainingLinkDeclaration(child);
    if (link != null && SPropertyOperations.hasValue(link,MetaAdapterFactory.getProperty(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf980556927L,"metaClass"),"aggregation","reference")) {
      component.addDependency(link);
      if (!(SConceptOperations.isSuperConceptOf(SNodeOperations.asSConcept(SLinkOperations.getTarget(link,MetaAdapterFactory.getReferenceLink(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf98055fef0L,"target"))),SNodeOperations.asSConcept(SNodeOperations.getConceptDeclaration(child))))) {
        component.addError(child,"incompatible target concept in role \"" + SNodeOperations.getContainingLinkRole(child) + "\": subconcept of \""+ SLinkOperations.getTarget(link,MetaAdapterFactory.getReferenceLink(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf98055fef0L,"target"))+ "\" expected, \""+ SNodeOperations.getConceptDeclaration(child)+ "\" found",null);
      }
    }
  }
  for (  SReference reference : ListSequence.fromList(SNodeOperations.getReferences(node))) {
    SNode link=SLinkOperations.findLinkDeclaration(reference);
    if (link == null || !(SPropertyOperations.hasValue(link,MetaAdapterFactory.getProperty(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf980556927L,"metaClass"),"reference","reference"))) {
      continue;
    }
    SNode target=SLinkOperations.getTargetNode(reference);
    if (target == null) {
      continue;
    }
    component.addDependency(link);
    if (!(SConceptOperations.isSuperConceptOf(SNodeOperations.asSConcept(SLinkOperations.getTarget(link,MetaAdapterFactory.getReferenceLink(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf98055fef0L,"target"))),SNodeOperations.asSConcept(SNodeOperations.getConceptDeclaration(target))))) {
      component.addError(node,"incompatible target concept in role \"" + SLinkOperations.getRole(reference) + "\": subconcept of \""+ SLinkOperations.getTarget(link,MetaAdapterFactory.getReferenceLink(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf98055fef0L,"target"))+ "\" expected, \""+ SNodeOperations.getConceptDeclaration(target)+ "\" found",null,new ReferenceMessageTarget(SPropertyOperations.getString(link,MetaAdapterFactory.getProperty(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf98052f333L,"role"))));
    }
  }
}
