{
  final List<SNode> result=new ArrayList<SNode>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      for (      Language l : ModuleRepositoryFacade.getInstance().getAllModules(Language.class)) {
        SModelDescriptor stubsAspect=LanguageAspect.STUBS.get(l);
        if (stubsAspect == null) {
          continue;
        }
        SModel model=stubsAspect.getSModel();
        result.addAll(SModelOperations.getRoots(model,"jetbrains.mps.lang.stubs.structure.ModelManagerDeclaration"));
      }
    }
  }
);
  return result;
}
