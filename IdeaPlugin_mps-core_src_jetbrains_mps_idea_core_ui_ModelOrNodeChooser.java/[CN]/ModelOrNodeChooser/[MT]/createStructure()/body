{
  return new ProjectTreeStructure(myProject,ID){
    public Object[] getChildElements(    Object element){
      ArrayList<Object> result=new ArrayList<Object>();
      for (      Object o : super.getChildElements(element)) {
        if (o instanceof PsiFileNode) {
          PsiFileNode fileNode=(PsiFileNode)o;
          VirtualFile vFile=fileNode.getVirtualFile();
          if (vFile != null && vFile.getFileType().equals(MPSFileTypeFactory.MPS_FILE_TYPE)) {
            result.add(o);
          }
        }
 else         if (o instanceof MPSPsiElementTreeNode || o instanceof MPSPsiModelTreeNode) {
          result.add(o);
        }
 else         if (o instanceof PsiDirectoryNode) {
          VirtualFile virtualFile=((PsiDirectoryNode)o).getVirtualFile();
          if (virtualFile != null && isModelRootOrParent(virtualFile)) {
            result.add(o);
          }
        }
 else         if (o instanceof ProjectViewModuleNode && hasModelRoots(((ProjectViewModuleNode)o).getValue())) {
          result.add(o);
        }
      }
      return result.toArray();
    }
  }
;
}
