{
  if ((getSelectedNode() != null) && (getSelectedNode().getUserObject() instanceof MPSProjectViewNode)) {
    return ((MPSProjectViewNode)(getSelectedNode().getUserObject())).getValue().getNode();
  }
 else {
    Set<IFile> models=MPSDataKeys.MODEL_FILES.getData(this);
    if (models != null && models.size() == 1) {
      return SModelRepository.getInstance().findModel(models.iterator().next());
    }
  }
  return null;
}
