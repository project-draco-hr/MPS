{
  Map<BaseLibStubDescriptor,ModuleReference> result=new HashMap<BaseLibStubDescriptor,ModuleReference>();
  List<Language> languages=(List<Language>)ModuleRepositoryFacade.getInstance().getAllModules(Language.class);
  for (  Language l : languages) {
    SModelDescriptor descriptor=LanguageAspect.STUBS.get(l);
    if (descriptor == null)     continue;
    Condition<SNode> cond=new Condition<SNode>(){
      public boolean met(      SNode node){
        return node.getConcept().getId().equals(BootstrapLanguages.concept_stubs_LibraryStubDescriptor);
      }
    }
;
    Iterable<SNode> iterable=new ConditionalIterable<SNode>(descriptor.getSModel().roots(),cond);
    for (    SNode node : iterable) {
      Class descrClass=l.getClass(l.getModuleName() + "." + LanguageAspect.STUBS.getName()+ "."+ node.getPersistentProperty(SNodeUtil.property_INamedConcept_name)+ "_StubDescriptor");
      if (descrClass == null)       continue;
      try {
        BaseLibStubDescriptor descr=(BaseLibStubDescriptor)descrClass.newInstance();
        result.put(descr,l.getModuleReference());
      }
 catch (      Throwable t) {
        LOG.error(t);
      }
    }
  }
  return result;
}
