{
  StartupManager.getInstance(getModule().getProject()).runWhenProjectIsInitialized(new Runnable(){
    @Override public void run(){
      ModelAccess.instance().runWriteAction(new Runnable(){
        @Override public void run(){
          SolutionDescriptor solutionDescriptor=getConfiguration().getState().getSolutionDescriptor();
          Solution solution=new SolutionIdea(getModule(),solutionDescriptor);
          com.intellij.openapi.project.Project project=getModule().getProject();
          myMpsProject=ProjectHelper.toMPSProject(project);
          MPSModuleRepository repository=MPSModuleRepository.getInstance();
          if (ModuleRepositoryFacade.getInstance().getModule(solutionDescriptor.getModuleReference()) != null) {
            MessagesViewTool.log(project,MessageKind.ERROR,MPSBundle.message("facet.cannot.load.second.module",solutionDescriptor.getNamespace()));
            return;
          }
          repository.registerModule(mySolution=solution,myMpsProject);
          myMpsProject.addModule(mySolution.getModuleReference());
          LOG.info(MPSBundle.message("facet.module.loaded",MPSFacet.this.mySolution.getModuleFqName()));
          IdeaPluginDescriptor descriptor=PluginManager.getPlugin(PluginManager.getPluginByClassName(MPSFacet.class.getName()));
          String version=descriptor == null ? null : descriptor.getVersion();
          UsageTrigger.trigger("MPS.initFacet." + version);
        }
      }
);
      if (ProjectJavaSourceImporter.isWorkDone()) {
        System.out.println("Work already done here: " + ProjectJavaSourceImporter.ourSolution.getModuleReference().toString());
      }
 else {
        System.out.println("NOT YET");
      }
    }
  }
);
}
