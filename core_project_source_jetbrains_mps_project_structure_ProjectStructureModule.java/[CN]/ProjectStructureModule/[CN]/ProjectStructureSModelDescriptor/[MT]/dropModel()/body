{
  if (mySModel == null)   return;
  final jetbrains.mps.smodel.SModel oldModel=mySModel;
  mySModel=null;
  if (ModelAccess.instance().canWrite()) {
    replaceModelAndFireEvent(oldModel,null);
  }
 else {
    ModelAccess.instance().runWriteInEDT(new Runnable(){
      @Override public void run(){
        replaceModelAndFireEvent(oldModel,null);
      }
    }
);
  }
}
