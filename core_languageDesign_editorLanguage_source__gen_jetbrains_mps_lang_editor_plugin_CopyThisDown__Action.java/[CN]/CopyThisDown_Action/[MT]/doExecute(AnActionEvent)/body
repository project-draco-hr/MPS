{
  try {
    if (ListSequence.fromList(CopyThisDown_Action.this.inputNodes).count() == 1) {
      SNode nodeToCopy=ListSequence.fromList(CopyThisDown_Action.this.inputNodes).first();
      while (SNodeOperations.getParent(nodeToCopy) != null) {
        SNode parent=SNodeOperations.getParent(nodeToCopy);
        String role=nodeToCopy.getRole_();
        SNode link=AbstractConceptDeclaration_Behavior.call_findLinkDeclaration_1213877394467(SNodeOperations.getConceptDeclaration(parent),role);
        if (link == null) {
          return;
        }
        if (!(LinkDeclaration_Behavior.call_isSingular_1213877254557(link))) {
          SNode copy=SNodeOperations.copyNode(nodeToCopy);
          parent.insertChild(nodeToCopy,role,copy);
          CopyThisDown_Action.this.editor.getEditorContext().selectWRTFocusPolicy(copy);
          CopyThisDown_Action.this.editor.selectNode(copy);
          return;
        }
        nodeToCopy=parent;
      }
    }
 else {
      SNode firstNode=ListSequence.fromList(CopyThisDown_Action.this.inputNodes).first();
      SNode lastNode=ListSequence.fromList(CopyThisDown_Action.this.inputNodes).last();
      String role=firstNode.getRole_();
      SNode parent=SNodeOperations.getParent(firstNode);
      SNode link=AbstractConceptDeclaration_Behavior.call_findLinkDeclaration_1213877394467(SNodeOperations.getConceptDeclaration(parent),role);
      if (link == null) {
        return;
      }
      for (      SNode node : ListSequence.fromList(CopyThisDown_Action.this.inputNodes).reversedList()) {
        parent.insertChild(lastNode,role,SNodeOperations.copyNode(node));
      }
      CopyThisDown_Action.this.editor.getEditorContext().selectRange(firstNode,lastNode);
    }
  }
 catch (  Throwable t) {
    LOG.error("User's action execute method failed. Action:" + "CopyThisDown",t);
  }
}
