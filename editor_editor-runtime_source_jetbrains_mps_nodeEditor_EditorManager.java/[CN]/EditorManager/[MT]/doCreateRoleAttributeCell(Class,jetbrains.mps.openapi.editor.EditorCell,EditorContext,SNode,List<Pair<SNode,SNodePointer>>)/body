{
  Stack<EditorCell> stack=myAttributedClassesToAttributedCellStacksMap.get(attributeKind);
  if (stack == null) {
    stack=new Stack<EditorCell>();
    myAttributedClassesToAttributedCellStacksMap.put(attributeKind,stack);
  }
  stack.push((EditorCell)cellWithRole);
  myLastAttributedCell=(EditorCell)cellWithRole;
  EditorCell result=createEditorCell(context,modifications,ReferencedNodeContext.createNodeAttributeContext(roleAttribute));
  myLastAttributedCell=null;
  EditorCell cellWithRolePopped=stack.pop();
  LOG.assertLog(cellWithRolePopped == cellWithRole);
  return result;
}
