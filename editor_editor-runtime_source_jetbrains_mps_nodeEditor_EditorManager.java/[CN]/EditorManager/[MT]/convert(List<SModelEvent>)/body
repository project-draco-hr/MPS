{
  if (events == null) {
    return null;
  }
  LinkedHashSet<Pair<SNode,SNodeReference>> result=new LinkedHashSet<Pair<SNode,SNodeReference>>();
  for (  SModelEvent event : events) {
    SNode eventNode;
    if (event instanceof SModelChildEvent) {
      eventNode=((SModelChildEvent)event).getParent();
    }
 else     if (event instanceof SModelReferenceEvent) {
      eventNode=((SModelReferenceEvent)event).getReference().getSourceNode();
    }
 else     if (event instanceof SModelPropertyEvent) {
      eventNode=((SModelPropertyEvent)event).getNode();
    }
 else     continue;
    result.add(new Pair<SNode,SNodeReference>(eventNode,new jetbrains.mps.smodel.SNodePointer((SModelReference)event.getModel().getReference(),eventNode.getNodeId()){
      int myHashCode=-1;
      @Override public int hashCode(){
        if (myHashCode == -1) {
          myHashCode=super.hashCode();
        }
        return myHashCode;
      }
    }
));
  }
  return new ArrayList<Pair<SNode,SNodeReference>>(result);
}
