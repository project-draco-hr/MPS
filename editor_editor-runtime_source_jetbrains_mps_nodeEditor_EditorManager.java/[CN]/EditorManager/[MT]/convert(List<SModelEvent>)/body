{
  if (events == null) {
    return null;
  }
  LinkedHashSet<Pair<SNode,SNodeReference>> result=new LinkedHashSet<Pair<SNode,SNodeReference>>();
  for (  SModelEvent event : events) {
    SNode eventNode;
    if (event instanceof SModelChildEvent) {
      SModelChildEvent childEvent=(SModelChildEvent)event;
      eventNode=childEvent.getParent();
      if (childEvent.isRemoved()) {
        SNode removedChild=childEvent.getChild();
        result.add(new Pair<SNode,SNodeReference>(removedChild,new CachingSNodePointer(event.getModel().getReference(),removedChild.getNodeId())));
      }
    }
 else     if (event instanceof SModelReferenceEvent) {
      eventNode=((SModelReferenceEvent)event).getReference().getSourceNode();
    }
 else     if (event instanceof SModelPropertyEvent) {
      eventNode=((SModelPropertyEvent)event).getNode();
    }
 else     continue;
    result.add(new Pair<SNode,SNodeReference>(eventNode,new CachingSNodePointer(event.getModel().getReference(),eventNode.getNodeId())));
  }
  return new ArrayList<Pair<SNode,SNodeReference>>(result);
}
