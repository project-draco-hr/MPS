{
  EditorCell attributeCell=getEditorContext().getEditorComponent().getUpdater().getCurrentUpdateSession().updateRoleAttributeCell(attributeKind,cellWithRole,roleAttribute);
  if (attributeCell == cellWithRole) {
    return cellWithRole;
  }
  if (cellWithRole.getStyle().get(StyleAttributes.INDENT_LAYOUT_NEW_LINE)) {
    attributeCell.getStyle().set(StyleAttributes.INDENT_LAYOUT_NEW_LINE,true);
  }
  UpdaterImpl updater=(UpdaterImpl)getEditorContext().getEditorComponent().getUpdater();
  UpdateSession updateSession=updater.getCurrentUpdateSession();
  Set<SNode> newAttributeCell_DependOn=new HashSet<SNode>();
  Set<SNode> attributeCell_DependOn=updater.getRelatedNodes(attributeCell);
  if (attributeCell_DependOn != null) {
    newAttributeCell_DependOn.addAll(attributeCell_DependOn);
  }
  Set<SNodeReference> newAttributeCell_RefTargetsDependsOn=new HashSet<SNodeReference>();
  Set<SNodeReference> attributeCell_RefTargetsDependsOn=updater.getRelatedRefTargets(attributeCell);
  if (attributeCell_RefTargetsDependsOn != null) {
    newAttributeCell_RefTargetsDependsOn.addAll(attributeCell_RefTargetsDependsOn);
  }
  Set<SNode> cellWithRole_DependOn=updater.getRelatedNodes(cellWithRole);
  if (cellWithRole_DependOn != null) {
    newAttributeCell_DependOn.addAll(cellWithRole_DependOn);
  }
  Set<SNodeReference> cellWithRole_RefTargetsDependsOn=updater.getRelatedRefTargets(cellWithRole);
  if (cellWithRole_RefTargetsDependsOn != null) {
    newAttributeCell_RefTargetsDependsOn.addAll(cellWithRole_RefTargetsDependsOn);
  }
  if (attributeKind != AttributeKind.Node.class) {
    NodeReadAccessInEditorListener readAccessListener=NodeReadAccessCasterInEditor.getReadAccessListener();
    if (readAccessListener != null) {
      newAttributeCell_DependOn.addAll(readAccessListener.getNodesToDependOn());
      newAttributeCell_RefTargetsDependsOn.addAll(readAccessListener.getRefTargetsToDependOn());
    }
  }
  updateSession.registerDependencies(attributeCell,newAttributeCell_DependOn,newAttributeCell_RefTargetsDependsOn);
  return attributeCell;
}
