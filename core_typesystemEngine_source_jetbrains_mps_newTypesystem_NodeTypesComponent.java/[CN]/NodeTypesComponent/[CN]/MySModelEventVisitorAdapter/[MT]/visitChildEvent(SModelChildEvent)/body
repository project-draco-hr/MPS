{
  markDependentNodesForInvalidation(event.getChild(),myTypeSystemComponent);
  markDependentNodesForInvalidation(event.getParent(),myTypeSystemComponent);
  markDependentNodesForInvalidation(event.getChild(),myNonTypeSystemComponent);
  markDependentNodesForInvalidation(event.getParent(),myNonTypeSystemComponent);
  List<SReference> references=new ArrayList<SReference>();
  SNode child=event.getChild();
  references.addAll(child.getReferences());
  for (  SNode descendant : child.getDescendants()) {
    references.addAll(descendant.getReferences());
    if (event.isRemoved()) {
      markDependentNodesForInvalidation(descendant,myNonTypeSystemComponent);
      markDependentNodesForInvalidation(descendant,myTypeSystemComponent);
    }
  }
  for (  SReference reference : references) {
    SNode targetNode=reference.getTargetNodeSilently();
    if (targetNode != null) {
      markDependentNodesForInvalidation(targetNode,myNonTypeSystemComponent);
    }
  }
}
