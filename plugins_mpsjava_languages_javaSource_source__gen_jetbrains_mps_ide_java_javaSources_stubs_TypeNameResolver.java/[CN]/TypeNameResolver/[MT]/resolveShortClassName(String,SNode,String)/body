{
  if ("Entry".equals(unqualName)) {
    return new DynamicReference(role,source,null,"java.util.Map.Entry");
  }
  String nestedTyp=myNestNamespace.resolve(unqualName);
  if (nestedTyp != null) {
    String fqname=SModelOperations.getModelName(myModel) + "." + nestedTyp;
    return new DynamicReference(role,source,null,fqname);
  }
  int k=0;
  for (int i=ListSequence.fromList(myImports).count() - 1; i >= 0; i--) {
    TypeNameResolver.Import imp=ListSequence.fromList(myImports).getElement(i);
    if (!(imp.isOnDemand())) {
      k++;
      if (imp.myClass.equals(unqualName)) {
        String fqname=imp.myPackage + "." + imp.myClass;
        return new DynamicReference(role,source,null,fqname);
      }
    }
  }
  if (k == (int)ListSequence.fromList(myImports).count()) {
    SNode javaLangNode=findInJavaLang(unqualName);
    if (javaLangNode != null) {
      return SReference.create(role,source,javaLangNode);
    }
    String currPkg=SModelOperations.getModelName(myModel);
    String fqname=currPkg + "." + unqualName;
    return new DynamicReference(role,source,null,fqname);
  }
 else {
    List<String> pkgs=ListSequence.fromList(new ArrayList<String>());
    pkgs.add(SModelOperations.getModelName(myModel));
    ListSequence.fromList(pkgs).addElement("java.lang");
    for (    TypeNameResolver.Import imp : ListSequence.fromList(myImports)) {
      if (imp.isOnDemand()) {
        pkgs.add(imp.myPackage);
      }
    }
    return new JavaPackagesDynReferece(role,source,unqualName,pkgs);
  }
}
