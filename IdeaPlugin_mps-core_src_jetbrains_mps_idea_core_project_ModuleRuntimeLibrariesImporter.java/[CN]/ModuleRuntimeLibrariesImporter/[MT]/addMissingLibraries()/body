{
  Set<ModuleReference> alreadyImported=ModuleLibrariesUtil.getModules(myModifiableRootModel.getOrderEntries());
  Collection<Library> projectLibs2Add=new HashSet<Library>();
  for (  IModule usedModule : collectRuntimeModules(myAddedModules)) {
    if (BootstrapLanguages.JDK.equals(usedModule.getModuleReference())) {
      continue;
    }
    if (alreadyImported.contains(usedModule.getModuleReference())) {
      continue;
    }
    projectLibs2Add.add(ModuleLibrariesUtil.getOrCreateAutoLibrary(usedModule,getProject(),myLibrariesContainer));
  }
  for (  Library projectLibrary : projectLibs2Add) {
    myModifiableRootModel.addLibraryEntry(projectLibrary);
  }
}
