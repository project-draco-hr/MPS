{
  int newPosition=position;
  if (editorCell instanceof EditorCell_Label) {
    EditorCell_Label editorCell_label=(EditorCell_Label)editorCell;
    newPosition=position - editorCell_label.getText().length();
    if (newPosition < 0) {
      getNodeEditorComponent().changeSelection(editorCell);
      editorCell_label.setCaretPosition(position);
    }
  }
 else   if (editorCell instanceof jetbrains.mps.openapi.editor.cells.EditorCell_Collection) {
    jetbrains.mps.openapi.editor.cells.EditorCell_Collection editorCell_iterable=(jetbrains.mps.openapi.editor.cells.EditorCell_Collection)editorCell;
    for (    jetbrains.mps.openapi.editor.cells.EditorCell subEditorCell : editorCell_iterable) {
      newPosition=setCaretPosition(subEditorCell,newPosition);
      if (newPosition < 0) {
        break;
      }
    }
  }
  return newPosition;
}
