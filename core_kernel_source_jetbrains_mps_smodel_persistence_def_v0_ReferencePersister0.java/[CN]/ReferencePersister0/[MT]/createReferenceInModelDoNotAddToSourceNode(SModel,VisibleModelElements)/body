{
  SModelReference importedModelReference=model.getSModelReference();
  if (myUseUIDs) {
    if (!myImportedModelInfo.equals("-1")) {
      importedModelReference=SModelReference.fromString(myImportedModelInfo);
    }
  }
 else   if (getImportIndex() > -1) {
    if (myNotImported) {
      importedModelReference=visibleModelElements.getModelUID(getImportIndex());
    }
 else {
      importedModelReference=SModelOperations.getImportedModelUID(model,getImportIndex());
    }
    if (importedModelReference == null) {
      LOG.error("Couldn't create reference from " + this.getSourceNode().getDebugText() + " : import for index ["+ getImportIndex()+ "] not found");
      return null;
    }
  }
  if (this.getExtResolveInfo() == null) {
    return new StaticReference(this.getRole(),this.getSourceNode(),importedModelReference,SNodeId.fromString(this.getTargetId()),this.getResolveInfo());
  }
  String extResolveInfo=this.getExtResolveInfo();
  String resolveInfo=ExternalResolver.getHumanFriendlyString(extResolveInfo);
  SNodeId targetId=ERI2IDConverter.convert(this.getSourceNode(),this.getRole(),extResolveInfo);
  if (targetId != null) {
    return new StaticReference(this.getRole(),this.getSourceNode(),importedModelReference,targetId,resolveInfo);
  }
  if (resolveInfo == null) {
    resolveInfo=this.getResolveInfo();
  }
  return new StaticReference(this.getRole(),this.getSourceNode(),importedModelReference,null,resolveInfo);
}
