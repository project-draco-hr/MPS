{
  SNode subNode=SLinkOperations.addNewChild(node,"fragment","jetbrains.mps.platform.conf.structure.Service");
  SPropertyOperations.set(subNode,"level",SEnumOperations.getEnumMemberValue(level));
  String ifc=srv.getAttributeValue(SERVICE_INTERFACE);
  if (ifc != null) {
    addClassifierReference(SLinkOperations.findLinkDeclaration("jetbrains.mps.platform.conf.structure.Service","serviceIface"),subNode,ifc);
  }
  String impl=srv.getAttributeValue(SERVICE_IMPLEMENTATION);
  if (impl != null) {
    addClassifierReference(SLinkOperations.findLinkDeclaration("jetbrains.mps.platform.conf.structure.Service","serviceImpl"),subNode,impl);
  }
  addConfXmlNodeReference(SLinkOperations.findLinkDeclaration("jetbrains.mps.platform.conf.structure.Extension","extensionPoint"),subNode,fqName(META_INF,EXTENSION_POINT,SPropertyOperations.getString_def(subNode,"level","APPLICATION").toLowerCase() + "Service"));
}
