{
  for (  SNode dep : SLinkOperations.getTargets(module,"dependencies",true)) {
    if (SNodeOperations.isInstanceOf(dep,"jetbrains.mps.build.structure.BuildSource_JavaDependencyModule")) {
      SNode moduleDep=SNodeOperations.cast(dep,"jetbrains.mps.build.structure.BuildSource_JavaDependencyModule");
      if (reexportOnly && !(SPropertyOperations.getBoolean(moduleDep,"reexport"))) {
        continue;
      }
      SNode depModule=SLinkOperations.getTarget(moduleDep,"module",false);
      if (modules.add(depModule)) {
        moduleClosure(depModule,true);
      }
    }
 else     if (SNodeOperations.isInstanceOf(dep,"jetbrains.mps.build.structure.BuildSource_JavaDependencyLibrary")) {
      SNode libraryDep=SNodeOperations.cast(dep,"jetbrains.mps.build.structure.BuildSource_JavaDependencyLibrary");
      if (reexportOnly && !(SPropertyOperations.getBoolean(libraryDep,"reexport"))) {
        continue;
      }
      libraries.add(SLinkOperations.getTarget(libraryDep,"library",false));
    }
  }
}
