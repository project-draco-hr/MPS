{
  try {
    ScriptsForSelection_ActionGroup.this.removeAll();
    List<SModelDescriptor> models=MPSDataKeys.MODELS.getData(event.getDataContext());
    if ((int)ListSequence.fromList(models).count() == 1 && !(ListSequence.fromList(models).first() instanceof EditableSModelDescriptor && !(((EditableSModelDescriptor)ListSequence.fromList(models).first()).isReadOnly()))) {
      event.getPresentation().setVisible(false);
      return;
    }
    event.getPresentation().setVisible(true);
    IOperationContext context=event.getData(MPSCommonDataKeys.OPERATION_CONTEXT);
    if (context == null || context.getProject() == null) {
      event.getPresentation().setEnabled(false);
      return;
    }
    event.getPresentation().setEnabled(true);
    ScriptsMenuBuilder menuBuilder=new ScriptsMenuBuilder(true);
    BaseGroup catGroup=menuBuilder.create_ByCategoryPopup();
    for (    AnAction a : catGroup.getChildren(null)) {
      ScriptsForSelection_ActionGroup.this.add(a);
    }
    ScriptsForSelection_ActionGroup.this.addParameterizedAction(new RunMigrationScripts_Action(menuBuilder.getAllScripts(),true),PluginId.getId("jetbrains.mps.lang.script.pluginSolution"),menuBuilder.getAllScripts(),true);
  }
 catch (  Throwable t) {
    LOG.error("User group error",t);
  }
  for (  Pair<ActionPlace,Condition<BaseAction>> p : this.myPlaces) {
    this.addPlace(p.first,p.second);
  }
}
