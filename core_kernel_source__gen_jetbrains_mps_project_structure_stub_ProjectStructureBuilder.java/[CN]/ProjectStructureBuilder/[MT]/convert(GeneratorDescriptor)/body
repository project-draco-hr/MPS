{
  SNode generator=SConceptOperations.createNewNode("jetbrains.mps.lang.project.structure.Generator",null);
  fill(generator,source);
  SPropertyOperations.set(generator,"generatorUID",source.getGeneratorUID());
  SPropertyOperations.set(generator,"generateTemplates","" + (source.isGenerateTemplates()));
  SPropertyOperations.set(generator,"namespace",(isNotEmptyString(source.getNamespace()) ? source.getNamespace() : null));
  for (  MappingPriorityRule rule : source.getPriorityRules()) {
    SLinkOperations.getTargets(generator,"priorityRules",true).add(convert(rule));
  }
  for (  SModuleReference ref : source.getDepGenerators()) {
    SLinkOperations.getTargets(generator,"depGenerators",true).add(convert(ref));
  }
  collectModels(generator,source);
  return generator;
}
