{
  if (myCurrentSuspendContext != null) {
    ThreadReference thread=myCurrentSuspendContext.getThread();
    if (thread == null) {
      List<ThreadReference> threads=myEventsProcessor.getVirtualMachine().allThreads();
      thread=threads.get(0);
      for (      ThreadReference t : threads) {
        if (!t.threadGroup().name().equals("system")) {
          thread=t;
          break;
        }
      }
    }
    try {
      return thread.frames();
    }
 catch (    IncompatibleThreadStateException e) {
      LOG.error(e);
    }
  }
  return Collections.emptyList();
}
