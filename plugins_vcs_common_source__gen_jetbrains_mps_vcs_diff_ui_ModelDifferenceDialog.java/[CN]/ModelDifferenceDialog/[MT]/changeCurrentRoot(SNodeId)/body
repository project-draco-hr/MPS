{
  if (myRootDifferencePane != null && myRootId == rootId) {
    return;
  }
  syncMetadataChanges();
  myRootId=rootId;
  final ModelChangeSet changeSet=(rootId == null ? myMetadataChangeSet : myChangeSet);
  final SNodeId nodeId=(rootId == null ? ListSequence.fromList(SModelOperations.getRoots(((org.jetbrains.mps.openapi.model.SModel)myMetadataChangeSet.getOldModel().getModelDescriptor()),null)).first().getNodeId() : rootId);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      if (myRootDifferencePane == null) {
        myRootDifferencePane=new RootDifferencePane(myProject,changeSet,nodeId,myTree.getNameForRoot(rootId),myContentTitles,myEditable,myStatusBar);
        myPanel.setSecondComponent(myRootDifferencePane.getPanel());
        myRootDifferencePane.navigateInitial(null);
        rebuildToolbar(myRootDifferencePane.getActions());
      }
 else {
        myRootDifferencePane.setRootId(nodeId,changeSet);
      }
    }
  }
);
}
