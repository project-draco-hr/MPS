{
  if (myRootDifferencePane != null && myRootId == rootId) {
    return;
  }
  syncMetadataChanges();
  myRootId=rootId;
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      ModelChangeSet changeSet=(rootId == null ? myMetadataChangeSet : myChangeSet);
      SNodeId nodeId=(rootId == null ? ListSequence.fromList(SModelOperations.roots(myMetadataChangeSet.getOldModel(),null)).first().getNodeId() : rootId);
      if (myRootDifferencePane == null) {
        myRootDifferencePane=new RootDifferencePane(myProject.getComponent(MPSProject.class),changeSet,nodeId,myTree.getNameForRoot(rootId),myContentTitles,myEditable,myStatusBar);
        DefaultActionGroup actionGroup=new DefaultActionGroup();
        actionGroup.addAll(myRootDifferencePane.getActions());
        ActionToolbar toolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,actionGroup,true);
        myRootDifferencePane.registerShortcuts(myComponent);
        JPanel panel=new JPanel(new BorderLayout());
        panel.add(toolbar.getComponent(),BorderLayout.NORTH);
        panel.add(myRootDifferencePane.getPanel(),BorderLayout.CENTER);
        myPanel.setSecondComponent(panel);
        myRootDifferencePane.navigateInitial(null);
      }
 else {
        myRootDifferencePane.setRootId(nodeId,changeSet);
      }
    }
  }
);
}
