{
  if (!isRegistered())   return;
  ThreadUtils.assertEDT();
  doUnregister();
  if (myNumber != -1) {
    Keymap keymap=KeymapManager.getInstance().getKeymap(KeymapManager.DEFAULT_IDEA_KEYMAP);
    keymap.removeAllActionShortcuts(ActivateToolWindowAction.getActionIdForToolWindow(myId));
    keymap=KeymapManager.getInstance().getKeymap(KeymapManager.MAC_OS_X_KEYMAP);
    keymap.removeAllActionShortcuts(ActivateToolWindowAction.getActionIdForToolWindow(myId));
  }
  ToolWindow toolWindow=getToolWindow();
  if (toolWindow != null) {
    ContentManager contentManager=toolWindow.getContentManager();
    if (contentManager != null && !contentManager.isDisposed()) {
      contentManager.removeAllContents(true);
    }
  }
  myWindowManager.unregisterToolWindow(myId);
  myIsRegistered=false;
}
