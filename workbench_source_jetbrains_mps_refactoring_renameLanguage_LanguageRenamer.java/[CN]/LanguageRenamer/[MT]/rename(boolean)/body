{
  String oldFqName=myLanguage.getModuleFqName();
  IFile oldOutputDir=FileSystem.getInstance().getFileByPath(myLanguage.getGeneratorOutputPath());
  IFile oldCachesDir=FileGenerationUtil.getCachesDir(oldOutputDir);
  IFile oldClassesGen=myLanguage.getClassesGen();
  renameLanguage(oldFqName);
  renameGenerators(oldFqName);
  RefactoringFacade.writeIntoLog(myContext);
  SModelRepository.getInstance().saveAll();
  if (deleteOldFiles) {
    oldOutputDir.delete();
    oldCachesDir.delete();
    oldClassesGen.delete();
  }
}
