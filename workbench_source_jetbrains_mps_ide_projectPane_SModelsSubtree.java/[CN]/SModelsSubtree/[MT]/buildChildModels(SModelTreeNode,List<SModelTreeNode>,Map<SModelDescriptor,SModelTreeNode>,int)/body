{
  Object[] candidates=map.keySet().toArray();
  int index=rootIndex + 1;
  while (index < candidates.length) {
    SModelDescriptor candidate=(SModelDescriptor)candidates[index];
    if (treeNode.isSubfolderModel(candidate)) {
      SModelTreeNode newChildModel=map.get(candidate);
      rootModels.remove(newChildModel);
      treeNode.addChildModel(newChildModel);
      index=buildChildModels(newChildModel,rootModels,map,index);
    }
 else {
      return index;
    }
  }
  return index;
}
