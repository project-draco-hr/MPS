{
  for (  SNode node : new HashSet<SNode>(myNodesToErrorsMap.keySet())) {
    IErrorReporter iErrorReporter=myNodesToErrorsMap.get(node);
    String errorString=iErrorReporter.reportError();
    SimpleErrorReporter reporter=new SimpleErrorReporter(node,errorString,iErrorReporter.getRuleModel(),iErrorReporter.getRuleId(),iErrorReporter.getMessageStatus(),iErrorReporter.getErrorTarget());
    reporter.setIntentionProvider(iErrorReporter.getIntentionProvider());
    myNodesToErrorsMap.put(node,reporter);
  }
  removeOurListener();
  List<SNode> nodesToDependOn=new ArrayList<SNode>(myNodesToDependentNodes.keySet());
  if (!myNodesToDependentNodes.keySet().contains(myRootNode)) {
    nodesToDependOn.add(myRootNode);
  }
  for (  SNode nodeToDependOn : nodesToDependOn) {
    final SModel sModel=nodeToDependOn.getModel();
    final SModelDescriptor sm=sModel.getModelDescriptor();
    if (sm != null) {
      addOurListener(sm);
    }
 else {
      if (SModelStereotype.isUserModel(sModel)) {
        LOG.error("model descriptor is null: " + sModel);
      }
    }
  }
  TypeChecker.getInstance().addTypeRecalculatedListener(myTypeRecalculatedListener);
}
