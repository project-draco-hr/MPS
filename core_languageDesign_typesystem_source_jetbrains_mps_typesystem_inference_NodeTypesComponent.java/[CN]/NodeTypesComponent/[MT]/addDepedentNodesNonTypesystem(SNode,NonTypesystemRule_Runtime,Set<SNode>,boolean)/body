{
  Map<SNode,WeakHashMap<SNode,Set<NonTypesystemRule_Runtime>>> mapToNodesWithNTRules=isTypedTerm ? myTypedTermsToDependentNodesWithNTRules : myNodesToDependentNodesWithNTRules;
  for (  SNode nodeToDependOn : nodesToDependOn) {
    if (nodeToDependOn == null)     continue;
    WeakHashMap<SNode,Set<NonTypesystemRule_Runtime>> dependentNodes=mapToNodesWithNTRules.get(nodeToDependOn);
    if (dependentNodes == null) {
      dependentNodes=new WeakHashMap<SNode,Set<NonTypesystemRule_Runtime>>();
      mapToNodesWithNTRules.put(nodeToDependOn,dependentNodes);
    }
    Set<NonTypesystemRule_Runtime> rules=dependentNodes.get(sNode);
    if (rules == null) {
      rules=new HashSet<NonTypesystemRule_Runtime>();
      dependentNodes.put(sNode,rules);
    }
    rules.add(rule);
  }
}
