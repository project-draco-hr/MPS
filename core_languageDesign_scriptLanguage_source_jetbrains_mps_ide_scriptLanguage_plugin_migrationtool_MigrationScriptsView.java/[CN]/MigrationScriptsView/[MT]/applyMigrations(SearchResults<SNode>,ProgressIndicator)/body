{
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      List<SearchResult<SNode>> aliveResults=searchResults.getAliveResults();
      if (!aliveResults.isEmpty()) {
        indicator.setIndeterminate(false);
        double fractionIncr=1.0 / aliveResults.size();
        double fraction=0.0;
        indicator.setFraction(fraction);
        for (        SearchResult<SNode> aliveResult : aliveResults) {
          if (indicator.isCanceled())           break;
          SNode node=aliveResult.getObject();
          if (node != null && node.isRegistered()) {
            AbstractMigrationRefactoring migrationRefactoring=myFinder.getRefactoring(aliveResult);
            if (MigrationScriptUtil.isApplicableRefactoring(node,migrationRefactoring)) {
              MigrationScriptUtil.performRefactoring(node,migrationRefactoring);
            }
          }
          fraction+=fractionIncr;
          indicator.setFraction(fraction);
        }
      }
    }
  }
);
}
