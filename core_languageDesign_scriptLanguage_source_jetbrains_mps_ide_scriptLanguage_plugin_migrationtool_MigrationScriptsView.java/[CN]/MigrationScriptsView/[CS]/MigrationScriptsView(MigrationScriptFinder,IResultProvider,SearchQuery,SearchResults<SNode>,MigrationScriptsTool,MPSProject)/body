{
  myFinder=finder;
  myTool=tool;
  ViewOptions viewOptions=new ViewOptions();
  viewOptions.myCategory=true;
  viewOptions.myShowSearchedNodes=false;
  viewOptions.myGroupSearchedNodes=false;
  viewOptions.mySearchedNodesButtonsVisible=false;
  myUsagesVew=new UsagesView(project,viewOptions){
    public void close(){
      myTool.closeTab(MigrationScriptsView.this);
    }
  }
;
  myUsagesVew.setRunOptions(provider,query,new ButtonConfiguration(true,true,true),searchResults);
  myPanel=new JPanel(new BorderLayout());
  myPanel.add(myUsagesVew.getComponent(),BorderLayout.CENTER);
  JPanel buttonsPanel=new JPanel(new FlowLayout(FlowLayout.LEFT));
  buttonsPanel.add(new JButton(new AbstractAction("Apply Migrations"){
    public void actionPerformed(    ActionEvent e){
      ProgressManager.getInstance().run(new Modal(myTool.getProject(),"Applying migrations...",true){
        public void run(        @NotNull final ProgressIndicator indicator){
          applyMigrations(searchResults,indicator);
        }
      }
);
      setEnabled(false);
    }
  }
));
  myPanel.add(buttonsPanel,BorderLayout.SOUTH);
}
