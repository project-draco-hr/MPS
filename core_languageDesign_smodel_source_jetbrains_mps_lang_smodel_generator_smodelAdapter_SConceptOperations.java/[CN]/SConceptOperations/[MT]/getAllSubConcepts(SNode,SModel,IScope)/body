{
  if (conceptDeclarationNode == null)   return new ArrayList<SNode>();
  Set<String> descendants=LanguageHierarchyCache.getInstance().getAllDescendantsOfConcept(NameUtil.nodeFQName(conceptDeclarationNode));
  Set<Language> availableLanguages=new HashSet<Language>(jetbrains.mps.smodel.SModelOperations.getLanguages(model,scope));
  List<SNode> result=new ArrayList<SNode>();
  for (  String descendant : descendants) {
    SNode declaration=SModelUtil.findConceptDeclaration(descendant,GlobalScope.getInstance());
    Language lang=SModelUtil.getDeclaringLanguage(declaration,scope);
    if (availableLanguages.contains(lang)) {
      result.add(lang.findConceptDeclaration(NameUtil.shortNameFromLongName(descendant)).getNode());
    }
  }
  return result;
}
