{
  Set<T> cachedResult=myRulesCache.get(key);
  if (cachedResult != null) {
    return cachedResult;
  }
  return NodeReadAccessCasterInEditor.runReadTransparentAction(new Computable<Set<T>>(){
    @Override public Set<T> compute(){
      Set<T> result=Collections.unmodifiableSet(computeRuleSet(key));
      myRulesCache.put(key,result);
      return result;
    }
  }
);
}
