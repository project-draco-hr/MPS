{
  com.intellij.openapi.project.Project ideaProject=ProjectHelper.toIdeaProject(p);
  ModelCheckerTool tool=ModelCheckerTool.getInstance(ideaProject);
  if (tool == null) {
    return true;
  }
  boolean checkModels=GenerationSettings.getInstance().isCheckModelsBeforeGeneration();
  if (!(checkModels)) {
    return true;
  }
  ModelCheckerViewer viewer=tool.checkModels(modelDescriptors);
  SearchResults<ModelCheckerIssue> issues=viewer.getSearchResults();
  int warnings=ModelCheckerUtils.getIssueCountForSeverity(issues,ModelChecker.SEVERITY_WARNING);
  int errors=ModelCheckerUtils.getIssueCountForSeverity(issues,ModelChecker.SEVERITY_ERROR);
  if (errors != 0) {
    CheckBeforeGenerationDialog dialog=new CheckBeforeGenerationDialog(ideaProject,errors,warnings);
    dialog.show();
    if (dialog.isOK()) {
      tool.showTabWithResults(viewer,"Pre-generate validation",IdeIcons.MODEL_ICON);
      return false;
    }
 else {
      return true;
    }
  }
  return true;
}
