{
  List<SNode> rootMarkers=SNodeOperations.getDescendants(SLinkOperations.getTarget(thisNode,"template",true),"jetbrains.mps.template.structure.MtlTemplateRoot",false,new String[]{});
  if (ListSequence.<SNode>fromList(rootMarkers).count() == 1) {
    SNode node=ListSequence.<SNode>fromList(rootMarkers).first();
    return SNodeOperations.getParent(node);
  }
  return SLinkOperations.getTarget(thisNode,"template",true);
}
