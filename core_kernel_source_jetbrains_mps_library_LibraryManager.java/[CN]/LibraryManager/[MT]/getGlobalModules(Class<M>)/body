{
  List<M> result=MPSModuleRepository.getInstance().getModules(myOwner,cls);
  result.addAll(MPSModuleRepository.getInstance().getModules(myPredefinedLibrariesOwner,cls));
  for (  M m : new ArrayList<M>(result)) {
    if (m instanceof Language) {
      if (cls.isAssignableFrom(Generator.class)) {
        result.addAll((List<? extends M>)((Language)m).getGenerators());
      }
    }
  }
  return new HashSet<M>(result);
}
