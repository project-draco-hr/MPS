{
  Iterable<SModule> dependencies=new TranslatingIterator<SDependency,SModule>(module.getDeclaredDependencies().iterator()){
    @Override protected SModule translate(    SDependency dep){
      return (SModule)dep.getTarget();
    }
  }
;
  Iterable<SModule> solutionsFromDevkits=new TranslatingIterator<SModuleReference,SModule>(new CollectingManyIterator<DevKit,SModuleReference>(includingExtended(usedDevkits(module)).iterator()){
    @Override protected Iterator<SModuleReference> translate(    DevKit devkit){
      return devkit.getExportedSolutions_internal().iterator();
    }
  }
){
    @Override protected SModule translate(    SModuleReference node){
      return ModuleRepositoryFacade.getInstance().getModule(node,Solution.class);
    }
  }
;
  if (module instanceof Language) {
    Language core=BootstrapLanguages.coreLanguage();
    return IterableUtil.distinct(IterableUtil.merge(dependencies,solutionsFromDevkits,Collections.<SModule>singleton(core)));
  }
  return IterableUtil.distinct(IterableUtil.merge(dependencies,solutionsFromDevkits));
}
