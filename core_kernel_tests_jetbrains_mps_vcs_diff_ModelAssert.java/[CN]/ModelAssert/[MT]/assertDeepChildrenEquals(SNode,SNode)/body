{
  Set<String> roles=new HashSet<String>(expectedNode.getChildRoles());
  roles.addAll(actualNode.getChildRoles());
  for (  String role : roles) {
    SNode expectedChild=expectedNode.getChild(role);
    SNode actualChild=actualNode.getChild(role);
    if (expectedChild == null) {
      assertNull(getErrorString("child",expectedNode,actualNode),actualChild);
      continue;
    }
    assertNotNull(getErrorString("child",expectedNode,actualNode),actualChild);
    assertDeepNodeEquals(expectedChild,actualChild);
  }
}
