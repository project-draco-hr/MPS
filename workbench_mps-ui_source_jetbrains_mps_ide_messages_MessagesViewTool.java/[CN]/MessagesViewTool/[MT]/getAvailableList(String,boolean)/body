{
  List<MessageList> lists;
  if (myMessageLists.containsKey(name)) {
    lists=myMessageLists.get(name);
  }
 else {
    myMessageLists.put(name,lists=new ArrayList<MessageList>());
  }
  for (int i=lists.size() - 1; i >= 0; --i) {
    MessageList messageList=lists.get(i);
    if (!messageList.isPinned()) {
      return messageList;
    }
  }
  if (createIfNotFound) {
    MessageList list=createList(name);
    lists.add(list);
    return list;
  }
  return null;
}
