{
  CompilerOptions options=new CompilerOptions();
  options.sourceLevel=ClassFileConstants.JDK1_6;
  options.targetJDK=ClassFileConstants.JDK1_5;
  options.produceDebugAttributes=ClassFileConstants.ATTR_SOURCE | ClassFileConstants.ATTR_LINES | ClassFileConstants.ATTR_VARS;
  org.eclipse.jdt.internal.compiler.Compiler c=new Compiler(new MyNameEnvironment(classPath),new MyErrorHandlingPolicy(),options,new MyCompilerRequestor(),new DefaultProblemFactory(),null);
  c.compile(myCompilationUnits.values().toArray(new CompilationUnit[0]));
}
