{
  LinkedHashSet<org.jetbrains.mps.openapi.model.SModel> visibleModels=new LinkedHashSet<org.jetbrains.mps.openapi.model.SModel>();
  visibleModels.addAll(IterableUtil.asCollection(myModule.getModels()));
  for (  SModule visibleModule : new GlobalModuleDependenciesManager(myModule).getModules(Deptype.VISIBLE)) {
    visibleModels.addAll(IterableUtil.asCollection(visibleModule.getModels()));
  }
  for (  org.jetbrains.mps.openapi.model.SModel model : visibleModels) {
    final SModelReference modelRef=model.getReference();
    final String modelName=modelRef.getModelName();
    List<org.jetbrains.mps.openapi.model.SModel> modelsFromCache=myName2Models.get(modelName);
    if (modelsFromCache == null) {
      myName2Models.put(modelName,modelsFromCache=new ArrayList<org.jetbrains.mps.openapi.model.SModel>(3));
    }
    modelsFromCache.add(model);
  }
}
