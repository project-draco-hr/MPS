{
  LinkedHashSet<SModel> visibleModels=new LinkedHashSet<SModel>();
  visibleModels.addAll(IterableUtil.asCollection(myModule.getModels()));
  for (  SModule visibleModule : new GlobalModuleDependenciesManager(myModule).getModules(Deptype.VISIBLE)) {
    visibleModels.addAll(IterableUtil.asCollection(visibleModule.getModels()));
  }
  for (  SModel model : visibleModels) {
    final SModelReference modelRef=model.getReference();
    final String modelName=modelRef.getModelName();
    List<SModel> modelsFromCache=myName2Models.get(modelName);
    if (modelsFromCache == null) {
      myName2Models.put(modelName,modelsFromCache=new ArrayList<SModel>(3));
    }
    modelsFromCache.add(model);
  }
}
