{
{
    SearchResults searchResults=FindUtils.getSearchResults(new EmptyProgressIndicator(),refactoringContext.getSelectedNode(),GlobalScope.getInstance(),"jetbrains.mps.lang.structure.findUsages.ConceptInstances_Finder","jetbrains.mps.lang.structure.findUsages.NodeAndDescendantsUsages_Finder");
    refactoringContext.setParameter("nodeAspects",AbstractConceptDeclaration_Behavior.call_findAllAspects_7754459869734028917(refactoringContext.getSelectedNode(),GlobalScope.getInstance()));
    List<SearchResult<SNode>> searchResultsList=searchResults.getSearchResults();
    List<SearchResult<SNode>> searchResultsCopy=ListSequence.fromListWithValues(new ArrayList<SearchResult<SNode>>(),searchResultsList);
    for (    SearchResult<SNode> searchResult : searchResultsCopy) {
      SNode containingRoot=searchResult.getObject().getContainingRoot();
      if (((List)refactoringContext.getParameter("nodeAspects")).contains(containingRoot)) {
        searchResults.remove(searchResult);
      }
    }
    return searchResults;
  }
}
