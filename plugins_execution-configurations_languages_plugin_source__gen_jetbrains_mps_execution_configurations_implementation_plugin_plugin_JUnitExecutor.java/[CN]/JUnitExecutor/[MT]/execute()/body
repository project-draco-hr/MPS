{
  final String dirCachesPath=myJUnitSettings.getCachesPath();
  final boolean dirLock=RunCachesManager.acquireLock(dirCachesPath);
  ProcessHandler commandProcess=new JUnit_Command().setDebuggerSettings_String(myDebuggerSettings.getCommandLine(true)).createProcess(myTestNodes,this.prepareJavaParamsForTests(dirLock,dirCachesPath));
  commandProcess.addProcessListener(new ProcessAdapter(){
    @Override public void processTerminated(    ProcessEvent p0){
      if (dirLock) {
        RunCachesManager.releaseLock(dirCachesPath);
      }
    }
  }
);
  return commandProcess;
}
