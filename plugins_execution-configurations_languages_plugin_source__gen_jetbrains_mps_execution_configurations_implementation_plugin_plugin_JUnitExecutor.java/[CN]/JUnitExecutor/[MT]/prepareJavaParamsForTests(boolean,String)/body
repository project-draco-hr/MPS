{
  JavaRunParameters_Configuration javaRunParams=myJavaRunParameters;
  JavaRunParameters parameters=javaRunParams.getJavaRunParameters().clone();
  String vmFromJava=javaRunParams.getJavaRunParameters().getVmOptions();
  if (vmFromJava == null) {
    vmFromJava="";
  }
  String runIdString;
  boolean cachesReused=myJUnitSettings.getReuseCaches();
  if (cachesReused) {
    if (dirLock) {
      runIdString="-D" + CachesUtil.REUSE_CACHES_DIR + "=\""+ cachesDir+ "\"";
    }
 else {
      runIdString="";
      showWarning();
    }
  }
 else {
    if (dirLock) {
      runIdString="-D" + CachesUtil.SAVE_CACHES_DIR + "=\""+ cachesDir+ "\"";
    }
 else {
      runIdString="";
    }
  }
  parameters.setVmOptions(vmFromJava + " " + runIdString);
  return parameters;
}
