{
  TreeHighlighter highlighter=null;
  if (tree instanceof ProjectTree) {
    highlighter=new TreeHighlighter(myRegistry,myFeatureForestMapSupport,tree,new ProjectTreeFeatureExtractor(),true);
  }
 else   if (tree instanceof UsagesTree) {
    highlighter=new TreeHighlighter(myRegistry,myFeatureForestMapSupport,tree,new UsagesTreeFeatureExtractor(),false);
  }
 else   if (tree instanceof AbstractHierarchyTree) {
    highlighter=new TreeHighlighter(myRegistry,myFeatureForestMapSupport,tree,new HierarchyFeatureExtractor(),false);
  }
  if (highlighter != null) {
    highlighter.init();
synchronized (myTreeToHighlighter) {
      MapSequence.fromMap(myTreeToHighlighter).put(tree,highlighter);
    }
  }
}
