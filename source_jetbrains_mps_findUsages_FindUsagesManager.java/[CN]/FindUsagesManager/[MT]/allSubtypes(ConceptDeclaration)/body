{
  if (ourCache.get(conceptDeclaration) != null)   return Collections.unmodifiableList(ourCache.get(conceptDeclaration));
  List<ConceptDeclaration> list=new LinkedList<ConceptDeclaration>();
  Set<SReference> usages=findUsages(conceptDeclaration,new FilterScope(globalScope()){
    protected boolean accept(    SModelDescriptor descriptor){
      return descriptor.getModelUID().getShortName().equals("structure");
    }
  }
,null);
  for (  SReference ref : usages) {
    if (ref.getRole().equals(ConceptDeclaration.EXTENDS)) {
      ConceptDeclaration subtype=(ConceptDeclaration)ref.getSourceNode();
      list.add(subtype);
      list.addAll(allSubtypes(subtype));
    }
  }
  ourCache.put(conceptDeclaration,list);
  return Collections.unmodifiableList(list);
}
