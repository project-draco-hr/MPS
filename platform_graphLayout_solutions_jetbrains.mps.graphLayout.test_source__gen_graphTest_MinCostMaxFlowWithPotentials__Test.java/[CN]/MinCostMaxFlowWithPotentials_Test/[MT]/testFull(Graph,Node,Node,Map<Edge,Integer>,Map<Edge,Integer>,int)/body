{
  Map<Edge,Integer> flow=MinCostMaxFlowWithPotentials.getFlow(graph,source,target,capacity,cost);
  FlowChecker.checkFlow(graph,source,target,capacity,flow,true);
  int totalCost=0;
  for (  Edge edge : ListSequence.fromList(graph.getEdges())) {
    totalCost+=MapSequence.fromMap(flow).get(edge) * MapSequence.fromMap(cost).get(edge);
  }
  Assert.assertTrue(expectedCost == totalCost);
}
