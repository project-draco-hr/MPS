{
  Set<SModelDescriptor> result=new HashSet<SModelDescriptor>();
  for (  SNode node : nodes) {
    Set<VirtualFile> scopeFiles=getScopeFiles(models);
    String nodeId=node.getId();
    Set<VirtualFile> candidates=getCandidates(scopeFiles,nodeId);
    for (    VirtualFile file : candidates) {
      SModelDescriptor sm=SModelRepository.getInstance().findModel(VirtualFileUtils.toIFile(file));
      if (sm == null)       continue;
      result.add(sm);
    }
  }
  return result;
}
