{
  List<Integer> indexList=new ArrayList<Integer>();
  if (addIndexes(matchingText,indexList,pattern)) {
    return indexList;
  }
 else {
    indexList=new ArrayList<Integer>();
  }
  StringBuilder nextSubstring=new StringBuilder();
  for (int i=0; i < pattern.length(); i++) {
    char c=pattern.charAt(i);
    if (c == '*' || c == '?') {
      if (!addIndexes(matchingText,indexList,nextSubstring.toString()))       return new ArrayList<Integer>();
      nextSubstring=new StringBuilder();
    }
 else     if (useDots && c == '.' || c == '@' || Character.isUpperCase(c)) {
      if (!addIndexes(matchingText,indexList,nextSubstring.toString()))       return new ArrayList<Integer>();
      String upperCase=new String(new char[]{c});
      String spaceAndLowerCase=" " + Character.toLowerCase(c);
      if (!addIndexes(matchingText,indexList,upperCase) && !addIndexes(matchingText,indexList,spaceAndLowerCase))       return new ArrayList<Integer>();
      nextSubstring=new StringBuilder();
    }
 else {
      nextSubstring.append(c);
    }
  }
  if (!addIndexes(matchingText,indexList,nextSubstring.toString()))   return new ArrayList<Integer>();
  return indexList;
}
