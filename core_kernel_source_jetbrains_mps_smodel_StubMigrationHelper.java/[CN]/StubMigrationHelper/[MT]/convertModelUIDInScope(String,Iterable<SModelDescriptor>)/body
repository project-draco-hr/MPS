{
  int li=fid.lastIndexOf('#');
  int fi=fid.indexOf('#');
  if (fi != li)   return null;
  ModuleReference module=null;
  String mid=fid.substring(fi + 1);
  String stereo=fid.substring(0,fi);
  for (  SModelDescriptor m : models) {
    if (jetbrains.mps.util.SNodeOperations.getModelLongName(m).equals(mid) && SModelStereotype.getStereotype(m).equals(stereo)) {
      module=m.getModule().getModuleReference();
    }
  }
  if (module == null)   return null;
  return jetbrains.mps.smodel.SModelId.foreign(stereo,module.getModuleId().toString(),mid);
}
