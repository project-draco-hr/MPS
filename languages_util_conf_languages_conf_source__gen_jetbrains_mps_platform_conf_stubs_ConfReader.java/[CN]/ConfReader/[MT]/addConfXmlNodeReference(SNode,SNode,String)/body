{
  SModelReference trgsmref=this.confstubResolver.stubModelReference(namespace(fqName));
  if (SNodeOperations.getModel(src).getReference().equals(trgsmref)) {
    String shortName=shortName(fqName);
    int dlr=shortName.indexOf("$");
    if (dlr >= 0) {
      String elmName=shortName.substring(0,dlr);
      if (EXTENSION_POINT.equals(elmName) || PLUGIN.equals(elmName) || ACTION.equals(elmName)) {
        src.setReference(new DynamicReference(SPropertyOperations.getString(link,"role"),src,trgsmref,shortName).getRole(),new DynamicReference(SPropertyOperations.getString(link,"role"),src,trgsmref,shortName));
      }
    }
  }
 else {
    ((jetbrains.mps.smodel.SModel)SNodeOperations.getModel(src)).addModelImport(trgsmref,false);
    src.setReference(SReference.create(SPropertyOperations.getString(link,"role"),src,trgsmref,createForeignId(fqName)).getRole(),SReference.create(SPropertyOperations.getString(link,"role"),src,trgsmref,createForeignId(fqName)));
  }
}
