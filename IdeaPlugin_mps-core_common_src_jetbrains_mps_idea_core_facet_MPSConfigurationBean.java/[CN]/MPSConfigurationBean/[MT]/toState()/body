{
  State result=new State();
  result.UUID=getUUID();
  result.generatorOutputPath=myDescriptor.getOutputPath();
  result.useModuleSourceFolder=myUseModuleSourceFolder;
  result.useTransientOutputFolder=myUseTransientOutputFolder;
  result.modelRoots=null;
  result.usedLanguages=getUsedLanguages();
  if (result.usedLanguages != null && result.usedLanguages.length == 0) {
    result.usedLanguages=null;
  }
  Collection<ModelRootDescriptor> modelRootDescriptors=myDescriptor.getModelRootDescriptors();
  if (!modelRootDescriptors.isEmpty()) {
    result.rootDescriptors=new RootDescriptor[modelRootDescriptors.size()];
    int i=0;
    for (    ModelRootDescriptor mrd : modelRootDescriptors) {
      RootDescriptor d=new RootDescriptor();
      d.type=mrd.getType();
      d.settings=new Element("settings");
      MementoUtil.writeMemento(mrd.getMemento(),d.settings);
      result.rootDescriptors[i++]=d;
    }
  }
  return result;
}
