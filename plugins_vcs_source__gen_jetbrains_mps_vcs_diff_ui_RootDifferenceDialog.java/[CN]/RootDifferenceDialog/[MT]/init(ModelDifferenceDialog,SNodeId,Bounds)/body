{
  myModelDialog=modelDialog;
  myRootId=rootId;
  myOldEditor=addEditor(0,myModelDialog.getChangeSet().getOldModel());
  myNewEditor=addEditor(1,myModelDialog.getChangeSet().getNewModel());
  linkEditors(true);
  linkEditors(false);
  JSplitPane splitPane=new JSplitPane(JSplitPane.VERTICAL_SPLIT,myTopPanel,myBottomPanel);
  splitPane.setResizeWeight(0.7);
  RootDifferenceDialog.MyGoToNeighbourRootActions neighbourActions=new RootDifferenceDialog.MyGoToNeighbourRootActions();
  final NextPreviousTraverser neighbourTraverser=new NextPreviousTraverser(myChangeGroupLayouts,myNewEditor.getMainEditor());
  DefaultActionGroup actionGroup=ActionUtils.groupFromActions(neighbourActions.previous(),neighbourActions.next(),Separator.getInstance(),neighbourTraverser.previousAction(),neighbourTraverser.nextAction(),Separator.getInstance(),new RevertRootsAction(myModelDialog){
    protected SNodeId[] getRoots(){
      return new SNodeId[]{myRootId};
    }
    protected void after(){
      rehighlight();
    }
  }
);
  ActionToolbar toolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,actionGroup,true);
  neighbourTraverser.setActionToolbar(toolbar);
  myContainer.add(toolbar.getComponent(),BorderLayout.NORTH);
  myContainer.add(splitPane,BorderLayout.CENTER);
  myContainer.add(myStatusBar,BorderLayout.SOUTH);
  highlightAllChanges();
  if (firstChange != null) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        neighbourTraverser.goToBounds(firstChange);
      }
    }
);
  }
 else {
    neighbourTraverser.goToFirstChangeLater();
  }
}
