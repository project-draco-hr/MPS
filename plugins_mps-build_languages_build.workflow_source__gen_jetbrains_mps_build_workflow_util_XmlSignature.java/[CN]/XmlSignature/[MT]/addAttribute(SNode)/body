{
  sb.append(SPropertyOperations.getString(attr,"attrName"));
  sb.append("=");
  sb.append('"');
  for (  SNode val : SLinkOperations.getTargets(attr,"value",true)) {
    if (SNodeOperations.isInstanceOf(val,"jetbrains.mps.core.xml.structure.XmlCharRefValue")) {
      sb.append("&#");
      sb.append(SPropertyOperations.getString(SNodeOperations.cast(val,"jetbrains.mps.core.xml.structure.XmlCharRefValue"),"charCode"));
      sb.append(";");
    }
 else     if (SNodeOperations.isInstanceOf(val,"jetbrains.mps.core.xml.structure.XmlEntityRefValue")) {
      sb.append("&");
      sb.append(SPropertyOperations.getString(SNodeOperations.cast(val,"jetbrains.mps.core.xml.structure.XmlEntityRefValue"),"entityName"));
      sb.append(";");
    }
 else     if (SNodeOperations.isInstanceOf(val,"jetbrains.mps.core.xml.structure.XmlNoSpaceValue")) {
    }
 else     if (SNodeOperations.isInstanceOf(val,"jetbrains.mps.core.xml.structure.XmlTextValue")) {
      SNode tv=SNodeOperations.cast(val,"jetbrains.mps.core.xml.structure.XmlTextValue");
      if (BehaviorReflection.invokeVirtual(Boolean.TYPE,tv,"virtual_onNewLine_3080189811177340422",new Object[]{})) {
        sb.append("\n");
      }
      sb.append(SPropertyOperations.getString(tv,"text"));
      if (BehaviorReflection.invokeVirtual(Boolean.TYPE,tv,"virtual_hasNewLineAfter_3080189811177340429",new Object[]{})) {
        if (SNodeOperations.isInstanceOf(SNodeOperations.getNextSibling(tv),"jetbrains.mps.core.xml.structure.XmlValuePart") && BehaviorReflection.invokeVirtual(Boolean.TYPE,SNodeOperations.cast(SNodeOperations.getNextSibling(tv),"jetbrains.mps.core.xml.structure.XmlValuePart"),"virtual_onNewLine_3080189811177340422",new Object[]{})) {
          return;
        }
        sb.append("\n");
      }
    }
 else {
      hasErrors=true;
    }
  }
  sb.append('"');
}
