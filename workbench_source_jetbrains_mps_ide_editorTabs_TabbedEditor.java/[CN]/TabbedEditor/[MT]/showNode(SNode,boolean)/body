{
  SNode containingRoot=node.isRoot() ? node : node.getContainingRoot();
  boolean rootChange=containingRoot != getCurrentlyEditedNode().getNode();
  if (myColorProvider != null && rootChange) {
    myColorProvider.stop(this);
  }
  EditorComponent editor=getCurrentEditorComponent();
  editor.editNode(containingRoot,getOperationContext());
  if (rootChange) {
    onRootNodeChange();
  }
  if (myColorProvider != null && rootChange) {
    myColorProvider.start(this);
  }
  if (select) {
    editor.selectNode(node);
  }
}
