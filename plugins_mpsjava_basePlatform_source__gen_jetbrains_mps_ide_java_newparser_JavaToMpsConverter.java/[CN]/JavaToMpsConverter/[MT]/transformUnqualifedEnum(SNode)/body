{
  if (!(SConceptOperations.isExactly(SNodeOperations.asSConcept(SNodeOperations.getConceptDeclaration(varRef)),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,"jetbrains.mps.baseLanguage.structure.VariableReference")))) {
    return null;
  }
  SReference ref=SNodeOperations.getReference(varRef,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,1068581517664l,"variableDeclaration"));
  if (!(ref instanceof DynamicReference)) {
    return null;
  }
  if (ref.getTargetNode() != null) {
    return null;
  }
  SNode gateway=SConceptOperations.createNewNode(SNodeOperations.asInstanceConcept(MetaAdapterFactory.getInterfaceConcept(new UUID(-935030926396207931l,-6610165693999523818l),8136348407761606757l,"jetbrains.mps.baseLanguage.structure.IYetUnresolved")));
  String enumConstName=((DynamicReference)ref).getResolveInfo();
  for (  SNode enclosingEnum : ListSequence.fromList(SNodeOperations.getNodeAncestors(varRef,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1083245097125l,"jetbrains.mps.baseLanguage.structure.EnumClass"),false))) {
    SNode enumConstRef=makeEnumConstRef(enclosingEnum,enumConstName);
    if (enumConstRef != null) {
      return enumConstRef;
    }
  }
  SNode root=SNodeOperations.getContainingRoot(varRef);
  if (!(SNodeOperations.isInstanceOf(root,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier")))) {
    return null;
  }
  SNode javaImports=AttributeOperations.getAttribute(SNodeOperations.cast(root,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier")),new IAttributeDescriptor.NodeAttribute("jetbrains.mps.baseLanguage.structure.JavaImports"));
  if ((javaImports == null)) {
    return null;
  }
  for (  SNode singleNameImport : Sequence.fromIterable(BehaviorReflection.invokeNonVirtual((Class<Iterable<SNode>>)((Class)Object.class),javaImports,"jetbrains.mps.baseLanguage.structure.JavaImports","call_staticSingleName_5230012391903395274",new Object[]{}))) {
    if (!(enumConstName.equals(BehaviorReflection.invokeNonVirtual(String.class,singleNameImport,"jetbrains.mps.baseLanguage.structure.Tokens","call_lastToken_1296023605440030462",new Object[]{})))) {
      continue;
    }
    String enumClassCandidateName=BehaviorReflection.invokeNonVirtual(String.class,singleNameImport,"jetbrains.mps.baseLanguage.structure.Tokens","call_withoutLastToken_6148840541591441572",new Object[]{});
    SNode enumClassCandidate=BehaviorReflection.invokeNonVirtual((Class<SNode>)((Class)Object.class),gateway,"jetbrains.mps.baseLanguage.structure.IYetUnresolved","call_findClass_5230012391932867419",new Object[]{varRef,enumClassCandidateName});
    if ((enumClassCandidate == null)) {
      return null;
    }
    if (!(SNodeOperations.isInstanceOf(enumClassCandidate,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1083245097125l,"jetbrains.mps.baseLanguage.structure.EnumClass")))) {
      return null;
    }
    SNode result=makeEnumConstRef(SNodeOperations.cast(enumClassCandidate,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1083245097125l,"jetbrains.mps.baseLanguage.structure.EnumClass")),enumConstName);
    if (result != null) {
      return null;
    }
  }
  for (  SNode onDemandImport : Sequence.fromIterable(BehaviorReflection.invokeNonVirtual((Class<Iterable<SNode>>)((Class)Object.class),javaImports,"jetbrains.mps.baseLanguage.structure.JavaImports","call_staticOnDemand_5230012391903366883",new Object[]{}))) {
    SNode claz=BehaviorReflection.invokeNonVirtual((Class<SNode>)((Class)Object.class),gateway,"jetbrains.mps.baseLanguage.structure.IYetUnresolved","call_findClass_5230012391932867419",new Object[]{varRef,SPropertyOperations.getString(onDemandImport,MetaAdapterFactory.getProperty(new UUID(-935030926396207931l,-6610165693999523818l),6528213125912070246l,1843920760191311250l,"tokens"))});
    if ((claz == null)) {
      continue;
    }
    if (!(SNodeOperations.isInstanceOf(claz,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1083245097125l,"jetbrains.mps.baseLanguage.structure.EnumClass")))) {
      continue;
    }
    SNode result=makeEnumConstRef(SNodeOperations.cast(claz,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1083245097125l,"jetbrains.mps.baseLanguage.structure.EnumClass")),enumConstName);
    if (result != null) {
      return null;
    }
  }
  return null;
}
