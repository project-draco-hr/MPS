{
  for (  SReference ref : refs) {
    if (!(ref instanceof DynamicReference)) {
      continue;
    }
    if (SetSequence.fromSet(myVisitedRefs).contains((SReference)ref)) {
      continue;
    }
    SNode target=ref.getTargetNode();
    if (target == null) {
      continue;
    }
    SNode source=ref.getSourceNode();
    SModelReference targetModel=target.getModel().getReference();
    SReference staticRef=StaticReference.create(ref.getRole(),source,targetModel,target.getNodeId(),((DynamicReference)ref).getResolveInfo());
    List<SReference> nodeRefs=MapSequence.fromMap(result).get(source.getReference());
    if (nodeRefs == null) {
      nodeRefs=ListSequence.fromList(new ArrayList<SReference>());
      MapSequence.fromMap(result).put(source.getReference(),nodeRefs);
    }
    ListSequence.fromList(nodeRefs).addElement((SReference)staticRef);
  }
}
