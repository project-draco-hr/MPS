{
  progress.start("Resolving...",10);
  if (FeatureKind.CLASS.equals(level)) {
    resolveUpdatePass("top level references",nodes,new _FunctionTypes._return_P1_E0<Iterable<SReference>,SNode>(){
      public Iterable<SReference> invoke(      SNode node){
        return getTopLevelRefs(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier")));
      }
    }
,progress.subTask(1));
  }
  if (FeatureKind.CLASS_CONTENT.equals(level) || FeatureKind.CLASS.equals(level)) {
    resolveUpdatePass("field/method type references",nodes,new _FunctionTypes._return_P1_E0<Iterable<SReference>,SNode>(){
      public Iterable<SReference> invoke(      SNode node){
        return getFieldAndMethodTypeRefs(SNodeOperations.cast(node,MetaAdapterFactory.getInterfaceConcept(new UUID(-935030926396207931l,-6610165693999523818l),1178285077437l,"jetbrains.mps.baseLanguage.structure.ClassifierMember")));
      }
    }
,progress.subTask(1));
  }
  resolveUpdatePass("type references",nodes,new _FunctionTypes._return_P1_E0<Iterable<SReference>,SNode>(){
    public Iterable<SReference> invoke(    SNode node){
      return getVarTypeRefs(node);
    }
  }
,progress.subTask(1));
  resolveUpdatePass("variable references",nodes,new _FunctionTypes._return_P1_E0<Iterable<SReference>,SNode>(){
    public Iterable<SReference> invoke(    SNode node){
      return getVariableRefs(node);
    }
  }
,progress.subTask(1));
  resolveUpdatePass("dot operands",nodes,new _FunctionTypes._return_P1_E0<ISequence<SReference>,SNode>(){
    public ISequence<SReference> invoke(    SNode node){
      return ListSequence.fromList(SNodeOperations.getNodeDescendants(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,"jetbrains.mps.baseLanguage.structure.DotExpression"),false,new SAbstractConcept[]{})).translate(new ITranslator2<SNode,SReference>(){
        public Iterable<SReference> translate(        SNode it){
          return deepReferences(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,1197027771414l,"operand")));
        }
      }
);
    }
  }
,progress.subTask(1));
  resolveUpdatePass("dot operations",nodes,new _FunctionTypes._return_P1_E0<ISequence<SReference>,SNode>(){
    public ISequence<SReference> invoke(    SNode node){
      return ListSequence.fromList(SNodeOperations.getNodeDescendants(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,"jetbrains.mps.baseLanguage.structure.DotExpression"),false,new SAbstractConcept[]{})).translate(new ITranslator2<SNode,SReference>(){
        public Iterable<SReference> translate(        SNode it){
          if (Sequence.fromIterable(deepReferences(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,1197027771414l,"operand")))).any(new IWhereFilter<SReference>(){
            public boolean accept(            SReference it){
              return (SReference)it instanceof DynamicReference;
            }
          }
)) {
            return ListSequence.fromList(new ArrayList<SReference>());
          }
 else {
            if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,1197027833540l,"operation")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1197029447546l,"jetbrains.mps.baseLanguage.structure.FieldReferenceOperation"))) {
              return Sequence.<SReference>singleton(SNodeOperations.getReference(SNodeOperations.cast(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,1197027833540l,"operation")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1197029447546l,"jetbrains.mps.baseLanguage.structure.FieldReferenceOperation")),MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1197029447546l,1197029500499l,"fieldDeclaration")));
            }
 else             if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,1197027833540l,"operation")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1202948039474l,"jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation"))) {
              return Sequence.<SReference>singleton(SNodeOperations.getReference(SNodeOperations.cast(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1197027756228l,1197027833540l,"operation")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1202948039474l,"jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation")),MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1204053956946l,1068499141037l,"baseMethodDeclaration")));
            }
 else {
              return ListSequence.fromList(new ArrayList<SReference>());
            }
          }
        }
      }
);
    }
  }
,progress.subTask(1));
  resolveUpdatePass("classifiers in static access",nodes,new _FunctionTypes._return_P1_E0<List<SReference>,SNode>(){
    public List<SReference> invoke(    SNode node){
      List<SReference> result=ListSequence.fromList(new ArrayList<SReference>());
      ListSequence.fromList(result).addSequence(ListSequence.fromList(SNodeOperations.getNodeDescendants(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1081236700937l,"jetbrains.mps.baseLanguage.structure.StaticMethodCall"),false,new SAbstractConcept[]{})).select(new ISelector<SNode,SReference>(){
        public SReference select(        SNode it){
          return SNodeOperations.getReference(it,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1081236700937l,1144433194310l,"classConcept"));
        }
      }
));
      ListSequence.fromList(result).addSequence(ListSequence.fromList(SNodeOperations.getNodeDescendants(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070533707846l,"jetbrains.mps.baseLanguage.structure.StaticFieldReference"),false,new SAbstractConcept[]{})).select(new ISelector<SNode,SReference>(){
        public SReference select(        SNode it){
          return SNodeOperations.getReference(it,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1070533707846l,1144433057691l,"classifier"));
        }
      }
));
      return result;
    }
  }
,progress.subTask(1));
  resolveUpdatePass("static member references",nodes,new _FunctionTypes._return_P1_E0<List<SReference>,SNode>(){
    public List<SReference> invoke(    SNode node){
      List<SReference> result=ListSequence.fromList(new ArrayList<SReference>());
      ListSequence.fromList(result).addSequence(ListSequence.fromList(SNodeOperations.getNodeDescendants(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1081236700937l,"jetbrains.mps.baseLanguage.structure.StaticMethodCall"),false,new SAbstractConcept[]{})).select(new ISelector<SNode,SReference>(){
        public SReference select(        SNode it){
          return SNodeOperations.getReference(it,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1204053956946l,1068499141037l,"baseMethodDeclaration"));
        }
      }
));
      ListSequence.fromList(result).addSequence(ListSequence.fromList(SNodeOperations.getNodeDescendants(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070533707846l,"jetbrains.mps.baseLanguage.structure.StaticFieldReference"),false,new SAbstractConcept[]{})).select(new ISelector<SNode,SReference>(){
        public SReference select(        SNode it){
          return SNodeOperations.getReference(it,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,1068581517664l,"variableDeclaration"));
        }
      }
));
      return result;
    }
  }
,progress.subTask(1));
  resolveUpdatePass("remaining references",nodes,new _FunctionTypes._return_P1_E0<Iterable<SReference>,SNode>(){
    public Iterable<SReference> invoke(    SNode node){
      return deepReferences(node);
    }
  }
,progress.subTask(1));
  codeTransformPass(nodes,progress.subTask(1));
  removeJavaImportsPass(nodes,progress.subTask(1));
  progress.done();
}
