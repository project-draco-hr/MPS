{
  ModelAccess.assertLegalRead();
  SNode smartReference=ReferenceConceptUtil.getCharacteristicReference(smartConcept);
  if (smartReference == null) {
    return new ErrorReferenceDescriptor("smartConcept has no characteristic reference: " + smartConcept.getName());
  }
  SNode linkDeclaration=role != null ? enclosingNode.getLinkDeclaration(role) : null;
  if (linkDeclaration != null && SNodeUtil.getLinkDeclaration_IsReference(linkDeclaration)) {
    return new ErrorReferenceDescriptor("for reference role smartConcept should be null");
  }
  return new OkReferenceDescriptor(smartConcept,SModelUtil.getGenuineLinkRole(smartReference),false,role,index,null,SModelUtil.getLinkDeclarationTarget(smartReference),enclosingNode,linkDeclaration,null);
}
