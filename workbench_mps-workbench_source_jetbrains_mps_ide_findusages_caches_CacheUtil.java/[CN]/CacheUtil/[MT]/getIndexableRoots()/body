{
  final Set<VirtualFile> files=new HashSet<VirtualFile>();
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      for (      final SModule m : MPSModuleRepository.getInstance().getModules()) {
        for (        String path : SModuleOperations.getIndexablePaths(m)) {
          VirtualFile file=VirtualFileUtils.getVirtualFile(path);
          if (file == null)           continue;
          files.add(file);
        }
      }
    }
  }
);
  return files;
}
