{
  final Set<VirtualFile> files=new HashSet<VirtualFile>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      for (      final IModule m : MPSModuleRepository.getInstance().getAllModules()) {
        VirtualFile file=VirtualFileUtils.getVirtualFile(m.getBundleHome());
        if (file != null) {
          files.add(file);
        }
      }
    }
  }
);
  return files;
}
