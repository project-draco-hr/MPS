{
  return ModelAccess.instance().runReadAction(new Computable<DataNode>(){
    @Override public DataNode compute(){
      myRebuildCache=new HashMap<Pair<DataNode,Object>,DataNode>();
      DataNode root=new DataNode(new MainNodeData(PathItemRole.ROLE_MAIN_ROOT));
      DataNode nodesRoot=new DataNode(new SearchedNodesNodeData(PathItemRole.ROLE_MAIN_SEARCHED_NODES));
      for (      Object node : results.getAliveNodes()) {
        addSearchedNode(nodesRoot,node);
      }
      root.add(nodesRoot);
      DataNode resultsRoot=new DataNode(new ResultsNodeData(PathItemRole.ROLE_MAIN_RESULTS,nodeRepresentator));
      for (      SearchResult result : (List<SearchResult>)results.getAliveResults()) {
        addResultWithPresentation(resultsRoot,result,nodeRepresentator);
      }
      root.add(resultsRoot);
      myRebuildCache=null;
      return root;
    }
  }
);
}
