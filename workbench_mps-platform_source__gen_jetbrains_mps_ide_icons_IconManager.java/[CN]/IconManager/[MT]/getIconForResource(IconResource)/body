{
  if (ir == null) {
    return null;
  }
  if (ir.isAlreadyReloaded()) {
    MapSequence.fromMap(ourResToIcon).removeKey(ir);
  }
  if (MapSequence.fromMap(ourResToIcon).containsKey(ir)) {
    return MapSequence.fromMap(ourResToIcon).get(ir);
  }
  Icon icon;
  if (ir.getResourceId() != null && ir.getProvider() != null) {
    icon=IconLoader.findIcon(ir.getResourceId(),ir.getProvider());
    if (icon == null) {
      return null;
    }
  }
 else {
    InputStream resource=ir.getResource();
    if (resource == null) {
      return null;
    }
    icon=(resource == null ? null : IconLoadHelper.loadIcon(resource));
    try {
      resource.close();
    }
 catch (    IOException e) {
      if (LOG.isEnabledFor(Level.WARN)) {
        LOG.warn("",e);
      }
    }
  }
  MapSequence.fromMap(ourResToIcon).put(ir,icon);
  return icon;
}
