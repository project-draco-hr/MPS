{
  SNode curr=node;
  SNode prev=fromChild;
  while (curr != null) {
    if (SNodeOperations.isInstanceOf(curr,MetaAdapterFactory.getInterfaceConcept(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x33d23ee961a0cbf3L,"jetbrains.mps.lang.core.structure.ScopeProvider"))) {
      Scope scope=BehaviorReflection.invokeVirtual(Scope.class,SNodeOperations.cast(curr,MetaAdapterFactory.getInterfaceConcept(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x33d23ee961a0cbf3L,"jetbrains.mps.lang.core.structure.ScopeProvider")),"virtual_getScope_3734116213129936182",new Object[]{kind,prev});
      if (scope != null) {
        return scope;
      }
    }
    prev=curr;
    curr=parent(curr);
  }
  return null;
}
