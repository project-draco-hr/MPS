{
  if (!myReadyForInput) {
    String s=event.getText();
    if (s.startsWith("(gdb)")) {
      myReadyForInput=true;
      final SimpleConsoleProcessHandler gdbProcess=(SimpleConsoleProcessHandler)event.getProcessHandler();
      File programFile=new File(myCommand);
      File dir=programFile.getParentFile();
      String workingDir=dir.getAbsolutePath();
      gdbProcess.inputWithFlush("-environment-cd " + workingDir + "\n");
      gdbProcess.inputWithFlush("-file-exec-and-symbols " + myCommand.replace(File.separatorChar,'/') + "\n");
      myDebugSession.getGDBRequestManager().createRequest(new BreakpointRequestor("main"){
        @Override public void onRequestFulfilled(        ResultAnswer answer){
          final GDBEventsHandler eventsHandler=myDebugSession.getGDBEventsHandler();
          eventsHandler.addEventListener(new GDBEventsAdapter(){
            @Override public void breakpointHit(            AsyncAnswer answer,            SimpleConsoleProcessHandler gdbProcess){
              eventsHandler.removeEventListener(this);
              connectedToDebuggee(gdbProcess);
            }
          }
);
          gdbProcess.inputWithFlush("-exec-run\n");
        }
      }
);
    }
  }
}
