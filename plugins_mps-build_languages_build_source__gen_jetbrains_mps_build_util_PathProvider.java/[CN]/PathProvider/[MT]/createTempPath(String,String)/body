{
  StringBuilder sb=new StringBuilder("${build.tmp}/");
  int before;
  for (  String s : categories) {
    if ((s == null || s.length() == 0)) {
      continue;
    }
    before=sb.length();
    appendFileName(sb,s);
    if (before < sb.length()) {
      sb.append("/");
    }
  }
  before=sb.length();
  appendFileName(sb,name);
  if (before == sb.length()) {
    sb.append("noname");
  }
  before=sb.length();
  String result=sb.toString();
  int i=1;
  while (usedNames.putIfAbsent(result,result) != null) {
    sb.setLength(before);
    sb.append(i++);
    result=sb.toString();
  }
  return result;
}
