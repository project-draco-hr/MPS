{
  boolean wereErrors=false;
  myContextModules.add(context.getModule());
  for (  SNode root : outputModel.getRoots()) {
    INodeAdapter outputNode=BaseAdapter.fromNode(root);
    TextGenerationResult genResult=TextGenerationUtil.generateText(context,root);
    wereErrors|=genResult.hasErrors();
    String key=JavaNameUtil.packageNameForModelUID(outputModel.getSModelReference()) + "." + root.getName();
    mySources.put(key,genResult.getText());
    if (outputNode.getClass() == ClassConcept.class || outputNode.getClass() == Interface.class || outputNode.getClass() == (Class)EnumClass.class || outputNode.getClass() == Annotation.class) {
      myJavaSources.add(key);
    }
  }
  return !wereErrors;
}
