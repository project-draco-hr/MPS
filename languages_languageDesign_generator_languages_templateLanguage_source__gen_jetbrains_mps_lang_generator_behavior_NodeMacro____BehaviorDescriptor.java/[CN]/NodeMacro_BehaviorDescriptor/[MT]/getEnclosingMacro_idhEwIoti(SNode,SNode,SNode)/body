{
  if (currentNode == null) {
    return null;
  }
  SNode result=null;
  for (  SNode currentAttribute : AttributeOperations.getAttributeList(currentNode,new IAttributeDescriptor.AllAttributes())) {
    if (SNodeOperations.isInstanceOf(currentAttribute,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xfd47ed6742L,"jetbrains.mps.lang.generator.structure.NodeMacro"))) {
      if (currentAttribute == currentMacro) {
        break;
      }
      result=SNodeOperations.cast(currentAttribute,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xfd47ed6742L,"jetbrains.mps.lang.generator.structure.NodeMacro"));
    }
  }
  if (result != null) {
    return result;
  }
  return NodeMacro_BehaviorDescriptor.getEnclosingMacro_idhEwIoti.invoke(__thisNode__,null,SNodeOperations.getParent(currentNode));
}
