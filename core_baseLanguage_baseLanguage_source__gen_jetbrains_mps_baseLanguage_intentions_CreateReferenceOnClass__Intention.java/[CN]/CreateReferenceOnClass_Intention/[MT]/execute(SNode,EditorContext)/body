{
  SNode outerConcept=SNodeOperations.getAncestor(SNodeOperations.getAncestor(node,"jetbrains.mps.baseLanguage.structure.ClassConcept",false,false),"jetbrains.mps.baseLanguage.structure.ClassConcept",false,false);
  while ((outerConcept != null)) {
    if (SNodeOperations.isInstanceOf(outerConcept,"jetbrains.mps.baseLanguage.structure.AnonymousClass")) {
      outerConcept=SNodeOperations.getAncestor(outerConcept,"jetbrains.mps.baseLanguage.structure.ClassConcept",false,false);
    }
 else {
      break;
    }
  }
  SLinkOperations.setTarget(node,"classConcept",outerConcept,false);
}
