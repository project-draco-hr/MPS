{
  initialize();
  ArrayList<SNode> outputNodes=new ArrayList<SNode>();
  final TemplateExecutionEnvironment environment=ctx.getEnvironment();
  final GenerationTrace tracer=environment.getTrace();
  ITemplateProcessor templateProcessor=environment.getTemplateProcessor();
  for (  Pair<SNode,String> nodeAndMappingNamePair : myNodeAndMappingNamePairs) {
    SNode templateNode=nodeAndMappingNamePair.o1;
    String innerMappingName=nodeAndMappingNamePair.o2;
    List<SNode> _outputNodes=templateProcessor.apply(templateNode,ctx.subContext(innerMappingName));
    SNode input=ctx.getInput();
    tracer.trace(input == null ? null : input.getNodeId(),GenerationTracerUtil.translateOutput(_outputNodes),templateNode.getReference());
    outputNodes.addAll(_outputNodes);
  }
  return outputNodes;
}
