{
  if (nodeToHighlight == null)   return;
  SNode node=nodeToHighlight;
  while (node != null) {
    if (color.equals(this.getColorFor(node)))     return;
    node=node.getParent();
  }
  Set<HighlighterMessage> messagesToRemove=new HashSet<HighlighterMessage>();
  for (  SNode childNode : CollectionUtil.iteratorAsIterable(nodeToHighlight.depthFirstChildren())) {
    for (    HighlighterMessage msg : myMessages()) {
      if (msg.getNode() == childNode && msg.getColor().equals(color))       messagesToRemove.add(msg);
    }
  }
  for (  HighlighterMessage msg : messagesToRemove) {
    Set<HighlighterMessage> msgs=this.myMessages.get(msg.getOwner());
    if (msgs != null) {
      msgs.remove(msg);
    }
  }
  for (  HighlighterMessage msg : messagesToRemove) {
    myEditor.getMessagesGutter().remove(msg);
  }
  this.mark(nodeToHighlight,color,messageText,owner);
}
