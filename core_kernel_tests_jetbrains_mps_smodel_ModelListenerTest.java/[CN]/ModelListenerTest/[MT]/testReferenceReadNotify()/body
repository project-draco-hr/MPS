{
  SModel m1=new TestModelFactory().createModel(3,5);
  final Iterator<SNode> roots=m1.getRootNodes().iterator();
  final SNode r1=roots.next();
  final SNode r2c1=roots.next().getFirstChild();
  r1.setReferenceTarget(ourRef,r2c1);
  myTestModelAccess.enableRead();
  ((SModelBase)m1).attach(myTestRepo);
  AccessCountListener1 cl1=new AccessCountListener1();
  AccessCountListener2 cl2=new AccessCountListener2();
  AccessCountListener3 cl3=new AccessCountListener3();
  attachAccessListeners(m1,cl1,cl2,cl3);
  final SReference ref1=r1.getReference(ourRef);
  myErrors.checkThat(cl1.myReferencesRead,equalTo(1));
  myErrors.checkThat(cl2.myReferencesRead,equalTo(1));
  myErrors.checkThat(cl3.myReferencesRead,equalTo(0));
  myErrors.checkThat(ref1.getTargetNode(),equalTo(r2c1));
  cl1.reset();
  cl2.reset();
  cl3.reset();
  final SNode t=r1.getReferenceTarget(ourRef);
  myErrors.checkThat(cl1.myReferencesRead,equalTo(2));
  myErrors.checkThat(cl2.myReferencesRead,equalTo(2));
  myErrors.checkThat(cl3.myReferencesRead,equalTo(0));
  myErrors.checkThat(t,equalTo(r2c1));
  detachAccessListeners(m1,cl1,cl2,cl3);
}
