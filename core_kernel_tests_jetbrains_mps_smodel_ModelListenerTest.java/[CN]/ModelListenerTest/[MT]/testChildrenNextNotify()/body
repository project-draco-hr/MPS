{
  final SModel m1=new TestModelFactory().createModel(1,3,1);
  myTestModelAccess.enableRead();
  ((SModelBase)m1).attach(myTestRepo);
  AccessCountListener1 cl1=new AccessCountListener1();
  AccessCountListener2 cl2=new AccessCountListener2();
  AccessCountListener3 cl3=new AccessCountListener3();
  final SNode r1=m1.getRootNodes().iterator().next();
  final Iterator<? extends SNode> childIterator=r1.getChildren(TestModelFactory.ourRole).iterator();
  attachAccessListeners(m1,cl1,cl2,cl3);
  final SNode n1=childIterator.next();
  final SNode n2=childIterator.next();
  final SNode n3=childIterator.next();
  detachAccessListeners(m1,cl1,cl2,cl3);
  Assert.assertNotNull(n1);
  Assert.assertNotNull(n2);
  Assert.assertNotNull(n3);
  myErrors.checkThat(cl1.myVisitedNodes,equalTo(5));
  myErrors.checkThat(cl2.myVisitedNodes,equalTo(3));
  myErrors.checkThat(cl3.myVisitedNodes,equalTo(3));
}
