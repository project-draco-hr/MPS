{
  if (myModelDescriptor != null) {
    ModelChange.assertLegalChange_new(myModelDescriptor);
  }
  Integer existingVersion=myLanguagesIds.get(id);
  if (existingVersion != null) {
    if (version == -1 || existingVersion == version) {
      return;
    }
    if (existingVersion == -1) {
      myLanguagesIds.remove(id);
    }
 else {
      throw new IllegalStateException("Can't add language import with different version. Old version: " + existingVersion + "; new version: "+ version);
    }
  }
  myLanguagesIds.put(id,version);
  invalidateModelDepsManager();
  fireLanguageAddedEvent(convertLanguageRef(id));
  markChanged();
  addLanguage(convertLanguageRef(id));
}
