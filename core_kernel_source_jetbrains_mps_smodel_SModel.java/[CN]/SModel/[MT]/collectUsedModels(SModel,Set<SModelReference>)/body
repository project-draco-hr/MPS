{
  for (  SNode node : model.nodes()) {
    SNode concept=node.getConceptDeclarationNode();
    if (concept == null) {
      LOG.error("concept not found for node " + node.getDebugText());
    }
 else {
      result.add(concept.getModel().getSModelReference());
    }
    for (    String propname : node.getProperties().keySet()) {
      SNode decl=node.getPropertyDeclaration(propname);
      if (decl == null) {
        LOG.error("undeclared property: '" + propname + "' in node "+ node.getDebugText());
      }
 else {
        result.add(decl.getModel().getSModelReference());
      }
    }
    for (    SReference ref : node.getReferencesIterable()) {
      SModelReference targetModelRef=ref.getTargetSModelReference();
      if (targetModelRef == null) {
        LOG.error("target model of reference '" + ref.getRole() + "' is null in node "+ node.getDebugText());
      }
 else {
        result.add(targetModelRef);
      }
      SNode decl=node.getLinkDeclaration(ref.getRole());
      if (decl == null) {
        LOG.error("undeclared link role: '" + ref.getRole() + "' in node "+ node.getDebugText());
      }
 else {
        result.add(decl.getModel().getSModelReference());
      }
    }
    for (    SNode child : node.getChildrenIterable()) {
      SNode decl=child.getRoleLink();
      if (decl == null) {
        LOG.error("undeclared child role: '" + child.getRole_() + "' in node "+ node.getDebugText());
      }
 else {
        result.add(decl.getModel().getSModelReference());
      }
    }
  }
  return result;
}
