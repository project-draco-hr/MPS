{
  ModelChange.assertLegalChange(getModelDescriptor());
  ImportElement importElement=SModelOperations.getImportElement(getModelDescriptor(),modelReference);
  if (importElement != null)   return;
  importElement=SModelOperations.getAdditionalModelElement(getModelDescriptor(),modelReference);
  if (importElement == null) {
    org.jetbrains.mps.openapi.model.SModel modelDescriptor=MPSCore.getInstance().isMergeDriverMode() ? null : SModelRepository.getInstance().getModelDescriptor(modelReference);
    int usedVersion=-1;
    if (modelDescriptor instanceof RefactorableSModelDescriptor) {
      usedVersion=((RefactorableSModelDescriptor)modelDescriptor).getVersion();
    }
    importElement=new ImportElement(modelReference,-1,firstVersion ? -1 : usedVersion);
  }
  addModelImport(importElement);
}
