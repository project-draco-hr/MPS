{
  Set<SModelReference> usedModels=collectUsedModels(this,new HashSet<SModelReference>());
  if (!LanguageAspect.STRUCTURE.is(this))   usedModels.remove(myReference);
  for (  ImportElement elem : myImports) {
    usedModels.remove(elem.getModelReference());
  }
  List<ImportElement> implicitImports=new ArrayList<ImportElement>(usedModels.size());
  for (  ImportElement elem : myImplicitImports) {
    if (usedModels.remove(elem.getModelReference())) {
      implicitImports.add(elem);
    }
  }
  for (  SModelReference ref : usedModels) {
    SModelDescriptor modelDescriptor=SModelRepository.getInstance().getModelDescriptor(ref);
    int version=modelDescriptor instanceof EditableSModelDescriptor ? ((EditableSModelDescriptor)modelDescriptor).getVersion() : -1;
    implicitImports.add(new ImportElement(ref,-1,version));
  }
  myImplicitImports=implicitImports;
}
