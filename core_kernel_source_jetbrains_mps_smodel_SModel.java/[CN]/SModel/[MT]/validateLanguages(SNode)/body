{
  Collection<ModuleReference> allrefs=SModelOperations.getAllImportedLanguages(this);
  Set<String> available=new HashSet<String>(allrefs.size());
  for (  ModuleReference ref : allrefs) {
    available.add(ref.getModuleFqName());
  }
  for (  SNode n : node.getDescendantsIterable(null,true)) {
    String namespace=n.getLanguageNamespace();
    if (!available.contains(namespace)) {
      available.add(namespace);
      Language lang=GlobalScope.getInstance().getLanguage(namespace);
      if (lang != null) {
        addLanguage(lang.getModuleReference());
        IModule module=getModelDescriptor() == null ? null : getModelDescriptor().getModule();
        if (module != null && module.getModuleDescriptor() != null && !module.getDependenciesManager().getAllUsedLanguages().contains(lang)) {
          module.addUsedLanguage(lang.getModuleReference());
        }
      }
    }
  }
}
