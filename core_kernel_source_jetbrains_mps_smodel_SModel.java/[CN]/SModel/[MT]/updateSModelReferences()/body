{
  boolean changed=false;
  for (  SNode node : getAllNodesWithIds()) {
    for (    SReference reference : node.getReferences()) {
      SModelReference oldReference=reference.getTargetSModelReference();
      if (oldReference == null)       continue;
      SModelReference newReference=oldReference.update();
      changed=changed || changed(oldReference,newReference);
      reference.setTargetSModelReference(newReference);
    }
  }
  for (  ImportElement e : myImports) {
    SModelReference oldReference=e.myModelDescriptor;
    SModelReference newReference=oldReference.update();
    changed=changed || changed(oldReference,newReference);
    e.myModelDescriptor=newReference;
  }
  for (  ImportElement e : myAdditionalModelsVersions) {
    SModelReference oldReference=e.myModelDescriptor;
    SModelReference newReference=oldReference.update();
    changed=changed || changed(oldReference,newReference);
    e.myModelDescriptor=newReference;
  }
  return changed;
}
