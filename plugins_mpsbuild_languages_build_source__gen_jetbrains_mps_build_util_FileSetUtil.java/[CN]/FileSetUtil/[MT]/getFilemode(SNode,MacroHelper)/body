{
  SNode parent=SNodeOperations.getParent(fileset);
  String filemode=null;
  String dirmode=null;
  while (SNodeOperations.isInstanceOf(parent,"jetbrains.mps.build.structure.BuildLayout_Folder") || SNodeOperations.isInstanceOf(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode")) {
    if (SNodeOperations.isInstanceOf(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode")) {
      if (filemode == null && (SPropertyOperations.getString(SNodeOperations.cast(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode"),"filemode") != null && SPropertyOperations.getString(SNodeOperations.cast(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode"),"filemode").length() > 0)) {
        filemode=SPropertyOperations.getString(SNodeOperations.cast(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode"),"filemode");
      }
      if (dirmode == null && (SPropertyOperations.getString(SNodeOperations.cast(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode"),"dirmode") != null && SPropertyOperations.getString(SNodeOperations.cast(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode"),"dirmode").length() > 0)) {
        dirmode=SPropertyOperations.getString(SNodeOperations.cast(parent,"jetbrains.mps.build.structure.BuildLayout_Filemode"),"dirmode");
      }
    }
    parent=SNodeOperations.getParent(parent);
  }
  if (SNodeOperations.isInstanceOf(parent,"jetbrains.mps.build.structure.BuildLayout_ContainerAcceptingFileSet") && BuildLayout_ContainerAcceptingFileSet_Behavior.call_hasFileModeAttribute_6408167411310575237(SNodeOperations.cast(parent,"jetbrains.mps.build.structure.BuildLayout_ContainerAcceptingFileSet"))) {
    return (dirmode != null || filemode != null ? new Pair(dirmode,filemode) : null);
  }
  return null;
}
