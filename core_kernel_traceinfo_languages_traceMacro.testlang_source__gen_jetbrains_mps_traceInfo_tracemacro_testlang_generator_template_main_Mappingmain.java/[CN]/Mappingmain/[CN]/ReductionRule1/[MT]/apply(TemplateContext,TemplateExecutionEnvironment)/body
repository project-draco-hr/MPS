{
  environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a4b);
  final SNode tnode1=new SNode(environment.getOutputModel(),"jetbrains.mps.baseLanguage.collections.structure.ForEachVariableReference",false);
  try {
    environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a2a4b);
    environment.nodeCopied(context,tnode1,"tpl/r:75f95d80-1d60-4222-8b1e-a09f089fee3e/7980748436587793724");
    environment.resolve(new ReferenceResolver(){
      public Object resolve(      SNode outputNode,      TemplateContext context){
        return QueriesGenerated.referenceMacro_GetReferent_7980748436587793726(environment.getOperationContext(),new ReferenceMacroContext(context.getInput(),tnode1,referenceMacro_417xrn_c0b0a0a0a0a0c0c0e1,"variable",context,environment.getGenerator()));
      }
      public String getDefaultResolveInfo(){
        return "";
      }
      public SNodePointer getTemplateNode(){
        return new SNodePointer("r:75f95d80-1d60-4222-8b1e-a09f089fee3e(jetbrains.mps.traceInfo.tracemacro.testlang.generator.template.main@generator)","7980748436587793725");
      }
    }
,tnode1,"variable",context);
  }
  finally {
    environment.getTracer().pushOutputNode(tnode1);
    environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a2a4b);
  }
  return TemplateUtil.singletonList(tnode1);
}
