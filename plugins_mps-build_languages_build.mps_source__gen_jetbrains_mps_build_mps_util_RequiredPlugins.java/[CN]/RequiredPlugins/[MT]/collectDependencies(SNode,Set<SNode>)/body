{
  SetSequence.fromSet(visited).addElement(plugin);
  for (  SNode dependency : ListSequence.fromList(SLinkOperations.getChildren(plugin,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x5b7be37b4de9bb74L,0x5b7be37b4de9bbd4L,"dependencies")))) {
    SNode dependencyPlugin=SLinkOperations.getTarget(dependency,MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x5b7be37b4de9bbd3L,0x5b7be37b4de9bbfaL,"target"));
    if (SNodeOperations.getContainingRoot(dependencyPlugin) != myRoot) {
      dependencyPlugin=SNodeOperations.as(DependenciesHelper.getOriginalNode(dependencyPlugin,myContext),MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x5b7be37b4de9bb74L,"jetbrains.mps.build.mps.structure.BuildMps_IdeaPlugin"));
      if (dependencyPlugin == null) {
        continue;
      }
    }
    if (!(SetSequence.fromSet(visited).contains(dependencyPlugin))) {
      collectDependencies(dependencyPlugin,visited);
    }
  }
}
