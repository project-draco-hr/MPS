{
  if (link == null) {
    writeByte(NULL);
    return;
  }
  final SContainmentLinkId id=IdHelper.getLinkId(link);
  if (myAggregation2Index.containsKey(id)) {
    writeByte(AGGREGATION_INDEX);
    writeShort(myAggregation2Index.get(id));
  }
 else {
    writeByte(AGGREGATION);
    writeConcept(link.getContainingConcept());
    writeLong(id.getIdValue());
    writeString(link.getRoleName());
    myAggregation2Index.put(id,myAggregationIndex++);
  }
}
