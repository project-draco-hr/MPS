{
  List<SModelReference> models=getModelReferencesFor(packageName);
  if (ListSequence.fromList(models).count() > 1) {
    for (    SModelReference model : models) {
      SNodeOperations.getModel(source).addModelImport(model,false);
    }
    return new DynamicReference(role,source,new SModelReference(packageName,SModelStereotype.getStubStereotypeForId(LanguageID.JAVA)),resolveInfo);
  }
  SModelReference model=(ListSequence.fromList(models).isEmpty() ? null : ListSequence.fromList(models).getElement(0));
  ModuleReference moduleRef=(model == null ? null : SModelRepository.getInstance().getModelDescriptor(model).getModule().getModuleReference());
  SModelReference ref=StubHelper.uidForPackageInStubs(packageName,this.getLanguageId(),moduleRef);
  if (model != null) {
    SNodeOperations.getModel(source).addModelImport(model,false);
  }
  return SReference.create(role,source,ref,targetNodeId,resolveInfo);
}
