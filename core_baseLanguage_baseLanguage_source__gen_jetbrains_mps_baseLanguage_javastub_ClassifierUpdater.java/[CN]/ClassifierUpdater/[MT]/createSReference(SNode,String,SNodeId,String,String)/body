{
  List<SModelReference> models=getModelReferencesFor(packageName);
  if (ListSequence.fromList(models).isEmpty()) {
    return SReference.create(role,source,null,targetNodeId,resolveInfo);
  }
  if (ListSequence.fromList(models).count() > 1) {
    for (    SModelReference model : models) {
      SNodeOperations.getModel(source).addModelImport(model,false);
    }
    return new DynamicReference(role,source,new SModelReference(packageName,SModelStereotype.getStubStereotypeForId(getLanguageId())),resolveInfo);
  }
  SModelReference model=ListSequence.fromList(models).getElement(0);
  ModuleReference moduleRef=SModelRepository.getInstance().getModelDescriptor(model).getModule().getModuleReference();
  SModelReference ref=StubHelper.uidForPackageInStubs(packageName,this.getLanguageId(),moduleRef);
  SNodeOperations.getModel(source).addModelImport(model,false);
  return SReference.create(role,source,ref,targetNodeId,resolveInfo);
}
