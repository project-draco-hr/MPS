{
  SearchResults results=new ModelAccessHelper(((MPSProject)MapSequence.fromMap(_params).get("project")).getModelAccess()).runReadAction(new Computable<SearchResults>(){
    public SearchResults compute(){
      AbstractModule from=SafeDeleteModuleDependency_Action.this.getModuleFrom(_params);
      SModule to=SafeDeleteModuleDependency_Action.this.getModuleTo(_params);
      return DependenciesUtil.analyzeDependencies(from,to,((Project)MapSequence.fromMap(_params).get("ideaProject")),((MPSProject)MapSequence.fromMap(_params).get("project")),false,false);
    }
  }
);
  if (!(results.getSearchResults().isEmpty())) {
    int res=Messages.showDialog("Can't safe delete dependency","Safe delete impossible",new String[]{"View dependencies","Delete anyway","Cancel"},0,null);
    if (res == 0) {
      DependenciesUtil.openDependenciesTool(((Project)MapSequence.fromMap(_params).get("ideaProject")),null,true);
    }
    if (res != 1) {
      return;
    }
  }
  SafeDeleteModuleDependency_Action.this.removeDependency(_params);
}
