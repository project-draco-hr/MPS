{
  ModuleDescriptor descriptor=from.getModuleDescriptor();
  Collection<Dependency> dependencies=descriptor.getDependencies();
  List<Dependency> badDeps=CollectionSequence.fromCollection(((Collection<Dependency>)dependencies)).where(new IWhereFilter<Dependency>(){
    public boolean accept(    Dependency it){
      return it.getModuleRef().equals(to.getModuleReference());
    }
  }
).toListSequence();
  dependencies.removeAll(badDeps);
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      from.save();
    }
  }
);
  ((Project)MapSequence.fromMap(_params).get("ideaProject")).getComponent(ProjectPluginManager.class).getTool(ModuleDependenies_Tool.class).resetAll();
}
