{
  if (getTree() == null)   return;
  if (getModule().isPackaged()) {
    setAdditionalText("packaged");
  }
 else {
    setAdditionalText(generationRequired().getMessage());
  }
  setText(getModulePresentation());
  List<String> errors=ModelAccess.instance().runReadAction(new Computable<List<String>>(){
    public List<String> compute(){
      return ModuleValidatorFactory.createValidator(getModule()).getErrors();
    }
  }
);
  boolean valid=errors.isEmpty();
  setErrorState(valid ? ErrorState.NONE : ErrorState.ERROR);
  if (valid) {
    setTooltipText(null);
  }
 else {
    String result="<html>";
    for (    String error : errors) {
      result+=error + "<br>";
    }
    setTooltipText(result);
  }
}
