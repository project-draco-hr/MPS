{
  if (getTree() == null)   return;
  if (getModule().isPackaged()) {
    setAdditionalText("packaged");
  }
 else {
    setAdditionalText(generationRequired().getMessage());
  }
  setText(getModulePresentation());
  boolean valid=ModelAccess.instance().runReadAction(new Computable<Boolean>(){
    public Boolean compute(){
      return getModule().isValid();
    }
  }
);
  setErrorState(valid ? ErrorState.NONE : ErrorState.ERROR);
  if (getModule().validate().isEmpty()) {
    setTooltipText(null);
  }
 else {
    String result="<html>";
    for (    String error : getModule().validate()) {
      result+=error + "<br>";
    }
    setTooltipText(result);
  }
}
