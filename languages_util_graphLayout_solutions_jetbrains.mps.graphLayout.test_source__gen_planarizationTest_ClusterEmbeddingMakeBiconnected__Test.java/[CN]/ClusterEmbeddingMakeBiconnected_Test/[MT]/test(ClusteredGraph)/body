{
  List<Edge> edges=graph.getEdges();
  EdgesHistoryManager manager=new EdgesHistoryManager(graph);
  EmbeddedGraph embeddedGraph=new ClusteredGraphEmbeddingFinder().find(graph);
  CheckEmbeddedGraph.checkEmbeddedGraph(embeddedGraph,false);
  CheckEmbeddedGraph.checkFull(embeddedGraph);
  Set<Edge> newEdges=BiconnectAugmentation.smartMakeBiconnected(graph);
  for (  Edge edge : SetSequence.<Edge>fromSet(newEdges)) {
    graph.removeEdge(edge);
  }
  for (  Edge edge : SetSequence.<Edge>fromSet(newEdges)) {
    ShortestPathEmbeddingFinder.restoreEdge(embeddedGraph,edge,false);
  }
  CheckEmbeddedGraph.checkEmbeddedGraph(embeddedGraph,false);
  CheckEmbeddedGraph.checkFull(embeddedGraph);
}
