{
  WhatToDo whatToDo=new WhatToDo();
  for (  String arg : args) {
    String[] argsplit=arg.split("\\s+");
    for (    String s : argsplit) {
      String[] propertyValuePair=s.split("=");
      if (propertyValuePair[0].equals(MODEL_DIR)) {
        whatToDo.addModelDirectory(new File(propertyValuePair[1]));
      }
 else       if (propertyValuePair[0].equals(MODULE_DIR)) {
        whatToDo.addModuleDirectory(new File(propertyValuePair[1]));
      }
 else       if (propertyValuePair[0].equals(MPS_LIBRARY)) {
        String[] nameValuePair=propertyValuePair[1].split("\\[|\\]");
        whatToDo.addLibrary(nameValuePair[0],new File(nameValuePair[1]));
      }
 else       if (propertyValuePair[0].equals(MPS_MACRO)) {
        String[] nameValuePair=propertyValuePair[1].split("\\[|\\]");
        whatToDo.addMacro(nameValuePair[0],nameValuePair[1]);
      }
 else       if (propertyValuePair[0].equals(MPS_PROJECT)) {
        whatToDo.addProjectFile(new File(propertyValuePair[1]));
      }
 else       if (propertyValuePair[0].equals(FAIL_ON_ERROR)) {
        whatToDo.myFailOnError=Boolean.parseBoolean(propertyValuePair[1]);
      }
 else       if (propertyValuePair[0].equals(LOG_LEVEL)) {
        whatToDo.myLogLevel=Integer.parseInt(propertyValuePair[1]);
      }
 else {
        whatToDo.putProperty(propertyValuePair[0],propertyValuePair[1]);
      }
    }
  }
  return whatToDo;
}
