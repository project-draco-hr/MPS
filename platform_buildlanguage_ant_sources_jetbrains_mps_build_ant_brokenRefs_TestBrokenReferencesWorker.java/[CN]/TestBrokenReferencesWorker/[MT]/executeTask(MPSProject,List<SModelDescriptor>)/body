{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      for (      SModelDescriptor sm : models) {
        if (!SModelStereotype.isUserModel(sm))         continue;
        String testName="test references for " + sm.getLongName();
        output(myBuildServerMessageFormat.formatTestStart(testName));
        StringBuffer errorMessages=checkModel(sm);
        if (errorMessages.length() > 0) {
          output(myBuildServerMessageFormat.formatTestFailure(testName,"Broken References",errorMessages.toString()));
        }
        output(myBuildServerMessageFormat.formatTestFinifsh(testName));
      }
    }
  }
);
}
