{
  setupEnvironment();
  File file=new File(PathManager.getHomePath() + File.separator + "core"+ File.separator+ "baseLanguage"+ File.separator+ "baseLanguage"+ File.separator+ "baseLanguage.mpr");
  if (!file.getName().endsWith(MPSExtentions.DOT_MPS_PROJECT))   throw new IllegalArgumentException(file.getPath());
  final MPSProject p=TestMain.loadProject(file);
  info("Loaded project " + p);
  com.intellij.openapi.project.Project ideaProject=ProjectManager.getInstance().getDefaultProject();
  File projectFile=FileUtil.createTmpFile();
  final MPSProject project=new MPSProject(ideaProject);
  project.init(projectFile,new ProjectDescriptor());
  ObjectsToProcess go=new ObjectsToProcess();
  collectModelsToGenerate(go);
  executeTask(project,go);
  disposeProject(project);
  disposeProject(p);
  dispose();
}
