{
  setupEnvironment();
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      EmptyProgressIndicator indicator=new EmptyProgressIndicator();
      ClassLoaderManager.getInstance().updateClassPath();
      ModuleMaker maker=new ModuleMaker();
      maker.make(new LinkedHashSet<IModule>(MPSModuleRepository.getInstance().getAllModules()),indicator);
      ClassLoaderManager.getInstance().reloadAll(indicator);
    }
  }
);
  com.intellij.openapi.project.Project ideaProject=ProjectManager.getInstance().getDefaultProject();
  File projectFile=FileUtil.createTmpFile();
  final MPSProject project=new MPSProject(ideaProject);
  project.init(projectFile,new ProjectDescriptor());
  ObjectsToProcess go=new ObjectsToProcess();
  collectModelsToGenerate(go);
  executeTask(project,go);
  dispose();
}
