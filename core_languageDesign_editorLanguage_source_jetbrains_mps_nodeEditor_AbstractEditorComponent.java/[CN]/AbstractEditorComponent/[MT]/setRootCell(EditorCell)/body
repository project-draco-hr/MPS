{
  removeOurListeners();
  if (myRootCell != null) {
    ((EditorCell_Basic)myRootCell).onRemove();
  }
  myRootCell=rootCell;
  if (myRootCell != null) {
    ((EditorCell_Basic)myRootCell).onAdd();
  }
  doRelayout(false);
  Set<SNode> nodesWhichEditorDependsOn=myCellsToNodesToDependOnMap.get(myRootCell);
  if (nodesWhichEditorDependsOn != null) {
    for (    SNode node : nodesWhichEditorDependsOn) {
      SModelDescriptor modelDescriptor=node.getModel().getModelDescriptor();
      if (modelDescriptor != null) {
        addOurListeners(modelDescriptor);
      }
    }
  }
  Set<SNodePointer> refTargetsWhichEditorDependsOn=myCellsToRefTargetsToDependOnMap.get(myRootCell);
  if (refTargetsWhichEditorDependsOn != null) {
    Set<SNodePointer> nodeProxiesToDelete=new HashSet<SNodePointer>();
    for (    SNodePointer nodeProxy : refTargetsWhichEditorDependsOn) {
      SModelDescriptor model=nodeProxy.getModel();
      if (model == null) {
        nodeProxiesToDelete.add(nodeProxy);
        continue;
      }
      addOurListeners(model);
    }
    refTargetsWhichEditorDependsOn.removeAll(nodeProxiesToDelete);
  }
  revalidate();
  repaint();
}
