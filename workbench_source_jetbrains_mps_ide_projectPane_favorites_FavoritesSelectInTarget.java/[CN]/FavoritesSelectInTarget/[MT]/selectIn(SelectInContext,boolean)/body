{
  Project project=context.getProject();
  MPSNodeVirtualFile nodeVirtualFile=(MPSNodeVirtualFile)context.getVirtualFile();
  final SNode nodeToSelect=nodeVirtualFile.getNode();
  SModelDescriptor model=ModelAccess.instance().runReadAction(new Computable<SModelDescriptor>(){
    public SModelDescriptor compute(){
      return nodeToSelect.getModel().getModelDescriptor();
    }
  }
);
  IModule module=model.getModule();
  FavoritesProjectPane pane=(FavoritesProjectPane)ProjectView.getInstance(project).getCurrentProjectViewPane();
  MPSTree tree=pane.getTree();
  MPSTreeNode mainRoot=tree.getRootNode();
  for (  MPSTreeNode root : mainRoot) {
    Object userObject=root.getUserObject();
    if (userObject.equals(nodeToSelect)) {
      select(root,tree);
    }
 else     if (userObject.equals(model) || userObject.equals(module)) {
      select(root.findDescendantWith(nodeToSelect),tree);
    }
  }
}
