{
  File tmp=FileUtil.createTmpDir();
  writeContentsToFile(contents[ModelMergeTool.ORIGINAL],file,tmp,MergeVersion.BASE.getSuffix());
  writeContentsToFile(contents[ModelMergeTool.CURRENT],file,tmp,MergeVersion.MINE.getSuffix());
  writeContentsToFile(contents[ModelMergeTool.LAST_REVISION],file,tmp,MergeVersion.REPOSITORY.getSuffix());
  File zipfile=chooseZipFileForModelFile(VirtualFileUtils.toIFile(file));
  zipfile.getParentFile().mkdirs();
  FileUtil.zip(tmp,zipfile);
  FileUtil.delete(tmp);
  return zipfile;
}
