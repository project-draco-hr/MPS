{
  File tmpdir=FileUtil.createTmpDir();
  UnzipUtil.unzip(zipfile,tmpdir);
  SModel[] models=new SModel[versions.length];
  int index=0;
  for (  final ModelVersion v : versions) {
    File file;
    File[] files=tmpdir.listFiles(new FilenameFilter(){
      public boolean accept(      File dir,      String name){
        return name.endsWith(MPSExtentions.DOT_MODEL + "." + v.getSuffix());
      }
    }
);
    if (files == null || files.length != 1) {
      if (log.isErrorEnabled()) {
        log.error("Wrong zip contents");
      }
    }
    file=files[0];
    char[] fileText=com.intellij.openapi.util.io.FileUtil.loadFileText(file);
    models[index]=ModelPersistence.readModel(new String(fileText),false);
    if (models[index] == null) {
      return null;
    }
    index++;
  }
  FileUtil.delete(tmpdir);
  return models;
}
