{
  this.myIsTestMethods=isTestMethods;
  this.setLayout(new BorderLayout());
  this.myValues=nodes;
  this.myListModel=new ListPanel.MyAbstractListModel();
  this.myListComponent=new JList(this.myListModel);
  AnAction add=new ListAddAction(this.myListComponent){
    protected int doAdd(    AnActionEvent p0){
      if (ListPanel.this.myCandidates == null) {
        ListPanel.this.collectCandidates();
      }
      ListSequence.fromList(ListPanel.this.myCandidates).removeSequence(ListSequence.fromList(ListPanel.this.myValues));
      final SNode resultNode=(SNode)CommonChoosers.showDialogNodeChooser(ListPanel.this,ListSequence.fromList(ListPanel.this.myCandidates).select(new ISelector<ITestNodeWrapper,SNode>(){
        public SNode select(        ITestNodeWrapper it){
          return it.getNode();
        }
      }
).toListSequence());
      if (resultNode == null) {
        return -1;
      }
      ITestNodeWrapper wrapper=TestNodeWrapperFactory.tryToWrap(resultNode);
      if (wrapper == null) {
        return -1;
      }
      ListSequence.fromList(ListPanel.this.myValues).addElement(wrapper);
      if (ListPanel.this.myListener != null) {
        ListPanel.this.myListener.actionPerformed(null);
      }
      ListPanel.this.myListComponent.updateUI();
      ListPanel.this.myListModel.fireSomethingChanged();
      return ListSequence.fromList(ListPanel.this.myValues).indexOf(wrapper);
    }
  }
;
  AnAction remove=new ListRemoveAction(this.myListComponent){
    protected void doRemove(    AnActionEvent p0){
      for (      Object value : ListPanel.this.myListComponent.getSelectedValues()) {
        for (        ITestNodeWrapper node : ListPanel.this.myValues) {
          if (node.getFqName().equals(value)) {
            ListSequence.fromList(ListPanel.this.myValues).removeElement(node);
            break;
          }
        }
      }
      if (ListPanel.this.myListener != null) {
        ListPanel.this.myListener.actionPerformed(null);
      }
      ListPanel.this.myListComponent.updateUI();
      ListPanel.this.myListModel.fireSomethingChanged();
    }
  }
;
  this.setBorder(new TitledBorder("Test"));
  DefaultActionGroup group=ActionUtils.groupFromActions(add,remove);
  ActionToolbar toolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,group,false);
  this.add(toolbar.getComponent(),BorderLayout.WEST);
  JScrollPane comp=new JScrollPane(this.myListComponent);
  comp.doLayout();
  this.add(comp,BorderLayout.CENTER);
  this.add(new JLabel((this.myIsTestMethods ? "Methods" : "Classes")),BorderLayout.PAGE_START);
  this.myListComponent.updateUI();
}
