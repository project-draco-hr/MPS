{
  SModel m=new SModel(getReference());
  MultiStreamDataSource source=(MultiStreamDataSource)getSource();
  for (  String child : Sequence.fromIterable(source.getAvailableStreams())) {
    SNode root=SModelOperations.createNewRootNode(((org.jetbrains.mps.openapi.model.SModel)m.getModelDescriptor()),"jetbrains.mps.samples.plainText.structure.TextFile",null);
    try {
      InputStream is=source.openInputStream(child);
      byte[] buf=new byte[1000000];
      int len=is.read(buf);
      SPropertyOperations.set(root,"name",child);
      SPropertyOperations.set(root,"text",new String(buf,0,len));
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  return m;
}
