{
  SModule module=model.getModule();
  JavaParser parser=new JavaParser();
  try {
    SNode context=null;
    if (FeatureKind.CLASS_CONTENT.equals(featureKind)) {
      context=SNodeOperations.getNodeAncestor(anchor,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier"),true,false);
    }
    List<SNode> nodes=parser.parse(javaCode,featureKind,context,true).getNodes();
    if (ListSequence.fromList(nodes).isEmpty()) {
      JOptionPane.showMessageDialog(null,"nothing to paste as Java","ERROR",JOptionPane.ERROR_MESSAGE);
      return;
    }
switch (featureKind) {
case CLASS:
      ListSequence.fromList(nodes).visitAll(new IVisitor<SNode>(){
        public void visit(        SNode node){
          SModelOperations.addRootNode(model,node);
        }
      }
);
    break;
case CLASS_CONTENT:
  for (  SNode node : ListSequence.fromList(nodes)) {
    if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068580123165l,"jetbrains.mps.baseLanguage.structure.InstanceMethodDeclaration"))) {
      pasteMember(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068580123165l,"jetbrains.mps.baseLanguage.structure.InstanceMethodDeclaration")),anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.Classifier"));
    }
 else     if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070462154015l,"jetbrains.mps.baseLanguage.structure.StaticFieldDeclaration"))) {
      pasteMember(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070462154015l,"jetbrains.mps.baseLanguage.structure.StaticFieldDeclaration")),anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.Classifier"));
    }
 else     if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068390468200l,"jetbrains.mps.baseLanguage.structure.FieldDeclaration"))) {
      pasteMember(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068390468200l,"jetbrains.mps.baseLanguage.structure.FieldDeclaration")),anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.ClassConcept"));
    }
 else     if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1081236700938l,"jetbrains.mps.baseLanguage.structure.StaticMethodDeclaration"))) {
      pasteMember(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1081236700938l,"jetbrains.mps.baseLanguage.structure.StaticMethodDeclaration")),anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.ClassConcept"));
    }
 else     if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068580123140l,"jetbrains.mps.baseLanguage.structure.ConstructorDeclaration"))) {
      pasteMember(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068580123140l,"jetbrains.mps.baseLanguage.structure.ConstructorDeclaration")),anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.ClassConcept"));
    }
 else     if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1188206574119l,"jetbrains.mps.baseLanguage.structure.AnnotationMethodDeclaration"))) {
      pasteMember(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1188206574119l,"jetbrains.mps.baseLanguage.structure.AnnotationMethodDeclaration")),anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.Annotation"));
    }
 else     if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier"))) {
      pasteMember(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier")),anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.Classifier"));
    }
  }
break;
case STATEMENTS:
for (SNode node : ListSequence.fromList(nodes)) {
pasteAtAnchorInRole(node,anchor,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.StatementList"),SLinkOperations.findLinkDeclaration(MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement")));
}
break;
default :
}
JavaParser.tryResolveUnknowns(nodes);
JavaToMpsConverter mfParser=new JavaToMpsConverter(operationContext.getModule(),operationContext.getProject().getRepository());
mfParser.tryResolveRefs(nodes,featureKind,new EmptyProgressMonitor());
}
 catch (JavaParseException ex) {
JOptionPane.showMessageDialog(null,ex.getMessage(),"ERROR",JOptionPane.ERROR_MESSAGE);
}
}
