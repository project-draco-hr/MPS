{
  myContext=context;
  if (!((location instanceof MPSLocation))) {
    return null;
  }
  MPSLocation mpsLocation=(MPSLocation)location;
  final MPSPsiElement psiElement=mpsLocation.getPsiElement();
  MPSProject mpsProject=mpsLocation.getMPSProject();
  RunConfiguration config=new ModelAccessHelper(mpsProject.getRepository()).runReadAction(new Computable<RunConfiguration>(){
    @Override public RunConfiguration compute(){
      Object mpsItem=psiElement.getMPSItem();
      if (mpsItem == null) {
        return null;
      }
      if (!(isApplicable(mpsItem))) {
        return null;
      }
      return doCreateConfiguration((T)psiElement.getMPSItem());
    }
  }
);
  if (config == null) {
    return null;
  }
  return new RunnerAndConfigurationSettingsImpl(RunManagerImpl.getInstanceImpl(location.getProject()),config,false);
}
