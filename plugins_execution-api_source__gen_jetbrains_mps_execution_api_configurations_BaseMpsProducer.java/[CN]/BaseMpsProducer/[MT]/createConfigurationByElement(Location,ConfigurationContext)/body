{
  myContext=context;
  if (!((location instanceof MPSLocation))) {
    return null;
  }
  MPSLocation mpsLocation=(MPSLocation)location;
  final MPSPsiElement psiElement=mpsLocation.getPsiElement();
  final MPSProject mpsProject=ProjectHelper.fromIdeaProject(location.getProject());
  RunConfiguration config=new ModelAccessHelper(mpsProject.getModelAccess()).runReadAction(new Computable<RunConfiguration>(){
    @Override public RunConfiguration compute(){
      Object mpsItem=psiElement.getMPSItem(mpsProject.getRepository());
      if (mpsItem == null) {
        return null;
      }
      if (!(isApplicable(mpsItem))) {
        return null;
      }
      return doCreateConfiguration((T)mpsItem);
    }
  }
);
  if (config == null) {
    return null;
  }
  return new RunnerAndConfigurationSettingsImpl(RunManagerImpl.getInstanceImpl(location.getProject()),config,false);
}
