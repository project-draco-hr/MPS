{
  super(descriptor,null);
  myModule=module;
  setModuleDescriptor(descriptor);
  myConnection=myModule.getProject().getMessageBus().connect();
  myConnection.subscribe(ProjectTopics.PROJECT_ROOTS,new MyModuleRootListener());
  myConnection.subscribe(FacetManager.FACETS_TOPIC,new MyFacetManagerAdapter());
  final ProjectLibraryTable projectLibraryTable=(ProjectLibraryTable)ProjectLibraryTable.getInstance(myModule.getProject());
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      for (      final Library library : projectLibraryTable.getLibraries()) {
        if (ModuleLibraryType.isModuleLibrary(library)) {
          library.getRootProvider().addRootSetChangedListener(myRootSetListener);
        }
      }
    }
  }
);
  projectLibraryTable.addListener(myLibrariesListener);
}
