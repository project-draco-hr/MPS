{
  ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(myModule);
  moduleRootManager.orderEntries().forEach(new Processor<OrderEntry>(){
    public boolean process(    OrderEntry oe){
      if (!(oe instanceof LibraryOrderEntry)) {
        return true;
      }
      LibraryOrderEntry loe=(LibraryOrderEntry)oe;
      Library library=loe.getLibrary();
      if (loe.isModuleLevel() || library == null) {
        return true;
      }
      ModuleReference moduleReference=ModuleRuntimeLibrariesManager.getInstance(myModule.getProject()).getModule(library);
      if (moduleReference != null) {
        dependencies.add(new Dependency(moduleReference,loe.isExported()));
      }
 else {
        Solution s=(Solution)MPSModuleRepository.getInstance().getModuleById(ModuleId.foreign(library.getName()));
        if (s != null) {
          dependencies.add(new Dependency(s.getModuleReference(),loe.isExported()));
        }
      }
      return true;
    }
  }
);
}
