{
  for (  SModule m : MPSModuleRepository.getInstance().getModules()) {
    if (!(m instanceof AbstractModule))     continue;
    if (myLoadedModules.contains(m.getModuleReference())) {
      boolean hasInvalidRoots=false;
      for (      ModelRoot modelRoot : m.getModelRoots()) {
        if (modelRoot instanceof SModelRoot && ((SModelRoot)modelRoot).isInvalid()) {
          hasInvalidRoots=true;
          break;
        }
      }
      if (!hasInvalidRoots) {
        continue;
      }
    }
    myLoadedModules.add(m.getModuleReference());
    ((AbstractModule)m).updateModelsSet();
  }
}
