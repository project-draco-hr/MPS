{
  IFile result=null;
  if (path.startsWith(MPS_HOME)) {
    String relativePath=removePrefix(path,MPS_HOME);
    result=FileSystem.getFile(PathManager.getHomePath()).child(relativePath);
  }
 else {
    Map<String,String> pathMacros=PathVariableManager.getInstance().getPathVariables();
    for (    String macro : pathMacros.keySet()) {
      String prefix="${" + macro + "}";
      if (path.startsWith(prefix)) {
        String relativePath=removePrefix(path,prefix);
        result=FileSystem.getFile(pathMacros.get(macro)).child(relativePath);
        break;
      }
    }
    if (result == null) {
      result=FileSystem.getFile(path);
    }
  }
  return result.getCanonicalPath();
}
