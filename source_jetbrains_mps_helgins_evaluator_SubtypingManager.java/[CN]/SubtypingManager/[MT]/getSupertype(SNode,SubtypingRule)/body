{
  if (rule.getApplicableNode() == null)   return null;
  AnalyzedTermDeclaration analyzedTermDeclaration=rule.getApplicableNode();
  VariableCondition termCondition=analyzedTermDeclaration.getCondition();
  ConditionMatcher conditionMatcher;
  try {
    conditionMatcher=new ConditionMatcher(termCondition);
  }
 catch (  InvalidConditionException ex) {
    error("invalid condition",ex);
    return null;
  }
  ExpressionContext expressionContext=new ExpressionContext();
  if (!(conditionMatcher.matchesCondition(term,expressionContext)))   return null;
  expressionContext.putNode(analyzedTermDeclaration,term);
  Object supertypeO=ExpressionEvaluatorManager.evaluate(expressionContext,rule.getSupertype());
  if (supertypeO instanceof SNode)   return (SNode)supertypeO;
  return null;
}
