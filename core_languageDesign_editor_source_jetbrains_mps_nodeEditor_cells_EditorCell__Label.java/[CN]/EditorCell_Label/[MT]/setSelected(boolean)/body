{
  super.setSelected(selected);
  setBracesSelected(selected);
  if (selected) {
    updateBracesSelection();
  }
 else {
    if (myCellWithSelectedBraces != null) {
      myCellWithSelectedBraces.setBracesSelected(false);
      myCellWithSelectedBraces=null;
    }
  }
  if (!selected && !getEditor().selectionStackContains(this)) {
    myTextLine.resetSelection();
  }
  myCaretIsVisible=true;
}
