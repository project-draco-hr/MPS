{
  final String oldText=getText();
  final EditorComponent editor=getEditor();
  final CellInfo cellInfo=getCellInfo();
  setText(text);
  if (getSNode() != null && !ObjectUtils.equals(oldText,text) && !isValidText(text) && CommandProcessor.getInstance().getCurrentCommand() != null) {
    UndoUtil.addUndoableAction(new MySNodeUndoableAction(getSNode(),cellInfo,editor,oldText,text));
    if (getSNode().getContainingRoot() != null) {
      MPSNodesVirtualFileSystem.getInstance().getFileFor(getSNode().getContainingRoot()).setModificationStamp(LocalTimeCounter.currentTime());
    }
  }
}
