{
  mySplittedEdges=MapSequence.fromMap(new HashMap<Edge,List<Edge>>());
  EmbeddedGraph embeddedGraph=new EmbeddedGraph(graph);
  List<Edge> removed=ListSequence.fromList(new ArrayList<Edge>());
  Face outerFace=getOuterTreeFace(graph,removed);
  for (  Edge edge : ListSequence.fromList(removed)) {
    edge.removeFromGraph();
  }
  embeddedGraph.addFace(outerFace);
  embeddedGraph.setOuterFace(outerFace);
  for (  Edge removedEdge : ListSequence.fromList(removed)) {
    this.restoreEdge(embeddedGraph,removedEdge);
    CheckEmbeddedGraph.checkEmbeddedGraph(embeddedGraph);
  }
  mergeEdges();
  return embeddedGraph;
}
