{
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      final SModelFqName fqName=SModelFqName.fromString(myModelNameField.getText());
      if (!myModelRoot.isCorrectModelFqName(fqName)) {
        setErrorText("Incorrect model name for the model root (should start with prefix " + myModelRoot.getPrefix() + ")");
        return;
      }
      new ModelRenamer(myModelDescriptor,fqName,!myUpdateAllReferences.getModel().isSelected()).rename();
      dispose();
    }
  }
);
}
