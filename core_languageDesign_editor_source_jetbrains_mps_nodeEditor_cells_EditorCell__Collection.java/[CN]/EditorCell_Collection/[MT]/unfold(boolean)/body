{
  if (!isFolded())   return;
  setFolded(false);
  EditorComponent editor=getEditor();
  editor.removeMouseListener(myUnfoldCollectionMouseListener);
  if (isDescendantCellSelected(editor)) {
    EditorCell deepestSelected=findChild(CellFinders.FIRST_SELECTABLE_LEAF);
    editor.clearSelectionStack();
    editor.pushSelection(deepestSelected);
  }
  if (!programmaticaly) {
    getEditorContext().flushEvents();
    getEditor().relayout();
  }
}
