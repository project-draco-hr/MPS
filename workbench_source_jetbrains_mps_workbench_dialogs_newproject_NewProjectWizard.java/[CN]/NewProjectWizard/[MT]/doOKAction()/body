{
  final String[] error=new String[]{null};
  ProgressManager.getInstance().run(new Task.Modal(myProject,"Creating",false){
    public void run(    @NotNull() ProgressIndicator indicator){
      indicator.setIndeterminate(true);
      error[0]=createDirs();
      if (error[0] != null) {
        return;
      }
      createProject();
    }
  }
);
  if (error[0] != null) {
    Messages.showErrorDialog(getContentPane(),error[0]);
    return;
  }
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      if (myCreatedSolution != null && myCreatedLanguage != null) {
        addLanguageImportToSolution(myCreatedLanguage,myCreatedSolution);
      }
    }
  }
);
  if (myCreatedProject == null)   return;
  myCreatedProject.save();
  ProjectManagerEx projectManager=ProjectManagerEx.getInstanceEx();
  projectManager.openProject(myCreatedProject);
  super.doOKAction();
}
