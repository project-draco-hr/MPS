{
  int width=0;
  final int x=editorCells.getX();
  final int y=editorCells.getY();
  int ascent=0;
  int descent=0;
  int topInset=0;
  int bottomInset=0;
  boolean isInsideGird=editorCells.getParent() != null && editorCells.getParent().getCellLayout() instanceof CellLayout_Vertical && ((CellLayout_Vertical)editorCells.getParent().getCellLayout()).isGridLayout();
  for (  EditorCell editorCell : editorCells) {
    PunctuationUtil.addGaps(editorCell,false,false);
    if (isInsideGird) {
      editorCell.moveTo(x,editorCell.getY());
    }
 else {
      editorCell.moveTo(x + width,editorCell.getY());
    }
    editorCell.relayout();
    width+=editorCell.getWidth();
    ascent=Math.max(ascent,editorCell.getAscent());
    descent=Math.max(descent,editorCell.getDescent());
    topInset=Math.max(topInset,editorCell.getTopInset());
    bottomInset=Math.max(bottomInset,editorCell.getBottomInset());
  }
  int baseline=y + ascent + topInset;
  editorCells.setWidth(width);
  editorCells.setHeight(ascent + descent + topInset+ bottomInset);
  for (  EditorCell editorCell : editorCells) {
    editorCell.setBaseline(baseline);
    editorCell.relayout();
  }
}
