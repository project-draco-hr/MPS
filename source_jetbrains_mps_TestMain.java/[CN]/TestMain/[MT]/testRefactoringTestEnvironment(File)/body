{
  IdeMain.setTestMode(true);
  TestMain.configureMPS();
  File projectFile=new File(projectDirectory,"testRefactoring.mpr");
  final MPSProject project=loadProject(projectFile);
  final boolean[] b=new boolean[]{true};
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      if (getSandbox1(project) == null) {
        b[0]=false;
        return;
      }
      if (getSandbox2(project) == null) {
        b[0]=false;
        return;
      }
      if (getTestRefactoringLanguage(project) == null) {
        b[0]=false;
        return;
      }
      if (getTestRefactoringTargetLanguage(project) == null) {
        b[0]=false;
        return;
      }
    }
  }
);
  ThreadUtils.runInUIThreadNoWait(new Runnable(){
    public void run(){
      project.dispose();
    }
  }
);
  return b[0];
}
