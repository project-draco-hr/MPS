{
  ((MPSProject)project).projectClosed();
  ThreadUtils.runInUIThreadAndWait(new Runnable(){
    public void run(){
      project.dispose();
      IdeEventQueue.getInstance().flushQueue();
      System.gc();
    }
  }
);
  ModelAccess.instance().flushEventQueue();
  ThreadUtils.runInUIThreadAndWait(new Runnable(){
    public void run(){
      IdeEventQueue.getInstance().flushQueue();
    }
  }
);
  SetSequence.fromSet(openedProjects).removeElement(project);
}
