{
  Class<?> clazz=getClassFromCache(name);
  if (clazz != null) {
    return clazz;
  }
synchronized (this) {
    clazz=getClassFromCache(name);
    if (clazz != null) {
      return clazz;
    }
    try {
      clazz=findInSelfAndDependencies(name);
      if (resolve) {
        resolveClass(clazz);
      }
      return clazz;
    }
  finally {
      if (clazz != null) {
        myClasses.put(name,clazz);
      }
      myLoadedClasses.add(name);
    }
  }
}
