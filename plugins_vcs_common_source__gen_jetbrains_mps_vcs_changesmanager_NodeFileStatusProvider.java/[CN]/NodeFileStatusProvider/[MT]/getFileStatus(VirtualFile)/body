{
  if (file instanceof MPSNodeVirtualFile) {
    if (!(ModelAccess.instance().isInEDT())) {
      return FileStatus.NOT_CHANGED;
    }
    final MPSNodeVirtualFile nodeFile=(MPSNodeVirtualFile)file;
    final Wrappers._T<SNode> root=new Wrappers._T<SNode>(MPSEditorUtil.getCurrentEditedNode(myProject,nodeFile));
    if (root.value == null) {
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          root.value=nodeFile.getNode();
        }
      }
);
    }
    if (root.value != null) {
      return myMapping.getStatus(root.value);
    }
  }
  return null;
}
