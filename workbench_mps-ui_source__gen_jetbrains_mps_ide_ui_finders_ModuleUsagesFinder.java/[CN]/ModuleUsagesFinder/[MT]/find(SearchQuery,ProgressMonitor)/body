{
  SearchResults searchResults=new SearchResults();
  Object value=query.getObjectHolder().getObject();
  SModule searchedModule=null;
  if (value instanceof SModule) {
    searchedModule=((SModule)value);
  }
 else   if (value instanceof SModuleReference) {
    SModuleReference moduleRef=(SModuleReference)value;
    searchedModule=query.getScope().resolve(moduleRef);
  }
  if (searchedModule == null) {
    return searchResults;
  }
  Collection<SModule> modules=IterableUtil.asCollection(query.getScope().getModules());
  monitor.start("Looking up module uses",modules.size());
  for (  SModule module : modules) {
    if (monitor.isCanceled()) {
      return searchResults;
    }
    if (module instanceof Solution) {
      collectUsagesInSolution(searchedModule,(Solution)module,searchResults);
    }
 else     if (module instanceof Language) {
      collectUsagesInLanguage(searchedModule,(Language)module,searchResults);
    }
 else     if (module instanceof DevKit) {
      collectUsagesInDevKit(searchedModule,(DevKit)module,searchResults);
    }
 else     if (module instanceof Generator) {
      collectUsagesInGenerator(searchedModule,(Generator)module,searchResults);
    }
    monitor.advance(1);
  }
  monitor.done();
  return searchResults;
}
