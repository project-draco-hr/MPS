{
  if (name.startsWith("java.")) {
    return Class.forName(name,false,BOOTSTRAP_CLASSLOADER);
  }
  Class<?> aClass=getClassFromCache(name);
  if (aClass != null)   return aClass;
synchronized (this) {
    aClass=getClassFromCache(name);
    if (aClass != null)     return aClass;
    aClass=findLoadedClass(name);
    if (aClass != null)     return aClass;
    try {
      aClass=loadFromSelf(name);
      if (aClass != null)       return aClass;
      if (!onlyFromSelf) {
        aClass=loadFromDeps(name);
      }
      if (aClass == null)       throw createCLNFException(name);
      if (resolve)       resolveClass(aClass);
      return aClass;
    }
  finally {
      myClasses.put(name,aClass);
    }
  }
}
