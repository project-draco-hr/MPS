{
  Class<?> aClass=getClassFromCache(fqName);
  if (aClass != null) {
    return aClass;
  }
  ClassBytes classBytes=mySupport.findClassBytes(fqName);
  if (classBytes != null) {
    byte[] bytes=classBytes.getBytes();
    String pack=NameUtil.namespaceFromLongName(fqName);
    if (getPackage(pack) == null) {
      definePackage(pack,null,null,null,null,null,null,null);
    }
    aClass=defineClass(fqName,bytes,0,bytes.length,ProtectionDomainUtil.loadedClassDomain(classBytes.getPath()));
    myClasses.put(fqName,aClass);
    return aClass;
  }
  return null;
}
