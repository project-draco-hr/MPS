{
  checkLoaded();
  try {
    TypeChecker.getInstance().enableGlobalSubtypingCache();
    ModelAccess.instance().runReadAction(new Runnable(){
      @Override public void run(){
        Filter filter=new Filter(BaseIntention.class,getDisabledIntentions());
        Set<String> visitedConcepts=new HashSet<String>();
        for (SNode currentNode=node; currentNode != null; currentNode=currentNode.getParent()) {
          visitIntentions(currentNode.getConcept().getId(),visitor,filter,visitedConcepts);
        }
      }
    }
);
  }
  finally {
    TypeChecker.getInstance().clearGlobalSubtypingCache();
  }
}
