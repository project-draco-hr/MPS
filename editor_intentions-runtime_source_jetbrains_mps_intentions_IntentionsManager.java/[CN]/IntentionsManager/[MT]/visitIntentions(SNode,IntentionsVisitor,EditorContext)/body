{
  checkLoaded();
  try {
    TypeChecker.getInstance().enableGlobalSubtypingCache();
    ModelAccess.instance().runReadAction(new Runnable(){
      @Override public void run(){
        Filter filter=new Filter(BaseIntention.class,getDisabledIntentions());
        for (SNode currentNode=node; currentNode != null; currentNode=currentNode.getParent()) {
          visitIntentions(currentNode,visitor,filter,currentNode != node,editorContext);
        }
      }
    }
);
  }
  finally {
    TypeChecker.getInstance().clearGlobalSubtypingCache();
  }
}
