{
  for (  String conceptId : LanguageHierarchyCache.getAncestorsNames(conceptFqName)) {
    if (visitedConcepts != null && !visitedConcepts.add(conceptId)) {
      return;
    }
    if (myConcept2IntentionFactories.containsKey(conceptId)) {
      for (      IntentionFactory intentionFactory : myConcept2IntentionFactories.get(conceptId)) {
        if (!filter.accept(intentionFactory)) {
          continue;
        }
        if (!visitor.visit(intentionFactory)) {
          return;
        }
      }
    }
    if (myIntentions.containsKey(conceptId)) {
      for (      Intention intention : myIntentions.get(conceptId)) {
        if (!filter.accept(intention)) {
          continue;
        }
        if (!visitor.visit(intention)) {
          return;
        }
      }
    }
  }
}
