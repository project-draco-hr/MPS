{
  if (!(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(expr,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfb4ed32b7fL,0xfb4ed32b80L,"expression")),MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfbdeb6fecfL,"jetbrains.mps.baseLanguage.structure.BinaryOperation")))) {
    return;
  }
  SNode sidemost=findRightmostOrLeftmostLeafExpression(SLinkOperations.getTarget(expr,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfb4ed32b7fL,0xfb4ed32b80L,"expression")),!(toRight));
  SNode binOp=SNodeOperations.cast(SNodeOperations.getParent(sidemost),MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfbdeb6fecfL,"jetbrains.mps.baseLanguage.structure.BinaryOperation"));
  SNode sideExpr=(toRight ? SLinkOperations.getTarget(binOp,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfbdeb6fecfL,0xfbdeb7a11bL,"rightExpression")) : SLinkOperations.getTarget(binOp,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfbdeb6fecfL,0xfbdeb7a11cL,"leftExpression")));
  SNodeOperations.detachNode(sideExpr);
  SNodeOperations.replaceWithAnother(binOp,sideExpr);
  SNodeOperations.replaceWithAnother(expr,binOp);
  if (toRight) {
    SLinkOperations.setTarget(binOp,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfbdeb6fecfL,0xfbdeb7a11bL,"rightExpression"),expr);
  }
 else {
    SLinkOperations.setTarget(binOp,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xfbdeb6fecfL,0xfbdeb7a11cL,"leftExpression"),expr);
  }
  ParenthesisUtil.checkOperationWRTPriority(binOp);
  selectNode(context,expr,false);
}
