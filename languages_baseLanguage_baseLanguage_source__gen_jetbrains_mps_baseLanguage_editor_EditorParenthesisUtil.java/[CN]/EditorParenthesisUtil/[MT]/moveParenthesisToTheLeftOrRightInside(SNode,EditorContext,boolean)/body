{
  if (!(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(expr,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1079359253375l,1079359253376l,"expression")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1081773326031l,"jetbrains.mps.baseLanguage.structure.BinaryOperation")))) {
    return;
  }
  SNode sidemost=findRightmostOrLeftmostLeafExpression(SLinkOperations.getTarget(expr,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1079359253375l,1079359253376l,"expression")),!(toRight));
  SNode binOp=SNodeOperations.cast(SNodeOperations.getParent(sidemost),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1081773326031l,"jetbrains.mps.baseLanguage.structure.BinaryOperation"));
  SNode sideExpr=(toRight ? SLinkOperations.getTarget(binOp,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1081773326031l,1081773367579l,"rightExpression")) : SLinkOperations.getTarget(binOp,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1081773326031l,1081773367580l,"leftExpression")));
  SNodeOperations.detachNode(sideExpr);
  SNodeOperations.replaceWithAnother(binOp,sideExpr);
  SNodeOperations.replaceWithAnother(expr,binOp);
  if (toRight) {
    SLinkOperations.setTarget(binOp,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1081773326031l,1081773367579l,"rightExpression"),expr);
  }
 else {
    SLinkOperations.setTarget(binOp,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1081773326031l,1081773367580l,"leftExpression"),expr);
  }
  ParenthesisUtil.checkOperationWRTPriority(binOp);
  selectNode(context,expr,false);
}
