{
  jetbrains.mps.smodel.SNode newAnnotation=SConceptOperations.createNewNode("jetbrains.mps.lang.test.structure.ScopesTest",null);
  AttributeOperations.setAttribute(node,new IAttributeDescriptor.NodeAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.test.structure.ScopesTest")),newAnnotation);
  if (ScopesTest_Behavior.isSimple_5449224527592395483(node)) {
    SLinkOperations.setTarget(newAnnotation,"checkingReference",ScopesTest_Behavior.call_getCheckingReference_5449224527592367549(newAnnotation).getTargetNode(),false);
    Scope scope=ModelConstraints.getScope(ScopesTest_Behavior.call_getCheckingReference_5449224527592367549(newAnnotation));
    for (    SNode avaliable : scope.getAvailableElements(null)) {
      jetbrains.mps.smodel.SNode expectedNode=SConceptOperations.createNewNode("jetbrains.mps.lang.test.structure.ScopesExpectedNode",null);
      SLinkOperations.setTarget(expectedNode,"ref",avaliable,false);
      ListSequence.fromList(SLinkOperations.getTargets(newAnnotation,"nodes",true)).addElement(expectedNode);
    }
  }
  editorContext.select(newAnnotation);
}
