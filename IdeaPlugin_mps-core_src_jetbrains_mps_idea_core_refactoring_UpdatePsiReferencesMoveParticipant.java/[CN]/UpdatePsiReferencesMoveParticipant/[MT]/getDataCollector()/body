{
  return new MoveNodeRefactoringDataCollector<NodePsiData,SNode>(){
    @Override public NodePsiData beforeMove(    SNode sNode){
      return new NodePsiData(sNode.getModel(),myPsiProvider.getPsi(sNode));
    }
    @Override public SNode afterMove(    SNode sNode){
      SModel smodel=sNode.getModel();
      if (smodel instanceof EditableSModel) {
        ((EditableSModel)smodel).save();
        MPSPsiModel psiModel=myPsiProvider.getPsi(smodel);
        psiModel.reloadAll();
      }
      return sNode;
    }
  }
;
}
