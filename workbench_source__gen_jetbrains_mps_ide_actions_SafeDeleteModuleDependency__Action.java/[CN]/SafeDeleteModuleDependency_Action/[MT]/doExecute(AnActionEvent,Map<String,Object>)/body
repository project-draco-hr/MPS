{
  try {
    ReferencesFinder finder=new ReferencesFinder();
    Scope fromScope=new Scope();
    fromScope.add(((IModule)MapSequence.fromMap(_params).get("from")));
    Scope toScope=new Scope();
    toScope.add(((IModule)MapSequence.fromMap(_params).get("to")));
    SearchResults results=finder.getReferencesFromTo(fromScope,toScope);
    if (results.getSearchResults().isEmpty()) {
      SafeDeleteModuleDependency_Action.this.removeDependency(_params);
    }
 else {
      int res=Messages.showDialog("Can't safe delete dependency","Safe delete impossible",new String[]{"View dependencies","Delete anyway","Cancel"},0,null);
      if (res == 1) {
        SafeDeleteModuleDependency_Action.this.removeDependency(_params);
      }
 else       if (res == 0) {
        DependenciesUtil.analyzeDependencies(((IModule)MapSequence.fromMap(_params).get("from")),((IModule)MapSequence.fromMap(_params).get("to")),((Project)MapSequence.fromMap(_params).get("project")),((MPSProject)MapSequence.fromMap(_params).get("mpsProject")));
      }
    }
  }
 catch (  Throwable t) {
    if (log.isErrorEnabled()) {
      log.error("User's action execute method failed. Action:" + "SafeDeleteModuleDependency",t);
    }
  }
}
