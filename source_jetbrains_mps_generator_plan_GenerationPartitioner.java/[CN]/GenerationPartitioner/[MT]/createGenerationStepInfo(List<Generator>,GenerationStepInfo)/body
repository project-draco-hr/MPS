{
  Set<MappingConfiguration> mappingsFromEarlierStepsToDisable;
  Set<MappingConfiguration> mappingsFromEarlierStepsToProcess;
  if (prevStepInfo != null) {
    mappingsFromEarlierStepsToDisable=new HashSet<MappingConfiguration>(prevStepInfo.getMappings());
    mappingsFromEarlierStepsToDisable.addAll(prevStepInfo.getMappingsProcessedOnEarlierSteps());
    mappingsFromEarlierStepsToProcess=prevStepInfo.getMappingsToProcessOnLaterSteps();
    mappingsFromEarlierStepsToDisable.removeAll(mappingsFromEarlierStepsToProcess);
  }
 else {
    mappingsFromEarlierStepsToDisable=new HashSet<MappingConfiguration>();
    mappingsFromEarlierStepsToProcess=new HashSet<MappingConfiguration>();
  }
  List<List<MappingConfiguration>> mappingSets=doPartitioning(null,generators,mappingsFromEarlierStepsToDisable,mappingsFromEarlierStepsToProcess);
  List<MappingConfiguration> mappingsForThisStep;
  Set<MappingConfiguration> mappingsToProcessOnLaterSteps=new HashSet<MappingConfiguration>();
  if (mappingSets.isEmpty()) {
    mappingsForThisStep=new ArrayList<MappingConfiguration>();
  }
 else {
    mappingsForThisStep=mappingSets.get(0);
    if (mappingSets.size() == 1) {
      mappingsToProcessOnLaterSteps.addAll(mappingSets.get(0));
    }
 else {
      for (int i=1; i < mappingSets.size(); i++) {
        mappingsToProcessOnLaterSteps.addAll(mappingSets.get(i));
      }
    }
  }
  return new GenerationStepInfo(mappingsForThisStep,mappingsFromEarlierStepsToDisable,mappingsToProcessOnLaterSteps);
}
