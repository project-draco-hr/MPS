{
  List<MappingConfiguration> mappingSet=new ArrayList<MappingConfiguration>();
  List<MappingConfiguration> unlockedMappingsPostponed=new ArrayList<MappingConfiguration>();
  while (true) {
    List<MappingConfiguration> unlockedMappingsToAdd=new ArrayList<MappingConfiguration>();
    for (    MappingConfiguration mapping : myPriorityMap.keySet()) {
      if (myPriorityMap.get(mapping).isEmpty()) {
        if (lockingMappings.contains(mapping)) {
          unlockedMappingsToAdd.add(mapping);
        }
 else {
          unlockedMappingsPostponed.add(mapping);
        }
      }
    }
    if (unlockedMappingsToAdd.isEmpty()) {
      break;
    }
    mappingSet.addAll(unlockedMappingsToAdd);
    for (    MappingConfiguration mappingToAdd : unlockedMappingsToAdd) {
      myPriorityMap.remove(mappingToAdd);
    }
    for (    MappingConfiguration mappingForSet : unlockedMappingsToAdd) {
      for (      Map<MappingConfiguration,PriorityData> grtPriMappings : myPriorityMap.values()) {
        if (grtPriMappings.containsKey(mappingForSet)) {
          PriorityData priorityData=grtPriMappings.get(mappingForSet);
          if (!priorityData.myStrict) {
            grtPriMappings.remove(mappingForSet);
          }
        }
      }
    }
  }
  if (mappingSet.isEmpty()) {
    mappingSet.addAll(unlockedMappingsPostponed);
    for (    MappingConfiguration mappingPostponed : unlockedMappingsPostponed) {
      myPriorityMap.remove(mappingPostponed);
    }
  }
 else {
    for (    MappingConfiguration mappingInSet : mappingSet) {
      for (      Map<MappingConfiguration,PriorityData> grtPriMappings : myPriorityMap.values()) {
        grtPriMappings.remove(mappingInSet);
      }
    }
  }
  return mappingSet;
}
