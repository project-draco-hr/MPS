{
  List<MappingConfiguration> mappingSet=new ArrayList<MappingConfiguration>();
  while (true) {
    List<MappingConfiguration> mappingsForSet=new ArrayList<MappingConfiguration>();
    for (    MappingConfiguration mapping : myPriorityMap.keySet()) {
      if (myPriorityMap.get(mapping).isEmpty()) {
        mappingsForSet.add(mapping);
        if (firstSet) {
          myNotLockingMappingsInFirstSet.add(mapping);
        }
      }
    }
    if (mappingsForSet.isEmpty())     break;
    mappingSet.addAll(mappingsForSet);
    for (    MappingConfiguration mappingForSet : mappingsForSet) {
      myPriorityMap.remove(mappingForSet);
    }
    for (    MappingConfiguration mappingForSet : mappingsForSet) {
      for (      Map<MappingConfiguration,PriorityData> grtPriMappings : myPriorityMap.values()) {
        if (grtPriMappings.containsKey(mappingForSet)) {
          if (firstSet) {
            myNotLockingMappingsInFirstSet.remove(mappingForSet);
            myLockingMappingsInFirstSet.add(mappingForSet);
          }
          PriorityData priorityData=grtPriMappings.get(mappingForSet);
          if (!priorityData.isStrict) {
            grtPriMappings.remove(mappingForSet);
          }
        }
      }
    }
  }
  for (  MappingConfiguration mappingInSet : mappingSet) {
    for (    Map<MappingConfiguration,PriorityData> grtPriMappings : myPriorityMap.values()) {
      if (grtPriMappings.containsKey(mappingInSet)) {
        if (firstSet) {
          myNotLockingMappingsInFirstSet.remove(mappingInSet);
          myLockingMappingsInFirstSet.add(mappingInSet);
        }
        grtPriMappings.remove(mappingInSet);
      }
    }
  }
  return mappingSet;
}
