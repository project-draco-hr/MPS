{
  SModelUID importedModelUID=model.getUID();
  if (myUseUIDs) {
    if (!myImportedModelInfo.equals("-1")) {
      importedModelUID=SModelUID.fromString(myImportedModelInfo);
    }
  }
 else   if (getImportIndex() > -1) {
    if (myNotImported) {
      importedModelUID=visibleModelElements.getModelUID(getImportIndex());
    }
 else {
      importedModelUID=model.getImportedModelUID(getImportIndex());
    }
    if (importedModelUID == null) {
      LOG.error("couldn't create reference '" + this.getRole() + "' from "+ this.getSourceNode().getDebugText()+ " : import for index ["+ getImportIndex()+ "] not found");
      return null;
    }
  }
  if (this.getTargetId() == null) {
    LOG.error("couldn't create reference '" + this.getRole() + "' from "+ this.getSourceNode().getDebugText()+ " : target node id is null");
    return null;
  }
  if (this.getTargetId().equals("^")) {
    return new DynamicReference(this.getRole(),this.getSourceNode(),importedModelUID,this.getResolveInfo());
  }
  return new StaticReference(this.getRole(),this.getSourceNode(),importedModelUID,SNodeId.fromString(this.getTargetId()),this.getResolveInfo());
}
