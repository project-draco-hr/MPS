{
  final Wrappers._T<Iterable<SModuleReference>> allModuleRefs=new Wrappers._T<Iterable<SModuleReference>>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      Iterable<SModule> modules=GlobalScope.getInstance().getModules();
      allModuleRefs.value=Sequence.fromIterable(modules).select(new ISelector<SModule,SModuleReference>(){
        public SModuleReference select(        SModule it){
          return it.getModuleReference();
        }
      }
);
    }
  }
);
  List<SModuleReference> moduleRefs=CommonChoosers.showDialogModuleCollectionChooser(null,"module",Sequence.fromIterable(allModuleRefs.value).toListSequence(),null);
  if (moduleRefs == null) {
    return null;
  }
  List<Dependency> result=new ArrayList<Dependency>();
  for (  SModuleReference m : moduleRefs) {
    Dependency dependency=new Dependency();
    dependency.setModuleRef(m);
    result.add(dependency);
  }
  return result;
}
