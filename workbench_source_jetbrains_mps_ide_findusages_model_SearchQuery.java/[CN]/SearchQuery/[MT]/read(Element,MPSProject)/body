{
  Element scopeXML=element.getChild(SCOPE);
  String scopeType=scopeXML.getAttribute(SCOPE_TYPE).getValue();
  if (scopeType.equals(SCOPE_TYPE_GLOBAL)) {
    myScope=GlobalScope.getInstance();
  }
 else   if (scopeType.equals(SCOPE_TYPE_PROJECT)) {
    myScope=project.getScope();
  }
 else   if (scopeType.equals(SCOPE_TYPE_MODULE)) {
    String moduleUID=scopeXML.getAttribute(MODULE_ID).getValue();
    myScope=null;
    for (    IModule module : MPSModuleRepository.getInstance().getAllModules()) {
      if (module.getModuleUID().equals(moduleUID)) {
        myScope=module.getScope();
      }
    }
    if (myScope == null) {
      LOG.warning("module scope not found for module  " + moduleUID);
      throw new CantLoadSomethingException("module scope not found for module  " + moduleUID);
    }
  }
 else   if (scopeType.equals(SCOPE_TYPE_MODEL)) {
    String modelUID=scopeXML.getAttribute(MODEL_ID).getValue();
    SModelDescriptor sModelDescriptor=project.getScope().getModelDescriptor(SModelReference.fromString(modelUID));
    if (sModelDescriptor == null) {
      LOG.warning("model scope not found for model " + modelUID);
      throw new CantLoadSomethingException("model scope not found for model " + modelUID);
    }
    myScope=new ModelScope(project.getScope(),sModelDescriptor);
  }
  if (scopeType.equals(SCOPE_TYPE_BOOTSTRAP)) {
    myScope=BootstrapScope.getInstance();
  }
  Element holderXML=element.getChild(HOLDER);
  String holderClass=holderXML.getAttributeValue(HOLDER_CLASS);
  try {
    myObjectHolder=(IHolder)Class.forName(holderClass).getConstructor(Element.class,MPSProject.class).newInstance(holderXML,project);
  }
 catch (  Exception e) {
    throw new CantLoadSomethingException(e);
  }
}
