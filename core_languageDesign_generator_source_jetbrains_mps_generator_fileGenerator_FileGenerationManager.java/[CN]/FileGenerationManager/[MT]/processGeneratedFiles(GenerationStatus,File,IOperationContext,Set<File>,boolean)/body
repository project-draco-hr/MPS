{
  MPSVCSManager manager=context.getProject().getComponent(MPSVCSManager.class);
  manager.addFilesToVcs(new ArrayList<File>(generatedFiles),false,false);
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      final VirtualFile outputRootVirtualFile=VFileSystem.refreshAndGetFile(outputRoot);
      RefreshSession session=RefreshQueue.getInstance().createSession(true,true,new Runnable(){
        @Override public void run(){
          VcsDirtyScopeManager.getInstance(context.getProject()).filesDirty(null,Arrays.asList(outputRootVirtualFile));
        }
      }
);
      session.addAllFiles(Arrays.asList(outputRootVirtualFile));
      session.launch();
    }
  }
);
  if (cleanUp) {
    cleanUp(status.getInputModel(),context,outputRoot,generatedFiles);
  }
}
