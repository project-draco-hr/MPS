{
  super("Convert ExtensionMethodCall to Local");
  this.addRefactoring(new AbstractMigrationRefactoring(operationContext){
    public String getName(){
      return "ConvertLocalInstanceMethodCall";
    }
    public String getAdditionalInfo(){
      return "ConvertLocalInstanceMethodCall";
    }
    public String getFqNameOfConceptToSearchInstances(){
      return "jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation";
    }
    public boolean isApplicableInstanceNode(    SNode node){
      if (!(SNodeOperations.isInstanceOf(IOperation_Behavior.call_getOperand_1213877410070(node),MetaAdapterFactory.getConcept(0x5dc5fc0d37ef4782L,0x81928b5ce1f69f80L,0x2e076d2695911333L,"jetbrains.mps.baseLanguage.extensionMethods.structure.ThisExtensionExpression")))) {
        return false;
      }
      SNode declaration=SLinkOperations.getTarget(node,MetaAdapterFactory.getReferenceLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x11857355952L,0xf8c78301adL,"baseMethodDeclaration"));
      SNode classifier=ExtensionMethodDeclaration_Behavior.call_getClassifier_7685333756920241018(SNodeOperations.getNodeAncestor(node,MetaAdapterFactory.getConcept(0x5dc5fc0d37ef4782L,0x81928b5ce1f69f80L,0x1583d1b63365e7f9L,"jetbrains.mps.baseLanguage.extensionMethods.structure.ExtensionMethodDeclaration"),false,false));
      if (classifier == null) {
        return false;
      }
      SNode declarationClassifier=SNodeOperations.getNodeAncestor(declaration,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x101d9d3ca30L,"jetbrains.mps.baseLanguage.structure.Classifier"),false,false);
      if (!((classifier == declarationClassifier || ListSequence.fromList(SNodeOperations.getNodeAncestors(classifier,null,false)).contains(declarationClassifier)))) {
        return false;
      }
      while (classifier != declarationClassifier) {
        for (        SNode method : Members.visibleInstanceMethods(BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),classifier,"virtual_getThisType_7405920559687254782",new Object[]{}),node)) {
          if (SPropertyOperations.getString(method,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x110396eaaa4L,0x110396ec041L,"name")).equals(SPropertyOperations.getString(declaration,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x110396eaaa4L,0x110396ec041L,"name")))) {
            return false;
          }
        }
        classifier=SNodeOperations.getNodeAncestor(classifier,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x101d9d3ca30L,"jetbrains.mps.baseLanguage.structure.Classifier"),false,false);
      }
      return true;
    }
    public void doUpdateInstanceNode(    SNode node){
      SNode methodCall=SNodeOperations.replaceWithNewChild(SNodeOperations.getParent(node),"jetbrains.mps.baseLanguage.extensionMethods.structure.LocalExtendedMethodCall");
      SLinkOperations.setTarget(methodCall,MetaAdapterFactory.getReferenceLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x11857355952L,0xf8c78301adL,"baseMethodDeclaration"),SLinkOperations.getTarget(node,MetaAdapterFactory.getReferenceLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x11857355952L,0xf8c78301adL,"baseMethodDeclaration")));
      ListSequence.fromList(SLinkOperations.getChildren(methodCall,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x11857355952L,0xf8c78301aeL,"actualArgument"))).addSequence(ListSequence.fromList(SLinkOperations.getChildren(node,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x11857355952L,0xf8c78301aeL,"actualArgument"))));
    }
    public boolean isShowAsIntention(){
      return true;
    }
  }
);
}
