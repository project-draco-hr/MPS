{
  SModel current=getSourceNode().getModel();
  if (current != null && current.getReference().equals(getTargetSModelReference()))   return current;
  SModelReference targetModelReference=getTargetSModelReference();
  if (targetModelReference == null)   return null;
  SModel modelDescriptor=null;
  if (current != null) {
    modelDescriptor=targetModelReference.resolve(current.getRepository());
    if (modelDescriptor == null && current.getModule() != null) {
      modelDescriptor=current.getModule().getModel(targetModelReference.getModelId());
    }
  }
 else   if (!RuntimeFlags.isMergeDriverMode()) {
    modelDescriptor=targetModelReference.resolve(null);
  }
  return modelDescriptor;
}
