{
  IModule module=MPSModuleRepository.getInstance().getModule(new ModuleReference(moduleNamespace));
  if (module == null)   return null;
  Class actionClass=null;
  try {
    IdeaPluginDescriptor plugin=PluginManager.getPlugin(PluginId.getId("jetbrains.mps.vcs"));
    if (plugin != null) {
      actionClass=plugin.getPluginClassLoader().loadClass(actionClassName);
    }
  }
 catch (  ClassNotFoundException e) {
  }
  if (actionClass == null) {
    actionClass=module.getClass(actionClassName);
  }
  if (actionClass == null) {
    LOG.warning("Action " + actionClassName + " is not found in module "+ moduleNamespace);
    return null;
  }
  AnAction newAction=createAction(actionClass,params);
  String actionId;
  if (newAction instanceof BaseAction) {
    actionId=((BaseAction)newAction).getActionId();
  }
 else {
    actionId=newAction.getClass().getName();
  }
  String id=getFullId(actionId,moduleNamespace,actionClass);
  AnAction registeredAction=ActionManager.getInstance().getAction(id);
  if (registeredAction == null) {
    registerAction(newAction,actionId,id,moduleNamespace,params);
    return (BaseAction)newAction;
  }
 else {
    return (BaseAction)registeredAction;
  }
}
