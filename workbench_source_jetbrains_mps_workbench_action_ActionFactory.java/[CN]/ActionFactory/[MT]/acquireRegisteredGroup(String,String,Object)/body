{
  IModule module=MPSModuleRepository.getInstance().getModule(new ModuleReference(moduleNamespace));
  Class groupClass=null;
  try {
    IdeaPluginDescriptor plugin=PluginManager.getPlugin(PluginId.getId("jetbrains.mps.vcs"));
    if (plugin != null) {
      groupClass=plugin.getPluginClassLoader().loadClass(groupClassName);
    }
  }
 catch (  ClassNotFoundException e) {
  }
  if (groupClass == null) {
    if (module == null) {
      try {
        groupClass=Class.forName(groupClassName);
      }
 catch (      ClassNotFoundException e) {
        LOG.error(e);
      }
    }
 else {
      groupClass=module.getClass(groupClassName);
    }
  }
  String id=groupClassName;
  if (groupClass != null) {
    try {
      id=(String)groupClass.getField("ID").get(null);
    }
 catch (    Exception e) {
      id=groupClass.getName();
    }
  }
 else {
    LOG.error("Could not find class for " + groupClassName + " in module "+ module);
  }
  AnAction action=ActionManager.getInstance().getAction(id);
  if (action == null && groupClass != null) {
    try {
      BaseGroup group=(BaseGroup)groupClass.getConstructors()[0].newInstance(params);
      registerGroup(group,id,moduleNamespace);
      return group;
    }
 catch (    InstantiationException e) {
      LOG.error("Unable to create action " + groupClass.getSimpleName(),e);
      return null;
    }
catch (    IllegalAccessException e) {
      LOG.error("Unable to create action " + groupClass.getSimpleName(),e);
      return null;
    }
catch (    InvocationTargetException e) {
      LOG.error("Unable to create action " + groupClass.getSimpleName(),e);
      return null;
    }
  }
 else {
    return (BaseGroup)action;
  }
}
