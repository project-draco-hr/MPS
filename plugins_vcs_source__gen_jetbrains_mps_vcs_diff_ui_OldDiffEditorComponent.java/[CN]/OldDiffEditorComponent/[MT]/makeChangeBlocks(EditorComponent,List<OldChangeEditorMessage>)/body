{
  relayout();
  final NodeHighlightManager highlightManager=component.getHighlightManager();
  for (Iterator<OldChangeEditorMessage> iterator=changeEditorMessages.iterator(); iterator.hasNext(); ) {
    OldChangeEditorMessage change=iterator.next();
    if (highlightManager.getCell(change) == null) {
      iterator.remove();
    }
  }
  Collections.sort(changeEditorMessages,new Comparator<OldChangeEditorMessage>(){
    public int compare(    OldChangeEditorMessage o1,    OldChangeEditorMessage o2){
      return highlightManager.getCell(o1).getY() - highlightManager.getCell(o2).getY();
    }
  }
);
  OldChangesBlock block=null;
  for (  OldChangeEditorMessage m : changeEditorMessages) {
    EditorCell cell=highlightManager.getCell(m);
    if (block == null) {
      block=new OldChangesBlock();
    }
 else {
      if (block.getMaxY() < cell.getY()) {
        configureBlock(block);
        addBlock(component,block);
        block=new OldChangesBlock();
      }
    }
    configureBlock(block);
    block.addChange(m,cell);
  }
  if (block != null) {
    addBlock(component,block);
  }
}
