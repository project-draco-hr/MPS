{
  MacroHelper helper=new ModuleLoaderUtils.ModuleMacroHelper(moduleDescriptorFile,genContext,originalModule,reporter);
  String path=moduleDescriptorFile.getPath();
  if (path.endsWith(MPSExtentions.DOT_LANGUAGE)) {
    return LanguageDescriptorPersistence.loadLanguageDescriptor(moduleDescriptorFile,helper);
  }
 else   if (path.endsWith(MPSExtentions.DOT_SOLUTION)) {
    return SolutionDescriptorPersistence.loadSolutionDescriptor(moduleDescriptorFile,helper);
  }
 else   if (path.endsWith(MPSExtentions.DOT_DEVKIT)) {
    return DevkitDescriptorPersistence.loadDevKitDescriptor(moduleDescriptorFile);
  }
  throw new RuntimeException("unknown file type: " + moduleDescriptorFile.getName());
}
