{
  if (getPatternEditor().processKeyTyped(keyEvent)) {
    if (myPopupActivated) {
      SubstituteAction actionToSelect=getPopupWindow().getCurrentSelectedSubstituteAction();
      rebuildMenuEntries();
      getPopupWindow().scrollToAction(actionToSelect);
      if (getEditorWindow() != null && !RuntimeFlags.isTestMode()) {
        getPopupWindow().pack();
        getPopupWindow().repaint();
      }
    }
    return true;
  }
  return false;
}
