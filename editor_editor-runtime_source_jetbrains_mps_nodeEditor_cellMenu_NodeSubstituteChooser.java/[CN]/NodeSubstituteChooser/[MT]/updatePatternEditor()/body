{
  if (!myMenuEmpty) {
    int oldPosition=myPatternEditor.getCaretPosition();
    String oldPattern=myPatternEditor.getPattern();
    String newText=getPopupWindow().getSelectedText(oldPattern);
    myPatternEditor.setText(newText);
    myPatternEditor.setCaretPosition(Math.min(newText.length(),oldPosition));
  }
}
