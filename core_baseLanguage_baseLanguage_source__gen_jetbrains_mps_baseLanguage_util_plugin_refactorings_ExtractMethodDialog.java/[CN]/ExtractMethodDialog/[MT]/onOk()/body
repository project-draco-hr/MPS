{
  final Wrappers._T<SNode> result=new Wrappers._T<SNode>(null);
  if (!(this.myCanRefactor)) {
    JOptionPane.showMessageDialog(this,"Can't refactor\n" + this.myErrors,"Can't perform refactoring",JOptionPane.ERROR_MESSAGE);
    return;
  }
 else {
    if (this.myExtractIntoOuterContainer) {
      if (this.myStaticTarget == null) {
        chooseStaticContainer();
      }
      if (this.myStaticTarget != null) {
        setStaticContainer();
      }
 else {
        return;
      }
    }
    ModelAccess.instance().runWriteActionInCommand(new Runnable(){
      public void run(){
        result.value=ExtractMethodDialog.this.myRefactoring.doRefactor();
        ExtractMethodDialog.this.myContext.select(result.value);
        if ((myRefactoringModel != null) && ExtractMethodDialog.this.myExtractIntoOuterContainer) {
          SModelReference ref=SNodeOperations.getModel(myStaticTarget).getSModelReference();
          myRefactoringModel.addModelImport(ref,false);
        }
      }
    }
);
  }
  this.dispose();
  if ((result.value != null)) {
    new ExtractMethodDialog.MyMethodDuplicatesProcessor(this.myContext,result.value).process(this.myRefactoring.getMatches());
  }
}
