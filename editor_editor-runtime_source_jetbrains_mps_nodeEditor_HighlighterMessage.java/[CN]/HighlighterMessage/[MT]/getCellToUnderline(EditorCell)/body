{
  Deque<Iterator<EditorCell>> iteratorsStack=new LinkedList<Iterator<EditorCell>>();
  if (cell instanceof EditorCell_Collection) {
    iteratorsStack.addLast(((EditorCell_Collection)cell).iterator());
  }
 else {
    iteratorsStack.addLast(Collections.singletonList(cell).iterator());
  }
  while (!iteratorsStack.isEmpty()) {
    Iterator<EditorCell> currentIterator=iteratorsStack.peekLast();
    if (!currentIterator.hasNext()) {
      iteratorsStack.removeLast();
      continue;
    }
    EditorCell nextCell=currentIterator.next();
    if (nextCell.getSNode() != cell.getSNode()) {
      continue;
    }
    if (nextCell instanceof EditorCell_Collection) {
      iteratorsStack.addLast(((EditorCell_Collection)nextCell).iterator());
    }
 else {
      return nextCell;
    }
  }
  return cell;
}
