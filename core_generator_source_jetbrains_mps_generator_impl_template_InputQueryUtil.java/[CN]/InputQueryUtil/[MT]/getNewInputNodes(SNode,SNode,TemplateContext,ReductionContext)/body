{
  try {
    SNode nodesQuery=RuleUtil.getSourceNodesQuery(nodeMacro);
    if (nodesQuery != null) {
      return getNewInputNodes(currentInputNode,nodeMacro,nodesQuery,context,reductionContext);
    }
    SNode nodeQuery=RuleUtil.getSourceNodeQuery(nodeMacro);
    if (nodeQuery != null) {
      SNode newInputNode=getNewInputNode(currentInputNode,nodeMacro,nodeQuery,context,reductionContext);
      return wrapAsList(newInputNode);
    }
    if (requiredSourceNodesQuery.contains(nodeMacro.getConceptFqName())) {
      throw new GenerationFailureException("couldn't get input nodes",currentInputNode,nodeMacro,null);
    }
    return Collections.singletonList(currentInputNode);
  }
 catch (  Throwable t) {
    throw new GenerationFailureException("couldn't get input nodes",currentInputNode,nodeMacro,null,t);
  }
}
