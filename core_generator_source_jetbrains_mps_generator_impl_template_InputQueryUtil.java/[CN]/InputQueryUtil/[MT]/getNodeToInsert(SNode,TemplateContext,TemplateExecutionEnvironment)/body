{
  try {
    SNode query=RuleUtil.getInsertMacro_Query(insertMacro);
    if (query != null) {
      return env.getQueryExecutor().evaluateInsertQuery(context.getInput(),insertMacro,query,context);
    }
    env.getLogger().error(insertMacro.getReference(),"couldn't get nodes to insert",GeneratorUtil.describeInput(context));
    throw new GenerationFailureException("couldn't get nodes to insert");
  }
 catch (  Throwable t) {
    env.getLogger().handleException(t);
    env.getLogger().error(insertMacro.getReference(),"couldn't get nodes to insert (see exception)",GeneratorUtil.describeInput(context));
    throw new GenerationFailureException(t);
  }
}
