{
  if (mySubTrees == null) {
    return;
  }
  Set<SNode> replacedNodes=getReplacedNodes();
  TreeIterator<SNode> it=iterateOrigin();
  while (it.hasNext()) {
    SNode next=it.next();
    if (replacedNodes.contains(next)) {
      it.skipChildren();
      continue;
    }
    map.put(next.getNodeId(),next);
  }
  for (  SubTree t : mySubTrees) {
    if (t.isSourceCopy()) {
      continue;
    }
    t.fillNodeMap(map);
  }
}
