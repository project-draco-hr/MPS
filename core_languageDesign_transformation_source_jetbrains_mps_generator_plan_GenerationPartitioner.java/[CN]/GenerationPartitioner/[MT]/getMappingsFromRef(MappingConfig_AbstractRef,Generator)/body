{
  if (mappingRef instanceof MappingConfig_RefAllGlobal) {
    return new ArrayList<MappingConfiguration>(myPriorityMap.keySet());
  }
  if (mappingRef instanceof MappingConfig_RefAllLocal) {
    return refGenerator.getOwnMappings();
  }
  if (mappingRef instanceof MappingConfig_SimpleRefSet) {
    List<MappingConfiguration> result=new ArrayList<MappingConfiguration>();
    MappingConfig_SimpleRefSet simpleRefSet=((MappingConfig_SimpleRefSet)mappingRef);
    for (    MappingConfig_SimpleRef simpleRef : simpleRefSet.getMappingConfigs()) {
      result.addAll(getMappingsFromRef(simpleRef,refGenerator));
    }
    return result;
  }
  if (mappingRef instanceof MappingConfig_ExtRef) {
    GeneratorReference generatorRef=((MappingConfig_ExtRef)mappingRef).getGenerator();
    if (generatorRef != null) {
      String generatorUID=generatorRef.getGeneratorUID();
      if (generatorUID != null) {
        Generator newRefGenerator=(Generator)MPSModuleRepository.getInstance().getModuleByUID(generatorUID);
        if (newRefGenerator != null) {
          return getMappingsFromRef(((MappingConfig_ExtRef)mappingRef).getMappingConfig(),newRefGenerator);
        }
 else {
          LOG.error("couldn't get generator by uid: '" + generatorUID + "'");
        }
      }
    }
    return new ArrayList();
  }
  if (mappingRef instanceof MappingConfig_SimpleRef) {
    String modelUID=((MappingConfig_SimpleRef)mappingRef).getModelUID();
    String nodeID=((MappingConfig_SimpleRef)mappingRef).getNodeID();
    if (modelUID != null && nodeID != null) {
      SModelUID uid=SModelUID.fromString(modelUID);
      SModelDescriptor refModel=GlobalScope.getInstance().getModelDescriptor(uid);
      if (refModel == null && uid.getStereotype().equals(SModelStereotype.TEMPLATES)) {
        uid=new SModelUID(uid.getLongName(),SModelStereotype.GENERATOR);
        modelUID=uid.toString();
        refModel=GlobalScope.getInstance().getModelDescriptor(uid);
        if (refModel != null) {
          LOG.warning("please change stereotype in property modelUID from templates to generator",mappingRef.getNode());
        }
      }
      if (refModel != null) {
        if (nodeID.equals("*")) {
          return refModel.getSModel().allAdapters(MappingConfiguration.class);
        }
 else {
          SNode mappingConfig=refModel.getSModel().getNodeById(nodeID);
          if (mappingConfig != null) {
            List<MappingConfiguration> result=new ArrayList<MappingConfiguration>();
            result.add((MappingConfiguration)BaseAdapter.fromNode(mappingConfig));
            return result;
          }
 else {
            LOG.error("couldn't get node by id: '" + nodeID + "' in model "+ modelUID);
          }
        }
      }
 else {
        LOG.error("couldn't get model by uid: '" + modelUID + "'");
      }
    }
    return new ArrayList();
  }
  return new ArrayList();
}
