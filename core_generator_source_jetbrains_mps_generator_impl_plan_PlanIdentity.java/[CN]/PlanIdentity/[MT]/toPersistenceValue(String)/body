{
  final char[] rv=new char[name.length()];
  boolean modified=false;
  for (int i=0; i < rv.length; i++) {
    char c=name.charAt(i);
    if (!Character.isLetterOrDigit(c)) {
      modified=true;
      rv[i]='_';
    }
 else {
      rv[i]=c;
    }
  }
  return modified ? new String(rv).toLowerCase() : name.toLowerCase();
}
