{
  this.addNodeById(before);
  if (!(after.equals(""))) {
    this.addNodeById(after);
  }
  myProject.getModelAccess().runWriteAction(new Runnable(){
    public void run(){
      BaseEditorTestBody.this.myBefore=BaseEditorTestBody.this.getNodeById(before);
      BaseEditorTestBody.this.myStart=BaseEditorTestBody.this.findCellReference(BaseEditorTestBody.this.getRealNodeById(before));
      if (BaseEditorTestBody.this.myStart == null) {
        throw new IllegalStateException("Cannot find cell reference in the test case 'before'");
      }
      if (!(after.equals(""))) {
        BaseEditorTestBody.this.myResult=BaseEditorTestBody.this.getNodeById(after);
        BaseEditorTestBody.this.myFinish=BaseEditorTestBody.this.findCellReference(BaseEditorTestBody.this.getRealNodeById(after));
      }
      myFileNodeEditor=openEditor();
      myEditor=myFileNodeEditor.getNodeEditor();
      if (BaseEditorTestBody.this.myEditor.getCurrentEditorComponent() instanceof EditorComponent) {
        EditorComponent component=((EditorComponent)BaseEditorTestBody.this.myEditor.getCurrentEditorComponent());
        component.addNotify();
        component.setSize(component.getPreferredSize());
        component.validate();
      }
      BaseEditorTestBody.this.myStart.setupSelection(BaseEditorTestBody.this.myEditor);
    }
  }
);
}
