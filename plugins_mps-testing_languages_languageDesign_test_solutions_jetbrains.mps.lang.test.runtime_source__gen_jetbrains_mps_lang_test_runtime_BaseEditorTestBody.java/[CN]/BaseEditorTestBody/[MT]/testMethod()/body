{
  try {
    this.testMethodImpl();
    this.checkAssertion();
  }
  finally {
    myProject.getModelAccess().runWriteInEDT(new Runnable(){
      public void run(){
        UndoManagerImpl undoManager=(UndoManagerImpl)UndoManager.getInstance(ProjectHelper.toIdeaProject(myProject));
        MPSNodeVirtualFile file=MPSNodesVirtualFileSystem.getInstance().getFileFor(BaseEditorTestBody.this.myBefore);
        undoManager.clearUndoRedoQueueInTests(file);
      }
    }
);
  }
}
