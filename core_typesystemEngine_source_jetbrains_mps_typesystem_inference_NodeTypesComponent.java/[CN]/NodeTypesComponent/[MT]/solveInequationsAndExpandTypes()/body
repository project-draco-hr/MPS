{
  myEquationManager.solveInequations();
  getSlicer().beforeTypesExpanded(myNodesToTypesMap);
  if (myIsSmartCompletion) {
    myHoleTypeWrapper=HoleWrapper.createHoleWrapper(myEquationManager,myHoleTypeWrapper);
    myHoleTypeWrapper.getInequationSystem().normalize();
  }
  for (  Entry<SNode,SNode> contextEntry : new HashSet<Entry<SNode,SNode>>(myNodesToTypesMap.entrySet())) {
    SNode term=contextEntry.getKey();
    if (term == null)     continue;
    SNode type=expandTypeAndPutToContext(term);
    if (HUtil.isRuntimeErrorType(type)) {
      reportTypeError(term,HUtil.getErrorText(type),null,null);
    }
  }
}
