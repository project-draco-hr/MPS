{
  Set<StaticReferenceInfo> srefs=new THashSet<StaticReferenceInfo>();
  for (  SNode n : nodes) {
    SModelReference mr=n.getModel().getReference();
    srefs.add(new StaticReferenceInfo(SModelRepository.getInstance().getModelDescriptor(mr),n.getNodeId()));
  }
  for (  SNode root : model.getRootNodes()) {
    collectUsages(root,nodes,srefs,consumer);
  }
}
