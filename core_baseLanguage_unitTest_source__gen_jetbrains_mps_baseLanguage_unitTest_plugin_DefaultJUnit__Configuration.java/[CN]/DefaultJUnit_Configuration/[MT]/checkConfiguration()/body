{
  final StringBuilder error=new StringBuilder();
{
    if (DefaultJUnit_Configuration.this.getStateObject().type != null) {
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          if (DefaultJUnit_Configuration.this.getStateObject().type == JUnitRunTypes.METHOD) {
            if (DefaultJUnit_Configuration.this.getStateObject().method == null || SModelUtil.findNodeByFQName(DefaultJUnit_Configuration.this.getStateObject().method,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.unitTest.structure.ITestMethod"),GlobalScope.getInstance()) == null) {
              error.append("method is not selected or does not exist").append("\n");
            }
          }
 else           if (DefaultJUnit_Configuration.this.getStateObject().type == JUnitRunTypes.TESTCLASS) {
            if (DefaultJUnit_Configuration.this.getStateObject().node == null || SModelUtil.findNodeByFQName(DefaultJUnit_Configuration.this.getStateObject().node,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.unitTest.structure.BTestCase"),GlobalScope.getInstance()) == null) {
              error.append("node is not selected or does not exist").append("\n");
            }
          }
 else           if (DefaultJUnit_Configuration.this.getStateObject().type == JUnitRunTypes.MODEL) {
            if (DefaultJUnit_Configuration.this.getStateObject().model == null || GlobalScope.getInstance().getModelDescriptor(SModelReference.fromString(DefaultJUnit_Configuration.this.getStateObject().model)).getSModel() == null) {
              error.append("model is not selected or does not exist").append("\n");
            }
          }
 else           if (DefaultJUnit_Configuration.this.getStateObject().type == JUnitRunTypes.MODULE) {
            if (DefaultJUnit_Configuration.this.getStateObject().module != null) {
              for (              IModule module : GlobalScope.getInstance().getVisibleModules()) {
                if (module.getModuleFqName().equals(module)) {
                  break;
                }
              }
            }
            error.append("module is not selected or does not exist").append("\n");
          }
        }
      }
);
    }
    if (DefaultJUnit_Configuration.this.getStateObject().myParams == null) {
      DefaultJUnit_Configuration.this.getStateObject().myParams=new RunParameters();
    }
    String paramsReport=DefaultJUnit_Configuration.this.getStateObject().myParams.getErrorReport();
    if (paramsReport != null) {
      error.append(paramsReport).append("\n");
    }
  }
  if (error.length() != 0) {
    throw new RuntimeConfigurationException(error.toString());
  }
}
