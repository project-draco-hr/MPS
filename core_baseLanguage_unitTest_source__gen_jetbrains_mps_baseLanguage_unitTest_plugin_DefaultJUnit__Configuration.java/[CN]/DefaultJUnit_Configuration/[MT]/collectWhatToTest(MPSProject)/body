{
  final List<SNode> all=new ArrayList<SNode>();
  if (DefaultJUnit_Configuration.this.getStateObject().type != null) {
    Runnable collect=new Runnable(){
      public void run(){
        ModelAccess.instance().runReadAction(new Runnable(){
          public void run(){
            ListSequence.fromList(all).addSequence(Sequence.fromIterable(DefaultJUnit_Configuration.this.getStateObject().type.collect(DefaultJUnit_Configuration.this,mpsProject)));
          }
        }
);
      }
    }
;
    if (DefaultJUnit_Configuration.this.getStateObject().type.equals(JUnitRunTypes.PROJECT) || DefaultJUnit_Configuration.this.getStateObject().type.equals(JUnitRunTypes.MODULE)) {
      ProgressManager.getInstance().runProcessWithProgressSynchronously(collect,"Collecting Tests To Run",false,mpsProject.getProject());
    }
 else {
      collect.run();
    }
  }
  return all;
}
