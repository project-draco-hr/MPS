{
synchronized (CLOSURE_CONTEXT_DATA) {
    GenerationSessionContext sessionContext=generator.getGeneratorSessionContext();
    Map<SNode,ClosuresUtil.ClosureContextData> closureContexts=((Map<SNode,ClosuresUtil.ClosureContextData>)sessionContext.getTransientObject(CLOSURE_CONTEXT_DATA));
    if (closureContexts == null) {
      closureContexts=new ConcurrentHashMap<SNode,ClosuresUtil.ClosureContextData>();
      sessionContext.putTransientObject(CLOSURE_CONTEXT_DATA,closureContexts);
    }
    return closureContexts;
  }
}
