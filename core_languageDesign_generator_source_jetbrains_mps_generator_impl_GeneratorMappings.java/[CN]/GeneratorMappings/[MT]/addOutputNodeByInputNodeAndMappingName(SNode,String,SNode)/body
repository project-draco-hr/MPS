{
  if (mappingName == null)   return;
  Map<SNode,Object> currentMapping=myMappingNameAndInputNodeToOutputNodeMap.get(mappingName);
  if (currentMapping == null) {
    myMappingNameAndInputNodeToOutputNodeMap.putIfAbsent(mappingName,new HashMap<SNode,Object>());
    currentMapping=myMappingNameAndInputNodeToOutputNodeMap.get(mappingName);
  }
synchronized (currentMapping) {
    Object o=currentMapping.get(inputNode);
    if (o == null) {
      currentMapping.put(inputNode,outputNode);
    }
 else     if (o instanceof List) {
      ((List<SNode>)o).add(outputNode);
    }
 else {
      List<SNode> list=new ArrayList<SNode>(4);
      list.add((SNode)o);
      list.add(outputNode);
      currentMapping.put(inputNode,list);
    }
  }
}
