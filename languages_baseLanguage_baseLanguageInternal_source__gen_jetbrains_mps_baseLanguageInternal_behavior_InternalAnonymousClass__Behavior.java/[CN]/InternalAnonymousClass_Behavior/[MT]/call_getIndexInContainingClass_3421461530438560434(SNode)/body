{
  final SNode ancestor=SNodeOperations.getAncestor(thisNode,"jetbrains.mps.baseLanguage.structure.Classifier",false,false);
  int index=ListSequence.fromList(SNodeOperations.getDescendantsWhereConceptInList(ancestor,new String[]{"jetbrains.mps.baseLanguage.structure.AnonymousClass","jetbrains.mps.baseLanguageInternal.structure.InternalAnonymousClass"},false,new String[]{})).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return SNodeOperations.getAncestor(it,"jetbrains.mps.baseLanguage.structure.Classifier",false,false) == ancestor;
    }
  }
).indexOf(thisNode) + 1;
  return index;
}
