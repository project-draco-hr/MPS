{
  String roleText="";
  if (node.getContainingModel() != null) {
    SNode parent=node.getParent();
    roleText=parent == null ? "[root]" : "[" + parent.getRoleOf(node) + "]";
  }
  String nameText;
  try {
    final StringBuilder builder=new StringBuilder();
    if ("jetbrains.mps.bootstrap.structureLanguage.structure.LinkDeclaration".equals(node.getConcept().getId())) {
      node.visitProperties(new PropertyVisitor(){
        @Override public boolean visitProperty(        String name,        String value){
          if (name.equals("role")) {
            builder.append(value);
            return true;
          }
          return false;
        }
      }
);
      String role=builder.toString();
      nameText=(role == null) ? "<no role>" : '"' + role + '"';
    }
 else {
      node.visitProperties(new PropertyVisitor(){
        @Override public boolean visitProperty(        String name,        String value){
          if (name.equals("role")) {
            builder.append(value);
            return true;
          }
          return false;
        }
      }
);
      String name=builder.toString();
      nameText=(name == null) ? "<no name>" : '"' + name + '"';
    }
    nameText=nameText + "[" + node.getSNodeId()+ "]";
  }
 catch (  Exception e) {
    nameText="<??name??>";
  }
  return roleText + " " + node.getConcept().getName()+ " "+ nameText+ " in "+ node.getContainingModel().getModelName();
}
