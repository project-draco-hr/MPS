{
  Map<String,List<MigrationScript>> byCategory=new HashMap<String,List<MigrationScript>>();
  for (  MigrationScript migrationScript : migrationScripts) {
    String cat=migrationScript.getCategory();
    if (cat == null) {
      cat="<uncategorized>";
    }
    if (!byCategory.containsKey(cat)) {
      byCategory.put(cat,new ArrayList<MigrationScript>());
    }
    byCategory.get(cat).add(migrationScript);
  }
  Set<String> sorted=new TreeSet<String>(new Comparator<String>(){
    public int compare(    String o1,    String o2){
      if ("<uncategorized>".equals(o1))       return 1;
      if ("<uncategorized>".equals(o2))       return -1;
      return o1.compareTo(o2);
    }
  }
);
  sorted.addAll(byCategory.keySet());
  for (  String cat : sorted) {
    MPSActionGroup categoryGroup=new MPSActionGroup(cat,"");
    for (    MigrationScript script : byCategory.get(cat)) {
      categoryGroup.add(new RunMigrationScriptAction(script,project,makeScriptActionName(null,script.getTitle(),script.getMigrationFromBuild())));
    }
    categoryGroup.setPopup(true);
    ownerGroup.add(categoryGroup);
  }
}
