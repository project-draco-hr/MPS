{
  Component uparent=UIUtil.findUltimateParent(parent);
  Project project=null;
  if (uparent instanceof IdeFrame) {
    project=((IdeFrame)uparent).getProject();
  }
  if (project == null) {
    project=PlatformDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext(uparent));
  }
  if (project == null)   throw new IllegalStateException("Project not found");
  NodeChooserDialog dialog=new NodeChooserDialog(project,values);
  dialog.show();
  return dialog.getResultNode();
}
