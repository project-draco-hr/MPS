{
  ConceptDescriptor d=ConceptRegistry.getInstance().getConceptDescriptor(getQualifiedName());
  if (d instanceof IllegalConceptDescriptor) {
    illegalConceptDescriptorWarning();
    return null;
  }
  SNode linkNode=new ConceptAndSuperConceptsScope(getConceptDeclarationNode()).getLinkDeclarationByRole(role);
  if (linkNode == null) {
    return null;
  }
  if (d.hasChild(role)) {
    return new SContainmentLinkAdapter(MetaIdByDeclaration.getNodeRoleId((jetbrains.mps.smodel.SNode)linkNode));
  }
 else   if (d.hasReference(role)) {
    return new SReferenceLinkAdapter(MetaIdByDeclaration.getRefRoleId((jetbrains.mps.smodel.SNode)linkNode));
  }
  return null;
}
