{
  MPSProject project=frame.getProject();
  Set<IModule> owningModules=SModelRepository.getInstance().getOwners(model,IModule.class);
  if (owningModules.isEmpty()) {
    LOG.error("couldn't create module context for node:" + "\ncouldn't find owner module for model '" + model.getModelUID() + "'");
    return null;
  }
  IModule module;
  if (owningModules.size() == 1 || !askIfMany) {
    module=owningModules.iterator().next();
  }
 else {
    ChooseModuleDialog md=new ChooseModuleDialog(frame.getMainFrame(),owningModules);
    md.showDialog();
    module=md.getResult();
  }
  return new ModuleContext(module,project);
}
