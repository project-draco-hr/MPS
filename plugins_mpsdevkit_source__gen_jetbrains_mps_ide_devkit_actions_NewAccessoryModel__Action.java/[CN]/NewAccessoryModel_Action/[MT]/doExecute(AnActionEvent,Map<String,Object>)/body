{
  if (!(event.getData(MPSCommonDataKeys.CONTEXT_MODULE) instanceof AbstractModule)) {
    return;
  }
  final Language language=((Language)event.getData(MPSCommonDataKeys.CONTEXT_MODULE));
  final Wrappers._T<NewModelDialog> d=new Wrappers._T<NewModelDialog>();
  event.getData(MPSCommonDataKeys.MPS_PROJECT).getModelAccess().runReadAction(new Runnable(){
    public void run(){
      d.value=new NewModelDialog(event.getData(MPSCommonDataKeys.MPS_PROJECT),((AbstractModule)event.getData(MPSCommonDataKeys.CONTEXT_MODULE)),language.getModuleName(),SModelStereotype.NONE,true);
    }
  }
);
  d.value.show();
  final SModel result=d.value.getResult();
  if (result == null) {
    return;
  }
  event.getData(MPSCommonDataKeys.MPS_PROJECT).getModelAccess().executeCommand(new Runnable(){
    public void run(){
      LanguageDescriptor descriptor=language.getModuleDescriptor();
      descriptor.getAccessoryModels().add(result.getReference());
      language.save();
    }
  }
);
}
