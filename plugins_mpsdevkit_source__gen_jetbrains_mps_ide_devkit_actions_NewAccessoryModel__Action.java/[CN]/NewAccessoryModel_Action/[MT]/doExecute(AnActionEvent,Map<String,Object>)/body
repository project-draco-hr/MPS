{
  if (!(event.getData(MPSCommonDataKeys.CONTEXT_MODULE) instanceof AbstractModule)) {
    return;
  }
  final Language language=((Language)event.getData(MPSCommonDataKeys.CONTEXT_MODULE));
  NewModelDialog d=new NewModelDialog(event.getData(MPSCommonDataKeys.MPS_PROJECT),((AbstractModule)event.getData(MPSCommonDataKeys.CONTEXT_MODULE)),language.getModuleName(),SModelStereotype.NONE,true);
  d.show();
  final SModel result=d.getResult();
  if (result == null) {
    return;
  }
  event.getData(MPSCommonDataKeys.MPS_PROJECT).getModelAccess().executeCommand(new Runnable(){
    public void run(){
      LanguageDescriptor descriptor=language.getModuleDescriptor();
      descriptor.getAccessoryModels().add(result.getReference());
      language.save();
    }
  }
);
}
