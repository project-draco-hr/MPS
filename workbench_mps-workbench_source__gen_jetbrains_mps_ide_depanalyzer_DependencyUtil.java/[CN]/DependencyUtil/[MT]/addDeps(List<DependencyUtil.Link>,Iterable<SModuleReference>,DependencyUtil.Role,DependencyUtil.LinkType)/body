{
  if (modules == null) {
    return;
  }
  ListSequence.fromList(result).addSequence(Sequence.fromIterable(modules).select(new ISelector<SModuleReference,SModule>(){
    public SModule select(    SModuleReference ref){
      return MPSModuleRepository.getInstance().getModule(ref);
    }
  }
).where(new IWhereFilter<SModule>(){
    public boolean accept(    SModule module){
      return module != null;
    }
  }
).select(new ISelector<SModule,DependencyUtil.Link>(){
    public DependencyUtil.Link select(    SModule module){
      return new DependencyUtil.Link(module,role,linktype);
    }
  }
));
}
