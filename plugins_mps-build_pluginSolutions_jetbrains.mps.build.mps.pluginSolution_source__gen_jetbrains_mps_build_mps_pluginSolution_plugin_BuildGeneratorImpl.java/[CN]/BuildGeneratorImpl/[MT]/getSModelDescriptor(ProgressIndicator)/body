{
  if (getCreateModel()) {
    Solution solution;
    if (getCreateSolution()) {
      IFile projectBaseDir=FileSystem.getInstance().getFileByPath(myProject.getBaseDir().getPath());
      String solutionName=getNewSolutionName();
      IFile solutionBaseDir=projectBaseDir.getDescendant("solutions").getDescendant(solutionName);
      indicator.setText("Creating Solution...");
      solution=BuildGeneratorUtil.createSolution(getMpsProject(),solutionName,solutionBaseDir);
    }
 else {
      solution=getSolution();
    }
    indicator.setText("Creating Model...");
    return BuildGeneratorUtil.createModel(getNewModelName(),solution);
  }
 else {
    return this.getModel();
  }
}
