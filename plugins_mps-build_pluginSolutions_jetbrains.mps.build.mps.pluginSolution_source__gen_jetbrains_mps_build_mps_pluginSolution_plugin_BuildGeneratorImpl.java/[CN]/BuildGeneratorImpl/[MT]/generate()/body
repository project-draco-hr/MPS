{
  ModelAccess.instance().runCommandInEDT(new Runnable(){
    public void run(){
      SModelDescriptor descriptor=getSModelDescriptor(new EmptyProgressIndicator());
      addRequiredImports(descriptor.getSModel(),descriptor.getModule().getModuleDescriptor());
      final EditableSModelDescriptor targetModelDescriptor=((EditableSModelDescriptor)descriptor);
      SNode buildProject=createMPSLayout(targetModelDescriptor,BuildGeneratorImpl.this.getProjectName(),BuildGeneratorImpl.this.myProject.getBaseDir().getPath(),BuildGeneratorImpl.this.getModules());
      ModelAccess.instance().runWriteActionInCommand(new Runnable(){
        public void run(){
          targetModelDescriptor.getModule().save();
          targetModelDescriptor.save();
        }
      }
);
      NavigationSupport.getInstance().openNode(myOperationContext,buildProject,true,true);
      ProjectHelper.toMPSProject(myProject).addModule(descriptor.getModule().getModuleReference());
    }
  }
,ProjectHelper.toMPSProject(myProject));
}
