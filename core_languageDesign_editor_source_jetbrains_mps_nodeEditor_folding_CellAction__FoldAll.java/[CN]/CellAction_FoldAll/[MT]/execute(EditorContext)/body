{
  EditorComponent component=context.getNodeEditorComponent();
  for (  EditorCell cell : ((EditorCell_Collection)component.getRootCell()).dfsCells()) {
    if (cell.canBePossiblyFolded() && !cell.isFolded()) {
      ((EditorCell_Collection)cell).fold();
    }
  }
  EditorCell selectedCell=component.getSelectedCell();
  if (selectedCell.isUnderFolded()) {
    EditorCell cell=selectedCell;
    EditorCell prevCell=null;
    while (cell != null) {
      prevCell=cell;
      cell=cell.getFoldedAbove();
    }
    component.changeSelection(prevCell);
  }
}
