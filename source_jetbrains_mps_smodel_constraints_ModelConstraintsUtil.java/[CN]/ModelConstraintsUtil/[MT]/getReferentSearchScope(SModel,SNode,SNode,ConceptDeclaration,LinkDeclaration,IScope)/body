{
  ISearchScope searchScope=null;
  String genuineReferenceRole=SModelUtil.getGenuineLinkRole(referenceLinkDeclaration);
  INodeReferentSearchScopeProvider scopeProvider=ModelConstraintsManager.getInstance().getNodeReferentSearchScopeProvider(referenceNodeConcept,genuineReferenceRole);
  if (scopeProvider != null) {
    String errorDescr=scopeProvider.canCreateNodeReferentSearchScope(model,enclosingNode,referenceNode,scope);
    if (errorDescr != null) {
      return new Status.ERROR(errorDescr);
    }
    searchScope=scopeProvider.createNodeReferentSearchScope(model,enclosingNode,referenceNode,scope);
  }
 else {
    searchScope=SModelSearchUtil.createModelAndImportedModelsScope(model,false,scope);
  }
  return new Status.OK(searchScope);
}
