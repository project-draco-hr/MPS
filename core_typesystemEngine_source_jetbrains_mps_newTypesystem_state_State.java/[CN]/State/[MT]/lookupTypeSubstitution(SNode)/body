{
  if (origType == null || TypesUtil.isVariable(origType))   return origType;
  SNode newType=origType;
  StructuralNodeSet<SNode> seen=new StructuralNodeSet<SNode>();
  TypeSubstitution typeSubs=myTypeCheckingContext.getSubstitution(origType);
  while (typeSubs != null && typeSubs.isValid()) {
    newType=typeSubs.getNewNode();
    if (seen.containsStructurally(newType)) {
      break;
    }
    seen.addStructurally(newType);
    executeOperation(new SubstituteTypeOperation(typeSubs));
    typeSubs=myTypeCheckingContext.getSubstitution(newType);
  }
  return newType;
}
