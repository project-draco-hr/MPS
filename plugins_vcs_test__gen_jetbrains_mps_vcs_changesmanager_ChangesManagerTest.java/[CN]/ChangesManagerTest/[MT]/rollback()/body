{
  final List<VcsException> exceptions=ListSequence.fromList(new ArrayList<VcsException>());
  doSomethingAndWaitForFileStatusChange(new Runnable(){
    public void run(){
      myGitVcs.getRollbackEnvironment().rollbackChanges(Arrays.asList(myChangeListManager.getChange(myUtilVirtualFile)),exceptions,RollbackProgressListener.EMPTY);
    }
  }
,myUtilVirtualFile,null);
  if (ListSequence.fromList(exceptions).isNotEmpty()) {
    throw ListSequence.fromList(exceptions).first();
  }
  waitForChangesManager();
  Assert.assertTrue(ListSequence.fromList(check_4gxggu_a0a5a51(myUtilDiff.getChangeSet())).isEmpty());
  SetSequence.fromSet(MapSequence.fromMap(myExpectedFileStatuses).keySet()).where(new IWhereFilter<String>(){
    public boolean accept(    String k){
      return k.startsWith("util.");
    }
  }
).toListSequence().visitAll(new IVisitor<String>(){
    public void visit(    String k){
      MapSequence.fromMap(myExpectedFileStatuses).removeKey(k);
    }
  }
);
  checkRootStatuses();
}
