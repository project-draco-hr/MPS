{
  final Wrappers._T<SNode> root=new Wrappers._T<SNode>();
  doSomethingAndUndo(myUiDiff,new _FunctionTypes._return_P0_E0<SNode>(){
    public SNode invoke(){
      SModel model=myUiDiff.getModelDescriptor();
      root.value=createNewRoot(model);
      MapSequence.fromMap(myExpectedFileStatuses).put("ui.NewRoot",FileStatus.ADDED);
      return (SNode)null;
    }
  }
,new _FunctionTypes._return_P0_E0<SNode>(){
    public SNode invoke(){
      SPropertyOperations.set(root.value,"name","NewRootName");
      MapSequence.fromMap(myExpectedFileStatuses).removeKey("ui.NewRootName");
      MapSequence.fromMap(myExpectedFileStatuses).put("ui.NewRootName",FileStatus.ADDED);
      return root.value;
    }
  }
);
}
