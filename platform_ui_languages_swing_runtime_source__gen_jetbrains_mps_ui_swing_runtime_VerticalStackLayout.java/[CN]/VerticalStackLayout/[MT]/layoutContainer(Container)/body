{
synchronized (container.getTreeLock()) {
    Insets ins=container.getInsets();
    Dimension box=container.getSize();
    int width=box.width - ins.left - ins.top;
    int height=box.height - ins.top - ins.bottom;
    Component selected=null;
    for (    Component cmp : container.getComponents()) {
      if (this.isSelected(cmp)) {
        selected=cmp;
      }
 else {
        Dimension ps=cmp.getPreferredSize();
        height-=ps.height;
      }
    }
    int x=ins.left;
    int y=ins.top;
    for (    Component cmp : container.getComponents()) {
      if (selected == cmp) {
        cmp.setBounds(x,y,width,height);
        y+=height;
      }
 else {
        Dimension ps=cmp.getPreferredSize();
        cmp.setBounds(x,y,width,ps.height);
        y+=ps.height;
      }
    }
  }
}
