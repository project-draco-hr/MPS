{
  if (node1 == node2)   return true;
  if (node1 == null) {
    return false;
  }
  if (node2 == null) {
    return false;
  }
  if (node1.getClass() != node2.getClass())   return false;
  Set<String> node1PropertyNames=node1.getPropertyNames();
  Set<String> node2PropertyNames=node2.getPropertyNames();
  if (node1PropertyNames.size() != node2PropertyNames.size())   return false;
  for (  String propertyName : node1PropertyNames) {
    String propertyValue1=node1.getProperty(propertyName);
    String propertyValue2=node2.getProperty(propertyName);
    if (!EqualUtil.equals(propertyValue2,propertyValue1))     return false;
  }
  Set<String> node1ReferenceRoles=node1.getReferenceRoles();
  Set<String> node2ReferenceRoles=node2.getReferenceRoles();
  if (node1ReferenceRoles.size() != node2ReferenceRoles.size())   return false;
  for (  String role : node1ReferenceRoles) {
    SNode referent1=node1.getReferent(role);
    SNode referent2=node2.getReferent(role);
    if (!EqualUtil.equals(referent1,referent2))     return false;
  }
  return true;
}
