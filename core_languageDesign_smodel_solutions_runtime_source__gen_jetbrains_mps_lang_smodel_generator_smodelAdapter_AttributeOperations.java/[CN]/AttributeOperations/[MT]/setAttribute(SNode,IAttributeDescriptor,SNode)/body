{
  Iterable<SNode> oldlist=getAttributes(node,descriptor);
  if (Sequence.fromIterable(oldlist).isEmpty()) {
    if ((value == null)) {
      return null;
    }
    addAttribute(node,descriptor,value);
  }
 else   if ((value == null)) {
    deleteAttribute(node,descriptor,value);
  }
 else {
    descriptor.update(value);
  }
  return value;
}
