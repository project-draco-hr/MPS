{
  Set<SNode> result=new HashSet<SNode>();
  if (term == null)   return result;
  Set<SupertypingRule> supertypingRules=myConceptsToSupertypingRulesCache.get(term.getNodeConceptAdapter());
  if (supertypingRules == null)   return result;
  for (  SupertypingRule rule : supertypingRules) {
    AnalyzedTermDeclaration applicableNode=rule.getApplicableNode();
    if (applicableNode == null)     continue;
    Expression expression=rule.getSubtype();
    if (expression == null)     continue;
    List<SNode> subtypes=getSupertypesOrSubtypes(term,applicableNode,expression);
    if (subtypes != null) {
      result.addAll(subtypes);
    }
  }
  return result;
}
