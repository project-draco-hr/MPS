{
  ExpressionContext expressionContext=new ExpressionContext();
  VariableCondition termCondition=analyzedTermDeclaration.getCondition();
  if (termCondition instanceof QueryPattern) {
    ConditionMatcher conditionMatcher;
    try {
      conditionMatcher=new ConditionMatcher(termCondition);
    }
 catch (    InvalidConditionException ex) {
      error("invalid condition",ex);
      return null;
    }
    if (!(conditionMatcher.matchesCondition(term,expressionContext)))     return null;
  }
  expressionContext.putNode(analyzedTermDeclaration,term);
  Object supertypeO=ExpressionEvaluatorManager.evaluate(expressionContext,targetExpression);
  if (supertypeO instanceof SNode) {
    List<SNode> result=new ArrayList<SNode>();
    result.add((SNode)supertypeO);
    return result;
  }
  if (supertypeO instanceof List) {
    boolean isCorrect=true;
    for (    Object o : (List)supertypeO) {
      if (!(o instanceof SNode)) {
        isCorrect=false;
        break;
      }
    }
    if (isCorrect)     return (List<SNode>)supertypeO;
  }
  return null;
}
