{
synchronized (this) {
    ensureBoundsCalculated();
    for (    IMapping<ChangeGroup,Tuples._2<Bounds,Bounds>> groupWithBounds : MapSequence.fromMap(myGroupsWithBounds)) {
      Bounds left=groupWithBounds.value()._0();
      Bounds right=groupWithBounds.value()._1();
      int[] xx=new int[]{0,getWidth(),getWidth(),0};
      int[] yy=new int[]{(int)left.start(),(int)right.start(),(int)right.end(),(int)left.end()};
      g.setColor(ChangeColors.get(groupWithBounds.key().getChangeType()));
      g.fillPolygon(xx,yy,4);
      g.setColor(Color.GRAY);
      g.drawLine(0,(int)left.start(),getWidth() - 1,(int)right.start());
      g.drawLine(0,(int)left.end(),getWidth() - 1,(int)right.end());
    }
  }
}
