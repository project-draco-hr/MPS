{
  BasicConfigurator.configure(new NullAppender());
  Logger.getRootLogger().setLevel(getLog4jLevel());
  jetbrains.mps.logging.Logger.addLoggingHandler(myMessageHandler);
  IdeMain.setTestMode(TestMode.CORE_TEST);
  try {
    configureMPS("jetbrains.mps.vcs","jetbrains.mps.ide.editor");
  }
 catch (  Exception ex) {
    throw new RuntimeException(ex);
  }
  myWasFileSystemProvider=FileSystem.getInstance().getFileSystemProvider();
  FileSystem.getInstance().setFileSystemProvider(new IoFileSystemProvider());
  setMacro();
  loadLibraries();
  make();
  reload();
}
