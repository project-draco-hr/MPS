{
  ModelAccess.assertLegalWrite();
  if (modelRoot instanceof FileSystemListener) {
    myListenerDependencies.add((FileSystemListener)modelRoot);
  }
 else   if (modelRoot != null && modelRoot.getModule() instanceof FileSystemListener) {
    myListenerDependencies.add((FileSystemListener)modelRoot.getModule());
  }
  IFile file=FileSystem.getInstance().getFileByPath(path);
  PathListener listener=new PathListener(file);
synchronized (LOCK) {
    myPaths.put(path,listener);
    if (!(myListeners.isEmpty())) {
      FileSystem.getInstance().addListener(listener);
    }
  }
}
