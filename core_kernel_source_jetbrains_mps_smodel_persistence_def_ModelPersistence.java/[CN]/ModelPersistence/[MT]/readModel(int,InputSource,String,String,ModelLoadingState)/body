{
  if (version > PersistenceSettings.MAX_VERSION) {
    SModel model=handleNullReaderForPersistence(name);
    return new ModelLoadResult(model,ModelLoadingState.NOT_LOADED);
  }
 else   if (version > 5) {
    try {
      SAXParser parser=JDOMUtil.createSAXParser();
      DefaultMPSHandler handler=getModelPersistence(version).getModelReaderHandler();
      boolean partial=handler.setPartialLoading(state);
      try {
        parser.parse(source,(DefaultHandler)handler);
      }
 catch (      SAXException e) {
      }
      ModelLoadingState loadingState=partial ? state : ModelLoadingState.FULLY_LOADED;
      return new ModelLoadResult(handler.getModel(),loadingState);
    }
 catch (    Throwable t) {
      LOG.error(t);
      StubModel model=new StubModel(new SModelReference(name,stereotype));
      return new ModelLoadResult(model,ModelLoadingState.NOT_LOADED);
    }
  }
 else {
    Document document=loadModelDocument(source);
    IModelReader modelReader=getModelPersistence(version).getModelReader();
    if (modelReader == null) {
      SModel model=handleNullReaderForPersistence(name);
      return new ModelLoadResult(model,ModelLoadingState.NOT_LOADED);
    }
    SModel model=modelReader.readModel(document,name,stereotype);
    return new ModelLoadResult(model,ModelLoadingState.FULLY_LOADED);
  }
}
