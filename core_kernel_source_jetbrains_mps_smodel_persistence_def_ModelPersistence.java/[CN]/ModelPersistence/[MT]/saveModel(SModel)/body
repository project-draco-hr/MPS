{
  int persistenceVersion=sourceModel.getPersistenceVersion();
  if (persistenceVersion == -1) {
    persistenceVersion=getCurrentPersistenceVersion();
    sourceModel.setPersistenceVersion(persistenceVersion);
  }
  IModelPersistence modelPersistence=getModelPersistence(sourceModel.getSModelHeader());
  if (modelPersistence == null) {
    modelPersistence=getCurrentModelPersistence();
  }
  sourceModel.calculateImplicitImports();
  return modelPersistence.getModelWriter().saveModel(sourceModel);
}
