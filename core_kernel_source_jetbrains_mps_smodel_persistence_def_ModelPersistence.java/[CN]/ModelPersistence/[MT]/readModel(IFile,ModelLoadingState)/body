{
  String name=file.getName();
  String modelName=extractModelName(name);
  String modelStereotype=extractModelStereotype(name);
  try {
    InputSource source=JDOMUtil.loadSource(file);
    int version=getModelPersistenceVersion(source);
    return readModel(version,JDOMUtil.loadSource(file),modelName,modelStereotype,state);
  }
 catch (  Throwable t) {
    LOG.error("Error while loading model from file: " + file.getAbsolutePath(),t);
    StubModel model=new StubModel(new SModelReference(modelName,modelStereotype));
    return new ModelLoadResult(model,ModelLoadingState.NOT_LOADED);
  }
}
