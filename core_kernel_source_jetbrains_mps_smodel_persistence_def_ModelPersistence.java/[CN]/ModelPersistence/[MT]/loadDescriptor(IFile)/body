{
  final DescriptorLoadResult result=new DescriptorLoadResult();
  Map<String,String> metadata=loadMetadata(file);
  if (metadata != null) {
    result.setMetadata(metadata);
  }
  DefaultHandler handler=new DefaultHandler(){
    public void startElement(    String uri,    String localName,    String qName,    Attributes attributes) throws SAXException {
      if (MODEL.equals(qName)) {
        String uid=attributes.getValue(MODEL_UID);
        if (uid != null) {
          result.setUID(uid);
        }
      }
 else       if (PERSISTENCE.equals(qName)) {
        String s=attributes.getValue(PERSISTENCE_VERSION);
        if (s != null) {
          try {
            result.setPersistenceVersion(Integer.parseInt(s));
          }
 catch (          NumberFormatException ex) {
          }
        }
      }
 else {
        throw new SAXException();
      }
    }
    public void endElement(    String uri,    String localName,    String qName) throws SAXException {
      throw new SAXException();
    }
  }
;
  try {
    InputSource source=JDOMUtil.loadSource(file);
    SAXParser parser=JDOMUtil.createSAXParser();
    parser.parse(source,handler);
  }
 catch (  SAXException ex) {
  }
catch (  ParserConfigurationException e) {
  }
catch (  Throwable t) {
  }
  return result;
}
