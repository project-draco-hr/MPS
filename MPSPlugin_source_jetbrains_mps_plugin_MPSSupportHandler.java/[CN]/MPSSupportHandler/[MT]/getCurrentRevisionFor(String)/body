{
  final String[] result=new String[1];
  executeWriteAction(new Runnable(){
    public void run(){
      try {
        ProjectLevelVcsManager manager=myProject.getComponent(ProjectLevelVcsManager.class);
        VirtualFile file=LocalFileSystem.getInstance().findFileByIoFile(new File(path));
        AbstractVcs vcs=manager.getVcsFor(file);
        VcsHistorySession session=vcs.getVcsHistoryProvider().createSessionFor(new FilePathImpl(file));
        result[0]=session.getCurrentRevisionNumber().asString();
      }
 catch (      VcsException e) {
        e.printStackTrace();
      }
    }
  }
);
  return result[0];
}
