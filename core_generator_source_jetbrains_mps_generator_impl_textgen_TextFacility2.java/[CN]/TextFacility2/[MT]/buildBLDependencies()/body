{
  ModelDependencies modelDependencies=new ModelDependencies();
  for (  TextUnit tu : myTextResult.getUnits()) {
    if (tu.getState() == TextUnit.Status.Empty) {
      continue;
    }
    if (!(tu instanceof CompatibilityTextUnit)) {
      continue;
    }
    final TextGenerationResult result=((CompatibilityTextUnit)tu).getLegacyResult();
    if (result.hasDependencies()) {
      final SNode root=tu.getStartNode();
      modelDependencies.addDependencies(new RootDependencies(NameUtil.nodeFQName(root),tu.getFileName(),result.getDependencies(TextGen.DEPENDENCY),result.getDependencies(TextGen.EXTENDS)));
    }
  }
  return modelDependencies;
}
