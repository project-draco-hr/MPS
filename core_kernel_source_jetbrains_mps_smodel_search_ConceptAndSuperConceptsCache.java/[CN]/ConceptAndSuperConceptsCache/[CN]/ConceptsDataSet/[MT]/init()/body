{
  Set<AbstractConceptDeclaration> result=new LinkedHashSet<AbstractConceptDeclaration>();
  collectImplementedAndExtended(myTopConcept,result);
  result.add(SModelUtil_new.getBaseConcept());
  myConcepts=result.toArray(new AbstractConceptDeclaration[result.size()]);
  myDependsOnNodes=new HashSet<SNode>(myConcepts.length * 2);
  for (  AbstractConceptDeclaration concept : myConcepts) {
    myDependsOnNodes.add(concept.getNode());
    if (concept instanceof InterfaceConceptDeclaration) {
      for (      InterfaceConceptReference i : ((InterfaceConceptDeclaration)concept).getExtendses()) {
        myDependsOnNodes.add(i.getNode());
      }
    }
    if (concept instanceof ConceptDeclaration) {
      for (      InterfaceConceptReference i : ((ConceptDeclaration)concept).getImplementses()) {
        myDependsOnNodes.add(i.getNode());
      }
    }
  }
}
