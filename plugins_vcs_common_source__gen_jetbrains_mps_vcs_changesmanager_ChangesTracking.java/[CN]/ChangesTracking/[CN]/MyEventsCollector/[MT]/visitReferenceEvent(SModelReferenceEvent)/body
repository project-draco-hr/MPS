{
  SReference ref=event.getReference();
  final SNode sourceNode=ref.getSourceNode();
  if (sourceNode.getModel() == null) {
    return;
  }
  final SNodeId nodeId=sourceNode.getNodeId();
  final SReferenceLink role=ref.getLink();
  runUpdateTask(new _FunctionTypes._void_P0_E0(){
    public void invoke(){
      removeChanges(nodeId,SetReferenceChange.class,new _FunctionTypes._return_P1_E0<Boolean,SetReferenceChange>(){
        public Boolean invoke(        SetReferenceChange ch){
          return ch.isAbout(role);
        }
      }
);
      buildAndAddChanges(new _FunctionTypes._void_P1_E0<ChangeSetBuilder>(){
        public void invoke(        ChangeSetBuilder b){
          b.buildForReference(getOldNode(nodeId),sourceNode,role);
        }
      }
);
    }
  }
,event.getReference().getSourceNode(),event);
}
