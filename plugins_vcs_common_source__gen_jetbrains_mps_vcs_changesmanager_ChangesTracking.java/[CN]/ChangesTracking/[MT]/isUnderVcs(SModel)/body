{
  DataSource ds=model.getSource();
  IFile file=null;
  if (ds instanceof FileDataSource) {
    file=((FileDataSource)ds).getFile();
  }
 else   if (ds instanceof FilePerRootDataSource) {
    file=((FilePerRootDataSource)ds).getFile(FilePerRootDataSource.HEADER_FILE);
  }
  if (!(file instanceof IdeaFile)) {
    if (LOG.isEnabledFor(Level.WARN)) {
      LOG.warn("File " + file + " must be a project file and managed by IDEA FS");
    }
    return false;
  }
  VirtualFile vFile=((IdeaFile)file).getVirtualFile();
  return vFile != null && ProjectLevelVcsManager.getInstance(myProject).getVcsFor(vFile) != null;
}
