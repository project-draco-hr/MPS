{
  if (targetModel == null)   return Collections.emptyList();
  List<Pair<SNode,String>> result=new ArrayList<Pair<SNode,String>>();
  for (  final Pair<SNodeReference,String> node : sourceNodes) {
    SNode snode=node.o1.resolve(MPSModuleRepository.getInstance());
    if (snode == null)     continue;
    if (EqualUtil.equals(virtualPackage + node.o2,getVirtualPackage(snode)))     continue;
    SModel sourceModel=snode.getModel().getModelDescriptor();
    if (EqualUtil.equals(sourceModel,targetModel)) {
      result.add(new Pair(snode,node.o2));
    }
  }
  return result;
}
