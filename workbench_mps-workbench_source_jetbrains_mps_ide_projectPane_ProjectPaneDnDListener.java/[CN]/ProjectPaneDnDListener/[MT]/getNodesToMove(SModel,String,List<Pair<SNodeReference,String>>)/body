{
  final SRepository repo=targetModel.getRepository();
  List<Pair<SNode,String>> result=new ArrayList<Pair<SNode,String>>();
  for (  final Pair<SNodeReference,String> node : sourceNodes) {
    SNode snode=node.o1.resolve(repo);
    if (snode == null)     continue;
    if (EqualUtil.equals(virtualPackage + node.o2,getVirtualPackage(snode)))     continue;
    SModel sourceModel=snode.getModel();
    if (EqualUtil.equals(sourceModel,targetModel)) {
      result.add(new Pair<SNode,String>(snode,node.o2));
    }
  }
  return result;
}
