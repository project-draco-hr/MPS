{
  if (parentMap.containsKey(node)) {
    return;
  }
  ListSequence.fromList(visibleArtifacts).addElement(node);
  parentMap.put(node,parent);
  if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),7389400916848004876l,"jetbrains.mps.build.structure.BuildLayout_AbstractContainer"))) {
    for (    SNode child : SLinkOperations.getChildren(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),7389400916848004876l,"jetbrains.mps.build.structure.BuildLayout_AbstractContainer")),MetaAdapterFactory.getContainmentLink(new UUID(8755280088213897754l,-5075149991798053422l),4701820937132344003l,7389400916848037006l,"children"))) {
      collectInLayout(node,child);
    }
  }
 else   if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),5610619299013057363l,"jetbrains.mps.build.structure.BuildLayout_ImportContent"))) {
    SNode target=SNodeOperations.as(toOriginalNode(SLinkOperations.getTarget(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),5610619299013057363l,"jetbrains.mps.build.structure.BuildLayout_ImportContent")),MetaAdapterFactory.getReferenceLink(new UUID(8755280088213897754l,-5075149991798053422l),5610619299013057363l,5610619299013057365l,"target"))),MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),7389400916848004876l,"jetbrains.mps.build.structure.BuildLayout_AbstractContainer"));
    if (target != null) {
      for (      SNode child : ListSequence.fromList(SLinkOperations.getChildren(target,MetaAdapterFactory.getContainmentLink(new UUID(8755280088213897754l,-5075149991798053422l),4701820937132344003l,7389400916848037006l,"children")))) {
        collectInLayout(parent,child);
      }
    }
  }
 else   if (SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),841011766565753074l,"jetbrains.mps.build.structure.BuildLayout_Import"))) {
    SNode target=SNodeOperations.as(toOriginalNode(SLinkOperations.getTarget(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),841011766565753074l,"jetbrains.mps.build.structure.BuildLayout_Import")),MetaAdapterFactory.getReferenceLink(new UUID(8755280088213897754l,-5075149991798053422l),841011766565753074l,841011766565753076l,"target"))),MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),7389400916848036997l,"jetbrains.mps.build.structure.BuildLayout_Node"));
    if (target != null) {
      collectInLayout(parent,target);
    }
  }
}
