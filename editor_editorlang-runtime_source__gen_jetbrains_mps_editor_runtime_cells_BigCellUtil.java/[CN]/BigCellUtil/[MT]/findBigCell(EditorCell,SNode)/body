{
  SNode cellNode=cell.getSNode();
  if (cellNode == node) {
    return cell;
  }
  if (!(SConceptOperations.isSubConceptOf(SNodeOperations.asSConcept(SNodeOperations.getConceptDeclaration(cellNode)),MetaAdapterFactory.getConcept(new UUID(-3554657779850784990l,-7236703803128771572l),3364660638048049750l,"jetbrains.mps.lang.core.structure.PropertyAttribute"))) && !(SConceptOperations.isSubConceptOf(SNodeOperations.asSConcept(SNodeOperations.getConceptDeclaration(cellNode)),MetaAdapterFactory.getConcept(new UUID(-3554657779850784990l,-7236703803128771572l),3364660638048049745l,"jetbrains.mps.lang.core.structure.LinkAttribute")))) {
    return cell;
  }
  Queue<EditorCell> cellQueue=QueueSequence.fromQueue(new LinkedList<EditorCell>());
  QueueSequence.fromQueue(cellQueue).addLastElement(cell);
  while (QueueSequence.fromQueue(cellQueue).isNotEmpty()) {
    EditorCell nextCell=QueueSequence.fromQueue(cellQueue).removeFirstElement();
    if (nextCell.getSNode() == node) {
      return nextCell;
    }
    if (nextCell instanceof EditorCell_Collection) {
      for (      EditorCell childCell : Sequence.fromIterable(((EditorCell_Collection)nextCell))) {
        QueueSequence.fromQueue(cellQueue).addLastElement(childCell);
      }
    }
  }
  return null;
}
