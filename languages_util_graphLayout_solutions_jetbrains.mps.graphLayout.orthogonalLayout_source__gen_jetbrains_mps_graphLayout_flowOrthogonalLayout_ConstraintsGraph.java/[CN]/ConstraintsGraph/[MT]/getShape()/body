{
  Map<Node,Node> horNodeMap=MapSequence.<Node,Node>fromMap(new HashMap<Node,Node>());
  Graph horConstraintsGraph=getDirectionConstraintsGraph(new _FunctionTypes._return_P1_E0<Boolean,Direction2D>(){
    public Boolean invoke(    Direction2D dir){
      return dir.isHorizontal();
    }
  }
,horNodeMap);
  Map<Node,Node> verNodeMap=MapSequence.<Node,Node>fromMap(new HashMap<Node,Node>());
  Graph verConstraintsGraph=getDirectionConstraintsGraph(new _FunctionTypes._return_P1_E0<Boolean,Direction2D>(){
    public Boolean invoke(    Direction2D dir){
      return dir.isVertical();
    }
  }
,verNodeMap);
  Map<Edge,Edge> edgeMap=MapSequence.<Edge,Edge>fromMap(new HashMap<Edge,Edge>());
  for (  Edge edge : ListSequence.<Edge>fromList(myGraph.getEdges())) {
    Edge newEdge=connect(edge,Direction2D.RIGHT,verNodeMap);
    if (newEdge != null) {
      MapSequence.<Edge,Edge>fromMap(edgeMap).put(edge,newEdge);
    }
 else {
      MapSequence.<Edge,Edge>fromMap(edgeMap).put(edge,connect(edge,Direction2D.UP,horNodeMap));
    }
  }
  myHorConstraintsGraph=horConstraintsGraph;
  myVerConstraintsGraph=verConstraintsGraph;
  myHorNodeMap=horNodeMap;
  myVerNodeMap=verNodeMap;
  myEdgeMap=edgeMap;
  if (ConstraintsGraph.SHOW_INFO > 0) {
    System.out.println("constaints graph:");
    for (    Node node : ListSequence.<Node>fromList(myGraph.getNodes())) {
      System.out.println("node " + node);
      System.out.println("hor = " + MapSequence.<Node,Node>fromMap(horNodeMap).get(node) + ", ver = "+ MapSequence.<Node,Node>fromMap(verNodeMap).get(node));
    }
    System.out.println("horizontal constraints graph: " + horConstraintsGraph);
    System.out.println("vertical constraints graph: " + verConstraintsGraph);
  }
}
