{
  Map<Edge,Integer> edgeLengths=MapSequence.fromMap(new HashMap<Edge,Integer>());
  for (  Edge edge : ListSequence.fromList(myHorConstraintsGraph.getEdges())) {
    MapSequence.fromMap(edgeLengths).put(edge,myUnitLength);
  }
  for (  Edge edge : ListSequence.fromList(myVerConstraintsGraph.getEdges())) {
    MapSequence.fromMap(edgeLengths).put(edge,myUnitLength);
  }
  for (  Edge edge : SetSequence.fromSet(MapSequence.fromMap(predefinedEdgeLengths).keySet())) {
    Edge constraintEdge=MapSequence.fromMap(myEdgeMap).get(edge);
    MapSequence.fromMap(edgeLengths).put(constraintEdge,MapSequence.fromMap(predefinedEdgeLengths).get(edge));
  }
  for (  Edge edge : SetSequence.fromSet(MapSequence.fromMap(constraintEdgeLengths).keySet())) {
    MapSequence.fromMap(edgeLengths).put(edge,MapSequence.fromMap(constraintEdgeLengths).get(edge));
  }
  Map<Node,Integer> horNumbering=WeightedTopologicalNumbering.number(myHorConstraintsGraph,edgeLengths);
  Map<Node,Integer> verNumbering=WeightedTopologicalNumbering.number(myVerConstraintsGraph,edgeLengths);
  Map<Node,Point> coordinates=MapSequence.fromMap(new HashMap<Node,Point>());
  for (  Node node : ListSequence.fromList(myGraph.getNodes())) {
    Node horSeg=MapSequence.fromMap(myHorNodeMap).get(node);
    Node verSeg=MapSequence.fromMap(myVerNodeMap).get(node);
    MapSequence.fromMap(coordinates).put(node,new Point(MapSequence.fromMap(verNumbering).get(verSeg),MapSequence.fromMap(horNumbering).get(horSeg)));
  }
  return coordinates;
}
