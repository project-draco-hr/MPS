{
  Map<Edge,Integer> edgeLengths=MapSequence.<Edge,Integer>fromMap(new HashMap<Edge,Integer>());
  for (  Edge edge : ListSequence.<Edge>fromList(myHorConstraintsGraph.getEdges())) {
    MapSequence.<Edge,Integer>fromMap(edgeLengths).put(edge,myUnitLength);
  }
  for (  Edge edge : ListSequence.<Edge>fromList(myVerConstraintsGraph.getEdges())) {
    MapSequence.<Edge,Integer>fromMap(edgeLengths).put(edge,myUnitLength);
  }
  for (  Edge edge : SetSequence.<Edge>fromSet(MapSequence.fromMap(predefinedEdgeLengths).keySet())) {
    Edge constraintEdge=MapSequence.<Edge,Edge>fromMap(myEdgeMap).get(edge);
    MapSequence.<Edge,Integer>fromMap(edgeLengths).put(constraintEdge,MapSequence.<Edge,Integer>fromMap(predefinedEdgeLengths).get(edge));
  }
  for (  Edge edge : SetSequence.<Edge>fromSet(MapSequence.fromMap(constraintEdgeLengths).keySet())) {
    MapSequence.<Edge,Integer>fromMap(edgeLengths).put(edge,MapSequence.<Edge,Integer>fromMap(constraintEdgeLengths).get(edge));
  }
  Map<Node,Integer> horNumbering=WeightedTopologicalNumbering.number(myHorConstraintsGraph,edgeLengths);
  Map<Node,Integer> verNumbering=WeightedTopologicalNumbering.number(myVerConstraintsGraph,edgeLengths);
  Map<Node,Point> coordinates=MapSequence.<Node,Point>fromMap(new HashMap<Node,Point>());
  for (  Node node : ListSequence.<Node>fromList(myGraph.getNodes())) {
    Node horSeg=MapSequence.<Node,Node>fromMap(myHorNodeMap).get(node);
    Node verSeg=MapSequence.<Node,Node>fromMap(myVerNodeMap).get(node);
    MapSequence.<Node,Point>fromMap(coordinates).put(node,new Point(MapSequence.<Node,Integer>fromMap(verNumbering).get(verSeg),MapSequence.<Node,Integer>fromMap(horNumbering).get(horSeg)));
  }
  return coordinates;
}
