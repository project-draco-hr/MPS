{
  getShape();
  for (  Face face : ListSequence.<Face>fromList(myEmbeddedGraph.getFaces())) {
    if (myEmbeddedGraph.isOuterFace(face) || SetSequence.<Face>fromSet(facesToSkip).contains(face)) {
      continue;
    }
    makeShapeComplete(face);
  }
  if (ConstraintsGraph.DEBUG > 0) {
    if (TopologicalSorting.sort(myHorConstraintsGraph) == null) {
      throw new RuntimeException("horizontal constraints graph has cycles");
    }
    if (TopologicalSorting.sort(myVerConstraintsGraph) == null) {
      throw new RuntimeException("vertical constraints graph has cycles");
    }
  }
}
