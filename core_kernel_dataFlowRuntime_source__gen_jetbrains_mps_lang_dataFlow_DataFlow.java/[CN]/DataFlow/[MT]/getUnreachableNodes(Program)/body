{
  Set<Instruction> unreachable=program.getUnreachableInstructions();
  Set<SNode> unreachableNodes=new HashSet<SNode>();
  for (  Instruction i : unreachable) {
    if (!(DataFlow.mayBeUnreachable(i)) && i.getSource() != null) {
      SNode unreachableNode=(SNode)i.getSource();
      if (SNodeOperations.isInstanceOf(unreachableNode,"jetbrains.mps.baseLanguage.structure.Statement")) {
        unreachableNodes.add((SNode)i.getSource());
      }
 else {
        if (SNodeOperations.isInstanceOf(unreachableNode,"jetbrains.mps.baseLanguage.structure.StatementList")) {
          if (!(SNodeOperations.isInstanceOf(SNodeOperations.getParent(unreachableNode),"jetbrains.mps.baseLanguage.structure.Statement"))) {
            unreachableNodes.add((SNode)i.getSource());
          }
        }
 else {
          unreachableNodes.add(SNodeOperations.getAncestor(unreachableNode,"jetbrains.mps.baseLanguage.structure.Statement",true,false));
        }
      }
    }
  }
  return unreachableNodes;
}
