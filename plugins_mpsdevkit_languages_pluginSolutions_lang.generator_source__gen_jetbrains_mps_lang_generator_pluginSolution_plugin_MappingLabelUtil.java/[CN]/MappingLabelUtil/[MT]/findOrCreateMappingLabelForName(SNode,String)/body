{
  SNode mappingLabel=null;
  List<SNode> mappingConfigurations=SModelOperations.rootsIncludingImported(SNodeOperations.getModel(templateNode),MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,"jetbrains.mps.lang.generator.structure.MappingConfiguration"));
  for (  SNode mc : ListSequence.fromList(mappingConfigurations)) {
    for (    SNode ml : ListSequence.fromList(SLinkOperations.getChildren(mc,MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,0x1179be725f9L,"mappingLabel")))) {
      if (labelName.equals(SPropertyOperations.getString(ml,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x110396eaaa4L,0x110396ec041L,"name")))) {
        mappingLabel=ml;
        break;
      }
    }
  }
  if (mappingLabel == null) {
    SNode mc;
    List<SNode> localMCs=SModelOperations.roots(SNodeOperations.getModel(templateNode),MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,"jetbrains.mps.lang.generator.structure.MappingConfiguration"));
    if (ListSequence.fromList(localMCs).isNotEmpty()) {
      mc=ListSequence.fromList(localMCs).where(new IWhereFilter<SNode>(){
        public boolean accept(        SNode it){
          return ListSequence.fromList(SLinkOperations.getChildren(it,MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,0x1179be725f9L,"mappingLabel"))).isNotEmpty();
        }
      }
).first();
      if (mc == null) {
        mc=ListSequence.fromList(localMCs).first();
      }
    }
 else {
      mc=SNodeFactoryOperations.createNewRootNode(SNodeOperations.getModel(templateNode),SNodeFactoryOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,"jetbrains.mps.lang.generator.structure.MappingConfiguration")),null);
      SPropertyOperations.set(mc,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x110396eaaa4L,0x110396ec041L,"name"),"MappingLabels");
    }
    SNode newLabel=SNodeFactoryOperations.addNewChild(mc,MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,0x1179be725f9L,"mappingLabel"),SNodeFactoryOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x1179be47606L,"jetbrains.mps.lang.generator.structure.MappingLabelDeclaration")));
    SPropertyOperations.set(newLabel,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x110396eaaa4L,0x110396ec041L,"name"),labelName);
    mappingLabel=newLabel;
  }
  return mappingLabel;
}
