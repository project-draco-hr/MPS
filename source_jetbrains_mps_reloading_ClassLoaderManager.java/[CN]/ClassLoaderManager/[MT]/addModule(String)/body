{
  IModule module=MPSModuleRepository.getInstance().getModuleByUID(moduleUID);
  if (!myUseOSGI) {
    if (myRuntimeEnvironment.get(moduleUID) != null) {
      return;
    }
    RBundle b=new RBundle(module.getModuleUID(),module.getByteCodeLocator());
    for (    String dep : module.getExplicitlyDependOnModuleUIDs()) {
      b.addDependency(dep);
    }
    myRuntimeEnvironment.add(b);
  }
 else {
    if (module.getBundleHome() == null) {
      return;
    }
    module.createManifest();
    try {
      Bundle bundle=myBundleContext.installBundle("reference:file:/" + module.getBundleHome());
      myOSGIBundles.put(moduleUID,bundle);
      bundle.update();
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
}
