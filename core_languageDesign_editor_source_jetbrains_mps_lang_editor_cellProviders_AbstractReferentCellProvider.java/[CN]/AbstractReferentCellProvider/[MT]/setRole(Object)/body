{
  myLinkDeclaration=getSNode().getLinkDeclaration(role.toString());
  if (myLinkDeclaration == null) {
    myErrorText="?" + role.toString() + "?";
    LOG.error("can't find a link declaration '" + role.toString() + "' in "+ getSNode(),getSNode());
    return;
  }
  NodeReadAccessCaster.runReadTransparentAction(new Runnable(){
    public void run(){
      myGenuineLinkDeclaration=SModelUtil_new.getGenuineLinkDeclaration(myLinkDeclaration);
      myGenuineRole=myGenuineLinkDeclaration.getRole();
      myIsAggregation=myGenuineLinkDeclaration.getMetaClass() == LinkMetaclass.aggregation;
      Cardinality sourceCardinality=myGenuineLinkDeclaration.getSourceCardinality();
      myIsCardinality0=(sourceCardinality == Cardinality._0__1 || sourceCardinality == Cardinality._0__n);
      myIsCardinality1=(sourceCardinality == Cardinality._1 || sourceCardinality == Cardinality._1__n);
    }
  }
);
}
