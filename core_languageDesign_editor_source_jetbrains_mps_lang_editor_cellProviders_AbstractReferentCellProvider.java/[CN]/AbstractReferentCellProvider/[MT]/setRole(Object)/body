{
  myLinkDeclaration=BaseAdapter.fromAdapter(getSNode().getLinkDeclaration(role.toString()));
  if (myLinkDeclaration == null) {
    myErrorText="?" + role.toString() + "?";
    LOG.error("can't find a link declaration '" + role.toString() + "' in "+ getSNode(),getSNode());
    return;
  }
  NodeReadAccessCasterInEditor.runReadTransparentAction(new Runnable(){
    public void run(){
      myGenuineLinkDeclaration=(LinkDeclaration)BaseAdapter.fromNode(SModelUtil.getGenuineLinkDeclaration(myLinkDeclaration));
      myGenuineRole=myGenuineLinkDeclaration.getRole();
      myIsAggregation=myGenuineLinkDeclaration.getMetaClass() == LinkMetaclass.aggregation;
      Cardinality sourceCardinality=myGenuineLinkDeclaration.getSourceCardinality();
      myIsCardinality0=(sourceCardinality == Cardinality._0__1 || sourceCardinality == Cardinality._0__n);
      myIsCardinality1=(sourceCardinality == Cardinality._1 || sourceCardinality == Cardinality._1__n);
    }
  }
);
}
