{
  if (rebuild) {
    t.checkRootInTraceMode(true);
  }
  cleanUp();
  myEditorComponent=editorComponent;
  myTraceTree=new TypeSystemTraceTree(operationContext,t,node,this,editorComponent);
  this.myDetailsTree=myTraceTree.getDetailsTree();
  myStateTree=new TypeSystemStateTree(operationContext,myTraceTree.getState(),editorComponent);
  JBScrollPane traceScrollPane=new JBScrollPane(myTraceTree);
  traceScrollPane.setPreferredSize(new Dimension(400,700));
  JBScrollPane detailsScrollPane=new JBScrollPane(myDetailsTree);
  detailsScrollPane.setPreferredSize(new Dimension(400,200));
  JBScrollPane stateScrollPane=new JBScrollPane(myStateTree);
  stateScrollPane.setPreferredSize(new Dimension(400,900));
  JSplitPane leftHSplitPane=new JSplitPane(JSplitPane.VERTICAL_SPLIT);
  leftHSplitPane.setDividerLocation(0.8);
  leftHSplitPane.setResizeWeight(0.8);
  leftHSplitPane.setTopComponent(traceScrollPane);
  leftHSplitPane.setBottomComponent(detailsScrollPane);
  JSplitPane vSplitPane=new JSplitPane();
  vSplitPane.setDividerLocation(0.65);
  vSplitPane.setResizeWeight(0.65);
  vSplitPane.setLeftComponent(leftHSplitPane);
  vSplitPane.setRightComponent(stateScrollPane);
  this.removeAll();
  this.add(vSplitPane);
  this.add(myButtons,BorderLayout.NORTH);
  this.setVisible(true);
}
