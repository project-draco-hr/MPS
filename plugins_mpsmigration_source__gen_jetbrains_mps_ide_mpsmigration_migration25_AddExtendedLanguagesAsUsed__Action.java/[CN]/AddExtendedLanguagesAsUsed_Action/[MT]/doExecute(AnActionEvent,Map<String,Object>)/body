{
  try {
    for (    AbstractModule module : ListSequence.fromList(((MPSProject)MapSequence.fromMap(_params).get("project")).getProjectModules(AbstractModule.class))) {
      Collection<Language> usedNow=new GlobalModuleDependenciesManager(module).getUsedLanguages();
      for (      Language lang : CollectionSequence.fromCollection(usedNow)) {
        HashSet<Language> extLangs=new HashSet<Language>();
        lang.getDependenciesManager().collectAllExtendedLanguages(extLangs);
        for (        Language extLang : SetSequence.fromSet(extLangs)) {
          if (usedNow.contains(extLang)) {
            continue;
          }
          module.addUsedLanguage(extLang.getModuleReference());
        }
      }
      module.save();
    }
  }
 catch (  Throwable t) {
    if (LOG.isEnabledFor(Priority.ERROR)) {
      LOG.error("User's action execute method failed. Action:" + "AddExtendedLanguagesAsUsed",t);
    }
  }
}
