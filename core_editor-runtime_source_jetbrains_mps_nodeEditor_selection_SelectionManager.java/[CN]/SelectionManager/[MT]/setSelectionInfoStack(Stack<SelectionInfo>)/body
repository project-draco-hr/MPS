{
  Stack<Selection> newSelectionStack=new Stack<Selection>();
  for (  SelectionInfo nextSelectionInfo : selectionStack) {
    Selection selection=nextSelectionInfo.createSelection(myEditorComponent);
    if (selection == null) {
      newSelectionStack.clear();
      break;
    }
    newSelectionStack.push(selection);
  }
  if (isSameSelectionStack(newSelectionStack)) {
    return;
  }
  Selection oldSelection=getSelection();
  mySelectionStack.clear();
  for (  Selection nextSelection : newSelectionStack) {
    mySelectionStack.push(nextSelection);
  }
  doChangeSelection(oldSelection,getSelection());
}
