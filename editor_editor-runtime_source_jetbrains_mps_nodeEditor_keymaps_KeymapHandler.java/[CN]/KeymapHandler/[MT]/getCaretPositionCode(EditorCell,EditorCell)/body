{
  int actualCaretPosition=KeyMapAction.CARET_AT_ANY_POSITION;
  if (selectedCell instanceof EditorCell_Label) {
    EditorCell_Label label=(EditorCell_Label)selectedCell;
    if (isStrictlyFirstCaretPosition(label) && CellTraversalUtil.getFirstLeaf(keyMapCell) == selectedCell) {
      actualCaretPosition=KeyMapAction.CARET_AT_FIRST_POSITION;
    }
 else     if (isStrictlyLastCaretPosition(label) && CellTraversalUtil.getLastLeaf(keyMapCell) == selectedCell) {
      actualCaretPosition=KeyMapAction.CARET_AT_LAST_POSITION;
    }
 else {
      actualCaretPosition=KeyMapAction.CARET_AT_INTERMEDIATE_POSITION;
    }
  }
  return actualCaretPosition;
}
