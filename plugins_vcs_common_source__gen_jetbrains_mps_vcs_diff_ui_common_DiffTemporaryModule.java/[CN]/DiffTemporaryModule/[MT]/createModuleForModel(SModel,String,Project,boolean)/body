{
  SModelDescriptor md=model.getModelDescriptor();
  if (!(md instanceof SModel.FakeModelDescriptor)) {
    return;
  }
  IModule module=null;
  if (mergeResultModel) {
    org.jetbrains.mps.openapi.model.SModel mdInRepo=SModelRepository.getInstance().getModelDescriptor(model.getReference());
    if (mdInRepo != null) {
      module=mdInRepo.getModule();
    }
  }
  if (module == null) {
    module=new DiffTemporaryModule(model,version,project);
  }
  model.setModelDescriptor(new DiffTemporaryModule.DiffSModelDescriptor(module,model,mergeResultModel));
}
