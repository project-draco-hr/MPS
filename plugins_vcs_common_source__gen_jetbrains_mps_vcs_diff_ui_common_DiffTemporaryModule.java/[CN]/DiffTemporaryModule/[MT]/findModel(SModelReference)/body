{
  if (reference.equals(myModel.getSModelReference())) {
    return myModel.getModelDescriptor();
  }
  List<IScope> scopes=ListSequence.fromList(new ArrayList<IScope>());
  IScope ps=myProject.getScope();
  if (ps != null) {
    ListSequence.fromList(scopes).addElement(ps);
  }
  ListSequence.fromList(scopes).addElement(GlobalScope.getInstance());
  for (  IScope scope : ListSequence.fromList(scopes)) {
    SModelDescriptor md=scope.getModelDescriptor(reference);
    if (md != null) {
      return md;
    }
  }
  for (  IScope scope : ListSequence.fromList(scopes)) {
    SModelDescriptor md=IScopeUtils.getModelDescriptor(scope,reference.getSModelFqName());
    if (md != null) {
      return md;
    }
  }
  return null;
}
