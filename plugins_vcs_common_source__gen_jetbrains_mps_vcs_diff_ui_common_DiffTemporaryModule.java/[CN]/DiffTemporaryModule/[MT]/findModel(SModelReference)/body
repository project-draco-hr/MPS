{
  if (reference.equals(myModel.getReference())) {
    return myModel.getModelDescriptor();
  }
  List<IScope> scopes=ListSequence.fromList(new ArrayList<IScope>());
  IScope ps=myProject.getScope();
  if (ps != null) {
    ListSequence.fromList(scopes).addElement(ps);
  }
  ListSequence.fromList(scopes).addElement(GlobalScope.getInstance());
  for (  IScope scope : ListSequence.fromList(scopes)) {
    org.jetbrains.mps.openapi.model.SModel md=scope.getModelDescriptor(reference);
    if (md != null) {
      return md;
    }
  }
  for (  IScope scope : ListSequence.fromList(scopes)) {
    org.jetbrains.mps.openapi.model.SModel md=Sequence.fromIterable(((Iterable<org.jetbrains.mps.openapi.model.SModel>)ScopeOperations.getModelsByName(scope,reference.getModelName()))).first();
    if (md != null) {
      return md;
    }
  }
  return null;
}
