{
  if (context == null || !(context instanceof IncrementalTypecheckingContext))   return;
  ((IncrementalTypecheckingContext)context).runTypeCheckingAction(new Runnable(){
    @Override public void run(){
      IncrementalTypechecking typesComponent=context.getBaseNodeTypesComponent();
      if (!wasCheckedOnce || !typesComponent.isCheckedNonTypesystem()) {
        try {
          myMessagesChanged=true;
          context.setIsNonTypesystemComputation();
          typesComponent.applyNonTypesystemRulesToRoot(editorContext.getOperationContext(),context);
          typesComponent.setCheckedNonTypesystem();
        }
 catch (        Throwable t) {
          LOG.error(t);
          typesComponent.setCheckedNonTypesystem();
        }
 finally {
          context.resetIsNonTypesystemComputation();
        }
      }
      collectMessagesForNodesWithErrors(context,editorContext,messages);
    }
  }
);
}
