{
  if (context == null || !(context instanceof IncrementalTypecheckingContext))   return;
  if (cancellable.isCancelled()) {
    return;
  }
  ((IncrementalTypecheckingContext)context).runTypeCheckingAction(new Runnable(){
    @Override public void run(){
      IncrementalTypechecking typesComponent=context.getBaseNodeTypesComponent();
      if (!wasCheckedOnce || !typesComponent.isCheckedNonTypesystem()) {
        try {
          myMessagesChanged=true;
          context.setIsNonTypesystemComputation();
          if (typesComponent.applyNonTypesystemRulesToRoot(context,cancellable)) {
            typesComponent.setCheckedNonTypesystem();
          }
        }
 catch (        Throwable t) {
          LOG.error(null,t);
          typesComponent.setCheckedNonTypesystem();
        }
 finally {
          context.resetIsNonTypesystemComputation();
        }
      }
      collectMessagesForNodesWithErrors(context,editorContext,messages,false,applyQuickFixes);
    }
  }
);
}
