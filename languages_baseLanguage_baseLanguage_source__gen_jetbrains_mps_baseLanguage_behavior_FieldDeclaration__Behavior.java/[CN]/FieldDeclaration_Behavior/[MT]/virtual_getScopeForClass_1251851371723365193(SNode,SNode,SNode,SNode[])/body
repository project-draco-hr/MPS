{
  if (ClassifierScopeUtils.isHierarchyCyclic(classNode)) {
    return new EmptyScope();
  }
  Scope fields=new NamedElementsScope(SLinkOperations.getTargets(classNode,"field",true));
  if ((extendsClass != null)) {
    return Scopes.defaultWithNameHiding(SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.FieldDeclaration"),fields,new LazyScope(new _FunctionTypes._return_P0_E0<Scope>(){
      public Scope invoke(){
        return ((Scope)BehaviorManager.getInstance().invoke(Object.class,extendsClass,"virtual_getVisibleMembers_8083692786967356611",new Class[]{SNode.class,SNode.class,SNode.class},classNode,SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.FieldDeclaration")));
      }
    }
));
  }
 else {
    return fields;
  }
}
