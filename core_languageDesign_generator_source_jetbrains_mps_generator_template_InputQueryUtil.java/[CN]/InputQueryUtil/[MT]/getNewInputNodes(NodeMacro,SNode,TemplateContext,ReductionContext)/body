{
  try {
    if (nodeMacro instanceof LoopMacro) {
      return getNewInputNodes(currentInputNode,(SourceSubstituteMacro)nodeMacro,((LoopMacro)nodeMacro).getSourceNodesQuery(),context,reductionContext);
    }
 else     if (nodeMacro instanceof CopySrcListMacro) {
      return getNewInputNodes(currentInputNode,(SourceSubstituteMacro)nodeMacro,((CopySrcListMacro)nodeMacro).getSourceNodesQuery(),context,reductionContext);
    }
 else     if (nodeMacro instanceof MapSrcListMacro) {
      return getNewInputNodes(currentInputNode,(SourceSubstituteMacro)nodeMacro,((MapSrcListMacro)nodeMacro).getSourceNodesQuery(),context,reductionContext);
    }
    if (nodeMacro instanceof CopySrcNodeMacro) {
      SNode newInputNode=getNewInputNode(currentInputNode,(SourceSubstituteMacro)nodeMacro,((CopySrcNodeMacro)nodeMacro).getSourceNodeQuery(),false,context,reductionContext);
      return wrapAsList(newInputNode);
    }
 else     if (nodeMacro instanceof MapSrcNodeMacro) {
      SNode newInputNode=getNewInputNode(currentInputNode,(SourceSubstituteMacro)nodeMacro,((MapSrcNodeMacro)nodeMacro).getSourceNodeQuery(),true,context,reductionContext);
      return wrapAsList(newInputNode);
    }
    if (nodeMacro instanceof SwitchMacro) {
      throw new GenerationFailureException("SwitchMacro is not supported by getNewInputNodes",currentInputNode,nodeMacro.getNode(),null);
    }
 else     if (nodeMacro instanceof IncludeMacro) {
      throw new GenerationFailureException("IncludeMacro is not supported by getNewInputNodes",currentInputNode,nodeMacro.getNode(),null);
    }
 else     if (nodeMacro instanceof TemplateCallMacro) {
      throw new GenerationFailureException("TemplateCallMacro is not supported by getNewInputNodes",currentInputNode,nodeMacro.getNode(),null);
    }
    return Collections.singletonList(currentInputNode);
  }
 catch (  Throwable t) {
    throw new GenerationFailureException("couldn't get input nodes",currentInputNode,nodeMacro.getNode(),null,t);
  }
}
