{
  try {
    if (nodeMacro instanceof SwitchMacro) {
      return getNewInputNodeForSwitchMacro(currentInputNode,(SwitchMacro)nodeMacro,context,reductionContext);
    }
 else     if (nodeMacro instanceof IncludeMacro) {
      return getNewInputNode(currentInputNode,(SourceSubstituteMacro)nodeMacro,((IncludeMacro)nodeMacro).getSourceNodeQuery(),true,context,reductionContext);
    }
 else     if (nodeMacro instanceof TemplateCallMacro) {
      return getNewInputNode(currentInputNode,(SourceSubstituteMacro)nodeMacro,((TemplateCallMacro)nodeMacro).getSourceNodeQuery(),true,context,reductionContext);
    }
  }
 catch (  Throwable t) {
    throw new GenerationFailureException("couldn't get new input node",currentInputNode,nodeMacro.getNode(),null,t);
  }
  throw new GenerationFailureException("couldn't get new input node",currentInputNode,nodeMacro.getNode(),null);
}
