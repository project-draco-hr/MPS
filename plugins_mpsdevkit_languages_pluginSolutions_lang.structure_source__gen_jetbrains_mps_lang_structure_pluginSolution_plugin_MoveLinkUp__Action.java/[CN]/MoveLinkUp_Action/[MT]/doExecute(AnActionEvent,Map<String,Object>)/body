{
  final SNode targetConcept=MoveUpDialog.getConcept(event.getData(MPSCommonDataKeys.MPS_PROJECT).getProject(),event.getData(MPSCommonDataKeys.NODE),"link");
  ModelAccess modelAccess=event.getData(MPSCommonDataKeys.MPS_PROJECT).getRepository().getModelAccess();
  if (targetConcept == null) {
    return;
  }
  final Wrappers._T<SNode> currentConcept=new Wrappers._T<SNode>();
  final Wrappers._T<Language> currentLanguage=new Wrappers._T<Language>();
  modelAccess.executeCommandInEDT(new Runnable(){
    public void run(){
      currentConcept.value=SNodeOperations.getNodeAncestor(event.getData(MPSCommonDataKeys.NODE),MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"),false,false);
      if (currentConcept.value == null) {
        return;
      }
      if (!(SNodeUtil.isAccessible(event.getData(MPSCommonDataKeys.NODE),event.getData(MPSCommonDataKeys.MPS_PROJECT).getRepository()))) {
        return;
      }
      if (!(SNodeUtil.isAccessible(targetConcept,event.getData(MPSCommonDataKeys.MPS_PROJECT).getRepository()))) {
        return;
      }
      currentLanguage.value=Language.getLanguageFor(SNodeOperations.getModel(currentConcept.value));
    }
  }
);
  modelAccess.executeCommandInEDT(new Runnable(){
    public void run(){
      SNode newLink=SNodeOperations.copyNode(event.getData(MPSCommonDataKeys.NODE));
      ListSequence.fromList(SLinkOperations.getChildren(targetConcept,MetaAdapterFactory.getContainmentLink(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,0xf979c3ba6bL,"linkDeclaration"))).addElement(newLink);
      AttributeOperations.setAttribute(event.getData(MPSCommonDataKeys.NODE),new IAttributeDescriptor.NodeAttribute(MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x11d0a70ae54L,"jetbrains.mps.lang.structure.structure.DeprecatedNodeAnnotation")),createDeprecatedNodeAnnotation_1o7xz7_a0d0a0a8a0("The link was moved to superconcept \"" + BehaviorReflection.invokeVirtual(String.class,targetConcept,"virtual_getFqName_1213877404258",new Object[]{}) + "\""));
      String roleName=SPropertyOperations.getString(event.getData(MPSCommonDataKeys.NODE),MetaAdapterFactory.getProperty(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf98052f333L,"role"));
      SPropertyOperations.set(event.getData(MPSCommonDataKeys.NODE),MetaAdapterFactory.getProperty(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979bd086aL,0xf98052f333L,"role"),roleName + "_old");
      MigrationScriptBuilder builder=MigrationScriptBuilder.createMigrationScript(currentLanguage.value).setName("Move_link_" + roleName);
      builder.appendExecuteStatements(MoveLinkUp_Action.this.moveLinkStatements(currentConcept.value,targetConcept,event.getData(MPSCommonDataKeys.NODE),newLink,builder,event)).addMissingImports();
    }
  }
);
}
