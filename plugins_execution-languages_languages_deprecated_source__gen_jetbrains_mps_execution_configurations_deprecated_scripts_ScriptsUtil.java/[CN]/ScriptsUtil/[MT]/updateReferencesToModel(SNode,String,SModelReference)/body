{
  List<jetbrains.mps.smodel.SModel.ImportElement> imports=Sequence.fromIterable(ScriptsUtil.getImports(SNodeOperations.getModel(node),longName)).toListSequence();
  ListSequence.fromList(imports).visitAll(new IVisitor<jetbrains.mps.smodel.SModel.ImportElement>(){
    public void visit(    jetbrains.mps.smodel.SModel.ImportElement it){
      ((jetbrains.mps.smodel.SModel)SNodeOperations.getModel(node)).deleteModelImport(it.getModelReference());
    }
  }
);
  ((jetbrains.mps.smodel.SModel)SNodeOperations.getModel(node)).addModelImport(newModelReference,false);
  for (  SNode chileNode : ListSequence.fromList(SNodeOperations.getDescendants(node,null,true,new String[]{}))) {
    for (    SReference ref : Sequence.fromIterable(chileNode.getReferences())) {
      if (ref.getTargetSModelReference().getLongName().equals(longName)) {
        ((jetbrains.mps.smodel.SReference)ref).setTargetSModelReference(newModelReference);
      }
    }
  }
}
