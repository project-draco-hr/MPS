{
  List<SModel.ImportElement> imports=Sequence.fromIterable(ScriptsUtil.getImports(SNodeOperations.getModel(node),longName)).toListSequence();
  ListSequence.fromList(imports).visitAll(new IVisitor<SModel.ImportElement>(){
    public void visit(    SModel.ImportElement it){
      SNodeOperations.getModel(node).deleteModelImport(it.getModelReference());
    }
  }
);
  SNodeOperations.getModel(node).addModelImport(newModelReference,false);
  for (  SNode chileNode : ListSequence.fromList(SNodeOperations.getDescendants(node,null,true,new String[]{}))) {
    List<SReference> references=chileNode.getReferences();
    for (    SReference ref : ListSequence.fromList(references)) {
      if (ref.getTargetSModelReference().getLongName().equals(longName)) {
        ref.setTargetSModelReference(newModelReference);
      }
    }
  }
}
