{
  boolean found=false;
  for (  SNode childNode : ListSequence.fromList(SNodeOperations.getDescendants(node,null,true,new String[]{}))) {
    for (    SReference ref : Sequence.fromIterable(childNode.getReferences())) {
      String resolveInfo=((jetbrains.mps.smodel.SReference)ref).getResolveInfo();
      if (ref.getTargetSModelReference().getLongName().equals(modelLongName) && ((resolveInfo != null && resolveInfo.length() > 0) && resolveInfo.contains(classifierName))) {
        found=true;
        ((jetbrains.mps.smodel.SReference)ref).setTargetSModelReference(newModelReference);
        if (ref instanceof StaticReference) {
          ((StaticReference)ref).setTargetNodeId(newNodeToReference.getNodeId());
        }
      }
    }
  }
  if (found) {
    ((SModelInternal)SNodeOperations.getModel(node)).addModelImport(newModelReference,false);
  }
}
