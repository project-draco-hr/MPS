{
  if (modelDescriptor.getLoadingState() != ModelLoadingState.NOT_LOADED)   return;
  for (  final SNode root : modelDescriptor.getSModel().getRoots()) {
    final SNodePointer pointer=new SNodePointer(root);
    final VirtualFile vf=myVirtualFiles.get(pointer);
    if (vf == null)     continue;
    ModelAccess.instance().runCommandInEDT(new Runnable(){
      public void run(){
        fireBeforeFileDeletion(this,vf);
        fireFileDeleted(this,vf,vf.getName(),null);
        myVirtualFiles.remove(pointer);
      }
    }
);
  }
}
