{
  for (  StructureModification.Entry entry : ListSequence.fromList(data.getData())) {
    Sequence.fromIterable(entry.getDependentModels()).visitAll(new IVisitor<SModelReference>(){
      public void visit(      SModelReference it){
        data.addDependencyModel(it);
      }
    }
);
  }
  for (  IMapping<SModelReference,Integer> dependency : MapSequence.fromMap(data.getDependencies())) {
    EditableSModelDescriptor model=(EditableSModelDescriptor)SModelRepository.getInstance().getModelDescriptor(dependency.key());
    StructureModificationLog modificationLog=model.getStructureModificationLog();
    modificationLog.addStructureModification(data);
    model.setVersion(dependency.value() + 1);
    model.saveStructureModificationLog(modificationLog);
    SModelRepository.getInstance().markChanged(model,true);
  }
}
