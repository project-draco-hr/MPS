{
  if (value == null) {
    throw new NullPointerException("Shall not try to serialize null values");
  }
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  ModelOutputStream mos=new ModelOutputStream(bos);
  mos.writeModelReference(value.getModelReference());
  Collection<Entry> entries=value.getEntries();
  mos.writeInt(entries.size());
  for (  Entry e : entries) {
    mos.writeString(e.myName);
    mos.writeNodeId(e.myNode);
    mos.writeConcept(e.myConcept);
  }
  mos.close();
  byte[] data=bos.toByteArray();
  out.writeInt(data.length);
  out.write(data);
}
