{
  SourcePosition sourcePosition=breakpoint.getSourcePosition();
  String className=null;
  PsiClass psiClass=JVMNameUtil.getClassAt(sourcePosition);
  if (psiClass == null) {
    return null;
  }
  if (PsiUtil.isLocalOrAnonymousClass(psiClass)) {
    PsiClass parentClass=TopLevelParentClassProvider.getTopLevelParentClass(psiClass);
    if (parentClass == null) {
      return null;
    }
    className=JVMNameUtil.getNonAnonymousClassName(parentClass);
  }
 else {
    className=JVMNameUtil.getNonAnonymousClassName(psiClass);
  }
  if (className == null) {
    return null;
  }
  return new GeneratedSourcePosition(className,sourcePosition.getFile().getName(),breakpoint.getLineIndex() + 1).getNode();
}
