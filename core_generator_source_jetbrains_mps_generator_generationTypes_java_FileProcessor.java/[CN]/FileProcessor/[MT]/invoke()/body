{
  ModelAccess.instance().runReadInWriteAction(new Computable<Object>(){
    @Override public Object compute(){
      ApplicationManager.getApplication().invokeAndWait(new Runnable(){
        @Override public void run(){
          ModelAccess.instance().runReadInWriteWorker(new Runnable(){
            @Override public void run(){
              for (              FileAndContent filesAndContent : myFilesAndContents) {
                filesAndContent.save();
              }
              for (              IFile file : myFilesToDelete) {
                file.delete();
              }
              ModelGenerationStatusManager.getInstance().invalidateData(myModels);
            }
          }
);
        }
      }
,ModalityState.defaultModalityState());
      return null;
    }
  }
);
}
