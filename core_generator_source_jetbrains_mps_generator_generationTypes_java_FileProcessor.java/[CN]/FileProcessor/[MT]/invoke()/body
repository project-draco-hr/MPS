{
  ModelAccess.instance().runReadInWriteAction(new Computable<Object>(){
    @Override public Object compute(){
      Runnable task=new Runnable(){
        @Override public void run(){
          ModelAccess.instance().runReadInWriteWorker(new Runnable(){
            @Override public void run(){
              for (              FileAndContent filesAndContent : myFilesAndContents) {
                filesAndContent.save();
              }
              for (              IFile file : myFilesToDelete) {
                file.delete();
              }
              ModelGenerationStatusManager.getInstance().invalidateData(myModels);
            }
          }
);
        }
      }
;
      if (ApplicationManager.getApplication().isDispatchThread()) {
        task.run();
      }
 else {
        ApplicationManager.getApplication().invokeAndWait(task,ModalityState.defaultModalityState());
      }
      return null;
    }
  }
);
}
