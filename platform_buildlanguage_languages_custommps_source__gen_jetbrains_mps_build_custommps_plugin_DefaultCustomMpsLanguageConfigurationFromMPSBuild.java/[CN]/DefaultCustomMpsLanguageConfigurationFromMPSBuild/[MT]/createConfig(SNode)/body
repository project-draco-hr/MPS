{
  final Wrappers._T<SNode> layout=new Wrappers._T<SNode>();
  final Wrappers._boolean isApplicable=new Wrappers._boolean();
  final Wrappers._T<String> configurationId=new Wrappers._T<String>();
  final Wrappers._T<SNode> configuration=new Wrappers._T<SNode>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      layout.value=SNodeOperations.getAncestor(parameter,"jetbrains.mps.build.packaging.structure.MPSLayout",false,true);
      isApplicable.value=(layout.value != null);
      configuration.value=ListSequence.fromList(SLinkOperations.getTargets(layout.value,"configuration",true)).findFirst(new IWhereFilter<SNode>(){
        public boolean accept(        SNode it){
          return AbstractProjectComponent_Behavior.call_included_1213877333807(parameter,it);
        }
      }
);
      configurationId.value=configuration.value.getId();
    }
  }
);
  if (!(isApplicable.value)) {
    return;
  }
  DefaultCustomMpsLanguageConfigurationFromMPSBuild.this.setSourceElement(new MPSPsiElement(parameter));
{
    ConfigurationType configType=ContainerUtil.findInstance(Extensions.getExtensions(ConfigurationType.CONFIGURATION_TYPE_EP),new _FunctionTypes._return_P0_E0<Class<ConfigurationType>>(){
      public Class<ConfigurationType> invoke(){
        try {
          return (Class<ConfigurationType>)getClass().getClassLoader().loadClass("jetbrains.mps.buildlanguage.plugin.BuildLanguage_ConfigurationType");
        }
 catch (        ClassNotFoundException cl) {
          return (Class<ConfigurationType>)null;
        }
      }
    }
.invoke());
    DefaultCustomMpsApplication_Configuration _config=new DefaultCustomMpsApplication_Configuration(DefaultCustomMpsLanguageConfigurationFromMPSBuild.this.getContext().getProject(),findFactory(configType,"DefaultCustomMpsApplication"),"NewConfig");
    _config.setName(SPropertyOperations.getString(layout.value,"") + ".mpsbuild." + SPropertyOperations.getString(configuration.value,""));
    _config.getStateObject().nodeId=layout.value.getId();
    _config.getStateObject().modelId=layout.value.getModel().getModelDescriptor().getSModelReference().toString();
    _config.getStateObject().configurationId=configurationId.value;
    DefaultCustomMpsLanguageConfigurationFromMPSBuild.this.myConfig=_config;
  }
}
