{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      callback.run();
      final int n=new Random().nextInt();
      SNode nodeWithClosure=SConceptOperations.createNewNode("jetbrains.mps.console.base.structure.NodeWithClosure",null);
      SPropertyOperations.set(nodeWithClosure,"text","action" + n);
      ClosureHoldingNodeUtil.getInstance().register(nodeWithClosure,new _FunctionTypes._void_P0_E0(){
        public void invoke(){
          JOptionPane.showMessageDialog(null,"Test" + n);
        }
      }
);
    }
  }
);
}
