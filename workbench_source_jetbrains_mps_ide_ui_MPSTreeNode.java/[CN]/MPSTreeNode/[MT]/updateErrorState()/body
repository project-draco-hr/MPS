{
  boolean hasErrorInChildren=false;
  if (propogateErrorUpwards()) {
    for (int i=0; i < getChildCount(); i++) {
      MPSTreeNode node=(MPSTreeNode)getChildAt(i);
      if (node.isHighlighAsError()) {
        hasErrorInChildren=true;
        break;
      }
    }
  }
  myHiglightAsError=hasErrorInChildren || isErrorState();
  if (getParent() != null) {
    ((MPSTreeNode)getParent()).updateErrorState();
  }
}
