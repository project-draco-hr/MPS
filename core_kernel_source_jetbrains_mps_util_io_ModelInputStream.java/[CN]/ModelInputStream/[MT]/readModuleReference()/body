{
  int c=readByte();
  if (c == NULL) {
    return null;
  }
 else   if (c == MODULEREF_INDEX) {
    int index=readInt();
    return myModuleRefs.get(index);
  }
  ModuleId id=null;
  if (c == MODULEREF_MODULEID) {
    id=readModuleID();
  }
  SModuleReference ref=new jetbrains.mps.project.structure.modules.ModuleReference(readString(),id);
  myModuleRefs.add(ref);
  return ref;
}
