{
  char[][] name=typeDeclaration.binding.compoundName;
  SourceTypeBinding binding=typeDeclaration.binding;
  if (binding instanceof LocalTypeBinding) {
    char[] localName=binding.constantPoolName();
    if (localName == null) {
      return false;
    }
    for (int i=0, c=localName.length; i < c; ++i) {
      if (localName[i] == '/') {
        localName[i]='.';
      }
    }
    name=new char[1][0];
    name[0]=localName;
  }
  SModel model=myReferentsCreator.myCurrentModel;
  Classifier classifier;
  if (binding.isClass()) {
    ClassConcept classConcept=ClassConcept.newInstance(model);
    classConcept.setAbstractClass(binding.isAbstract());
    classConcept.setIsFinal(binding.isFinal());
    classifier=classConcept;
  }
 else   if (binding.isInterface() && !binding.isAnnotationType()) {
    classifier=Interface.newInstance(model);
  }
 else   if (binding.isAnnotationType()) {
    classifier=jetbrains.mps.baseLanguage.structure.Annotation.newInstance(model);
  }
 else   if (binding.isEnum()) {
    classifier=EnumClass.newInstance(model);
  }
 else {
    return false;
  }
  classifier.setName(new String(name[name.length - 1]));
  myReferentsCreator.myBindingMap.put(binding,classifier);
  for (  TypeParameter typeParameter : typeDeclaration.typeParameters) {
    TypeVariableDeclaration typeVariableDeclaration=TypeVariableDeclaration.newInstance(model);
    typeVariableDeclaration.setName(new String(typeParameter.name));
    classifier.addTypeVariableDeclaration(typeVariableDeclaration);
  }
  return true;
}
