{
  List<SModelDescriptor> models=getModels();
  List<SNode> result=new ArrayList<SNode>();
  if (myRootsOnly) {
    for (    SModelDescriptor model : models) {
      result.addAll(model.getSModel().getRoots(condition));
    }
  }
 else {
    for (    SModelDescriptor model : models) {
      try {
        if (condition instanceof IsInstanceCondition) {
          IsInstanceCondition isInstance=(IsInstanceCondition)condition;
          result.addAll(model.getFastNodeFinder().getNodes(isInstance.getConceptDeclaration(),true));
        }
 else {
          result.addAll(model.getSModel().allNodes(condition));
        }
      }
 catch (      Throwable t) {
        LOG.error("error collecting nodes form model " + model,t);
      }
    }
  }
  return result;
}
