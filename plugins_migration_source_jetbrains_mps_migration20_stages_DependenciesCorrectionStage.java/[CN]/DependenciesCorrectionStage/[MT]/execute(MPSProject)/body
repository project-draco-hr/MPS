{
  for (  Language lang : p.getProjectModules(Language.class)) {
    lang.addUsedDevkit(LanguageDesign_DevKit.MODULE_REFERENCE);
    lang.save();
  }
  for (  Language l : p.getProjectModules(Language.class)) {
    for (    SModelDescriptor aspect : LanguageAspect.getAspectModels(l)) {
      SModel sModel=aspect.getSModel();
      sModel.addDevKit(GeneralPurpose_DevKit.MODULE_REFERENCE);
      sModel.deleteDevKit(LanguageDesign_DevKit.MODULE_REFERENCE);
      if (sModel.importedDevkits().contains(BootstrapLanguages_DevKit.MODULE_REFERENCE)) {
        sModel.deleteDevKit(BootstrapLanguages_DevKit.MODULE_REFERENCE);
      }
    }
  }
  for (  SModelDescriptor model : p.getProjectModels()) {
    if (!(model instanceof EditableSModelDescriptor))     continue;
    if (model.getModule() == null)     continue;
    new MissingDependenciesFixer(model).fix(false);
  }
  SModelRepository.getInstance().saveAll();
  ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
}
