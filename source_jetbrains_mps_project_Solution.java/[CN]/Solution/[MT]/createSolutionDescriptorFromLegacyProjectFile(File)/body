{
  if (!projectFile.exists())   return null;
  ModelOwner tmpModelOwner=new ModelOwner(){
  }
;
  SModel model=ProjectModelDescriptor.createDescriptorFor(tmpModelOwner).getSModel();
  SolutionDescriptor solutionDescriptor=PersistenceUtil.loadSolutionDescriptorFormOldMPR(projectFile,model);
  if (solutionDescriptor == null || (solutionDescriptor.getModelRootsCount() == 0 && solutionDescriptor.getLanguageRootsCount() == 0)) {
    SModelRepository.getInstance().unRegisterModelDescriptors(tmpModelOwner);
    return null;
  }
  String solutionPathname=projectFile.getAbsolutePath();
  solutionPathname=solutionPathname.substring(0,solutionPathname.lastIndexOf('.')) + ".msd";
  File solutionDescriptorFile=new File(solutionPathname);
  if (solutionDescriptorFile.exists()) {
    SModelRepository.getInstance().unRegisterModelDescriptors(tmpModelOwner);
    return null;
  }
  try {
    solutionDescriptorFile.createNewFile();
    PersistenceUtil.saveSolutionDescriptor(solutionDescriptorFile,solutionDescriptor);
    SModelRepository.getInstance().unRegisterModelDescriptors(tmpModelOwner);
  }
 catch (  IOException e) {
    e.printStackTrace();
    return null;
  }
  return solutionDescriptorFile;
}
