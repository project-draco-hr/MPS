{
  MPSModuleRepository.getInstance().unRegisterModules(this);
  MPSModuleRepository.getInstance().unRegisterModules(myGenerationOnlyModelsModelOwner);
  SModelRepository.getInstance().unRegisterModelDescriptors(this);
  SModelRepository.getInstance().registerModelDescriptor(descriptor.getModel().getModelDescriptor(),this);
  myDescriptor=descriptor;
  myDescriptor.getModel().setLoading(true);
  if (myDescriptor.getName() != null) {
    jetbrains.mps.project.structure.modules.ModuleReference mp=new jetbrains.mps.project.structure.modules.ModuleReference(myDescriptor.getName(),myDescriptor.getModuleUUID());
    setModulePointer(mp);
  }
  reload();
  if (reloadClasses) {
    ClassLoaderManager.getInstance().reloadAll(new EmptyProgressIndicator());
  }
}
