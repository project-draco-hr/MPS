{
  DevKit devKit=new DevKit();
  DevkitDescriptor descriptor;
  if (descriptorFile.exists()) {
    descriptor=DevkitDescriptorPersistence.loadDevKitDescriptor(descriptorFile);
    if (descriptor.getId() == null) {
      descriptor.setId(ModuleId.regular());
      DevkitDescriptorPersistence.saveDevKitDescriptor(descriptor,descriptorFile);
    }
  }
 else {
    DevkitDescriptor d=new DevkitDescriptor();
    d.setNamespace(namespace);
    d.setId(ModuleId.regular());
    descriptor=d;
  }
  devKit.myDescriptorFile=descriptorFile;
  IModule d=checkRegistered(descriptor.getModuleReference(),descriptorFile);
  if (d != null) {
    return (DevKit)d;
  }
  devKit.setDevKitDescriptor(descriptor,false);
  MPSModuleRepository.getInstance().registerModule(devKit,moduleOwner);
  return devKit;
}
