{
  super.setModuleDescriptor(descriptor,reloadClasses);
  MPSModuleRepository moduleRepo=MPSModuleRepository.getInstance();
  myDescriptor=descriptor;
  if (myDescriptor.getNamespace() != null) {
    SModuleReference mp=new jetbrains.mps.project.structure.modules.ModuleReference(myDescriptor.getNamespace(),myDescriptor.getId());
    setModuleReference(mp);
  }
  reloadAfterDescriptorChange();
  moduleRepo.fireModuleChanged(this);
  if (reloadClasses) {
    ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
  }
  dependenciesChanged();
}
