{
  super.setModuleDescriptor(descriptor,reloadClasses);
  MPSModuleRepository moduleRepo=MPSModuleRepository.getInstance();
  ModuleRepositoryFacade.getInstance().unregisterModules(this);
  ModuleRepositoryFacade.getInstance().unregisterModules(myGenerationOnlyModelsModelOwner);
  myDescriptor=descriptor;
  if (myDescriptor.getNamespace() != null) {
    ModuleReference mp=new ModuleReference(myDescriptor.getNamespace(),myDescriptor.getId());
    setModuleReference(mp);
  }
  reloadAfterDescriptorChange();
  moduleRepo.fireModuleChanged(this);
  if (reloadClasses) {
    ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
  }
  invalidateDependencies();
}
