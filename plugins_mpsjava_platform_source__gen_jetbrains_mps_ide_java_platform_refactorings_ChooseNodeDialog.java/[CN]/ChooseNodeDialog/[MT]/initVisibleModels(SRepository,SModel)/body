{
  Set<SModel> rv=SetSequence.fromSet(new HashSet<SModel>());
  SetSequence.fromSet(rv).addElement(model);
  for (  SModel nextOwnModel : Sequence.fromIterable(model.getModule().getModels())) {
    SetSequence.fromSet(rv).addElement(nextOwnModel);
  }
  for (  SModelReference sm : SModelOperations.getImportedModelUIDs(model)) {
    SModel m=sm.resolve(repo);
    if (VisibilityUtil.isVisible(model.getModule(),m)) {
      SetSequence.fromSet(rv).addElement(m);
    }
  }
  return rv;
}
