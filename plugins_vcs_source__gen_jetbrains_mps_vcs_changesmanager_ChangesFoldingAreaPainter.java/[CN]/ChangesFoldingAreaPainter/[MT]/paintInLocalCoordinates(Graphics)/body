{
  if (myMessageGroups == null) {
    initMessageGroups();
  }
  Rectangle clipBounds=g.getClipBounds();
  if (clipBounds.x + clipBounds.width < -AREA_WIDTH - 1 || 0 < clipBounds.x) {
    return;
  }
  for (  ChangesFoldingAreaPainter.MessageGroup messageGroup : ListSequence.fromList(myMessageGroups)) {
    int y=messageGroup.getY();
    g.setColor(messageGroup.getColor());
    if (messageGroup instanceof ChangesFoldingAreaPainter.ThinMessageGroup) {
      Graphics2D g2d=((Graphics2D)g);
      Object oldAntialiasing=g2d.getRenderingHint(RenderingHints.KEY_ANTIALIASING);
      g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
      int[] xPoints=new int[]{-AREA_WIDTH,-AREA_WIDTH,-1};
      int[] yPoints=new int[]{y,y + ChangesFoldingAreaPainter.ARROW_HEIGHT,y + ChangesFoldingAreaPainter.ARROW_HEIGHT / 2};
      g.fillPolygon(xPoints,yPoints,3);
      g.setColor(AREA_FRAME_COLOR);
      g.drawPolygon(xPoints,yPoints,3);
      g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,oldAntialiasing);
      continue;
    }
    int height=messageGroup.getHeight();
    if (height == 0 || y + height < clipBounds.y) {
      continue;
    }
    if (clipBounds.y + clipBounds.height < y) {
      break;
    }
    g.fillRect(-AREA_WIDTH,y,AREA_WIDTH,height);
    g.setColor(AREA_FRAME_COLOR);
    g.drawLine(-AREA_WIDTH,y,0,y);
    g.drawLine(-AREA_WIDTH,y + height,0,y + height);
    g.drawLine(-AREA_WIDTH,y,-AREA_WIDTH,y + height);
  }
}
