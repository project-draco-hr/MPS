{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      List<BaseTestConfiguration> testConfigurationList=project.getProjectDescriptor().getTestConfigurations();
      if (testConfigurationList.isEmpty()) {
        List<String> properties=myWhatToDo.getMPSProjectFiles().get(project.getProjectFile());
        if (properties != null && properties.contains(TestGenerationOnTeamcity.WHOLE_PROJECT)) {
          superExtractModels(modelDescriptors,project);
        }
 else {
          warning("No test configurations for project " + project.getProjectDescriptor().getName());
        }
      }
 else {
        for (        BaseTestConfiguration config : testConfigurationList) {
          try {
            GenParameters genParams=config.getGenParams(project.getProject(),true);
            modelDescriptors.addAll(genParams.getModelDescriptors());
          }
 catch (          IllegalGeneratorConfigurationException e) {
            log("Error while reading configuration of project " + project.getProject().getName(),e);
          }
        }
      }
    }
  }
);
}
