{
  if (!needProcess(file))   return;
  if (IFileUtils.isJarFile(file)) {
    readModuleDescriptorsFromFolder(IFileUtils.stepIntoJar(file));
  }
 else   if (file.getPath().endsWith(JAR_SEPARATOR)) {
    IFile moduleXml=file.getDescendant(META_INF).getDescendant(MODULE_XML);
    if (moduleXml.exists() && !moduleXml.isDirectory()) {
      ModuleDescriptor moduleDescriptor=loadDeploymentDescriptor(moduleXml);
      if (moduleDescriptor != null) {
        myOutcome.add(new ModuleHandle(moduleXml,moduleDescriptor));
      }
    }
 else {
      IFile dirInJar=file.getDescendant(MODULES_DIR);
      if (dirInJar.exists() && dirInJar.isDirectory()) {
        readModuleDescriptorsFromFolder0(dirInJar,Location.INSIDE_THE_JAR);
      }
    }
  }
 else {
    readModuleDescriptorsFromFolder0(file,Location.OUTSIDE_THE_JAR);
  }
}
