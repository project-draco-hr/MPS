{
  if (!needProcess(file,excludes))   return;
  if (file.getName().endsWith(JAR)) {
    IFile jarRoot=stepIntoJar(file);
    if (jarRoot != null) {
      readModuleDescriptorsFromFolder(jarRoot,excludes,result,reader);
    }
  }
 else {
    if (!isModuleFile(file))     return;
    ModuleDescriptor moduleDescriptor=loadDescriptorOnly_internal(file,excludes);
    if (moduleDescriptor != null) {
      T descriptor=reader.read(new ModuleHandle(file,moduleDescriptor));
      if (descriptor != null) {
        result.add(descriptor);
      }
    }
  }
}
