{
  if (!needProcess(file,excludes)) {
    return;
  }
  if (IFileUtils.isJarFile(file)) {
    IFile jarRoot=IFileUtils.stepIntoJar(file);
    readModuleDescriptorsFromFolder(jarRoot,excludes,result,reader);
  }
 else {
    if (!isModuleFile(file)) {
      return;
    }
    ModuleDescriptor moduleDescriptor=loadDescriptorOnly_internal(file,excludes);
    if (moduleDescriptor != null) {
      T descriptor=reader.read(new ModuleHandle(file,moduleDescriptor));
      if (descriptor != null) {
        result.add(descriptor);
      }
    }
  }
}
