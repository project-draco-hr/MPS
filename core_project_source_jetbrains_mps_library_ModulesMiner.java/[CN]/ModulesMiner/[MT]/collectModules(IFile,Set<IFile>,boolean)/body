{
  List<ModuleHandle> result=new ArrayList<ModuleHandle>();
  if (refreshFiles) {
    LOG.debug("Refreshing recursively in the " + dir);
    refreshRecursivelyIntoJars(dir);
  }
  LOG.debug("Reading modules from " + dir);
  readModuleDescriptors(dir,excludes,result,new DescriptorReader<ModuleHandle>(){
    @Override public ModuleHandle read(    ModuleHandle handle){
      return handle;
    }
  }
);
  return result;
}
