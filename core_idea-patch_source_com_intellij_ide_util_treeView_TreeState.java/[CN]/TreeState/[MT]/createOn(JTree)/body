{
  Object root=tree.getModel().getRoot();
  return new TreeState(createPaths(tree),root instanceof DefaultMutableTreeNode ? createSelectedPaths(tree,(DefaultMutableTreeNode)root) : new ArrayList<List<PathElement>>());
}
