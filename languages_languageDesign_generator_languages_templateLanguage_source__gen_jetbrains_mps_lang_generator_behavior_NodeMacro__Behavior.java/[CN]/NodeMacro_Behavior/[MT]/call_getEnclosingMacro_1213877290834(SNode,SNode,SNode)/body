{
  if (currentNode == null) {
    return null;
  }
  SNode result=null;
  for (  SNode currentAttribute : AttributeOperations.getAttributeList(currentNode,new IAttributeDescriptor.AllAttributes())) {
    if (SNodeOperations.isInstanceOf(currentAttribute,MetaAdapterFactory.getConcept(new UUID(-5475912601019530992l,-8082971551085732881l),1087833466690l,"jetbrains.mps.lang.generator.structure.NodeMacro"))) {
      if (currentAttribute == currentMacro) {
        break;
      }
      result=SNodeOperations.cast(currentAttribute,MetaAdapterFactory.getConcept(new UUID(-5475912601019530992l,-8082971551085732881l),1087833466690l,"jetbrains.mps.lang.generator.structure.NodeMacro"));
    }
  }
  if (result != null) {
    return result;
  }
  return NodeMacro_Behavior.call_getEnclosingMacro_1213877290834(thisNode,null,SNodeOperations.getParent(currentNode));
}
