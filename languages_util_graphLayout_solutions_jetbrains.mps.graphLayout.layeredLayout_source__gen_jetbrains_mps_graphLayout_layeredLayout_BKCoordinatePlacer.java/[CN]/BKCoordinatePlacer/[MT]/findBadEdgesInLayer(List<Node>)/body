{
  Set<Edge> badEdges=SetSequence.<Edge>fromSet(new HashSet<Edge>());
  int closestInnerEdgePos=-1;
  for (int i=0; i < ListSequence.<Node>fromList(layerOrder).count(); i++) {
    Node node=ListSequence.<Node>fromList(layerOrder).getElement(i);
    if (isInnerDummy(node)) {
      closestInnerEdgePos=getOppositePos(node);
    }
 else {
      for (      Edge edge : ListSequence.<Edge>fromList(node.getOutEdges())) {
        int targetPos=MapSequence.<Node,Integer>fromMap(myPosInLayer).get(edge.getTarget());
        if (targetPos < closestInnerEdgePos) {
          SetSequence.fromSet(badEdges).addElement(edge);
        }
      }
    }
  }
  closestInnerEdgePos=Integer.MAX_VALUE;
  for (int i=ListSequence.<Node>fromList(layerOrder).count() - 1; i >= 0; i--) {
    Node node=ListSequence.<Node>fromList(layerOrder).getElement(i);
    if (isInnerDummy(node)) {
      closestInnerEdgePos=getOppositePos(node);
    }
 else {
      for (      Edge edge : ListSequence.<Edge>fromList(node.getOutEdges())) {
        int targetPos=MapSequence.<Node,Integer>fromMap(myPosInLayer).get(edge.getTarget());
        if (targetPos > closestInnerEdgePos) {
          SetSequence.fromSet(badEdges).addElement(edge);
        }
      }
    }
  }
  return badEdges;
}
