{
  for (  Language language : l.getAllExtendedLanguages()) {
    if (language == null)     continue;
    for (    ModuleReference dep : language.getRuntimeModulesReferences()) {
      IModule m=MPSModuleRepository.getInstance().getModule(dep);
      if (m == null)       continue;
      if (!dependencies.contains(m)) {
        m.getDependenciesManager().collectAllCompileTimeDependencies(dependencies,languagesWithRuntime);
      }
    }
    if (!languagesWithRuntime.contains(language)) {
      if (!language.getRuntimeStubPaths().isEmpty()) {
        languagesWithRuntime.add(language);
      }
    }
  }
}
