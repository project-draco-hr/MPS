{
  dependencies.add(myModule);
  for (  IModule m : ModuleUtil.getDependencies(myModule)) {
    if (!dependencies.contains(m)) {
      m.getDependenciesManager().collectAllCompileTimeDependencies(dependencies,languagesWithRuntime);
    }
  }
  if (myModule instanceof Language) {
    for (    Generator generator : ((Language)myModule).getGenerators()) {
      if (!dependencies.contains(generator)) {
        generator.getDependenciesManager().collectAllCompileTimeDependencies(dependencies,languagesWithRuntime);
      }
    }
  }
  for (  Language language : ModuleUtil.getUsedLanguages(myModule)) {
    for (    ModuleReference dep : language.getRuntimeModulesReferences()) {
      IModule m=MPSModuleRepository.getInstance().getModule(dep);
      if (m == null)       continue;
      if (!dependencies.contains(m)) {
        m.getDependenciesManager().collectAllCompileTimeDependencies(dependencies,languagesWithRuntime);
      }
    }
    if (!languagesWithRuntime.contains(language)) {
      if (!language.getRuntimeStubPaths().isEmpty()) {
        languagesWithRuntime.add(language);
      }
    }
  }
}
