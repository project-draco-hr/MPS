{
  Set<Pair<NodeWrapperType,NodeWrapperType>> result=new HashSet<Pair<NodeWrapperType,NodeWrapperType>>();
  Set<String> childRoles1=node1.getChildRoles();
  Set<String> childRoles2=node2.getChildRoles();
  Set<String> allChildRoles=new HashSet<String>(childRoles1);
  allChildRoles.addAll(childRoles2);
  for (  String childRole : allChildRoles) {
    List<NodeWrapper> childrenInNode1=node1.getChildren(childRole);
    List<NodeWrapper> childrenInNode2=node2.getChildren(childRole);
    Iterator<NodeWrapper> childrenIterator2=childrenInNode2.iterator();
    for (    NodeWrapper child1 : childrenInNode1) {
      NodeWrapper child2=childrenIterator2.hasNext() ? childrenIterator2.next() : null;
      result.add(new Pair<NodeWrapperType,NodeWrapperType>(NodeWrapperType.getIType(child1),NodeWrapperType.getIType(child2)));
    }
    for (; childrenIterator2.hasNext(); ) {
      NodeWrapper child2=childrenIterator2.next();
      result.add(new Pair<NodeWrapperType,NodeWrapperType>(null,NodeWrapperType.getIType(child2)));
    }
  }
  return result;
}
