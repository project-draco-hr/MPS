{
  final IFile ifile=FileSystem.getInstance().getFileByPath(f.getAbsolutePath());
  SModelDescriptor model=SModelFileTracker.getInstance().findModel(ifile);
  if (model != null) {
    modelDescriptors.add(model);
    info("Found model " + model);
    return;
  }
  try {
    DescriptorLoadResult dr=ModelPersistence.loadDescriptor(ifile);
    SModelReference modelReference;
    if (dr.getUID() != null) {
      modelReference=SModelReference.fromString(dr.getUID());
    }
 else {
      modelReference=SModelReference.fromPath(ifile.getPath());
    }
    info("Read model " + modelReference);
    DescriptorLoadResult d=new RegularModelDataSource(null,ifile).loadDescriptor(null,modelReference.getSModelFqName());
    SModelDescriptor existingDescr=SModelRepository.getInstance().getModelDescriptor(d.getHeader().getModelReference());
    if (existingDescr == null) {
      error("Module for " + ifile.getPath() + " was not found. Use \"library\" tag to load required modules.");
    }
 else {
      modelDescriptors.add(existingDescr);
    }
  }
 catch (  ModelReadException e) {
    log(e);
  }
}
