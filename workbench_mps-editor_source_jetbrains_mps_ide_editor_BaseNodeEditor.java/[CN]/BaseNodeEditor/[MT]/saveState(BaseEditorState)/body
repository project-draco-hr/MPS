{
  EditorContext editorContext=getEditorContext();
  if (editorContext != null) {
    state.memento=editorContext.createMemento();
    NodeEditorComponent editorComponent=getCurrentEditorComponent();
    if (editorComponent != null) {
      state.isEditorFocused=editorComponent.getFocusTracker().getEffectiveFocusState();
      EditorComponent inspector=editorComponent.getInspector();
      if (inspector != null) {
        state.inspectorMemento=inspector.getEditorContext().createMemento();
        state.isInspectorFocused=!state.isEditorFocused && inspector.getFocusTracker().getEffectiveFocusState();
      }
    }
  }
}
