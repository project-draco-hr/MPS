{
  if (myModelRoot.getManager() != null) {
    String moduleId=myModelRoot.getManager().getModuleId();
    String className=myModelRoot.getManager().getClassName();
    Language l=((Language)MPSModuleRepository.getInstance().getModuleById(ModuleId.fromString(moduleId)));
    if (l == null) {
      String messgae="Language with id " + moduleId + " not found for stubs loader "+ className+ ". Some stub models won't be loaded.";
      throw new ManagerNotFoundException(messgae);
    }
    Class managerClass=l.getClass(className);
    if (managerClass == null) {
      throw new ManagerNotFoundException("Manager class " + className + " not found in language "+ moduleId);
    }
    try {
      return (IModelRootManager)managerClass.newInstance();
    }
 catch (    InstantiationException e) {
      throw new ManagerNotFoundException("Problems during instantiating manager " + className,e);
    }
catch (    IllegalAccessException e) {
      throw new ManagerNotFoundException("Problems during instantiating manager " + className,e);
    }
  }
 else   if (myModelRoot.getHandlerClass() != null) {
    String fqName=myModelRoot.getHandlerClass();
    try {
      Class cls=Class.forName(fqName);
      return (IModelRootManager)cls.newInstance();
    }
 catch (    Exception e) {
      LOG.error(e);
      return IModelRootManager.NULL_MANAGER;
    }
  }
 else {
    return new DefaultModelRootManager();
  }
}
