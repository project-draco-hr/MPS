{
  for (  SNode root : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(),"jetbrains.mps.build.packaging.structure.MPSLayout"))) {
    while (true) {
      List<SNode> blocks=SNodeOperations.getDescendants(root,"jetbrains.mps.build.packaging.structure.BlockReference",false,new String[]{});
      if (ListSequence.fromList(blocks).isEmpty()) {
        break;
      }
      for (      SNode blockRef : ListSequence.fromList(blocks)) {
        SNode block=SLinkOperations.getTarget(blockRef,"block",false);
        SNode place=blockRef;
        for (        SNode entry : ListSequence.fromList(SLinkOperations.getTargets(block,"entry",true))) {
          SNode entryCopy=CopyUtil.copy(entry);
          SNodeOperations.insertNextSiblingChild(place,entryCopy);
          place=entryCopy;
        }
        SNodeOperations.deleteNode(blockRef);
        if (eq_x583g4_a0e0c0a0a0qg(SNodeOperations.getModel(block),_context.getModel())) {
          SNodeOperations.deleteNode(block);
        }
      }
    }
  }
}
