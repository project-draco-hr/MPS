{
  Set<Node> visited=SetSequence.<Node>fromSet(new HashSet<Node>());
  for (  Node node : ListSequence.<Node>fromList(graph.getNodes())) {
    if (SetSequence.<Node>fromSet(visited).contains(node)) {
      continue;
    }
    FordBellman bellman=new FordBellman(graph,node,weights);
    bellman.doAlgorithm(filter,direction);
    List<Edge> negativeCycle=bellman.getNegativeCycleReachableFromSource();
    if (negativeCycle != null) {
      return negativeCycle;
    }
    for (    Node anotherNode : ListSequence.<Node>fromList(graph.getNodes())) {
      if (bellman.isReachableFromSource(anotherNode)) {
        SetSequence.fromSet(visited).addElement(anotherNode);
      }
    }
  }
  return null;
}
