{
  if (includeThis && getCellClass().isInstance(cell) && isSuitable((C)cell)) {
    return (C)cell;
  }
  if (cell instanceof jetbrains.mps.openapi.editor.cells.EditorCell_Collection) {
    jetbrains.mps.openapi.editor.cells.EditorCell_Collection collection=(jetbrains.mps.openapi.editor.cells.EditorCell_Collection)cell;
    if (!collection.isFolded()) {
      Iterator<jetbrains.mps.openapi.editor.cells.EditorCell> iterator=isFirstChild() ? collection.iterator() : collection.reverseIterator();
      while (iterator.hasNext()) {
        EditorCell child=(EditorCell)iterator.next();
        if (getCellClass().isInstance(child) && isSuitable((C)child)) {
          return (C)child;
        }
        C result=find(child,false);
        if (result != null) {
          return result;
        }
      }
    }
  }
  return null;
}
