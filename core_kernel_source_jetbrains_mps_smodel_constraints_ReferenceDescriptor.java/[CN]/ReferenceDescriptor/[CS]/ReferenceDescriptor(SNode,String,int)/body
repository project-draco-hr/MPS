{
  myReference=null;
  SNode scopeReference=referenceNode.getLinkDeclaration(role);
  if (scopeReference == null) {
    throw new IllegalArgumentException("can't find link for role '" + role + "' in '"+ referenceNode.getConcept().getId()+ "'");
  }
  myReferentConstraintContext=createReferentConstraintContext(false,referenceNode.getParent(),referenceNode,role,0,SModelUtil.getLinkDeclarationTarget(scopeReference),referenceNode.getRoleLink());
  myRefConcept=referenceNode.getConceptDeclarationNode();
  myRefRole=SModelUtil.getGenuineLinkRole(scopeReference);
  myScopeProvider=getScopeProvider(myRefConcept,myRefRole);
}
