{
  ReferenceConstraintsDescriptor refConstraintsDescriptor=ConceptRegistryUtil.getConstraintsDescriptor(nodeConcept).getReference(referentRole);
  if (refConstraintsDescriptor != null) {
    ReferenceScopeProvider result=refConstraintsDescriptor.getScopeProvider();
    if (result != null) {
      return result;
    }
  }
  SAbstractLink linkDeclaration=nodeConcept.getLink(referentRole);
  if (linkDeclaration == null) {
    LOG.error("No reference search scope provider was found. Concept: " + nodeConcept + "; refName: "+ referentRole);
    return EMPTY_REFERENCE_SCOPE_PROVIDER;
  }
  SAbstractConcept conceptForDefaultSearchScope=linkDeclaration.getTargetConcept();
  return ConceptRegistryUtil.getConstraintsDescriptor(conceptForDefaultSearchScope).getDefaultScopeProvider();
}
