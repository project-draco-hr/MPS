{
  Iterable<SNode> references=ListSequence.fromList(SNodeOperations.getDescendants(_context.getOutputNode(),"jetbrains.mps.baseLanguage.structure.VariableReference",false,new String[]{})).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(it,"jetbrains.mps.baseLanguage.structure.VariableReference"),"variableDeclaration",false),"jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration");
    }
  }
).toListSequence().where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return (AttributeOperations.getAttribute(it,new IAttributeDescriptor.NodeAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.execution.commands.structure.BuilderParameter"))) != null);
    }
  }
);
  for (  SNode ref : Sequence.fromIterable(references)) {
    SNodeOperations.replaceWithAnother(ref,SLinkOperations.getTarget(SLinkOperations.getTarget(ref,"variableDeclaration",false),"initializer",true));
    SNode parent=SNodeOperations.getParent(SLinkOperations.getTarget(ref,"variableDeclaration",false));
    if (SNodeOperations.isInstanceOf(parent,"jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement")) {
      SNodeOperations.deleteNode(parent);
    }
  }
  AttributeOperations.createAndSetAttrbiute(_context.getOutputNode(),new IAttributeDescriptor.NodeAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.execution.commands.structure.BuilderBlockStatement")),"jetbrains.mps.execution.commands.structure.BuilderBlockStatement");
}
