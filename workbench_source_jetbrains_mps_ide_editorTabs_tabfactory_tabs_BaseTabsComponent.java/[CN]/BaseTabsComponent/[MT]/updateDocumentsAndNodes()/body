{
  List<Document> editedDocumentsNew=new ArrayList<Document>();
  List<SNodePointer> editedNodesNew=new ArrayList<SNodePointer>();
  ArrayList<EditorTabDescriptor> tabs=new ArrayList<EditorTabDescriptor>(myPossibleTabs);
  Collections.sort(tabs,new EditorTabComparator());
  Map<EditorTabDescriptor,List<SNode>> result=new THashMap<EditorTabDescriptor,List<SNode>>();
  for (  EditorTabDescriptor d : tabs) {
    List<SNode> nodes=d.getNodes(myBaseNode.getNode());
    if (nodes.isEmpty())     continue;
    result.put(d,nodes);
    for (    SNode node : nodes) {
      SNodePointer nodePointer=new SNodePointer(node);
      editedNodesNew.add(nodePointer);
      editedDocumentsNew.add(MPSUndoUtil.getDoc(nodePointer));
    }
  }
  myEditedDocuments=editedDocumentsNew;
  myEditedNodes=editedNodesNew;
  return result;
}
