{
  PsiDirectory parent=(forcedParent == null ? file.getParent() : forcedParent);
  PsiJavaStubDataSource dataSource=MapSequence.fromMap(myDataSources).get(parent);
  if (dataSource == null) {
    return;
  }
  if (Sequence.fromIterable(Sequence.fromArray(parent.getChildren())).ofType(PsiJavaFile.class).isEmpty()) {
    SetSequence.fromSet(deletedDirs).addElement(parent);
  }
  PsiJavaStubModelRoot.PsiChange change=MapSequence.fromMap(changes).get(dataSource);
  if (change == null) {
    change=new PsiJavaStubModelRoot.PsiChange();
    MapSequence.fromMap(changes).put(dataSource,change);
  }
  SetSequence.fromSet(change.removed).addElement(file);
}
