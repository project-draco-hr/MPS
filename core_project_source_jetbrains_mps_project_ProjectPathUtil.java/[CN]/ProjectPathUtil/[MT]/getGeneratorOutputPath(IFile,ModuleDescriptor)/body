{
  String generatorOutputPath;
  if (descriptor instanceof SolutionDescriptor) {
    generatorOutputPath=((SolutionDescriptor)descriptor).getOutputPath();
  }
 else   if (descriptor instanceof LanguageDescriptor) {
    generatorOutputPath=((LanguageDescriptor)descriptor).getGenPath();
  }
 else   if (descriptor instanceof GeneratorDescriptor) {
    return moduleSourceDir.getDescendant("generator").getDescendant("source_gen");
  }
 else {
    return null;
  }
  if (generatorOutputPath != null) {
    FileSystem fileSystem=moduleSourceDir == null ? jetbrains.mps.vfs.FileSystem.getInstance() : moduleSourceDir.getFileSystem();
    return fileSystem.getFile(generatorOutputPath);
  }
  if (moduleSourceDir != null) {
    return moduleSourceDir.getDescendant("source_gen");
  }
  return null;
}
