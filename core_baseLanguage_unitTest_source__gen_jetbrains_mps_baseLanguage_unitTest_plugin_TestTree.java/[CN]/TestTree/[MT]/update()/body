{
  String loseTest=this.state.getLoseClass();
  String loseMethod=this.state.getLoseMethod();
  String test=this.state.getCurrentClass();
  String method=this.state.getCurrentMethod();
  final Wrappers._T<TestMethodTreeNode> node=new Wrappers._T<TestMethodTreeNode>();
  if (loseTest != null && loseMethod != null) {
    node.value=this.get(loseTest,loseMethod);
    if (node.value != null) {
      node.value.setState(TestState.ERROR);
    }
  }
 else {
    node.value=this.get(test,method);
    if (node.value != null) {
      if (this.state.isTerminated()) {
        node.value.setState(TestState.TERMINATED);
      }
 else       if (TestEvent.START_TEST_PREFIX.equals(this.state.getToken())) {
        node.value.setState(TestState.IN_PROGRESS);
        if (this.getPreferences().getStateObject().isTrackRunning) {
          SwingUtilities.invokeLater(new Runnable(){
            public void run(){
              TestTree.this.setCurrentNode(node.value);
            }
          }
);
        }
      }
 else       if (TestEvent.END_TEST_PREFIX.equals(this.state.getToken())) {
        if (TestState.IN_PROGRESS.equals(node.value.getState())) {
          node.value.setState(TestState.PASSED);
          TestMethodRow row=this.state.getTestMethodRow(test,method);
          if (row != null) {
            row.setSucceed();
          }
        }
      }
 else       if (TestEvent.FAILURE_TEST_PREFIX.equals(this.state.getToken())) {
        node.value.setState(TestState.FAILED);
      }
 else       if (TestEvent.ERROR_TEST_PREFIX.equals(this.state.getToken())) {
        node.value.setState(TestState.ERROR);
      }
    }
  }
  if (isFailed(node.value) && this.getPreferences().getStateObject().isSelectFirstFailed) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        TestTree.this.selectFirstDefectNode();
      }
    }
);
  }
  if (this.getPreferences().getStateObject().isHidePassed) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        TestTree.this.hidePassed(true);
      }
    }
);
  }
}
