{
  super(ProjectHelper.toMainFrame(context.getProject()),"Modify Instances by condition");
  this.myContext=context;
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      ReplaceDialog.this.myNode=SConceptOperations.createNewNode("jetbrains.mps.quickQueryLanguage.structure.ReplaceModelQuery",null);
      ReplaceDialog.this.myEditor=new EmbeddableEditor(context.getProject(),new _FunctionTypes._void_P1_E0<SModel>(){
        public void invoke(        SModel m){
          m.addRootNode(myNode);
        }
      }
,true){
        @Override protected void processClassesData(        IClassesData cd){
          doProcessClassesData(cd);
        }
      }
;
      myEditor.editNode(myNode);
      ReplaceDialog.this.myScope=new ScopeEditor(new ScopeOptions());
      ReplaceDialog.this.myPanel.add(ReplaceDialog.this.myScope.getComponent(),BorderLayout.SOUTH);
    }
  }
);
  this.myEditor.addLanguageStructureModel(language);
  final Set<Language> languageList=SetSequence.fromSet(new HashSet<Language>());
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      language.getDependenciesManager().collectAllExtendedLanguages(languageList);
    }
  }
);
  for (  Language extendedLanguage : languageList) {
    this.myEditor.addLanguageStructureModel(extendedLanguage);
  }
  this.myEditor.addLanguageStructureModel(BootstrapLanguages.collectionsLanguage());
  this.myPanel.add(this.myEditor.getComponenet(),BorderLayout.CENTER);
  this.setSize(new Dimension(500,500));
  this.setModal(false);
}
