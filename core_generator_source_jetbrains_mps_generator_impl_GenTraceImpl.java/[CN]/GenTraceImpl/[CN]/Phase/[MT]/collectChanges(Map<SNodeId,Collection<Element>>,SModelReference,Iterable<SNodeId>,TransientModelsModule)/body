{
  final SRepository modelRepository=tm.getRepository();
  final ArrayList<Element> rv=new ArrayList<Element>();
  for (  SNodeId nid : nodes) {
    Collection<Element> changes=index.get(nid);
    if (changes == null || changes.isEmpty()) {
      SNode in=new SNodePointer(model,nid).resolve(modelRepository);
      if (in == null) {
        continue;
      }
      changes=findByAncestor(index,in);
    }
    rv.addAll(changes);
  }
  return rv.isEmpty() ? Collections.<Element>emptyList() : rv;
}
