{
  SNode result=SNodeOperations.copyNode(SLinkOperations.getTarget(SLinkOperations.getTarget(thisNode,"declaration",false),"creator",true));
  List<SNode> params=SLinkOperations.getTargets(SLinkOperations.getTarget(thisNode,"declaration",false),"parameter",true);
  List<SNode> args=SLinkOperations.getTargets(thisNode,"argument",true);
  if (ListSequence.fromList(params).count() != ListSequence.fromList(args).count()) {
    throw new RuntimeException();
  }
  for (  SNode ref : SNodeOperations.getDescendants(result,"jetbrains.mps.baseLanguage.builders.structure.SimpleBuilderParameterReference",false,new String[]{})) {
    int index=ListSequence.fromList(params).indexOf(SLinkOperations.getTarget(ref,"parameter",false));
    SNodeOperations.replaceWithAnother(ref,SNodeOperations.copyNode(ListSequence.fromList(args).getElement(index)));
  }
  return result;
}
