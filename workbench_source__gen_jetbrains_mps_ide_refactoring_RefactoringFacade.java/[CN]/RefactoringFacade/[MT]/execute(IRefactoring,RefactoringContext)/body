{
  refactoringContext.setRefactoring(refactoring);
  final boolean[] success=new boolean[1];
  ThreadUtils.runInUIThreadAndWait(new Runnable(){
    public void run(){
      success[0]=refactoring.init(refactoringContext);
    }
  }
);
  if (!(success[0])) {
    return;
  }
  SearchResults usages=findUsages(refactoringContext);
  if (usages == null) {
    return;
  }
  refactoringContext.setUsages(usages);
  if (!(usages.getSearchResults().isEmpty())) {
    showRefactoring(refactoringContext,usages);
  }
 else {
    doExecuteWithDialog(refactoringContext);
  }
}
