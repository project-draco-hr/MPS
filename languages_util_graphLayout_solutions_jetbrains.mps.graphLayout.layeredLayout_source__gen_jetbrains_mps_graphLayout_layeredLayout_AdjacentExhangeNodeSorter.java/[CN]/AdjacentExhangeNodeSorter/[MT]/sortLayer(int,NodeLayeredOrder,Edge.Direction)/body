{
  List<Node> layerOrder=order.getOrder(layerToSort);
  Map<Node,Integer> posInLayer=order.getPosInLayer();
  for (int i=0; i < ListSequence.<Node>fromList(layerOrder).count() - 1; i++) {
    Node first=ListSequence.<Node>fromList(layerOrder).getElement(i);
    Node second=ListSequence.<Node>fromList(layerOrder).getElement(i + 1);
    int cur=countNumOfCrossings(first,second,posInLayer,direction);
    int candidate=countNumOfCrossings(second,first,posInLayer,direction);
    if (cur > candidate) {
      order.set(layerToSort,first,i + 1);
      order.set(layerToSort,second,i);
    }
  }
}
