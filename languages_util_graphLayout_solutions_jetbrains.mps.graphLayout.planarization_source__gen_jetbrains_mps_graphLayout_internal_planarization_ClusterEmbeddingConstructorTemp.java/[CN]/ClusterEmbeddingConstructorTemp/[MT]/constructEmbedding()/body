{
  Iterable<Node> subclusters=myGraph.getSubclusters(myCluster);
  if (Sequence.<Node>fromIterable(subclusters).count() == 0) {
    return new EmbeddedGraph(myGraph);
  }
  myNodesAdditionListener=new ClusterNodesAdditionListener(myGraph);
  myNodesAdditionListener.setCurrentCluster(myCluster);
  Map<Edge,Edge> invEdgeMap=constructSubclusterGraphEmbedding();
  myGraph.removeListener(myNodesAdditionListener);
  if (ClusterEmbeddingConstructorTemp.showInfo > 0) {
    System.out.println("for cluster " + myCluster + " border is: "+ mySubClusterBorder);
  }
  myEmbeddedGraph=new EmbeddedGraph(myGraph);
  myFaceMap=MapSequence.<Face,Face>fromMap(new HashMap<Face,Face>());
  for (  Edge edge : ListSequence.<Edge>fromList(mySubClusterBorder)) {
    mySubEmbeddedGraph.removeEdge(edge);
  }
  for (  Face face : ListSequence.<Face>fromList(mySubEmbeddedGraph.getFaces())) {
    Face realFace=new Face(myGraph);
    MapSequence.<Face,Face>fromMap(myFaceMap).put(face,realFace);
    for (    Dart dart : ListSequence.<Dart>fromList(face.getDarts())) {
      Edge edge=dart.getEdge();
      Edge realEdge=MapSequence.<Edge,Edge>fromMap(invEdgeMap).get(edge);
      if (realEdge == null) {
        throw new RuntimeException("wrong synchronized embedding");
      }
      Node source=dart.getSource();
      Node realSource;
      if (source == edge.getSource()) {
        realSource=realEdge.getSource();
      }
 else {
        realSource=realEdge.getTarget();
      }
      realFace.addLast(new Dart(realEdge,realSource));
    }
  }
  for (  Node subcluster : Sequence.<Node>fromIterable(subclusters)) {
    findSubclusterEmbedding(subcluster,invEdgeMap);
  }
  for (  Face face : SetSequence.<Face>fromSet(MapSequence.fromMap(myFaceMap).keySet())) {
    Face realFace=MapSequence.<Face,Face>fromMap(myFaceMap).get(face);
    myEmbeddedGraph.addFace(realFace);
    if (mySubEmbeddedGraph.isOuterFace(face)) {
      myEmbeddedGraph.setOuterFace(realFace);
    }
  }
  myGraph.removeListener(myNodesAdditionListener);
  return myEmbeddedGraph;
}
