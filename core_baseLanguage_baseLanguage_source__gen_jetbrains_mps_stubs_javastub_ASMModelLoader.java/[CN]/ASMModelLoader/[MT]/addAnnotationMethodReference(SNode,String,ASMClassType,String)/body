{
  if (sourceNode.getReferent(role) != null) {
    return;
  }
  SModelReference targetRef=getModelReferenceFor(NodeNameUtil.getNamespace(annotationType.getName()));
  SReference reference=null;
  if (sourceNode.getModel().getSModelReference().equals(targetRef)) {
    Classifier classifier=getClassifier(NameUtil.shortNameFromLongName(annotationType.getName()));
    InstanceMethodDeclaration result=null;
    if (classifier instanceof Annotation) {
      Annotation annotation=(Annotation)classifier;
      for (      InstanceMethodDeclaration m : annotation.getMethods()) {
        if (method.equals(m.getName())) {
          result=m;
          break;
        }
      }
    }
    if (result != null) {
      reference=SReference.create(role,sourceNode,BaseAdapter.fromAdapter(result));
    }
  }
  if (reference == null) {
    SNodeId nodeId=ASMNodeId.createAnnotationMethodId(annotationType.getName(),method);
    reference=SReference.create(role,sourceNode,targetRef,nodeId);
  }
  sourceNode.addReference(reference);
}
