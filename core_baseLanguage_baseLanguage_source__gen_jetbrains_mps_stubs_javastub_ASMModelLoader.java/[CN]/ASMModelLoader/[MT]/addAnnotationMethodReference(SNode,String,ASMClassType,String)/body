{
  SModelDescriptor targetModel=this.getModelDescriptor(NodeNameUtil.getNamespace(annotationType.getName()));
  if (sourceNode.getModel().getModelDescriptor() != targetModel) {
    SNodeId nodeId=ASMNodeId.createAnnotationMethodId(annotationType.getName(),method);
    SReference reference=SReference.create(role,sourceNode,targetModel.getSModelReference(),nodeId);
    sourceNode.addReference(reference);
  }
 else {
    Classifier classifier=this.getClassifier(annotationType.getName());
    InstanceMethodDeclaration result=null;
    if (classifier instanceof Annotation) {
      Annotation annotation=(Annotation)classifier;
      for (      InstanceMethodDeclaration m : annotation.getMethods()) {
        if (method.equals(m.getName())) {
          result=m;
          break;
        }
      }
    }
    if (sourceNode.getReferent(role) == null) {
      sourceNode.addReference(SReference.create(role,sourceNode,BaseAdapter.fromAdapter(result)));
    }
  }
}
