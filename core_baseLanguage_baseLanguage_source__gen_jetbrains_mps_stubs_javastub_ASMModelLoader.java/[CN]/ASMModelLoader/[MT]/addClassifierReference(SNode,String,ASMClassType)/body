{
  if (sourceNode.getReferent(role) != null) {
    return;
  }
  SReference reference=null;
  SModelReference targetModelRef=getModelReferenceFor(NodeNameUtil.getNamespace(clsType.getName()));
  if (sourceNode.getModel().getSModelReference().equals(targetModelRef)) {
    String modelName=sourceNode.getModel().getLongName();
    String className=NameUtil.shortNameFromLongName(clsType.getName());
    Classifier classifier=getAnyClassifier(className,modelName);
    if (classifier != null) {
      SNode targetNode=classifier.getNode();
      reference=SReference.create(role,sourceNode,targetNode);
    }
  }
  if (reference == null) {
    SNodeId nodeId=ASMNodeId.createId(clsType.getName());
    reference=SReference.create(role,sourceNode,targetModelRef,nodeId);
  }
  sourceNode.addReference(reference);
}
