{
  if (!(currentSession.get() == session)) {
    throw new IllegalStateException("invalid session");
  }
}
