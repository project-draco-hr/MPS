{
  WorkbenchMakeService.MessageHandler mh=new WorkbenchMakeService.MessageHandler();
  String scrName=((cleanMake ? "Rebuild" : "Make"));
  if (Sequence.fromIterable(inputRes).isEmpty()) {
    if (cleanMake) {
      String msg=scrName + " aborted";
      mh.handle(new Message(MessageKind.ERROR,msg + ": nothing to do."));
      this.displayInfo(msg);
      return new IResult.FAILURE(null);
    }
 else {
      this.displayInfo("Everything up to date");
      return new IResult.SUCCESS(null);
    }
  }
  if (!(script.isValid())) {
    String msg=scrName + " failed";
    mh.handle(new Message(MessageKind.ERROR,msg + ". Invalid script."));
    this.displayInfo(msg);
    return new IResult.FAILURE(null);
  }
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      SModelRepository.getInstance().saveAll();
    }
  }
);
  final Tuples._2<IScript.Setup,IMonitors> scrParams=this.scriptParameters(scrName,setup);
  final Wrappers._T<IResult> res=new Wrappers._T<IResult>();
  executor.doExecute(new Runnable(){
    public void run(){
      res.value=script.execute(scrParams._0(),scrParams._1(),inputRes);
    }
  }
);
  if (res.value == null) {
    String msg=scrName + " aborted";
    this.displayInfo(msg);
  }
 else   if (!(res.value.isSucessful())) {
    String msg=scrName + " failed";
    mh.handle(new Message(MessageKind.ERROR,msg + ". See previous messages for details."));
    this.displayInfo(msg);
  }
 else {
    String msg=scrName + " successful";
    this.displayInfo(msg);
  }
  return res.value;
}
