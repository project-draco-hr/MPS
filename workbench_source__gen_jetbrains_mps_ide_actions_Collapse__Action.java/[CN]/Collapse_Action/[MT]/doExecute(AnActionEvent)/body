{
  try {
    EditorCell_Collection collectionCell=(Collapse_Action.this.editorCell instanceof EditorCell_Collection ? (EditorCell_Collection)Collapse_Action.this.editorCell : Collapse_Action.this.editorCell.getParent());
    while (collectionCell != null) {
      if (collectionCell.canBePossiblyFolded() && !(collectionCell.isFolded())) {
        collectionCell.fold();
        Collapse_Action.this.editorContext.getNodeEditorComponent().clearSelectionStack();
        EditorCell editorCellToSelect=collectionCell.getFirstDescendant(CellConditions.SELECTABLE);
        if (editorCellToSelect != null) {
          Collapse_Action.this.editorContext.getNodeEditorComponent().changeSelection(editorCellToSelect);
          editorCellToSelect.home();
        }
        return;
      }
      collectionCell=collectionCell.getParent();
    }
  }
 catch (  Throwable t) {
    if (log.isErrorEnabled()) {
      log.error("User's action execute method failed. Action:" + "Collapse",t);
    }
  }
}
