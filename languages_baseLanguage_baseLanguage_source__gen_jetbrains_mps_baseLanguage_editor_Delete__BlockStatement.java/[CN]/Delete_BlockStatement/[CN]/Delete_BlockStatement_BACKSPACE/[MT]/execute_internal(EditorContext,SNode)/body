{
  if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(node),"jetbrains.mps.baseLanguage.structure.StatementList")) {
    final SNode statementList=SNodeOperations.cast(SNodeOperations.getParent(node),"jetbrains.mps.baseLanguage.structure.StatementList");
    final Wrappers._int index=new Wrappers._int(ListSequence.fromList(SLinkOperations.getTargets(statementList,"statement",true)).indexOf(node));
    ListSequence.fromList(SLinkOperations.getTargets(statementList,"statement",true)).removeElementAt(index.value);
    ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(node,"statements",true),"statement",true)).visitAll(new IVisitor<SNode>(){
      public void visit(      SNode it){
        ListSequence.fromList(SLinkOperations.getTargets(statementList,"statement",true)).insertElement(index.value,it);
        index.value+=1;
      }
    }
);
    SNodeOperations.deleteNode(node);
  }
 else   if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(node),"jetbrains.mps.baseLanguage.structure.IfStatement") && SNodeOperations.hasRole(node,"jetbrains.mps.baseLanguage.structure.IfStatement","ifFalseStatement")) {
    if (!(SNodeOperations.isInstanceOf(SNodeOperations.getParent(SNodeOperations.getParent(node)),"jetbrains.mps.baseLanguage.structure.StatementList"))) {
      SNodeOperations.detachNode(node);
    }
 else {
      while (ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(node,"statements",true),"statement",true)).isNotEmpty()) {
        SNodeOperations.insertNextSiblingChild(SNodeOperations.getParent(node),ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(node,"statements",true),"statement",true)).last());
      }
      SNodeOperations.detachNode(node);
    }
  }
}
