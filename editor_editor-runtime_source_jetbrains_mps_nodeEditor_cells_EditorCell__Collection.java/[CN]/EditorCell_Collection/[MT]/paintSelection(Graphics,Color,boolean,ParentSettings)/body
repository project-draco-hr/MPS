{
  List<? extends EditorCell> selectionCells=myCellLayout.getSelectionCells(this);
  if (selectionCells != null) {
    ParentSettings selection=isSelectionPaintedOnAncestor(parentSettings);
    for (    EditorCell cell : selectionCells) {
      jetbrains.mps.nodeEditor.cells.EditorCell cellInternal=(jetbrains.mps.nodeEditor.cells.EditorCell)cell;
      if (cellInternal.isInClipRegion(g)) {
        cellInternal.paintSelection(g,c,false,selection);
      }
    }
  }
 else {
    List<Rectangle> selection=myCellLayout.getSelectionBounds(this);
    g.setColor(c);
    for (    Rectangle part : selection) {
      g.fillRect(part.x,part.y,part.width,part.height);
    }
  }
}
