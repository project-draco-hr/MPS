{
  Instruction instruction=wrapper.getInstruction();
  SNodeReference pointer;
  if (instruction.getSource() instanceof SNode) {
    pointer=new SNodePointer(((SNode)instruction.getSource()));
  }
 else {
    pointer=null;
  }
  String caption=instruction.toString();
  String rule=instruction.getRuleReference();
  if (instruction instanceof IfJumpInstruction) {
    return new AltBlock(x,y,width,height,pointer,caption,rule);
  }
  if (instruction instanceof JumpInstruction) {
    return new JumpBlock(x,y,width,height,pointer,caption,rule);
  }
  if (instruction instanceof WriteInstruction) {
    return new WriteBlock(x,y,width,height,pointer,caption,rule);
  }
  if (instruction instanceof ReadInstruction) {
    return new ReadBlock(x,y,width,height,pointer,caption,rule);
  }
  if (instruction instanceof RetInstruction) {
    return new ReturnBlock(x,y,width,height,pointer,caption,rule);
  }
  return new SimpleBlock(x,y,width,height,pointer,caption,rule);
}
