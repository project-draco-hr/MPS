{
  ModelFactory factory=PersistenceRegistry.getInstance().getModelFactory(extension);
  if (factory != null) {
    try {
      InMemoryStreamDataSource source=new InMemoryStreamDataSource();
      factory.save(model,source);
      return source.getContentAsStream();
    }
 catch (    ModelSaveException ex) {
      ex.printStackTrace();
    }
catch (    IOException ex) {
      ex.printStackTrace();
    }
  }
  return new ByteArrayInputStream(new byte[0]);
}
