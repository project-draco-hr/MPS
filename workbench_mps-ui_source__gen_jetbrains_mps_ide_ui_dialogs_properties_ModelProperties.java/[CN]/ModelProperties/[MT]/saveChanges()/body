{
  if (!(myModelDescriptor instanceof EditableSModel)) {
    return;
  }
  addNewModels();
  removeUnusedModels();
  addNewLanguages();
  removeUnusedLanguages();
  addNewDevKits();
  removeUnusedDevKits();
  addNewEngagedOnGenerationLanguages();
  removeUnusedEngagedOnGenerationLanguages();
  if (myModelDescriptor instanceof GeneratableSModel) {
    GeneratableSModel dmd=(GeneratableSModel)myModelDescriptor;
    if (dmd.isDoNotGenerate() != myDoNotGenerate) {
      dmd.setDoNotGenerate(myDoNotGenerate);
    }
  }
  if (myModelDescriptor instanceof SModelBase) {
    jetbrains.mps.smodel.SModel dm=((SModelBase)myModelDescriptor).getSModelInternal();
    if (dm instanceof DefaultSModel) {
      if (myGenerateIntoModelFolder) {
        ((DefaultSModel)dm).getSModelHeader().setOptionalProperty(USE_MODEL_FOLDER_FOR_GENERATION,Boolean.TRUE.toString());
      }
 else {
        ((DefaultSModel)dm).getSModelHeader().removeOptionalProperty(USE_MODEL_FOLDER_FOR_GENERATION);
      }
    }
  }
  if (myModelDescriptor.getSource() instanceof NullDataSource) {
    ((EditableSModel)myModelDescriptor).save();
  }
  new MissingDependenciesFixer(myModelDescriptor).fixModuleDependencies();
  ModelGenerationStatusManager.getInstance().invalidateData(Collections.singleton(myModelDescriptor));
}
