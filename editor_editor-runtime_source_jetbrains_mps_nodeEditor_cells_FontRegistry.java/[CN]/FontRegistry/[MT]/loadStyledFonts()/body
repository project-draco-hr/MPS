{
  if (!SystemInfo.isMac) {
    return;
  }
  myAvailableFonts=new HashMap<String,FontFamily>();
  GraphicsEnvironment graphicsEnvironment=GraphicsEnvironment.getLocalGraphicsEnvironment();
  for (  Font font : graphicsEnvironment.getAllFonts()) {
    String fontFamilyName=font.getFamily();
    FontFamily fontFamily=myAvailableFonts.get(fontFamilyName);
    if (fontFamily == null) {
      fontFamily=new FontFamily(fontFamilyName);
      myAvailableFonts.put(fontFamilyName,fontFamily);
    }
    fontFamily.addFont(font.getName());
  }
  for (  String fontFamilyName : myAvailableFonts.keySet().toArray(new String[myAvailableFonts.size()])) {
    FontFamily fontFamily=myAvailableFonts.get(fontFamilyName);
    if (!fontFamily.isValid()) {
      myAvailableFonts.remove(fontFamilyName);
    }
  }
}
