{
  final SNode typedCommand=SConceptOperations.createNewNode("jetbrains.mps.console.base.structure.CommandHolder",null);
  if (command != null) {
    addNodeImports(command);
    SLinkOperations.setTarget(typedCommand,"command",SNodeOperations.copyNode(SLinkOperations.getTarget(SLinkOperations.getTarget(myRoot,"commandHolder",true),"command",true)),true);
    SLinkOperations.setTarget(SLinkOperations.getTarget(myRoot,"commandHolder",true),"command",SNodeOperations.copyNode(command),true);
  }
  myTool.selectTab(this);
  BehaviorReflection.invokeVirtual(Void.class,SLinkOperations.getTarget(SLinkOperations.getTarget(myRoot,"commandHolder",true),"command",true),"virtual_execute_6854397602732226506",new Object[]{getConsoleContext(),getConsoleStream(),new Runnable(){
    public void run(){
      ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(myRoot,"history",true),"item",true)).addElement(SNodeOperations.copyNode(SLinkOperations.getTarget(myRoot,"commandHolder",true)));
      SNodeOperations.deleteNode(SLinkOperations.getTarget(SLinkOperations.getTarget(myRoot,"commandHolder",true),"command",true));
      check_6q36mf_a2a0a0c0a3a65(executeBefore);
    }
  }
,new Runnable(){
    public void run(){
      SLinkOperations.setTarget(SLinkOperations.getTarget(myRoot,"commandHolder",true),"command",SLinkOperations.getTarget(typedCommand,"command",true),true);
      check_6q36mf_a1a0a0d0a3a65(executeAfter);
    }
  }
});
}
