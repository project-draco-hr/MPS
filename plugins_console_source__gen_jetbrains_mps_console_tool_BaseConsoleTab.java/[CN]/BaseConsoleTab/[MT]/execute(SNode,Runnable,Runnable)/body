{
  myTool.selectTab(this);
  final SNode[] typedCommand=new SNode[1];
  getProject().getModelAccess().executeCommand(new Runnable(){
    public void run(){
      typedCommand[0]=SConceptOperations.createNewNode(SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,"jetbrains.mps.console.base.structure.CommandHolder")));
      if (command != null) {
        addNodeImports(command);
        SLinkOperations.setTarget(typedCommand[0],MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,0x4e27160acb44924L,"command"),SNodeOperations.copyNode(SLinkOperations.getTarget(SLinkOperations.getTarget(myRoot,MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x15fb34051f725a2cL,0x15fb34051f725bb1L,"commandHolder")),MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,0x4e27160acb44924L,"command"))));
        SLinkOperations.setTarget(SLinkOperations.getTarget(myRoot,MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x15fb34051f725a2cL,0x15fb34051f725bb1L,"commandHolder")),MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,0x4e27160acb44924L,"command"),SNodeOperations.copyNode(command));
      }
    }
  }
);
  BehaviorReflection.invokeVirtual(Void.class,SLinkOperations.getTarget(SLinkOperations.getTarget(myRoot,MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x15fb34051f725a2cL,0x15fb34051f725bb1L,"commandHolder")),MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,0x4e27160acb44924L,"command")),"virtual_execute_6854397602732226506",new Object[]{getConsoleContext(),getConsoleStream(),new Runnable(){
    public void run(){
      getProject().getModelAccess().executeCommand(new Runnable(){
        public void run(){
          ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(myRoot,MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x15fb34051f725a2cL,0x15fb34051f725bafL,"history")),MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0xa835f28c1aa02beL,0x63da33792b5df49aL,"item"))).addElement(SNodeOperations.copyNode(SLinkOperations.getTarget(myRoot,MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x15fb34051f725a2cL,0x15fb34051f725bb1L,"commandHolder"))));
          SNodeOperations.deleteNode(SLinkOperations.getTarget(SLinkOperations.getTarget(myRoot,MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x15fb34051f725a2cL,0x15fb34051f725bb1L,"commandHolder")),MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,0x4e27160acb44924L,"command")));
          check_6q36mf_a2a0a0a0a0a2a0d0kc(executeBefore);
        }
      }
);
    }
  }
,new Runnable(){
    public void run(){
      getProject().getModelAccess().executeCommand(new Runnable(){
        public void run(){
          SLinkOperations.setTarget(SLinkOperations.getTarget(myRoot,MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x15fb34051f725a2cL,0x15fb34051f725bb1L,"commandHolder")),MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,0x4e27160acb44924L,"command"),SLinkOperations.getTarget(typedCommand[0],MetaAdapterFactory.getContainmentLink(0xde1ad86d6e504a02L,0xb306d4d17f64c375L,0x4e27160acb4484bL,0x4e27160acb44924L,"command")));
          check_6q36mf_a1a0a0a0a0a3a0d0kc(executeAfter);
        }
      }
);
    }
  }
});
}
