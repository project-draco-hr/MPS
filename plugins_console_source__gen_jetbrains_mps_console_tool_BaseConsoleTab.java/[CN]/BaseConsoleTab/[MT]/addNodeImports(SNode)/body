{
  for (  SNode subNode : ListSequence.fromList(SNodeOperations.getNodeDescendants(node,null,true,new SConcept[]{}))) {
    SModuleReference usedLanguage=subNode.getConcept().getLanguage().getSourceModule().getModuleReference();
    if (!(((SModelInternal)myModel).importedLanguages().contains(usedLanguage))) {
      ((SModelInternal)myModel).addLanguage(usedLanguage);
      ((AbstractModule)myModel.getModule()).addUsedLanguage(usedLanguage);
    }
    for (    SReference ref : Sequence.fromIterable(SNodeOperations.getReferences(subNode))) {
      SModel usedModel=SNodeOperations.getModel(SLinkOperations.getTargetNode(ref));
      if (usedModel != null && !(((SModelInternal)myModel).importedModels().contains(usedModel))) {
        ((SModelInternal)myModel).addModelImport(usedModel.getReference(),false);
        ((AbstractModule)myModel.getModule()).addDependency(SNodeOperations.getModel(SLinkOperations.getTargetNode(ref)).getModule().getModuleReference(),false);
      }
    }
  }
}
