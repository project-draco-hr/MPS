{
  Window window=parent instanceof Window ? (Window)parent : SwingUtilities.getWindowAncestor(parent);
  ModuleChooserDialog dialog;
  if (window instanceof Frame) {
    dialog=new ModuleChooserDialog((Frame)window,modules,nonProjectModules,entityString,multiSelection);
  }
 else {
    dialog=new ModuleChooserDialog((Dialog)window,modules,nonProjectModules,entityString,multiSelection);
  }
  dialog.showDialog();
  return dialog.getResult();
}
