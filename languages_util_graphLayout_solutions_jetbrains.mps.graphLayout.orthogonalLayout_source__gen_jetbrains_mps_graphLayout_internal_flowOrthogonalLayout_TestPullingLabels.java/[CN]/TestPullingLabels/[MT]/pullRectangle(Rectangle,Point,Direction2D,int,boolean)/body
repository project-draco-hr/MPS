{
  int dx=direction.dx();
  int dy=direction.dy();
  boolean eq1;
  boolean eq2;
  if (direction.isHorizontal()) {
    eq1=Util1D.getDirection(center.x,rect.x) != dx;
    eq2=Util1D.getDirection(center.x,rect.x + rect.width) != dx;
  }
 else {
    eq1=Util1D.getDirection(center.y,rect.y) != dy;
    eq2=Util1D.getDirection(center.y,rect.y + rect.height) != dy;
  }
  boolean notShift;
  if (alongEdge) {
    notShift=eq1 && eq2;
  }
 else {
    notShift=eq1 || eq2;
  }
  if (notShift) {
    return new Rectangle(rect);
  }
 else {
    dx=direction.dx() * shift;
    dy=direction.dy() * shift;
    return new Rectangle(rect.x + dx,rect.y + dy,rect.width,rect.height);
  }
}
