{
  try {
    _FunctionTypes._return_P1_E0<? extends SNode,? super String> createClassifierType=new _FunctionTypes._return_P1_E0<SNode,String>(){
      public SNode invoke(      String name){
        return createClassifierType(name);
      }
    }
;
    Map<String,VariableDescription> contextVariables=myEvaluationContext.getVariables(createClassifierType);
    Map<String,SNode> declaredVariables=MapSequence.fromMap(new LinkedHashMap<String,SNode>(16,(float)0.75,false));
    for (    SNode var : ListSequence.fromList(SLinkOperations.getChildren(evaluatorConcept,MetaAdapterFactory.getContainmentLink(new UUID(9053457975011001859l,-9123640110572141707l),6036237525966182693l,6036237525966243735l,"variables")))) {
      MapSequence.fromMap(declaredVariables).put(SPropertyOperations.getString(var,MetaAdapterFactory.getProperty(new UUID(9053457975011001859l,-9123640110572141707l),6036237525966182694l,5600437724825490670l,"lowLevelName")),var);
    }
    final Set<SNode> foundVars=SetSequence.fromSet(new HashSet<SNode>());
    for (    String variable : MapSequence.fromMap(contextVariables).keySet()) {
      String name=variable;
      SNode lowLevelVarNode=MapSequence.fromMap(declaredVariables).get(name);
      if (needUpdateVariables()) {
        if (lowLevelVarNode == null) {
          lowLevelVarNode=SConceptOperations.createNewNode("jetbrains.mps.debugger.java.evaluation.structure.LowLevelVariable",null);
          ListSequence.fromList(SLinkOperations.getChildren(evaluatorConcept,MetaAdapterFactory.getContainmentLink(new UUID(9053457975011001859l,-9123640110572141707l),6036237525966182693l,6036237525966243735l,"variables"))).addElement(lowLevelVarNode);
          MapSequence.fromMap(declaredVariables).put(name,lowLevelVarNode);
        }
        MapSequence.fromMap(contextVariables).get(variable).updateLowLevelVariable(lowLevelVarNode);
      }
      SetSequence.fromSet(foundVars).addElement(lowLevelVarNode);
    }
    Sequence.fromIterable(MapSequence.fromMap(declaredVariables).values()).visitAll(new IVisitor<SNode>(){
      public void visit(      SNode it){
        SPropertyOperations.set(it,MetaAdapterFactory.getProperty(new UUID(9053457975011001859l,-9123640110572141707l),6036237525966182694l,6146091894852355121l,"isOutOfScope"),"" + (!(SetSequence.fromSet(foundVars).contains(it))));
      }
    }
);
    if (needUpdateVariables()) {
      SLinkOperations.setTarget(evaluatorConcept,MetaAdapterFactory.getContainmentLink(new UUID(9053457975011001859l,-9123640110572141707l),6036237525966182693l,4544608336420681237l,"contextNode"),myEvaluationContext.getStaticContextType(createClassifierType));
      SLinkOperations.setTarget(evaluatorConcept,MetaAdapterFactory.getContainmentLink(new UUID(9053457975011001859l,-9123640110572141707l),6036237525966182693l,4544608336420681235l,"thisNode"),myEvaluationContext.getThisClassifierType(createClassifierType));
    }
  }
 catch (  InvalidStackFrameException e) {
    if (LOG.isEnabledFor(Level.WARN)) {
      LOG.warn("InvalidStackFrameException",e);
    }
  }
  myVariablesInitialized=true;
}
