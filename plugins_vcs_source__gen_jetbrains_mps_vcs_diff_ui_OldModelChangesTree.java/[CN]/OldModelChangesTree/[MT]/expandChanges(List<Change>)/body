{
  runWithoutExpansion(new Runnable(){
    public void run(){
      for (      Change c : changes) {
        if (c instanceof NewNodeChange) {
          NewNodeChange nnc=(NewNodeChange)c;
          if (nnc.getNodeParent() == null || !(myAddedNodes.contains(nnc.getNodeParent()))) {
            expandNode(c.getAffectedNodeId());
          }
        }
 else         if (c instanceof SetPropertyChange || c instanceof SetReferenceChange) {
          SNodeId id=c.getAffectedNodeId();
          if (!(myAddedNodes.contains(id))) {
            expandNode(id);
          }
        }
 else         if (c instanceof DeleteNodeChange) {
        }
 else {
          expandNode(c.getAffectedNodeId());
        }
      }
    }
  }
);
}
