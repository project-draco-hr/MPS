{
  EditorComponent editorComponent=editorContext.getNodeEditorComponent();
  SNode root=node.getContainingRoot();
  Set<EditorMessage> result=SetSequence.fromSet(new HashSet<EditorMessage>());
  if (root == null) {
    LOG.error("containing root for node " + node + " is null");
    return result;
  }
  SModelDescriptor descriptor=SNodeOperations.getModel(root).getModelDescriptor();
  if (descriptor == null) {
    return result;
  }
  LanguageErrorsComponent errorsComponent=MapSequence.fromMap(myRootsToComponents).get(root);
  if (errorsComponent == null) {
    errorsComponent=new LanguageErrorsComponent(editorComponent.getEditedNode());
    MapSequence.fromMap(myRootsToComponents).put(root,errorsComponent);
  }
  if (!(editorComponent instanceof InspectorEditorComponent) && !(SetSequence.fromSet(myEditorComponents).contains(editorComponent))) {
    SetSequence.fromSet(myEditorComponents).addElement(editorComponent);
    editorComponent.addDisposeListener(myDisposeListener);
  }
  addModelListener(descriptor);
  if (!(wasCheckedOnce)) {
    errorsComponent.clear();
  }
  boolean changed=false;
  TypeCheckingContext typecheckingContext=editorComponent.getTypeCheckingContext();
  try {
    if (typecheckingContext != null) {
      typecheckingContext.setIsNonTypesystemComputation();
    }
    changed=errorsComponent.check(node,myRules,editorContext.getOperationContext());
  }
  finally {
    if (typecheckingContext != null) {
      typecheckingContext.resetIsNonTypesystemComputation();
    }
  }
  myMessagesChanged=changed;
  for (  IErrorReporter errorReporter : errorsComponent.getErrors()) {
    MessageStatus status=errorReporter.getMessageStatus();
    String errorString=errorReporter.reportError();
    HighlighterMessage message=HighlightUtil.createHighlighterMessage(errorReporter.getSNode(),NameUtil.capitalize(status.getPresentation()) + ": " + errorString,errorReporter,LanguageChecker.this,editorContext);
    SetSequence.fromSet(result).addElement(message);
  }
  return result;
}
