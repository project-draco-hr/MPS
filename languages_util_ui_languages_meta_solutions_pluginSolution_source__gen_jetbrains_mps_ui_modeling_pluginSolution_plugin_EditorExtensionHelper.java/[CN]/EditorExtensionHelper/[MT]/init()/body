{
  SModel wdesc=SModelRepository.getInstance().getModelDescriptor(SModelFqName.fromString(this.getWidgetTemplatesModel(this.templatesBase)));
  final SModel widgetsModel=(wdesc != null ? wdesc.getSModel() : null);
  this.uiObjectTemplateProvider=new IObjectsProvider<SNode,SNode>(){
    @Override public Iterable<SNode> getObjects(){
      return (widgetsModel != null ? SModelOperations.getNodes(widgetsModel,"jetbrains.mps.ui.modeling.structure.UIObjectTemplate") : (Iterable<SNode>)EditorExtensionHelper.EMPTY);
    }
    @Override public SNode create(    final SNode context){
      final Wrappers._T<SNode> tpl=new Wrappers._T<SNode>();
      ModelAccess.instance().runWriteActionInCommand(new Runnable(){
        public void run(){
          tpl.value=SModelOperations.createNewRootNode(widgetsModel,"jetbrains.mps.ui.modeling.structure.UIObjectTemplate",null);
          SLinkOperations.setTarget(tpl.value,"uiObject",context,false);
        }
      }
);
      return tpl.value;
    }
    @Override public Object info(){
      return EditorExtensionHelper.this.templatesBase;
    }
  }
;
  SModel edesc=SModelRepository.getInstance().getModelDescriptor(SModelFqName.fromString(this.getEventHandlerTemplatesModel(this.templatesBase)));
  final SModel eventsModel=(edesc != null ? edesc.getSModel() : null);
  this.eventHandlerProvider=new IObjectsProvider<SNode,SNode>(){
    @Override public Iterable<SNode> getObjects(){
      return (eventsModel != null ? SModelOperations.getNodes(eventsModel,"jetbrains.mps.ui.modeling.structure.EventHandlerTemplate") : (Iterable<SNode>)EditorExtensionHelper.EMPTY);
    }
    @Override public SNode create(    final SNode context){
      final Wrappers._T<SNode> eht=new Wrappers._T<SNode>();
      ModelAccess.instance().runWriteActionInCommand(new Runnable(){
        public void run(){
          eht.value=SModelOperations.createNewRootNode(eventsModel,"jetbrains.mps.ui.modeling.structure.EventHandlerTemplate",null);
          SLinkOperations.setTarget(eht.value,"event",context,false);
        }
      }
);
      return eht.value;
    }
    @Override public Object info(){
      return EditorExtensionHelper.this.templatesBase;
    }
  }
;
  EditorExtensions.runDelayed(new _FunctionTypes._void_P1_E0<EditorExtensions>(){
    public void invoke(    EditorExtensions ee){
      ee.addUIObjectTemplateProvider(EditorExtensionHelper.this.uiObjectTemplateProvider);
      ee.addEventHandlerTemplateProvider(EditorExtensionHelper.this.eventHandlerProvider);
    }
  }
);
  EditorExtensions.runOnDispose(new _FunctionTypes._void_P1_E0<EditorExtensions>(){
    public void invoke(    EditorExtensions ee){
      ee.removeUIObjectTemplateProvider(EditorExtensionHelper.this.uiObjectTemplateProvider);
      ee.removeEventHandlerTemplateProvider(EditorExtensionHelper.this.eventHandlerProvider);
    }
  }
);
}
