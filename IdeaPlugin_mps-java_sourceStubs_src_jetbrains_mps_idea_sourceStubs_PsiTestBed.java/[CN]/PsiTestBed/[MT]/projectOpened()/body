{
  final PsiManager psi=PsiManager.getInstance(myProject);
  VirtualFileManager virt=VirtualFileManager.getInstance();
  final VirtualFile vf=virt.findFileByUrl("file:///home/danilla/jb/MpsInteg/src/jb/test/MyClass.java");
  final VirtualFile vd=virt.findFileByUrl("file:///home/danilla/jb/MpsInteg/src/jb/test/");
  if (vf == null) {
    System.out.println("Virt file is null");
    return;
  }
  if (vd == null) {
    System.out.println("Virt dir is null");
    return;
  }
  StartupManager.getInstance(myProject).runWhenProjectIsInitialized(new Runnable(){
    @Override public void run(){
      PsiFile pf=psi.findFile(vf);
      if (pf == null) {
        System.out.println("psi file = null");
        return;
      }
      if (!(pf instanceof PsiJavaFile)) {
        System.out.println("psi file is not java");
        return;
      }
      PsiJavaFile pjf=(PsiJavaFile)pf;
      for (      PsiClass cls : pjf.getClasses()) {
        System.out.println("Class name: " + cls.getQualifiedName());
      }
      PsiDirectory pd=psi.findDirectory(vd);
      if (pd == null) {
        System.out.println("psi dir = null");
        return;
      }
      for (      PsiFile f : pd.getFiles()) {
        System.out.println("Psi file name: " + f.getName());
      }
    }
  }
);
}
