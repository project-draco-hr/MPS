{
  FeatureUsageTracker.getInstance().triggerFeatureUsed("refactoring.introduceVariable");
  final IntroduceLocalVariableRefactoring refactoring=new IntroduceLocalVariableRefactoring();
  final Wrappers._T<String> error=new Wrappers._T<String>();
  ((EditorContext)MapSequence.fromMap(_params).get("editorContext")).getRepository().getModelAccess().runReadAction(new Runnable(){
    public void run(){
      SNode nodeToRefactor=IntroduceVariable_Action.this.getNodeToRefactor(_params);
      error.value=refactoring.init(nodeToRefactor,((EditorComponent)MapSequence.fromMap(_params).get("component")));
    }
  }
);
  if (error.value == null) {
    final LocalVariableIntroducer introducer=new LocalVariableIntroducer(((Frame)MapSequence.fromMap(_params).get("frame")),refactoring,((EditorComponent)MapSequence.fromMap(_params).get("component")),((EditorContext)MapSequence.fromMap(_params).get("editorContext")));
    introducer.invoke(event.getDataContext());
  }
 else {
    JOptionPane.showMessageDialog(((EditorComponent)MapSequence.fromMap(_params).get("component")),error.value,"Error",JOptionPane.ERROR_MESSAGE);
  }
}
