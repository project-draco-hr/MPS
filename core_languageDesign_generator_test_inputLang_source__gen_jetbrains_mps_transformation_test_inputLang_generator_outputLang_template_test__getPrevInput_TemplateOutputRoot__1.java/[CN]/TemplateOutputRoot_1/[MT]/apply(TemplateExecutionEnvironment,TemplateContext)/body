{
  final SNode tnode1=new SNode(environment.getOutputModel(),"jetbrains.mps.transformation.test.outputLang.structure.OutputRoot",false);
  try {
    environment.getTracer().pushTemplateNode(templateNode_rz5qmv_a0a0a1a1);
    environment.nodeCopied(context,tnode1,"tpl/r:00000000-0000-4000-0000-011c895905f7/1202255620269");
    tnode1.setProperty("name","OutputRoot_1");
    tnode1.setProperty("text","'getPrevInputTest' output root (1)");
{
      final List<SNode> tlist2=new ArrayList();
      try {
        environment.getTracer().pushMacro(mapsrclMacroRef_rz5qmv_a0a0a1a5a1a1);
        final Iterable<SNode> sourceList2=QueriesGenerated.sourceNodesQuery_1233603475878(environment.getOperationContext(),new SourceSubstituteMacroNodesContext(context.getInput(),null,mapsrclMacroRef_rz5qmv_a0a0a1a5a1a1,context,environment.getGenerator()));
        for (        SNode itnode2 : sourceList2) {
          if (itnode2 == null) {
            continue;
          }
          TemplateContext context2=context.subContext("LEVEL 1",itnode2);
          boolean inputChanged2=context.getInput() != itnode2;
          try {
            if (inputChanged2) {
              environment.getTracer().pushInputNode(itnode2);
            }
            final List<SNode> tlist3=new ArrayList();
            try {
              environment.getTracer().pushMacro(loopMacroRef_rz5qmv_a0a0a2a3a3a1a5a1a1);
              final Iterable<SNode> loopList3=QueriesGenerated.sourceNodesQuery_1202256587517(environment.getOperationContext(),new SourceSubstituteMacroNodesContext(context2.getInput(),null,loopMacroRef_rz5qmv_a0a0a2a3a3a1a5a1a1,context2,environment.getGenerator()));
              for (              SNode itnode3 : loopList3) {
                if (itnode3 == null) {
                  continue;
                }
                boolean inputChanged3=context2.getInput() != itnode3;
                try {
                  if (inputChanged3) {
                    environment.getTracer().pushInputNode(itnode3);
                  }
                  TemplateContext context3=context2.subContext("LEVEL 2",itnode3);
                  final List<SNode> tlist4=new ArrayList();
                  try {
                    environment.getTracer().pushMacro(loopMacroRef_rz5qmv_a0a0a3a2a2a2a3a3a1a5a1a1);
                    final Iterable<SNode> loopList4=QueriesGenerated.sourceNodesQuery_1202256594380(environment.getOperationContext(),new SourceSubstituteMacroNodesContext(context3.getInput(),null,loopMacroRef_rz5qmv_a0a0a3a2a2a2a3a3a1a5a1a1,context3,environment.getGenerator()));
                    for (                    SNode itnode4 : loopList4) {
                      if (itnode4 == null) {
                        continue;
                      }
                      boolean inputChanged4=context3.getInput() != itnode4;
                      try {
                        if (inputChanged4) {
                          environment.getTracer().pushInputNode(itnode4);
                        }
                        TemplateContext context4=context3.subContext(null,itnode4);
                        final List<SNode> tlist5=new ArrayList();
                        try {
                          environment.getTracer().pushMacro(mapsrcMacroRef_rz5qmv_a0a0a3a2a2a3a2a2a2a3a3a1a5a1a1);
                          final SNode tnode6=new SNode(environment.getOutputModel(),"jetbrains.mps.transformation.test.outputLang.structure.OutputNode",false);
                          try {
                            environment.getTracer().pushTemplateNode(templateNode_rz5qmv_a0a0a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                            environment.nodeCopied(context4,tnode6,"tpl/r:00000000-0000-4000-0000-011c895905f7/1202256495546");
                            tnode6.setProperty("text",TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_1202326517571(environment.getOperationContext(),new PropertyMacroContext(context4.getInput(),"_text_",propertyMacro_rz5qmv_c0b0b0a2a2a3a2a2a3a2a2a2a3a3a1a5a1a1,context4,environment.getGenerator()))));
{
                              final SNode tnode7=new SNode(environment.getOutputModel(),"jetbrains.mps.transformation.test.outputLang.structure.OutputNode",false);
                              try {
                                environment.getTracer().pushTemplateNode(templateNode_rz5qmv_a0a0a1a4a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                                environment.nodeCopied(context4,tnode7,"tpl/r:00000000-0000-4000-0000-011c895905f7/1202327206676");
                                tnode7.setProperty("text",TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_1202327274819(environment.getOperationContext(),new PropertyMacroContext(context4.getInput(),"_root_level_was_",propertyMacro_rz5qmv_c0b0b0a2a1a4a2a3a2a2a3a2a2a2a3a3a1a5a1a1,context4,environment.getGenerator()))));
                              }
  finally {
                                environment.getTracer().pushOutputNode(tnode7);
                                environment.getTracer().closeTemplateNode(templateNode_rz5qmv_a0a0a1a4a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                              }
                              if (tnode7 != null) {
                                tnode6.addChild("outputChild",tnode7);
                              }
                            }
{
                              Collection<SNode> tlist8=null;
                              try {
                                environment.getTracer().pushMacro(ifMacroRef_rz5qmv_a0a0a1a5a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                                if (QueriesGenerated.ifMacro_Condition_1202332796047(environment.getOperationContext(),new IfMacroContext(context4.getInput(),ifMacroRef_rz5qmv_a0a0a1a5a2a3a2a2a3a2a2a2a3a3a1a5a1a1,context4,environment.getGenerator()))) {
                                  final SNode tnode9=new SNode(environment.getOutputModel(),"jetbrains.mps.transformation.test.outputLang.structure.OutputNode",false);
                                  try {
                                    environment.getTracer().pushTemplateNode(templateNode_rz5qmv_a0a0a1a1a1a5a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                                    environment.nodeCopied(context4,tnode9,"tpl/r:00000000-0000-4000-0000-011c895905f7/1202327778745");
                                    tnode9.setProperty("text",TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_1202327887568(environment.getOperationContext(),new PropertyMacroContext(context4.getInput(),"_level_1_was_",propertyMacro_rz5qmv_c0b0b0a2a1a1a1a5a2a3a2a2a3a2a2a2a3a3a1a5a1a1,context4,environment.getGenerator()))));
                                  }
  finally {
                                    environment.getTracer().pushOutputNode(tnode9);
                                    environment.getTracer().closeTemplateNode(templateNode_rz5qmv_a0a0a1a1a1a5a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                                  }
                                  tlist8=TemplateUtil.singletonList(tnode9);
                                }
                              }
  finally {
                                environment.getTracer().closeMacro(ifMacroRef_rz5qmv_a0a0a1a5a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                              }
                              for (                              SNode child10 : TemplateUtil.asNotNull(tlist8)) {
                                tnode6.addChild("outputChild",child10);
                              }
                            }
{
                              final SNode tnode11=new SNode(environment.getOutputModel(),"jetbrains.mps.transformation.test.outputLang.structure.OutputNode",false);
                              try {
                                environment.getTracer().pushTemplateNode(templateNode_rz5qmv_a0a0a1a6a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                                environment.nodeCopied(context4,tnode11,"tpl/r:00000000-0000-4000-0000-011c895905f7/1202327949446");
                                tnode11.setProperty("text",TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_1202327970031(environment.getOperationContext(),new PropertyMacroContext(context4.getInput(),"_level_2_was_",propertyMacro_rz5qmv_c0b0b0a2a1a6a2a3a2a2a3a2a2a2a3a3a1a5a1a1,context4,environment.getGenerator()))));
                              }
  finally {
                                environment.getTracer().pushOutputNode(tnode11);
                                environment.getTracer().closeTemplateNode(templateNode_rz5qmv_a0a0a1a6a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                              }
                              if (tnode11 != null) {
                                tnode6.addChild("outputChild",tnode11);
                              }
                            }
                          }
  finally {
                            environment.getTracer().pushOutputNode(tnode6);
                            environment.getTracer().closeTemplateNode(templateNode_rz5qmv_a0a0a2a3a2a2a3a2a2a2a3a3a1a5a1a1);
                          }
                          if (tnode6 != null) {
                            tlist5.add(tnode6);
                            environment.postProcess(new PostProcessor(){
                              public void process(                              SNode outputNode,                              TemplateContext postProcessContext){
                                QueriesGenerated.mapSrcMacro_post_mapper_1225236165359(environment.getOperationContext(),new MapSrcMacroPostProcContext(postProcessContext.getInput(),mapsrcMacroRef_rz5qmv_b0b0a0a0a0a0b0d0d0c0c0d0c0c0c0d0d0b0f0b0b,outputNode,postProcessContext,environment.getGenerator()));
                              }
                            }
,tnode6,context4);
                          }
                        }
  finally {
                          environment.getTracer().closeMacro(mapsrcMacroRef_rz5qmv_a0a0a3a2a2a3a2a2a2a3a3a1a5a1a1);
                        }
                        if (tlist5 != null) {
                          tlist4.addAll(tlist5);
                        }
                      }
  finally {
                        if (inputChanged4) {
                          environment.getTracer().closeInputNode(itnode4);
                        }
                      }
                    }
                  }
  finally {
                    environment.getTracer().closeMacro(loopMacroRef_rz5qmv_a0a0a3a2a2a2a3a3a1a5a1a1);
                  }
                  if (tlist4 != null) {
                    environment.registerLabel(itnode3,tlist4,"LEVEL 2");
                    tlist3.addAll(tlist4);
                  }
                }
  finally {
                  if (inputChanged3) {
                    environment.getTracer().closeInputNode(itnode3);
                  }
                }
              }
            }
  finally {
              environment.getTracer().closeMacro(loopMacroRef_rz5qmv_a0a0a2a3a3a1a5a1a1);
            }
            if (tlist3 != null) {
              tlist2.addAll(tlist3);
              environment.registerLabel(itnode2,tlist3,"LEVEL 1");
              for (              SNode mapSrcOutput12 : tlist3) {
                environment.postProcess(new PostProcessor(){
                  public void process(                  SNode outputNode,                  TemplateContext postProcessContext){
                    QueriesGenerated.mapSrcMacro_post_mapper_1233603527948(environment.getOperationContext(),new MapSrcMacroPostProcContext(postProcessContext.getInput(),mapsrclMacroRef_rz5qmv_a0a0a1a5a1a1,outputNode,postProcessContext,environment.getGenerator()));
                  }
                }
,mapSrcOutput12,context2);
              }
            }
          }
  finally {
            if (inputChanged2) {
              environment.getTracer().closeInputNode(itnode2);
            }
          }
        }
      }
  finally {
        environment.getTracer().closeMacro(mapsrclMacroRef_rz5qmv_a0a0a1a5a1a1);
      }
      for (      SNode child13 : TemplateUtil.asNotNull(tlist2)) {
        tnode1.addChild("outputChild",child13);
      }
    }
  }
  finally {
    environment.getTracer().pushOutputNode(tnode1);
    environment.getTracer().closeTemplateNode(templateNode_rz5qmv_a0a0a1a1);
  }
  return TemplateUtil.singletonList(tnode1);
}
