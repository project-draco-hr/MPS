{
  relayout();
  final NodeHighlightManager highlightManager=getHighlightManager();
  highlightManager.rebuildMessages();
  for (Iterator<ChangeEditorMessage> iterator=myChanges.iterator(); iterator.hasNext(); ) {
    ChangeEditorMessage change=iterator.next();
    if (highlightManager.getCell(change) == null) {
      iterator.remove();
    }
  }
  Collections.sort(myChanges,new Comparator<ChangeEditorMessage>(){
    public int compare(    ChangeEditorMessage o1,    ChangeEditorMessage o2){
      return highlightManager.getCell(o1).getY() - highlightManager.getCell(o2).getY();
    }
  }
);
  ChangesBlock block=null;
  for (  ChangeEditorMessage m : myChanges) {
    EditorCell cell=highlightManager.getCell(m);
    if (block == null) {
      block=createChangeBlock(rebuild);
    }
 else {
      if (block.getY2() < cell.getY()) {
        highlightManager.addChanges(this,block);
        block=createChangeBlock(rebuild);
      }
    }
    block.addChange(m,cell);
  }
  if (block != null) {
    highlightManager.addChanges(this,block);
  }
}
