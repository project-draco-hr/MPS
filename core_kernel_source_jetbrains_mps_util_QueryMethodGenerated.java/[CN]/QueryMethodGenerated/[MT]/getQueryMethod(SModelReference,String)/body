{
  final Method method=getQueryMethod(sourceModel,methodName,true);
  final boolean needOpContext=needsOpContext(method.getDeclaringClass());
  return new QueryMethod<T>(){
    @Override @SuppressWarnings("unchecked") public T invoke(    IOperationContext context,    Object contextObject){
      try {
        if (needOpContext) {
          return (T)method.invoke(null,context,contextObject);
        }
 else {
          return (T)method.invoke(null,contextObject);
        }
      }
 catch (      IllegalArgumentException e) {
        throw new RuntimeException("error invocation method: \"" + method.getName() + "\" in "+ method.getDeclaringClass().getName(),e);
      }
catch (      IllegalAccessException e) {
        throw new RuntimeException("error invocation method: \"" + method.getName() + "\" in "+ method.getDeclaringClass().getName(),e);
      }
catch (      InvocationTargetException e) {
        if (e.getCause() instanceof IllegalModelChangeError) {
          throw (IllegalModelChangeError)e.getCause();
        }
        String message="error invocation method: \"" + method.getName() + "\" in "+ method.getDeclaringClass().getName();
        LOG.error(message,e.getCause());
        throw new RuntimeException(message,e.getCause());
      }
    }
  }
;
}
