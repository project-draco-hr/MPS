{
  doSolutionsCompilation();
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          IFile outputPath=FileSystem.getInstance().getFileByPath(myCreatedSolution.getGeneratorOutputPath());
          IFile javaFile=outputPath.getDescendant(TEST_JAVA_FILE);
          long time=Math.max(System.currentTimeMillis(),javaFile.lastModified() + 1);
          if (!FileSystem.getInstance().setTimeStamp(javaFile,time)) {
            Assert.fail("Can't touch the file " + javaFile);
          }
        }
      }
);
    }
  }
,ModalityState.NON_MODAL);
  ModuleSources sources=new ModuleSources(myCreatedSolution,new Dependencies(Collections.EMPTY_SET));
  Set<JavaFile> filesToCompile=sources.getFilesToCompile();
  Assert.assertEquals(1,filesToCompile.size());
}
