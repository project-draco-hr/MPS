{
  doSolutionsCompilation();
  Thread.sleep(5);
  Solution sln=myProject.getProjectSolutions().get(0);
  String sourcePath=sln.getSourcePaths().get(0);
  File javaFile=collectSpecificFilesFromDir(new File(sourcePath),"java").get(0);
  long time=Math.max(System.currentTimeMillis(),javaFile.lastModified() + 1);
  if (!javaFile.setLastModified(time)) {
    fail("Can't touch the file " + javaFile);
  }
  ModuleSources sources=new ModuleSources(sln,new Dependencies(Collections.EMPTY_SET));
  String className=javaFile.getPath().replace(sourcePath + File.separator,"").replace(File.separator,".").replace(".java","");
  JavaFile javaFileForMake=new JavaFile(FileSystem.getFile(javaFile),className);
  Set<JavaFile> filesToCompile=sources.getFilesToCompile();
  assertEquals(1,filesToCompile.size());
  assertTrue(filesToCompile.contains(javaFileForMake));
}
