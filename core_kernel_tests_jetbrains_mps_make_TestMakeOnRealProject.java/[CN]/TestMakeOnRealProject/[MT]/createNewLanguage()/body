{
  String languageNamespace="TestLanguage";
  IFile descriptorFile=myTmpDir.getDescendant(languageNamespace + File.separator + languageNamespace+ MPSExtentions.DOT_LANGUAGE);
  LanguageDescriptor d=new LanguageDescriptor();
  d.setId(ModuleId.regular());
  d.setNamespace(languageNamespace);
  d.getRuntimeModules().add(myCreatedRuntimeSolution.getModuleReference());
  ModelRoot modelRoot=new ModelRoot();
  IFile languageModels=descriptorFile.getParent().getDescendant(Language.LANGUAGE_MODELS);
  modelRoot.setPath(languageModels.getPath());
  d.getModelRoots().add(modelRoot);
  LanguageDescriptorPersistence.saveLanguageDescriptor(descriptorFile,d,MacrosFactory.forModuleFile(descriptorFile));
  ModuleHandle handle=ModulesMiner.getInstance().loadModuleHandle(descriptorFile);
  return (Language)ModuleRepositoryFacade.createModule(handle,myModuleOwner);
}
