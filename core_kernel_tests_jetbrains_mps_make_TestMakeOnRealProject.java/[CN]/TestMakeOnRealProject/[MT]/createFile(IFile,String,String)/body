{
  FileSystem fileSystem=FileSystem.getInstance();
  IFile ifile=dir.getDescendant(fileName);
  ifile.createNewFile();
  Writer writer=null;
  try {
    writer=new OutputStreamWriter(ifile.openOutputStream());
    writer.append(text);
    writer.flush();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    if (writer != null) {
      try {
        writer.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
  if (!fileSystem.setTimeStamp(ifile,System.currentTimeMillis() - 1000)) {
    Assert.fail("Can't touch the file " + ifile);
  }
}
