{
{
    List<SNode> nodes=(List<SNode>)actionContext.getNodes();
    SModel targetModel=null;
    List<SNode> movedNodes=null;
    if (((Object)refactoringContext.getParameter("target")) instanceof SModelDescriptor) {
      targetModel=((SModelDescriptor)((Object)refactoringContext.getParameter("target"))).getSModel();
      movedNodes=refactoringContext.moveNodesToModel(nodes,targetModel);
    }
    if (((Object)refactoringContext.getParameter("target")) instanceof SNode) {
      SNode targetNode=(SNode)((Object)refactoringContext.getParameter("target"));
      movedNodes=refactoringContext.moveNodesToNode(nodes,ListSequence.fromList(nodes).getElement(0).getRole_(),targetNode);
      targetModel=targetNode.getModel();
    }
    if (targetModel != null) {
      IModule module=targetModel.getModelDescriptor().getModule();
      final IOperationContext operationContext=new ModuleContext(module,actionContext.getOperationContext().getMPSProject());
      if (operationContext != null) {
        final List<SNode> movedNodes1=movedNodes;
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          public void run(){
            operationContext.getComponent(MPSEditorOpener.class).openNode(ListSequence.fromList(movedNodes1).first());
          }
        }
);
      }
    }
  }
}
