{
  SNode applyToNode=ListSequence.<SNode>fromList(SNodeOperations.getAncestors(node,null,true)).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return !(SNodeOperations.isAttribute(it));
    }
  }
).first();
  SNodeFactoryOperations.setNewAttribute(applyToNode,new IAttributeDescriptor.NodeAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.template.structure.MtlTemplateRoot")),"jetbrains.mps.template.structure.MtlTemplateRoot");
}
