{
  Project project=e.getProject();
  if (project == null) {
    return false;
  }
  SNode curNode=e.getData(MPSCommonDataKeys.NODE);
  if (curNode == null) {
    return false;
  }
  IOperationContext context=e.getData(MPSCommonDataKeys.OPERATION_CONTEXT);
  if (context == null)   return false;
  SModule dependentModule=context.getModule();
  if (!(dependentModule instanceof SolutionIdea))   return false;
  SRepository repository=ProjectHelper.getProjectRepository(project);
  for (  SReference ref : curNode.getReferences()) {
    SModelReference mref=ref.getTargetSModelReference();
    if (mref == null)     continue;
    SModel model=mref.resolve(repository);
    if (model == null)     continue;
    SModule moduleToDependOn=model.getModule();
    if (!(moduleToDependOn instanceof SolutionIdea))     continue;
    return !VisibilityUtil.isVisible(dependentModule,moduleToDependOn);
  }
  return false;
}
