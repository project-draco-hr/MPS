{
  if (!(SNodeOperations.getModel(ms).getModule() instanceof Language)) {
    return;
  }
  List<SNode> scripts=SModelOperations.getRoots(SNodeOperations.getModel(ms),"jetbrains.mps.lang.migration.structure.MigrationScript");
  int scNum=ListSequence.fromList(scripts).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return SPropertyOperations.getInteger(it,"fromVersion") == SPropertyOperations.getInteger(ms,"fromVersion");
    }
  }
).count();
  if (scNum > 1) {
{
      MessageTarget errorTarget=new NodeMessageTarget();
      IErrorReporter _reporter_2309309498=typeCheckingContext.reportTypeError(ms,"" + scNum + " scripts found for version "+ SPropertyOperations.getInteger(ms,"fromVersion"),"r:47a77104-3b09-4998-a2bd-ada4655c0c77(jetbrains.mps.lang.migration.typesystem)","3334914821927938382",null,errorTarget);
    }
  }
  Language language=(Language)SNodeOperations.getModel(ms).getModule();
  int langVersion=language.getLanguageVersion();
  final int msTargetVer=SPropertyOperations.getInteger(ms,"fromVersion") + 1;
  int delta=msTargetVer - langVersion;
  if (delta == 0) {
    return;
  }
  if (ListSequence.fromList(scripts).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return SPropertyOperations.getInteger(it,"fromVersion") == msTargetVer;
    }
  }
).isEmpty()) {
    if (ListSequence.fromList(scripts).where(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return SPropertyOperations.getInteger(it,"fromVersion") > msTargetVer;
      }
    }
).isEmpty()) {
{
        MessageTarget errorTarget=new NodeMessageTarget();
        IErrorReporter _reporter_2309309498=typeCheckingContext.reportTypeError(ms,"Language version (" + langVersion + ") is greater than the targert version of last migration script ("+ msTargetVer+ ")","r:47a77104-3b09-4998-a2bd-ada4655c0c77(jetbrains.mps.lang.migration.typesystem)","3334914821928372740",null,errorTarget);
{
          BaseQuickFixProvider intentionProvider=new BaseQuickFixProvider("jetbrains.mps.lang.migration.typesystem.FixLanguageVersion_QuickFix",false);
          intentionProvider.putArgument("wanted",msTargetVer);
          intentionProvider.putArgument("l",language);
          _reporter_2309309498.addIntentionProvider(intentionProvider);
        }
      }
    }
 else {
{
        MessageTarget errorTarget=new NodeMessageTarget();
        IErrorReporter _reporter_2309309498=typeCheckingContext.reportTypeError(ms,"Script not found for version " + msTargetVer,"r:47a77104-3b09-4998-a2bd-ada4655c0c77(jetbrains.mps.lang.migration.typesystem)","3334914821928228337",null,errorTarget);
      }
    }
  }
}
