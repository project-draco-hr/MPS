{
  if (myListeners.containsKey(listener)) {
    return;
  }
  if (listener.getFileToListen() == null) {
    return;
  }
  String path=listener.getFileToListen().getPath();
  if (myListeners.putIfAbsent(listener,path) != null) {
    return;
  }
  FileSystemListenersContainer.Node curr=root;
  myLock.writeLock().lock();
  try {
    for (    String s : normalizeAndSplit(path)) {
      if ((s == null || s.length() == 0)) {
        continue;
      }
      curr=curr.child(s,true);
    }
    curr.addListener(listener);
  }
  finally {
    myLock.writeLock().unlock();
  }
}
