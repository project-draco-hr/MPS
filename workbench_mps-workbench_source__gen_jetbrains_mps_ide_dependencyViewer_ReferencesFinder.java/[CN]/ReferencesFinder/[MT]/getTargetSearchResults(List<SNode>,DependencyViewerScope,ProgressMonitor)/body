{
  SearchResults results=new SearchResults();
  try {
    monitor.start("computing references' targets",ListSequence.fromList(nodes).count());
    for (    SNode node : nodes) {
      for (      SReference ref : SNodeOperations.getReferences(((jetbrains.mps.smodel.SNode)node))) {
        jetbrains.mps.smodel.SNode target=ref.getTargetNodeSilently();
        if (target == null || scope.contains(target)) {
          continue;
        }
        results.getSearchResults().add(new SearchResult(target,"targets"));
      }
      monitor.advance(1);
      if (monitor.isCanceled()) {
        return results;
      }
    }
  }
  finally {
    monitor.done();
  }
  return results;
}
