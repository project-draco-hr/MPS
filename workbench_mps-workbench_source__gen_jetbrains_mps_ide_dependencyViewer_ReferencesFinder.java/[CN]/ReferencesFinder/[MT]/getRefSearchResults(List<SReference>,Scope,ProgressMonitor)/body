{
  final SearchResults results=new SearchResults();
  try {
    monitor.start("filtering references",ListSequence.fromList(references).count());
    for (    final SReference ref : references) {
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          if (scope.contains(ref.getTargetNode())) {
            results.getSearchResults().add(new SearchResult(ref.getSourceNode(),"references"));
          }
        }
      }
);
      if (monitor.isCanceled()) {
        return results;
      }
      monitor.advance(1);
    }
  }
  finally {
    monitor.done();
  }
  return results;
}
