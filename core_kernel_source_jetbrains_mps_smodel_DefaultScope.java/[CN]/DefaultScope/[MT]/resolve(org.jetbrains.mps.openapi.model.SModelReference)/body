{
  if (reference == null) {
    return null;
  }
  SModel model;
  if (reference.getModelId() != null) {
    model=SModelRepository.getInstance().getModelDescriptor(reference.getModelId());
  }
 else {
    SModelFqName fqName=((SModelReference)reference).getSModelFqName();
    if (fqName == null)     return null;
    model=SModelRepository.getInstance().getModelDescriptor(fqName);
  }
  if (model == null) {
    return null;
  }
synchronized (LOCK) {
    initialize();
    if (myVisibleModules.contains(model.getModule()))     return model;
    for (    Language l : myUsedLanguages) {
      if (l.getAccessoryModels().contains(model))       return model;
    }
  }
  return null;
}
