{
  if (reference == null) {
    return null;
  }
  SModule module;
  if (reference.getModuleId() != null) {
    module=MPSModuleRepository.getInstance().getModule(reference.getModuleId());
  }
 else {
    module=MPSModuleRepository.getInstance().getModuleByFqName(reference.getModuleName());
  }
  if (module == null) {
    return null;
  }
synchronized (LOCK) {
    initialize();
    if (myVisibleModules.contains(module) || myUsedLanguages.contains(module) || myUsedDevkits.contains(module)) {
      return module;
    }
 else {
      return null;
    }
  }
}
