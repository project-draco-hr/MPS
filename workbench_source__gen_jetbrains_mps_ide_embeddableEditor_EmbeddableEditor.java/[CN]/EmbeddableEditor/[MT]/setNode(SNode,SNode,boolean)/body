{
  myRootNode=rootNode;
  myNode=targetNode;
  if (addToModel) {
    myModel.getSModel().runLoadingAction(new Runnable(){
      public void run(){
        myModel.getSModel().addRoot(rootNode);
      }
    }
);
  }
  myFileNodeEditor=new MPSFileNodeEditor(myContext,MPSNodesVirtualFileSystem.getInstance().getFileFor(myNode));
  IEditor editor=myFileNodeEditor.getNodeEditor();
  if (editor instanceof NodeEditor) {
    NodeEditor nodeEditor=(NodeEditor)editor;
    nodeEditor.setEditable(myIsEditable);
  }
  if (myPanel == null) {
    myPanel=new EmbeddableEditorPanel(myFileNodeEditor);
  }
 else {
    myPanel.setEditor(myFileNodeEditor);
  }
}
