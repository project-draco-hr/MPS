{
  if (mode == IdMigrationMode.NAME) {
    if (myConceptFqName == null) {
      myConceptFqName=cid2name(myConcept);
    }
    if (myRoleInParent == null && myRoleInParentId != null) {
      setRoleInParent(lid2name(getContainmentLink()));
    }
    for (    SProperty prop : getPropertyIds()) {
      setProperty_byName(pid2name(prop),getProperty_byId(prop));
    }
    for (    SReference ref : getReferences()) {
      updateReferenceWorkingMode(mode,ref);
    }
  }
  if (mode == IdMigrationMode.ID) {
    if (myConcept == null) {
      myConcept=name2cid(myConceptFqName);
    }
    if (myRoleInParentId == null && myRoleInParent != null) {
      setRoleInParent_byId(name2lid(getParent(),getRoleInParent_byName()));
    }
    for (    String prop : getPropertyNames()) {
      setProperty_byId(name2pid(prop),getProperty_byName(prop));
    }
    for (    SReference ref : getReferences()) {
      updateReferenceWorkingMode(mode,ref);
    }
  }
}
