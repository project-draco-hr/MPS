{
  assertCanChange();
  Pair<SReference,SReference> res;
  if (isWorkingById() == Mode.NAME) {
    res=setReferenceTarget_byName(rid2name(role),target);
  }
 else {
    res=setReferenceTarget_byId(role,target);
  }
  if (res == null)   return;
  referenceChanged(role,res.o1,res.o2);
}
