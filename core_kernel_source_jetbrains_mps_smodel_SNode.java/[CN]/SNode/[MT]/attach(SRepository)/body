{
  repo.getModelAccess().checkReadAccess();
  if (myRepository == repo)   return;
synchronized (REPO_LOCK) {
    if (myRepository == repo)     return;
    if (myRepository != null) {
      throw new IllegalStateException("trying to attach a node from a repository to some other repository");
    }
    myRepository=repo;
  }
}
