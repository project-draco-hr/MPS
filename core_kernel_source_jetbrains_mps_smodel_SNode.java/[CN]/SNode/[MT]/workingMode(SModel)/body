{
  if (model == null)   return IdMigrationMode.UNKNOWN;
  if (model.getClass().getName().equals("jetbrains.mps.smodel.tempmodel.TempModel$1"))   return IdMigrationMode.NAME;
  if (model.getClass().getName().equals("jetbrains.mps.generator.TransientSModel"))   return IdMigrationMode.NAME;
  if (model instanceof ProjectStructureSModel)   return IdMigrationMode.NAME;
  if (!(model instanceof DefaultSModel))   return IdMigrationMode.NAME;
  return ((DefaultSModel)model).getSModelHeader().getPersistenceVersion() > 8 ? IdMigrationMode.ID : IdMigrationMode.NAME;
}
