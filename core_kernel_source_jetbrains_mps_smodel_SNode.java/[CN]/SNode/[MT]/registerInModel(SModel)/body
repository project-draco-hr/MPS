{
  if (myRegisteredInModelFlag) {
    if (model != myModel) {
      LOG.errorWithTrace("couldn't register node which is already registered in '" + myModel.getSModelReference() + "'");
    }
    return;
  }
  SModel wasModel=myModel;
  myModel=model;
  myModel.registerNode(this);
  myRegisteredInModelFlag=true;
  UnregisteredNodes.instance().remove(this);
  if (myAdapter != null) {
    UnregisteredNodesWithAdapters.getInstance().remove(this);
  }
  if (wasModel != model) {
    ModelChangedCaster.getInstance().fireModelChanged(this,wasModel);
  }
  for (SNode child=myFirstChild; child != null; child=child.myNextSibling) {
    child.registerInModel(model);
  }
  if (!myModel.hasLanguage(getLanguageNamespace())) {
    Language lang=GlobalScope.getInstance().getLanguage(getLanguageNamespace());
    if (lang != null) {
      myModel.addLanguage_internal(lang.getModuleReference());
    }
  }
}
