{
  if (workingMode(model) == IdMigrationMode.NAME) {
    if (myConceptFqName == null) {
      myConceptFqName=cid2name(myConceptId);
    }
    if (myRoleInParent == null && myRoleInParentId != null) {
      setRoleInParent(lid2name(getRoleInParentId()));
    }
    for (    SPropertyId prop : getPropertyIds()) {
      setProperty_byName(pid2name(prop),getProperty_byId(prop));
    }
    for (    SReference ref : getReferences()) {
      if (ref.getRole() == null) {
        ref.setRole(rid2name(ref.getRoleId()));
      }
    }
  }
  if (workingMode(model) == IdMigrationMode.ID) {
    if (myConceptId == null) {
      myConceptId=name2cid(myConceptFqName);
    }
    if (myRoleInParentId == null && myRoleInParent != null) {
      setRoleInParentId(name2lid(getParent(),getRoleInParent_byName()));
    }
    for (    String prop : getPropertyNames()) {
      setProperty_byId(name2pid(prop),getProperty_byName(prop));
    }
    for (    SReference ref : getReferences()) {
      if (ref.getRoleId() == null) {
        ref.setRoleId(name2rid(ref.getRole()));
      }
    }
  }
}
