{
  int index=-1;
  for (int i=0; i < myReferences.length; i++) {
    if (myReferences[i] == ref) {
      index=i;
      break;
    }
  }
  if (index == -1) {
    LOG.error("ref not found " + ref,new Throwable());
    return;
  }
  jetbrains.mps.smodel.SReference[] newArray=new jetbrains.mps.smodel.SReference[myReferences.length - 1];
  System.arraycopy(myReferences,0,newArray,0,index);
  System.arraycopy(myReferences,index + 1,newArray,index,myReferences.length - index - 1);
  myReferences=newArray;
  performUndoableAction(new Computable<SNodeUndoableAction>(){
    @Override public SNodeUndoableAction compute(){
      return new RemoveReferenceAtUndoableAction(SNode.this,ref);
    }
  }
);
}
