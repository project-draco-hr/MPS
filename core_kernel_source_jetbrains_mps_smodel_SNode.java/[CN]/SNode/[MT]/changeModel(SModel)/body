{
  if (myModel == newModel)   return;
  LOG.assertLog(myModel == null,"couldn't change model of registered node " + org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(this));
  myModel=newModel;
  myModelForUndo=newModel;
  for (SNode child=firstChild(); child != null; child=child.nextSibling()) {
    child.changeModel(newModel);
  }
}
