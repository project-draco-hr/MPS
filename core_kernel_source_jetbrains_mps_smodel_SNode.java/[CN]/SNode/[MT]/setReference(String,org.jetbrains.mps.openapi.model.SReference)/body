{
  assertCanChange();
  if (reference instanceof SReference) {
    updateReferenceWorkingMode(workingMode(),(SReference)reference);
  }
  SReference toRemove;
  if (workingMode() == IdMigrationMode.ID) {
    toRemove=setReference_byId(name2rid(role),reference);
  }
 else {
    toRemove=setReference_byName(role,reference);
  }
  referenceChanged(role,toRemove,reference);
}
