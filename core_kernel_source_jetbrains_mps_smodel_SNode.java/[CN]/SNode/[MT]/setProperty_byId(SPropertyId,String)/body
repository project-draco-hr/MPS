{
  int index=getPropertyIndex_byId(pname);
  final String oldValue=index == -1 ? null : (String)myNewProperties[index + 1];
  if (EqualUtil.equals(oldValue,propertyValue))   return new Pair<Boolean,String>(false,null);
  if (propertyValue == null) {
    Object[] oldProperties=myNewProperties;
    int newLength=oldProperties.length - 2;
    if (newLength == 0) {
      myNewProperties=null;
    }
 else {
      myNewProperties=new Object[newLength];
      System.arraycopy(oldProperties,0,myNewProperties,0,index);
      System.arraycopy(oldProperties,index + 2,myNewProperties,index,newLength - index);
    }
  }
 else   if (oldValue == null) {
    Object[] oldProperties=myNewProperties == null ? EMPTY_ARRAY : myNewProperties;
    myNewProperties=new Object[oldProperties.length + 2];
    System.arraycopy(oldProperties,0,myNewProperties,0,oldProperties.length);
    myNewProperties[myNewProperties.length - 2]=pname;
    myNewProperties[myNewProperties.length - 1]=propertyValue;
  }
 else {
    myNewProperties[index + 1]=propertyValue;
  }
  return new Pair<Boolean,String>(true,oldValue);
}
