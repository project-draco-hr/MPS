{
  if (myModel == null)   return;
  if (!myModel.isUpdateMode()) {
    for (    SReference ref : myReferences) {
      ((jetbrains.mps.smodel.SReference)ref).makeDirect();
    }
  }
  myModel.unregisterNode(this);
  for (SNode child=firstChild(); child != null; child=child.nextSibling()) {
    child.unRegisterFromModel();
  }
  myModel=null;
}
