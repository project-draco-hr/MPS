{
  Map<MPSVCSManager,List<File>> vcsManagerToFile=new HashMap<MPSVCSManager,List<File>>();
  for (  FilePath file : files) {
    Project project=getProjectForFilePath(file);
    if (project != null) {
      MPSVCSManager mpsVcsManager=MPSVCSManager.getInstance(project);
      if (mpsVcsManager != null) {
        List<File> filesForManager=vcsManagerToFile.get(mpsVcsManager);
        if (filesForManager == null) {
          filesForManager=new LinkedList<File>();
          vcsManagerToFile.put(mpsVcsManager,filesForManager);
        }
        filesForManager.add(file.getIOFile());
      }
 else {
        LOG.debug("Can not find " + MPSVCSManager.class.getName() + " instance for file "+ file+ ".");
      }
    }
 else {
      LOG.debug("Can not find " + Project.class.getName() + " instance for file "+ file+ ".");
    }
  }
  for (  MPSVCSManager manager : vcsManagerToFile.keySet()) {
    manager.deleteFromDiskAndRemoveFromVcs(vcsManagerToFile.get(manager),true);
  }
}
