{
synchronized (TYPECHECKING_LOCK) {
    checkRoot(refreshTypes);
    applyNonTypesystemRules();
    final Set<Pair<SNode,List<IErrorReporter>>> nodesWithErrors=getTypechecking().getNodesWithErrors(true);
    final THashSet<Pair<SNode,List<IErrorReporter>>> result=new THashSet<Pair<SNode,List<IErrorReporter>>>(nodesWithErrors);
    result.addAll(getTypechecking().getNodesWithErrors(false));
    return result;
  }
}
