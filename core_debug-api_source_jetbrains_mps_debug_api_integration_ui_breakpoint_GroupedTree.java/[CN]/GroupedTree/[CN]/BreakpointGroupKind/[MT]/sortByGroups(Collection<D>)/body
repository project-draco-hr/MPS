{
  Map<T,Set<D>> result=new HashMap<T,Set<D>>();
  for (  D data : dataToSort) {
    T group=getGroup(data);
    Set<D> dataFopGroup=result.get(group);
    if (dataFopGroup == null) {
      dataFopGroup=new HashSet<D>();
      result.put(group,dataFopGroup);
    }
    dataFopGroup.add(data);
  }
  return result;
}
