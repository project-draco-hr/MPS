{
  AnAction[] children=group.getChildren(null);
  for (  AnAction child : children) {
    if (child instanceof ActionGroup) {
      removeGroupsFromGroup((ActionGroup)child,groups);
    }
  }
  boolean groupIsDefaultActionGroup=group instanceof DefaultActionGroup;
  for (  ActionGroup g : groups) {
    if (groupIsDefaultActionGroup) {
      ((DefaultActionGroup)group).remove(g);
    }
 else {
      boolean gInGroup=ActionUtils.contains(group,g);
      if (gInGroup) {
        String errorMessage="Memory leaks detected: MPS action group " + g.getClass().getName() + " was added to group "+ group.getClass().getName()+ " from which it can't be removed.";
        LOG.error(errorMessage);
      }
    }
  }
}
