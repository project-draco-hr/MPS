{
  if (myMajorStep != 0) {
    throw new GenerationCanceledException();
  }
  myGenerationPlan=new GenerationPlan(myOriginalInputModel.getSModel());
  if (!checkGenerationPlan(myGenerationPlan)) {
  }
  GenerationStatus status;
  boolean wasErrors=false;
  boolean wasWarnings=false;
  SModelDescriptor currInputModel=myOriginalInputModel;
  do {
    info("execute step " + (myMajorStep + 1));
    status=executeMacroStep(currInputModel.getSModel());
    wasErrors|=status.isError();
    wasWarnings|=status.hasWarnings();
    if (status.isError() || status.isCanceled()) {
      break;
    }
    if (myGenerationPlan.getMappingConfigurations(myMajorStep).isEmpty()) {
      break;
    }
    if (status.getOutputModel() == null) {
      break;
    }
    currInputModel=status.getOutputModel().getModelDescriptor();
    myMajorStep++;
  }
 while (myMajorStep < myGenerationPlan.getStepCount());
  if (mySessionContext != null) {
    mySessionContext.clearTransientObjects();
  }
  return new GenerationStatus(status.getInputModel(),status.getOutputModel(),status.getTraceMap(),wasErrors,wasWarnings,status.isCanceled());
}
