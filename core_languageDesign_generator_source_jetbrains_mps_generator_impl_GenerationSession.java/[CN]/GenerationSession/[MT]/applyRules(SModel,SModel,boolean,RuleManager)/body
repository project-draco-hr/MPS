{
  final TemplateGenerator tg=myGenerationContext.isStrictMode() && myGenerationContext.isGenerateInParallel() && !mySessionContext.getGenerationTracer().isTracing()&& ParallelTemplateGenerator.PARALLELING_ENABLED ? new ParallelTemplateGenerator(mySessionContext,myProgressMonitor,myLogger,ruleManager,currentInputModel,currentOutputModel,myGenerationContext,ttrace) : new TemplateGenerator(mySessionContext,myProgressMonitor,myLogger,ruleManager,currentInputModel,currentOutputModel,myGenerationContext,ttrace);
  if (tg instanceof ParallelTemplateGenerator) {
    return GeneratorUtil.runReadInWrite(new GenerationComputable<Boolean>(){
      @Override public Boolean compute() throws GenerationCanceledException, GenerationFailureException {
        return tg.apply(isPrimary);
      }
    }
);
  }
 else {
    return tg.apply(isPrimary);
  }
}
