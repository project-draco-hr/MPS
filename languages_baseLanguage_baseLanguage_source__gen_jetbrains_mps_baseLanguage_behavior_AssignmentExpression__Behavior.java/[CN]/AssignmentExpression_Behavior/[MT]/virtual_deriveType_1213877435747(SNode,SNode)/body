{
  SNode type=null;
  if (SNodeOperations.getParent(expression) == thisNode && SNodeOperations.hasRole(expression,"jetbrains.mps.baseLanguage.structure.AssignmentExpression","rValue")) {
    SNode rawType=SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(thisNode,"lValue",true)));
    if (SNodeOperations.isInstanceOf(rawType,"jetbrains.mps.baseLanguage.structure.Type")) {
      type=SNodeOperations.cast(rawType,"jetbrains.mps.baseLanguage.structure.Type");
    }
 else {
      return null;
    }
  }
  return type;
}
