{
synchronized (myLock) {
    for (    SNode node : myMap.values()) {
      ((SNodeBase)node).detach();
    }
    for (    SNode node : myNodesWithoutRefs) {
      ((SNodeBase)node).detach();
    }
    myMap.clear();
    myNodesWithoutRefs.clear();
  }
}
