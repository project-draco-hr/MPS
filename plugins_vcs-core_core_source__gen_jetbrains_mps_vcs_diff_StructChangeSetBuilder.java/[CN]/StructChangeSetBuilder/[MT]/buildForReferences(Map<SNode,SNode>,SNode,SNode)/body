{
  List<SReference> oldReferences=(List<SReference>)oldNode.getReferences();
  List<SReference> newReferences=(List<SReference>)newNode.getReferences();
  for (  SReferenceLink role : ListSequence.fromList(oldReferences).concat(ListSequence.fromList(newReferences)).select(new ISelector<SReference,SReferenceLink>(){
    public SReferenceLink select(    SReference r){
      return r.getLink();
    }
  }
).distinct()) {
    buildForReference(olToNewMap,oldNode,newNode,role);
  }
}
