{
  SNode target1=ref1.getTargetNode();
  SNode target2=ref2.getTargetNode();
  return target1 == target2 || MapSequence.fromMap(oldToNewMap).get(target1) == target2 || easy && ListSequence.fromList(SNodeOperations.getNodeAncestors(target1,null,true)).select(new ISelector<SNode,SNode>(){
    public SNode select(    SNode it){
      return MapSequence.fromMap(oldToNewMap).get(it);
    }
  }
).intersect(ListSequence.fromList(SNodeOperations.getNodeAncestors(target2,null,true))).isNotEmpty();
}
