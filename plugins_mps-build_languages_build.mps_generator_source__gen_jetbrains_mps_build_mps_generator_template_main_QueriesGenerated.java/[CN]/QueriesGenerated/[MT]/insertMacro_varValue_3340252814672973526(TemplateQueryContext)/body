{
  if (((Boolean)_context.getVariable("var:mpsBootCore"))) {
    return "${build.tmp}/antTasks/ant/lib/ant-mps.jar";
  }
  DependenciesHelper helper=new DependenciesHelper(_context,_context.getNode());
  String artifact="ant-mps";
  SNode jmAntJar=helper.artifacts().get(artifact);
  if ((jmAntJar != null)) {
    return BehaviorReflection.invokeVirtual(String.class,jmAntJar,"virtual_location_7117056644539862594",new Object[]{helper,artifact});
  }
  if (!(ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(),"macros",true)).any(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return SNodeOperations.isInstanceOf(it,"jetbrains.mps.build.structure.BuildFolderMacro") && "mps_home".equals(SPropertyOperations.getString(SNodeOperations.cast(it,"jetbrains.mps.build.structure.BuildFolderMacro"),"name"));
    }
  }
))) {
    _context.showErrorMessage(null,"${mps_home} macro is required to create `generate' task");
  }
  return null;
}
