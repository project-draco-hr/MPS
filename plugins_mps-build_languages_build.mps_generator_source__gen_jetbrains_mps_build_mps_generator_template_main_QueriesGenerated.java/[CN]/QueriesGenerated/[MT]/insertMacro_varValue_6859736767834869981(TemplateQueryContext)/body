{
  SNode project=SNodeOperations.getNodeAncestor(_context.getNode(),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,"jetbrains.mps.build.structure.BuildProject"),true,false);
  if (project == null) {
    _context.showErrorMessage(_context.getNode(),"no context project defined");
    return null;
  }
  DependenciesHelper helper=new DependenciesHelper(_context,project);
  SNode path=SNodeOperations.cast(DependenciesHelper.getOriginalNode(((SNode)_context.getVariable("remotePath")),_context),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x668c6cfbafacdc3eL,"jetbrains.mps.build.structure.BuildSourcePath"));
  SNode layoutNode=helper.artifacts().get(path);
  if (layoutNode == null) {
    StringBuilder suffix=new StringBuilder();
    SNode current=SNodeOperations.as(path,MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x65997a657729f6fbL,"jetbrains.mps.build.structure.BuildRelativePath"));
    if (current != null) {
      suffix.append("/").append(BehaviorReflection.invokeVirtual(String.class,path,"virtual_getLastSegment_1368030936106771141",new Object[]{null}));
      current=SNodeOperations.as(BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),current,"virtual_getParent_8654221991637145399",new Object[]{}),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x65997a657729f6fbL,"jetbrains.mps.build.structure.BuildRelativePath"));
    }
    SNode containingRoot=SNodeOperations.getContainingRoot(path);
    while (current != null) {
      SNode res=helper.artifacts().get(new LocalSourcePathArtifact(containingRoot,BehaviorReflection.invokeVirtual(String.class,current,"virtual_getRelativePath_5481553824944787371",new Object[]{}),true));
      if (res != null) {
        return MultiTuple.<SNode,String>from(SNodeOperations.as(res,MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x668c6cfbafac4c85L,"jetbrains.mps.build.structure.BuildLayout_Node")),suffix.substring(1));
      }
      suffix.insert(0,BehaviorReflection.invokeVirtual(String.class,current,"virtual_getLastSegment_1368030936106771141",new Object[]{null})).insert(0,"/");
      current=SNodeOperations.as(BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),current,"virtual_getParent_8654221991637145399",new Object[]{}),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x65997a657729f6fbL,"jetbrains.mps.build.structure.BuildRelativePath"));
    }
  }
  if (layoutNode == null || !(SNodeOperations.isInstanceOf(layoutNode,MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x7ea63ceef6e8c0edL,"jetbrains.mps.build.structure.BuildLayout_File")))) {
    _context.showErrorMessage(_context.getNode(),"path " + BehaviorReflection.invokeVirtual(String.class,((SNode)_context.getVariable("remotePath")),"virtual_getRelativePath_5481553824944787371",new Object[]{}) + " was not found in the layout");
    return null;
  }
  return MultiTuple.<SNode,Object>from(SNodeOperations.cast(layoutNode,MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x7ea63ceef6e8c0edL,"jetbrains.mps.build.structure.BuildLayout_File")),null);
}
