{
  SNode parentNode=(SNode)cellContext.get(BasicCellContext.EDITED_NODE);
  SNode currentChild=(SNode)cellContext.getOpt(AggregationCellContext.CURRENT_CHILD_NODE);
  TransformationMenuContext context=DefaultTransformationMenuContext.createInitialContextForCell(myEditorCell,MenuLocations.SUBSTITUTE);
  if (currentChild != null) {
    Object oldNodeForSubstitution=context.getNode().getUserObject(EditorManager.OLD_NODE_FOR_SUBSTITUTION);
    if (oldNodeForSubstitution instanceof SNode) {
      context=context.withNode(((SNode)oldNodeForSubstitution));
    }
  }
  List<TransformationMenuItem> items=context.createItems(myEditorCell.getTransformationMenuLookup());
  return new SubstituteActionsCollector(parentNode,items).collect();
}
