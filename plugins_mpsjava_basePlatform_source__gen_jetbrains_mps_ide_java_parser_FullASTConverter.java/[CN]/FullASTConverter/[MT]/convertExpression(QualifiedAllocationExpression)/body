{
  SNode result=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.GenericNewExpression",null);
  SNode create=null;
  if (x.anonymousType != null) {
    SNode anonCreate=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.AnonymousClassCreator",null);
    create=anonCreate;
    SLinkOperations.setTarget(result,"creator",anonCreate,true);
    SNode cls=SNodeOperations.cast(convertTypeDecl(x.anonymousType),"jetbrains.mps.baseLanguage.structure.AnonymousClass");
    SLinkOperations.setTarget(anonCreate,"cls",cls,true);
    addReference(x.type,cls,"classifier");
    addCallArgs(cls,x.arguments);
    addTypeArgs(typeArguments(x.type),SLinkOperations.getTargets(cls,"typeParameter",true));
  }
 else {
    if (x.enclosingInstance() == null) {
      return convertExpression((AllocationExpression)x);
    }
  }
  return result;
}
