{
  SearchQuery searchQuery=new SearchQuery(generator,GlobalScope.getInstance());
  SearchResults results=FindUtils.getSearchResults(ActionEventData.createProgressIndicator(),searchQuery,new DependentGeneratorsFinder());
  if (!results.getSearchResults().isEmpty()) {
    final StringBuilder report=new StringBuilder();
    report.append("Can't delete generator ").append(generator.getModuleFqName()).append(".\n");
    report.append("The following generators depend on it:\n\n");
    for (    SearchResult result : (List<SearchResult>)results.getSearchResults()) {
      Generator g=(Generator)result.getObject();
      report.append(g.getModuleFqName()).append("\n");
    }
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        Frame frame=MPSDataKeys.FRAME.getData(DataManager.getInstance().getDataContext());
        new MessageDialog(frame,report.toString()).showDialog();
      }
    }
);
    return;
  }
  LanguageDescriptor languageDescriptor=sourceLanguage.getLanguageDescriptor();
  generator.getGeneratorDescriptor().delete();
  sourceLanguage.setLanguageDescriptor(languageDescriptor);
  if (deleteFiles) {
  }
  sourceLanguage.save();
}
