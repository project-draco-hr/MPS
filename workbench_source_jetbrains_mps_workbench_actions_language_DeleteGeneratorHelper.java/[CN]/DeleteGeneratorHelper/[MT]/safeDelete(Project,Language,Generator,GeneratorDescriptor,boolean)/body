{
  List<Generator> dependant=new ArrayList<Generator>();
  for (  Generator gen : MPSModuleRepository.getInstance().getAllGenerators()) {
    if (gen.getReferencedGenerators().contains(generator)) {
      dependant.add(gen);
    }
  }
  if (!dependant.isEmpty()) {
    final StringBuilder report=new StringBuilder();
    report.append("Can't delete generator ").append(generator.getModuleFqName()).append(".\n");
    report.append("The following generators depend on it:\n\n");
    for (    Generator gen : dependant) {
      report.append(gen.getModuleFqName()).append("\n");
    }
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        Frame frame=MPSDataKeys.FRAME.getData(DataManager.getInstance().getDataContext());
        new ScrollingMessageDialog(frame,report.toString()).showDialog();
      }
    }
);
    return;
  }
  LanguageDescriptor languageDescriptor=sourceLanguage.getLanguageDescriptor();
  languageDescriptor.getGenerators().remove(generator.getGeneratorDescriptor());
  sourceLanguage.setLanguageDescriptor(languageDescriptor);
  if (deleteFiles) {
  }
  sourceLanguage.save();
}
