{
  while (SNodeOperations.isInstanceOf(SNodeOperations.getParent(expr),"jetbrains.mps.core.query.structure.MqlBinaryExpr")) {
    SNode parent=SNodeOperations.cast(SNodeOperations.getParent(expr),"jetbrains.mps.core.query.structure.MqlBinaryExpr");
    SNode newtop=rotateChildrenIfNecessary(parent);
    if (newtop == parent) {
      break;
    }
    expr=parent;
  }
  if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(expr),"jetbrains.mps.core.query.structure.MqlUnary")) {
    SNode parent=SNodeOperations.cast(SNodeOperations.getParent(expr),"jetbrains.mps.core.query.structure.MqlUnary");
    SLinkOperations.setTarget(parent,"expr",SLinkOperations.getTarget(expr,"left",true),true);
    SNodeOperations.replaceWithAnother(parent,expr);
    SLinkOperations.setTarget(expr,"left",parent,true);
  }
}
