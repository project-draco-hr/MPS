{
  SRepository projectRepository=ProjectHelper.toMPSProject(event.getProject()).getRepository();
  for (  SModule module : projectRepository.getModules()) {
    if (!(module instanceof AbstractModule) || (((AbstractModule)module).getModuleDescriptor() == null)) {
      System.out.println("Strange module: " + module.getModuleName());
      continue;
    }
    if (module.getFacet(JavaModuleFacet.class) == null || module.getFacet(JavaModuleFacet.class).isCompileInMps()) {
      continue;
    }
    String pluginId=SetPluginIdToCompileInIdeaModules_Action.this.getPluginIdForModule(projectRepository.getModelAccess(),module,_params);
    if (pluginId != null) {
      SetPluginIdToCompileInIdeaModules_Action.this.setPluginId(module,pluginId,_params);
    }
 else {
      SetPluginIdToCompileInIdeaModules_Action.this.setPluginId(module,PluginManager.CORE_PLUGIN_ID,_params);
    }
  }
}
