{
  for (  SModule module : event.getData(MPSCommonDataKeys.MPS_PROJECT).getProjectModules()) {
    if (!(module instanceof AbstractModule) || (((AbstractModule)module).getModuleDescriptor() == null)) {
      System.out.println("Strange module: " + module.getModuleName());
      continue;
    }
    if (module.getFacet(JavaModuleFacet.class) == null || module.getFacet(JavaModuleFacet.class).isCompileInMps()) {
      continue;
    }
    String pluginId=SetPluginIdToCompileInIdeaModules_Action.this.getPluginIdForModule(module,event);
    if (pluginId != null) {
      SetPluginIdToCompileInIdeaModules_Action.this.setPluginId(module,pluginId,event);
    }
 else {
      SetPluginIdToCompileInIdeaModules_Action.this.setPluginId(module,PluginManager.CORE_PLUGIN_ID,event);
    }
  }
}
