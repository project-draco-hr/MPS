{
  Map<MPSVCSManager,List<File>> vcsManagerToFile=new HashMap<MPSVCSManager,List<File>>();
  for (  FilePath file : files) {
    Project project=getProjectForFilePath(file);
    if (project == null)     continue;
    MPSVCSManager mpsVcsManager=MPSVCSManager.getInstance(project);
    if (mpsVcsManager == null) {
      LOG.debug("Can not find " + MPSVCSManager.class.getName() + " instance for file "+ file+ ".");
      continue;
    }
    List<File> filesForManager=vcsManagerToFile.get(mpsVcsManager);
    if (filesForManager == null) {
      filesForManager=new LinkedList<File>();
      vcsManagerToFile.put(mpsVcsManager,filesForManager);
    }
    filesForManager.add(file.getIOFile());
  }
  for (  MPSVCSManager manager : vcsManagerToFile.keySet()) {
    manager.deleteFromDiskAndRemoveFromVcs(vcsManagerToFile.get(manager),silently);
  }
}
