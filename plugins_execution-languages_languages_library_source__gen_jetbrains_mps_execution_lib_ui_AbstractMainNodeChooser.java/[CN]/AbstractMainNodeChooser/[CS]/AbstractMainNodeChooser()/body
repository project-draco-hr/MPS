{
  this.init(new ActionListener(){
    public void actionPerformed(    ActionEvent p0){
      final FindUsagesManager findUsegesManager=FindUsagesManager.getInstance();
      final ProgressMonitor progressAdapter=new EmptyProgressMonitor();
      final Wrappers._T<List<SNodePointer>> toChooseFrom=new Wrappers._T<List<SNodePointer>>();
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          toChooseFrom.value=ListSequence.fromList(findToChooseFromOnInit(findUsegesManager,progressAdapter)).select(new ISelector<SNode,SNodePointer>(){
            public SNodePointer select(            SNode it){
              return new SNodePointer(it);
            }
          }
).toListSequence();
        }
      }
);
      final NodeChooserDialog chooserDialog=new NodeChooserDialog(MPSDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext(AbstractMainNodeChooser.this)),toChooseFrom.value);
      chooserDialog.show();
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          setNode(chooserDialog.getResultNode());
        }
      }
);
    }
  }
);
  addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      final String text=getText();
      if ((text == null || text.length() == 0)) {
        setNode(null);
        return;
      }
      int lastDot=text.lastIndexOf(".");
      if (lastDot <= 0) {
        setNode(null);
        return;
      }
      final List<SModelDescriptor> descriptors=getModelDescriptors(text.substring(0,lastDot));
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          SNode foundNode=null;
          for (          SModelDescriptor descriptor : ListSequence.fromList(descriptors)) {
            SModel smodel=descriptor.getSModel();
            Iterable<SNode> nodes=findNodes(smodel,text);
            if (!(Sequence.fromIterable(nodes).isEmpty())) {
              foundNode=Sequence.fromIterable(nodes).first();
              break;
            }
          }
          setNode(foundNode);
        }
      }
);
    }
  }
);
}
