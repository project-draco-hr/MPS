{
  if (cell == null)   return null;
  if (includingMe && APICellAdapter.getFocusPolicy(cell) != FocusPolicy.NONE && APICellAdapter.getFocusPolicy(cell) != FocusPolicy.ATTRACTS_RECURSIVELY)   return cell;
  if (descend && cell instanceof jetbrains.mps.openapi.editor.cells.EditorCell_Collection) {
    jetbrains.mps.openapi.editor.cells.EditorCell_Collection collection=(jetbrains.mps.openapi.editor.cells.EditorCell_Collection)cell;
    for (    jetbrains.mps.openapi.editor.cells.EditorCell childCell : collection) {
      jetbrains.mps.openapi.editor.cells.EditorCell focusedCell=findCellWhichAttractsFocus(childCell,true,!APICellAdapter.isBigCell(childCell) || APICellAdapter.getFocusPolicy(childCell) == FocusPolicy.ATTRACTS_RECURSIVELY);
      if (focusedCell != null)       return focusedCell;
    }
  }
  if (APICellAdapter.getFocusPolicy(cell) == FocusPolicy.ATTRACTS_RECURSIVELY) {
    return cell;
  }
  return null;
}
