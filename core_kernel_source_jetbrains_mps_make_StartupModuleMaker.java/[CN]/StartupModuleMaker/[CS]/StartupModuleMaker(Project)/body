{
  super(project);
  if (IdeMain.isTestMode())   return;
  StartupManagerEx.getInstanceEx(myProject).registerPreStartupActivity(new Runnable(){
    public void run(){
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
          if (indicator == null) {
            indicator=new EmptyProgressIndicator();
          }
          indicator.pushState();
          try {
            ModuleMaker maker=new ModuleMaker();
            maker.make(new LinkedHashSet<IModule>(MPSModuleRepository.getInstance().getAllModules()),indicator);
            ClassLoaderManager.getInstance().reloadAll(indicator);
          }
  finally {
            indicator.popState();
          }
        }
      }
);
    }
  }
);
}
