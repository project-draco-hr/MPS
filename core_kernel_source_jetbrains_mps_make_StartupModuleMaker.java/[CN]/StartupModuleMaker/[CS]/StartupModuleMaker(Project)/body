{
  super(project);
  if (IdeMain.getTestMode() == TestMode.CORE_TEST)   return;
  StartupManagerEx.getInstanceEx(myProject).registerPreStartupActivity(new Runnable(){
    public void run(){
      final ProgressIndicator[] indicator={ProgressManager.getInstance().getProgressIndicator()};
      if (indicator[0] == null) {
        indicator[0]=new EmptyProgressIndicator();
      }
      indicator[0].pushState();
      final CompilationResult[] res=new CompilationResult[1];
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          ModuleMaker maker=new ModuleMaker();
          res[0]=maker.make(new LinkedHashSet<IModule>(MPSModuleRepository.getInstance().getAllModules()),indicator[0]);
        }
      }
);
      indicator[0].popState();
      if (res[0].isCompiledAnything() && res[0].getErrors() == 0) {
        ClassLoaderManager.getInstance().reloadAll(indicator[0]);
      }
    }
  }
);
}
