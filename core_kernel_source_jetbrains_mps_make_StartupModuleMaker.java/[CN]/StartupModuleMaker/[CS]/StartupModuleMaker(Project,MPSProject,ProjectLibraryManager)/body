{
  super(project);
  final ProgressIndicator[] indicator={ProgressManager.getInstance().getProgressIndicator()};
  if (indicator[0] == null) {
    indicator[0]=new EmptyProgressIndicator();
  }
  indicator[0].pushState();
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      ClassLoaderManager.getInstance().updateClassPath();
      if (IdeMain.getTestMode() != TestMode.CORE_TEST) {
        ModuleMaker maker=new ModuleMaker();
        maker.make(new LinkedHashSet<IModule>(MPSModuleRepository.getInstance().getAllModules()),indicator[0]);
      }
      ClassLoaderManager.getInstance().reloadAll(indicator[0]);
    }
  }
);
  indicator[0].popState();
}
