{
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      SNode methodCall=ExtractMethodWithOutputVariable.this.createMethodCall(match,methodDeclaration);
      List<SNode> statements=match.getNodes();
      if ((ExtractMethodWithOutputVariable.this.myDeclarationStatement != null)) {
        SLinkOperations.setTarget(SLinkOperations.getTarget(ExtractMethodWithOutputVariable.this.myDeclarationStatement,"localVariableDeclaration",true),"initializer",methodCall,true);
      }
 else {
        SNode newStatement=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.ExpressionStatement",null);
        SLinkOperations.setTarget(newStatement,"expression",new ExtractMethodWithOutputVariable.QuotationClass_n3576q_a0a1a0c0a0a0a0a0c().createNode(ExtractMethodWithOutputVariable.this.myOutputVariable,methodCall),true);
        SNodeOperations.insertPrevSiblingChild(ListSequence.fromList(statements).first(),newStatement);
      }
      for (      SNode statement : ListSequence.fromList(statements)) {
        if (statement != ExtractMethodWithOutputVariable.this.myDeclarationStatement) {
          SNodeOperations.deleteNode(statement);
        }
      }
    }
  }
);
}
