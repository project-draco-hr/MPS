{
  return ModelAccess.instance().runReadAction(new Computable<Boolean>(){
    @Override public Boolean compute(){
      int count=0;
      for (      SubstituteAction action : getActionsFromCache(pattern,strictMatching)) {
        if (strictMatching ? action.canSubstituteStrictly(pattern) : SubstituteActionUtil.canSubstitute(action,pattern)) {
          count++;
        }
        if (count > n)         return false;
      }
      return n == count;
    }
  }
);
}
