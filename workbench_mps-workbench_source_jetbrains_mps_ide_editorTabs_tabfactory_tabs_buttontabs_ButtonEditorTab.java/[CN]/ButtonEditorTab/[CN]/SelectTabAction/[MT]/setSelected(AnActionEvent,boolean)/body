{
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      List<SNode> nodes=myDescriptor.getNodes(myBaseNode.resolve(MPSModuleRepository.getInstance()));
      if (nodes.size() == 1) {
        myCallback.changeNode(nodes.get(0).getContainingRoot());
        return;
      }
      Component component=myTabComponent.getComponentForTabIndex(myIndex);
      DefaultActionGroup group=getGotoGroup();
      if (group == null) {
        group=new DefaultActionGroup();
      }
      ActionPopupMenu popup=ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UNKNOWN,group);
      JPopupMenu popupMenu=popup.getComponent();
      popupMenu.show(component,0,0);
      if (myTabColorProvider != null && popupMenu.getComponents().length == nodes.size()) {
        for (int i=0; i < nodes.size(); i++) {
          SNode node=nodes.get(i);
          Component menuItem=popupMenu.getComponents()[i];
          if (node != null) {
            Color color=myTabColorProvider.getNodeColor(node);
            if (color != null) {
              menuItem.setForeground(color);
            }
          }
        }
      }
    }
  }
);
}
