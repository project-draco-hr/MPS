{
  if (SNodeOperations.getAncestor(node,"jetbrains.mps.lang.generator.structure.RootTemplateAnnotation",true,false) != null) {
    return false;
  }
  SNode ancestorTemplateElement=SNodeOperations.getAncestorWhereConceptInList(node,new String[]{"jetbrains.mps.lang.generator.structure.NodeMacro","jetbrains.mps.lang.generator.structure.PropertyMacro","jetbrains.mps.lang.generator.structure.ReferenceMacro","jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence","jetbrains.mps.lang.generator.structure.InlineTemplateWithContext_RuleConsequence","jetbrains.mps.lang.generator.structure.TemplateFragment"},true,false);
  if (ancestorTemplateElement != null) {
    if (SNodeOperations.isInstanceOf(ancestorTemplateElement,"jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence") || SNodeOperations.isInstanceOf(ancestorTemplateElement,"jetbrains.mps.lang.generator.structure.InlineTemplateWithContext_RuleConsequence")) {
      return true;
    }
    return false;
  }
  if (AttributeOperations.getAttribute(SNodeOperations.getContainingRoot(node),new IAttributeDescriptor.NodeAttribute("jetbrains.mps.lang.generator.structure.RootTemplateAnnotation")) != null) {
    return true;
  }
  if (SNodeOperations.getAncestorWhereConceptInList(node,new String[]{"jetbrains.mps.lang.generator.structure.TemplateDeclaration","jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence","jetbrains.mps.lang.generator.structure.InlineTemplateWithContext_RuleConsequence"},false,false) != null) {
    return true;
  }
  return false;
}
