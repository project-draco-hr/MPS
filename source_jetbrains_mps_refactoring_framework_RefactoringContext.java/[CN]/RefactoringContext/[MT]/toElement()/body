{
  Element refactoringContextElement=new Element(REFACTORING_CONTEXT);
  if (myModelVersion != -1) {
    refactoringContextElement.setAttribute(MODEL_VERSION,myModelVersion + "");
  }
{
    Element refactoringElement=new Element(REFACTORING);
    refactoringElement.setAttribute(REFACTORING_CLASS,myRefactoring.getClass().getName());
    refactoringContextElement.addContent(refactoringElement);
  }
{
    Element moveMapElement=new Element(MOVE_MAP);
    for (    Entry<FullNodeId,FullNodeId> entry : myMoveMap.entrySet()) {
      Element entryElement=new Element(ENTRY);
      Element keyElement=new Element(KEY);
      Element valueElement=new Element(VALUE);
      entry.getKey().toElement(keyElement);
      entry.getValue().toElement(valueElement);
      entryElement.addContent(keyElement);
      entryElement.addContent(valueElement);
      moveMapElement.addContent(entryElement);
    }
    refactoringContextElement.addContent(moveMapElement);
  }
{
    Element featureMapElement=new Element(CONCEPT_FEATURE_MAP);
    for (    Entry<ConceptFeature,ConceptFeature> entry : myConceptFeatureMap.entrySet()) {
      Element entryElement=new Element(ENTRY);
      Element keyElement=new Element(KEY);
      Element valueElement=new Element(VALUE);
      entry.getKey().toElement(keyElement);
      entry.getValue().toElement(valueElement);
      entryElement.addContent(keyElement);
      entryElement.addContent(valueElement);
      featureMapElement.addContent(entryElement);
    }
    refactoringContextElement.addContent(featureMapElement);
  }
{
    Element parametersMapElement=new Element(PARAMETERS_MAP);
    for (    Entry<String,Object> entry : myAdditionalParametersMap.entrySet()) {
      String parameterName=entry.getKey();
      if (isTransient(parameterName)) {
        continue;
      }
      Element entryElement=new Element(ENTRY);
      Element keyElement=new Element(KEY);
      Element valueElement=new Element(VALUE);
      keyElement.setAttribute(PARAMETER_NAME,entry.getKey());
      serialize(valueElement,entry.getValue());
      entryElement.addContent(keyElement);
      entryElement.addContent(valueElement);
      parametersMapElement.addContent(entryElement);
    }
  }
  return refactoringContextElement;
}
