{
  for (  SReference sourceReference : ourReferences) {
    SNode oldSourceNode=sourceReference.getSourceNode();
    SNode newSourceNode=ourSourceNodesToNewNodes.get(oldSourceNode);
    if (sourceReference instanceof InternalReference) {
      SNode oldTargetNode=sourceReference.getTargetNode();
      SNode newTargetNode=ourSourceNodesToNewNodes.get(oldTargetNode);
      if (newTargetNode != null) {
        newSourceNode.addSemanticReference(SReference.newInstance(sourceReference.getRole(),newSourceNode,newTargetNode));
      }
 else {
        SReference newReference=SReference.newInstance(sourceReference.getRole(),newSourceNode,oldTargetNode);
        if (oldTargetNode == null) {
          newReference.setResolveInfo(sourceReference.getResolveInfo());
          newReference.setTargetClassResolveInfo(sourceReference.getTargetClassResolveInfo());
        }
 else {
          Resolver.setResolveInfo(newReference);
        }
        newSourceNode.addSemanticReference(newReference);
      }
    }
 else     if (sourceReference instanceof ExternalReference) {
      String targetNodeId=sourceReference.getTargetNodeId();
      String extResolveInfo=((ExternalReference)sourceReference).getExtResolveInfo();
      SReference newReference=SReference.newInstance(sourceReference.getRole(),newSourceNode,targetNodeId,null,null,extResolveInfo);
      newSourceNode.addSemanticReference(newReference);
    }
  }
}
