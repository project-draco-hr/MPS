{
  JPanel panel=new JPanel(new BorderLayout(15,0));
  JLabel iconLabel=new JLabel(Messages.getWarningIcon());
  Container container=new Container();
  container.setLayout(new BorderLayout());
  container.add(iconLabel,BorderLayout.NORTH);
  panel.add(container,BorderLayout.WEST);
  JLabel label=new JLabel();
  final JTextPane messageComponent=new JTextPane();
  messageComponent.setFont(UIUtil.getOptionPaneMessageFont());
  messageComponent.setText(myMessage);
  messageComponent.setEditable(false);
  if (messageComponent.getCaret() != null) {
    messageComponent.setCaretPosition(0);
  }
  messageComponent.setBackground(UIUtil.getOptionPaneBackground());
  messageComponent.setForeground(label.getForeground());
  final Dimension screenSize=messageComponent.getToolkit().getScreenSize();
  final Dimension textSize=messageComponent.getPreferredSize();
  if (textSize.width > screenSize.width * 4 / 5 || textSize.height > screenSize.height / 2) {
    final JScrollPane pane=ScrollPaneFactory.createScrollPane(messageComponent);
    pane.setBorder(BorderFactory.createEmptyBorder(0,0,0,0));
    pane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
    pane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    final int scrollSize=(int)new JScrollBar(JScrollBar.VERTICAL).getPreferredSize().getWidth();
    final Dimension preferredSize=new Dimension(Math.min(textSize.width,screenSize.width * 4 / 5) + scrollSize,Math.min(textSize.height,screenSize.height / 2) + scrollSize);
    pane.setPreferredSize(preferredSize);
    panel.add(pane,BorderLayout.CENTER);
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        final Dimension textSize=messageComponent.getPreferredSize();
        final Dimension preferredSize=new Dimension(Math.min(textSize.width,screenSize.width * 4 / 5) + scrollSize,Math.min(textSize.height,screenSize.height / 2) + scrollSize);
        pane.setPreferredSize(preferredSize);
        SwingUtilities.getWindowAncestor(pane).pack();
      }
    }
);
  }
 else {
    panel.add(messageComponent,BorderLayout.CENTER);
  }
  panel.add(myDontAskAgainCheckBox,BorderLayout.SOUTH);
  return panel;
}
