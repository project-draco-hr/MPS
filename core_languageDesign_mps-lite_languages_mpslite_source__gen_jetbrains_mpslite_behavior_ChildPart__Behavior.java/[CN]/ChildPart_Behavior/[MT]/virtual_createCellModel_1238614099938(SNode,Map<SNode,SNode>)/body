{
  if (SPropertyOperations.getBoolean(thisNode,"multiple")) {
    SNode refNodeList=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_RefNodeList",null);
    SPropertyOperations.set(refNodeList,"vertical","" + (SPropertyOperations.getBoolean(thisNode,"vertical")));
    SLinkOperations.setTarget(refNodeList,"relationDeclaration",SNodeOperations.cast(partsToLinks.get(thisNode),"jetbrains.mps.lang.structure.structure.LinkDeclaration"),false);
    return refNodeList;
  }
 else {
    SNode refNode=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_RefNode",null);
    SLinkOperations.setTarget(refNode,"relationDeclaration",SNodeOperations.cast(partsToLinks.get(thisNode),"jetbrains.mps.lang.structure.structure.LinkDeclaration"),false);
    return refNode;
  }
}
