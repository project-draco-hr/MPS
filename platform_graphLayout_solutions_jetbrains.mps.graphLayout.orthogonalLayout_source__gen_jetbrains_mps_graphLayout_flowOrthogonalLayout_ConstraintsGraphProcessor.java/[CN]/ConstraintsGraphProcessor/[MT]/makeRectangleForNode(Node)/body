{
  List<Dart> darts=myEmbeddedGraph.getDartWithSource(node);
  Map<Direction2D,List<Edge>> edgesInDirection=MapSequence.fromMap(new HashMap<Direction2D,List<Edge>>());
  for (  Direction2D dir : Direction2D.values()) {
    MapSequence.fromMap(edgesInDirection).put(dir,ListSequence.fromList(new ArrayList<Edge>()));
  }
  Dart cur=ListSequence.fromList(darts).first();
  for (int step=0; step < ListSequence.fromList(darts).count(); step++) {
    final Face face=myEmbeddedGraph.getFace(cur);
    Dart next=ListSequence.fromList(darts).findFirst(new IWhereFilter<Dart>(){
      public boolean accept(      Dart dart){
        return myEmbeddedGraph.getFace(myEmbeddedGraph.getOpposite(dart)) == face;
      }
    }
);
    int turn=MapSequence.fromMap(myDirections).get(cur).getClockwiseTurn(MapSequence.fromMap(myDirections).get(next));
    if (turn == 0) {
      turn=4;
    }
    List<Edge> newEdges=ListSequence.fromList(new LinkedList<Edge>());
    Node pathSource=cur.getTarget();
    Node pathTarget=next.getTarget();
    Node curNode=pathSource;
    for (int i=0; i <= turn; i++) {
      Node nextNode;
      if (i == turn) {
        nextNode=pathTarget;
      }
 else {
        nextNode=myGraph.addNode();
      }
      ListSequence.fromList(newEdges).addElement(curNode.addEdgeTo(nextNode));
      curNode=nextNode;
    }
    boolean isOuter=myEmbeddedGraph.isOuterFace(face);
    List<Face> newFaces=myEmbeddedGraph.splitFace(face,newEdges,pathSource,pathTarget);
    if (isOuter) {
      Face newOuterFace=null;
      for (      Face newFace : ListSequence.fromList(newFaces)) {
        Iterable<Node> faceNodes=ListSequence.fromList(newFace.getDarts()).select(new ISelector<Dart,Node>(){
          public Node select(          Dart dart){
            return dart.getSource();
          }
        }
);
        if (!(Sequence.fromIterable(faceNodes).contains(node))) {
          newOuterFace=newFace;
        }
      }
      myEmbeddedGraph.setOuterFace(newOuterFace);
    }
    Direction2D curDir=MapSequence.fromMap(myDirections).get(cur).turnClockwise(1);
    curNode=pathSource;
    for (    Edge edge : ListSequence.fromList(newEdges)) {
      for (      Dart dart : ListSequence.fromList(myEmbeddedGraph.getDarts(edge))) {
        if (dart.getSource() == curNode) {
          MapSequence.fromMap(myDirections).put(dart,curDir);
          ListSequence.fromList(MapSequence.fromMap(edgesInDirection).get(curDir)).addElement(edge);
        }
 else {
          MapSequence.fromMap(myDirections).put(dart,curDir.opposite());
        }
      }
      curNode=edge.getOpposite(curNode);
      curDir=curDir.turnClockwise(1);
    }
    cur=next;
  }
  return edgesInDirection;
}
