{
  if (Sequence.USE_NULL_SEQUENCE) {
    if (it == null) {
      return NullSortedSetSequence.instance();
    }
  }
  if (it instanceof ISetSequence) {
    return (ISortedSetSequence<U>)it;
  }
  SortedSet<U> set=new TreeSet<U>();
  if (Sequence.IGNORE_NULL_VALUES) {
    for (    U u : it) {
      if (u != null) {
        set.add(u);
      }
    }
  }
 else   if (it instanceof Collection) {
    set.addAll((Collection<? extends U>)it);
  }
 else {
    for (    U u : it) {
      set.add(u);
    }
  }
  for (  U u : it) {
    set.add(u);
  }
  return new SortedSetSequence<U>(set);
}
