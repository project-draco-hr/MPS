{
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      SModel loadedModel=loadHistoryModel(state);
      myRoot=SModelOperations.createNewRootNode(myModel,MetaAdapterFactory.getConcept(new UUID(-2442401883381282302l,-5546511894809623691l),1583916890557930028l,"jetbrains.mps.console.base.structure.ConsoleRoot"));
      if (loadedModel == null || ListSequence.fromList(SModelOperations.roots(loadedModel,MetaAdapterFactory.getConcept(new UUID(-2442401883381282302l,-5546511894809623691l),1583916890557930028l,"jetbrains.mps.console.base.structure.ConsoleRoot"))).isEmpty()) {
        SLinkOperations.setTarget(myRoot,MetaAdapterFactory.getContainmentLink(new UUID(-2442401883381282302l,-5546511894809623691l),1583916890557930028l,1583916890557930415l,"history"),SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-2442401883381282302l,-5546511894809623691l),757553790980850366l,"jetbrains.mps.console.base.structure.History")));
      }
 else {
        SLinkOperations.setTarget(myRoot,MetaAdapterFactory.getContainmentLink(new UUID(-2442401883381282302l,-5546511894809623691l),1583916890557930028l,1583916890557930415l,"history"),SNodeOperations.copyNode(SLinkOperations.getTarget(ListSequence.fromList(SModelOperations.roots(loadedModel,MetaAdapterFactory.getConcept(new UUID(-2442401883381282302l,-5546511894809623691l),1583916890557930028l,"jetbrains.mps.console.base.structure.ConsoleRoot"))).first(),MetaAdapterFactory.getContainmentLink(new UUID(-2442401883381282302l,-5546511894809623691l),1583916890557930028l,1583916890557930415l,"history"))));
      }
      SLinkOperations.setTarget(myRoot,MetaAdapterFactory.getContainmentLink(new UUID(-2442401883381282302l,-5546511894809623691l),1583916890557930028l,1583916890557930417l,"commandHolder"),SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(new UUID(-2442401883381282302l,-5546511894809623691l),351968380916615243l,"jetbrains.mps.console.base.structure.CommandHolder")));
      TemporaryModels.getInstance().addMissingImports(myModel);
    }
  }
);
}
