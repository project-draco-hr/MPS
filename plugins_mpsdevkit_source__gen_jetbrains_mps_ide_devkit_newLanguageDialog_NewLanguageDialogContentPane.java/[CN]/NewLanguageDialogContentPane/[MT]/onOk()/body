{
  String message=NewModuleUtil.check(MPSExtentions.DOT_LANGUAGE,myThis.getLanguageNamespace(),myThis.getLanguagePath());
  if (message != null) {
    myThis.getDialog().setError(message);
    return;
  }
  myThis.getDialog().dispose();
  NewModuleUtil.runModuleCreation(myThis.getProject().getProject(),new _FunctionTypes._void_P0_E0(){
    public void invoke(){
      Language language=myThis.createNewLanguage();
      if (language.getModelRoots().iterator().hasNext()) {
        LanguageAspect.STRUCTURE.createNew(language,false);
        LanguageAspect.EDITOR.createNew(language,false);
        LanguageAspect.CONSTRAINTS.createNew(language,false);
        LanguageAspect.BEHAVIOR.createNew(language,false);
        LanguageAspect.TYPESYSTEM.createNew(language,false);
      }
      if (myThis.myNeedRuntime_hneum8_f0.isSelected()) {
        Solution runtime=myThis.createRuntimeSolution();
        runtime.createModel(myThis.getLanguageNamespace() + ".runtime",runtime.getModelRoots().iterator().next(),null);
      }
      if (myThis.myNeedSandbox_hneum8_g0.isSelected()) {
        Solution sandbox=myThis.createSandboxSolution();
        SModel createdModel=sandbox.createModel(myThis.getLanguageNamespace() + ".sandbox",sandbox.getModelRoots().iterator().next(),null).getSModel();
        createdModel.addLanguage(myThis.getResult().getModuleReference());
        for (        ModuleReference extendedLanguage : myThis.getResult().getExtendedLanguageRefs()) {
          createdModel.addLanguage(extendedLanguage);
        }
        for (        ModuleReference addedLanguage : createdModel.importedLanguages()) {
          if (ScopeOperations.resolveModule(sandbox.getScope(),addedLanguage,Language.class) == null) {
            sandbox.addUsedLanguage(addedLanguage);
          }
        }
      }
    }
  }
);
}
