{
  myRepository.getModelAccess().runWriteAction(new Runnable(){
    @Override public void run(){
      List<TransientModelsModule> toRemove=new ArrayList<TransientModelsModule>(myModuleMap.values());
      myModuleMap.clear();
      for (      TransientModelsModule m : toRemove) {
        myRepository.unregisterModule(m,myOwner);
      }
      if (dropCheckpoint && myCheckpointsModule != null) {
        myRepository.unregisterModule(myCheckpointsModule,myOwner);
        myCheckpointsModule=null;
      }
    }
  }
);
  TransientSwapSpace space=getTransientSwapSpace();
  if (space != null) {
    space.clear();
  }
  mySessionId=null;
  myKeptModels=0;
}
