{
  String textTrimmed=StringUtils.trim(text);
  if (text.startsWith(UnitTestRunner.START_TEST_PREFIX)) {
    myUnitTestListener.testStarted(text.substring(UnitTestRunner.START_TEST_PREFIX.length()));
  }
 else   if (text.startsWith(UnitTestRunner.END_TEST_PREFIX)) {
    myUnitTestListener.testFinished(text.substring(UnitTestRunner.END_TEST_PREFIX.length()));
  }
 else   if (text.startsWith(UnitTestRunner.FAILURE_TEST_PREFIX)) {
    myLastMessage=text.substring(UnitTestRunner.FAILURE_TEST_PREFIX.length());
    myInsideTestError=true;
  }
 else   if (text.startsWith(UnitTestRunner.FAILURE_TEST_SUFFIX)) {
    myUnitTestListener.testFailed(text.substring(UnitTestRunner.FAILURE_TEST_SUFFIX.length()),myLastMessage,myLastError.toString());
    myLastError=new StringBuffer();
    myInsideTestError=false;
  }
 else   if (error) {
    if (myInsideTestError) {
      myLastError.append(textTrimmed);
      myLastError.append("\n");
    }
 else {
      myUnitTestListener.logError(text);
    }
  }
 else {
    myUnitTestListener.logMessage(text);
  }
}
