{
  final List<DocumentReference> docRefs=new ArrayList<DocumentReference>();
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      for (      SNode node : myNodeEditor.getEditedNodes()) {
        MPSNodeVirtualFile virtualFile=MPSNodesVirtualFileSystem.getInstance().getFileFor(node);
        if (!virtualFile.isValid()) {
          continue;
        }
        docRefs.add(DocumentReferenceManagerImpl.getInstance().create(virtualFile));
      }
    }
  }
);
  return docRefs.toArray(new DocumentReference[docRefs.size()]);
}
