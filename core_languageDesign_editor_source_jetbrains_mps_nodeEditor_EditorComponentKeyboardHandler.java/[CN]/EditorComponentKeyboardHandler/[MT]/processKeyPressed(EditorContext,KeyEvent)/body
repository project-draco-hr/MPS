{
  EditorComponent nodeEditor=editorContext.getNodeEditorComponent();
  nodeEditor.hideMessageToolTip();
  if (processKeyPressedOnCell(editorContext,keyEvent,false)) {
    return true;
  }
  if (processKeyMaps(editorContext,keyEvent)) {
    return true;
  }
  if (processSideDeletes(editorContext,keyEvent)) {
    return true;
  }
  CellActionType actionType=editorContext.getNodeEditorComponent().getActionType(keyEvent,editorContext);
  EditorCell selectedCell=editorContext.getSelectedCell();
  if (selectedCell != null) {
    if (selectedCell.isErrorState()) {
      if (actionType == CellActionType.INSERT || actionType == CellActionType.INSERT_BEFORE) {
        if (selectedCell.validate(actionType != CellActionType.INSERT,true)) {
          return true;
        }
      }
      selectedCell=editorContext.getNodeEditorComponent().getSelectedCell();
      if (selectedCell == null) {
        return true;
      }
    }
  }
  if (selectedCell != null) {
    if (selectedCell instanceof EditorCell_Label && !isLinkCollection(selectedCell) && (actionType == CellActionType.INSERT || actionType == CellActionType.INSERT_BEFORE)) {
      EditorCell cellWithRole=new ChildrenCollectionFinder(selectedCell,actionType == CellActionType.INSERT).find();
      if (cellWithRole == null && actionType == CellActionType.INSERT_BEFORE && selectedCell.isFirstPositionInBigCell() && hasSingleRolesAtLeftBoundary(selectedCell) && selectedCell.getPrevLeaf() != null) {
        cellWithRole=new ChildrenCollectionFinder(selectedCell.getPrevLeaf(),false).find();
      }
      if (cellWithRole == null && actionType == CellActionType.INSERT && selectedCell.isLastPositionInBigCell() && hasSingleRolesAtRightBoundary(selectedCell) && selectedCell.getNextLeaf() != null) {
        cellWithRole=new ChildrenCollectionFinder(selectedCell.getNextLeaf(),true).find();
      }
      if (cellWithRole != null && cellWithRole.executeAction(actionType)) {
        return true;
      }
    }
    if (actionType != null && actionType != CellActionType.DELETE) {
      if (selectedCell.executeAction(actionType)) {
        return true;
      }
    }
    if (!keyEvent.isConsumed()) {
      if (selectedCell.processKeyPressed(keyEvent,true)) {
        return true;
      }
    }
    if (actionType == CellActionType.DELETE) {
      if (selectedCell.executeAction(actionType)) {
        return true;
      }
    }
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_UP && keyEvent.isControlDown() && !keyEvent.isAltDown() && !keyEvent.isShiftDown()) {
    keyEvent.consume();
  }
  return false;
}
