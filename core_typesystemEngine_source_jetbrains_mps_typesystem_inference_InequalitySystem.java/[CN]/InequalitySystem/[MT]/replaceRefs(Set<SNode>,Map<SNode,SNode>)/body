{
  for (  SNode node : nodes) {
    for (    SReference ref : node.getReferences()) {
      SNode target=ref.getTargetNodeSilently();
      SNode restored=mapping.get(target);
      if (restored != null) {
        node.replaceReference(ref,new StaticReference(ref.getRole(),ref.getSourceNode(),restored));
      }
    }
  }
}
