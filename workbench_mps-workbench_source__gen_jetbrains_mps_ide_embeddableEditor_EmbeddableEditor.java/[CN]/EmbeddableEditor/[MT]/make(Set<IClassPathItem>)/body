{
  final IScript scr=new ScriptBuilder().withFacetNames(new IFacet.Name("jetbrains.mps.lang.core.Generate"),new IFacet.Name("jetbrains.mps.lang.core.TextGen"),new IFacet.Name("jetbrains.mps.baseLanguage.JavaCompile"),new IFacet.Name("jetbrains.mps.lang.core.Make")).withFinalTarget(new ITarget.Name("jetbrains.mps.baseLanguage.JavaCompile.compileToMemory")).toScript();
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      IScriptController ctl=new IScriptController.Stub(new IConfigMonitor.Stub(){
        @Override public <T extends IOption>T relayQuery(        IQuery<T> query){
          return query.defaultOption();
        }
      }
,new IJobMonitor.Stub()){
        @Override public void setup(        IPropertiesPool ppool){
          super.setup(ppool);
          Tuples._1<Iterable<IClassPathItem>> params=(Tuples._1<Iterable<IClassPathItem>>)ppool.properties(new ITarget.Name("jetbrains.mps.baseLanguage.JavaCompile.compileToMemory"),Object.class);
          if (params != null) {
            params._0(classPath);
          }
        }
      }
;
      MakeSession session=new MakeSession(myContext,null,true);
      if (IMakeService.INSTANCE.get().openNewSession(session)) {
        Future<IResult> future=IMakeService.INSTANCE.get().make(session,new ModelsToResources(myContext,Sequence.<SModel>singleton(myModel)).resources(false),scr,ctl);
        try {
          IResult result=future.get();
          if (result.isSucessful()) {
            final CResource out=(CResource)Sequence.fromIterable(result.output()).first();
            SwingUtilities.invokeLater(new Runnable(){
              public void run(){
                processClassesData(out.classes());
              }
            }
);
          }
        }
 catch (        InterruptedException ignore) {
        }
catch (        ExecutionException ignore) {
        }
      }
    }
  }
);
}
