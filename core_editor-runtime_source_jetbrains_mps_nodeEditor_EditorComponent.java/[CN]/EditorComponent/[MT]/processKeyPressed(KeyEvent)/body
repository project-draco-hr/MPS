{
  if (keyEvent.isConsumed())   return;
  if (keyEvent.getKeyCode() == KeyEvent.VK_F5 && noKeysDown(keyEvent)) {
    Highlighter.runUpdateMessagesAction(new Runnable(){
      public void run(){
        ModelAccess.instance().runReadAction(new Runnable(){
          public void run(){
            SNode sNode=getRootCell().getSNode();
            if (sNode == null) {
              return;
            }
            TypeCheckingContext typeCheckingContext=getTypeCheckingContext();
            typeCheckingContext.clear();
            Highlighter highlighter=getOperationContext().getComponent(Highlighter.class);
            if (highlighter != null) {
              highlighter.resetCheckedState(EditorComponent.this);
            }
 else {
              typeCheckingContext.checkRoot();
            }
            rebuildEditorContent();
          }
        }
);
      }
    }
);
    keyEvent.consume();
    return;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_F11 && noKeysDown(keyEvent)) {
    relayout();
    keyEvent.consume();
    return;
  }
  EditorContext editorContext=getEditorContext();
  if (editorContext == null) {
    return;
  }
  if (isKeyboardHandlerProcessingEnabled(keyEvent) && peekKeyboardHandler().processKeyPressed(editorContext,keyEvent)) {
    keyEvent.consume();
  }
  revalidateAndRepaint();
}
