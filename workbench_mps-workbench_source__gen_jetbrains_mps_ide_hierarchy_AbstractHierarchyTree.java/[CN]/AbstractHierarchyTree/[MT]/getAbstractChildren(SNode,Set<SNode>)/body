{
  Set<SNode> result;
  if (myIsParentHierarchy) {
    result=getParents(node,visited);
  }
 else {
    result=getDescendants(node,visited);
  }
  if (myOnlyInOneModel) {
    result=CollectionUtil.filter(result,new Condition<SNode>(){
      @Override public boolean met(      SNode n){
        if (n == null) {
          return false;
        }
        return SNodeOperations.getModel(n) == SNodeOperations.getModel(node);
      }
    }
);
  }
  if (!(myShowGeneratorModels)) {
    result=CollectionUtil.filter(result,new Condition<SNode>(){
      @Override public boolean met(      SNode n){
        if (n == null) {
          return false;
        }
        return !(isInGeneratorModel(n));
      }
    }
);
  }
  return result;
}
