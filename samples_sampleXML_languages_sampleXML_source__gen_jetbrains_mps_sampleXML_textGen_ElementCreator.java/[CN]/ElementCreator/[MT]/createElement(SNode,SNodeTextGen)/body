{
  Element result=new Element(SPropertyOperations.getString(element,"name"));
  for (  SNode attribute : SLinkOperations.getTargets(element,"attribute",true)) {
    if (SPropertyOperations.getString(attribute,"value") != null) {
      result.setAttribute(SPropertyOperations.getString(attribute,"name"),SPropertyOperations.getString(attribute,"value"));
    }
  }
  boolean first=true;
  for (  SNode part : SLinkOperations.getTargets(element,"content",true)) {
    if (SNodeOperations.isInstanceOf(part,"jetbrains.mps.sampleXML.structure.Text")) {
      if (!(first)) {
        result.addContent("\n");
      }
      result.addContent(SPropertyOperations.getString(SNodeOperations.cast(part,"jetbrains.mps.sampleXML.structure.Text"),"text"));
    }
    if (SNodeOperations.isInstanceOf(part,"jetbrains.mps.sampleXML.structure.Element")) {
      result.addContent(ElementCreator.createElement(SNodeOperations.cast(part,"jetbrains.mps.sampleXML.structure.Element"),textGen));
    }
    first=false;
  }
  return result;
}
