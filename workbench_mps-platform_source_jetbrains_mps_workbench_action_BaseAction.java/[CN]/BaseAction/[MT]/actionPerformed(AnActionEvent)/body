{
  final THashMap<String,Object> params=new THashMap<String,Object>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      collectActionData(e,params);
    }
  }
);
  final ModelAccess access=ModelAccess.instance();
  if (myExecuteOutsideCommand) {
    doExecute(e,params);
  }
 else {
    access.runWriteActionInCommand(new Runnable(){
      public void run(){
        doExecute(e,params);
      }
    }
);
  }
}
