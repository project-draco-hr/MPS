{
  ScriptBuilder scb=new ScriptBuilder();
  scb.withFacets(Sequence.fromIterable(Sequence.fromArray(facets)).select(new ISelector<IFacet,IFacet.Name>(){
    public IFacet.Name select(    IFacet f){
      return f.getName();
    }
  }
));
  scb.withDefault(new ITarget.Name("gen"));
  IScript sc=scb.toScript();
  Assert.assertNotNull(sc);
  Assert.assertTrue(sc.isValid());
  List<ITarget.Name> expected=ListSequence.fromListAndArray(new ArrayList<ITarget.Name>(),new ITarget.Name("gen"),new ITarget.Name("textgen"),new ITarget.Name("make"));
  Assert.assertSame(ListSequence.fromList(expected).count(),Sequence.fromIterable(sc.allTargets()).count());
  for (  ITarget t : Sequence.fromIterable(sc.allTargets())) {
    Assert.assertEquals(ListSequence.fromList(expected).removeElementAt(0),t.getName());
  }
}
