{
  SNode line=SNodeOperations.cast(SNodeOperations.getParent(thisNode),"jetbrains.mps.baseLanguage.javadoc.structure.CommentLine");
  int index=SNodeOperations.getIndexInParent(thisNode);
  Iterable<SNode> lines=SLinkOperations.getTargets(thisNode,"line",true);
  SNode nodeToSelect=null;
  int caret=-1;
  if ((int)Sequence.fromIterable(lines).count() == 0) {
    SNode prev=SNodeOperations.getPrevSibling(thisNode);
    if (StringUtils.isNotEmpty(SPropertyOperations.getString(SNodeOperations.cast(prev,"jetbrains.mps.baseLanguage.javadoc.structure.TextCommentLinePart"),"text"))) {
      caret=SPropertyOperations.getString(SNodeOperations.cast(prev,"jetbrains.mps.baseLanguage.javadoc.structure.TextCommentLinePart"),"text").length();
    }
    SNodeOperations.deleteNode(thisNode);
    CommentLine_Behavior.call_tryMergeToRight_439148907936414403(line,index - 1);
    return new NodeCaretPair(prev,caret);
  }
 else {
    for (    SNode part : ListSequence.fromList(SLinkOperations.getTargets(ListSequence.fromList(SLinkOperations.getTargets(thisNode,"line",true)).first(),"part",true))) {
      SNodeOperations.insertPrevSiblingChild(thisNode,part);
    }
    SNodeOperations.deleteNode(ListSequence.fromList(SLinkOperations.getTargets(thisNode,"line",true)).first());
    if (isBeginning) {
      nodeToSelect=ListSequence.fromList(SLinkOperations.getTargets(line,"part",true)).getElement(index - 1);
      caret=SPropertyOperations.getString(SNodeOperations.cast(ListSequence.fromList(SLinkOperations.getTargets(line,"part",true)).getElement(index - 1),"jetbrains.mps.baseLanguage.javadoc.structure.TextCommentLinePart"),"text").length();
    }
    CommentLine_Behavior.call_tryMergeToRight_439148907936414403(line,index - 1);
    SNode lastElementLine=ListSequence.fromList(SLinkOperations.getTargets(thisNode,"line",true)).last();
    for (    SNode elementLine : ListSequence.fromList(SLinkOperations.getTargets(thisNode,"line",true)).reversedList()) {
      SNodeOperations.insertNextSiblingChild(line,elementLine);
    }
    if ((lastElementLine == null)) {
      index=SNodeOperations.getIndexInParent(thisNode);
      SNodeOperations.deleteNode(thisNode);
      if (!(isBeginning)) {
        nodeToSelect=ListSequence.fromList(SLinkOperations.getTargets(line,"part",true)).getElement(index - 1);
        caret=SPropertyOperations.getString(SNodeOperations.cast(ListSequence.fromList(SLinkOperations.getTargets(line,"part",true)).getElement(index - 1),"jetbrains.mps.baseLanguage.javadoc.structure.TextCommentLinePart"),"text").length();
      }
      CommentLine_Behavior.call_tryMergeToRight_439148907936414403(line,index - 1);
    }
 else {
      index=ListSequence.fromList(SLinkOperations.getTargets(lastElementLine,"part",true)).count() - 1;
      for (      SNode linePart : ListSequence.fromList(SNodeOperations.getNextSiblings(thisNode,false))) {
        ListSequence.fromList(SLinkOperations.getTargets(lastElementLine,"part",true)).addElement(SNodeOperations.cast(linePart,"jetbrains.mps.baseLanguage.javadoc.structure.CommentLinePart"));
      }
      SNodeOperations.deleteNode(thisNode);
      if (!(isBeginning)) {
        nodeToSelect=ListSequence.fromList(SLinkOperations.getTargets(lastElementLine,"part",true)).getElement(index);
        caret=SPropertyOperations.getString(SNodeOperations.cast(ListSequence.fromList(SLinkOperations.getTargets(lastElementLine,"part",true)).getElement(index),"jetbrains.mps.baseLanguage.javadoc.structure.TextCommentLinePart"),"text").length();
      }
      CommentLine_Behavior.call_tryMergeToRight_439148907936414403(lastElementLine,index);
    }
  }
  return new NodeCaretPair(nodeToSelect,caret);
}
