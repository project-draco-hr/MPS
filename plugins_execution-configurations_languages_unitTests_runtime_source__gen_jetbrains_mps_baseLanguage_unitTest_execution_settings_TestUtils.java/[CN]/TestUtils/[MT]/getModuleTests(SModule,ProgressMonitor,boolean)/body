{
  Iterable<ITestNodeWrapper> result=Sequence.fromIterable(Collections.<ITestNodeWrapper>emptyList());
  Iterable<SModel> models=module.getModels();
  monitor.start("Fetching tests from module " + module.getModuleName(),IterableUtil.asCollection(models).size());
  try {
    for (    SModel model : Sequence.fromIterable(models)) {
      if (SModelStereotype.isUserModel(model)) {
        Iterable<ITestNodeWrapper> modelTests=TestUtils.getModelTests(model);
        result=Sequence.fromIterable(result).concat(Sequence.fromIterable(modelTests));
        if (monitor.isCanceled()) {
          return result;
        }
        if (breakOnFirstFound && Sequence.fromIterable(modelTests).isNotEmpty()) {
          return result;
        }
      }
      monitor.advance(1);
    }
  }
  finally {
    monitor.done();
  }
  return result;
}
