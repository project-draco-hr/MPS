{
  boolean packagesEnabled=true;
  if (!packagesEnabled) {
    return null;
  }
  String nodePackage=SNodeAccessUtil.getProperty(node,SNodeUtil.propertyName_BaseConcept_virtualPackage);
  if (nodePackage != null && !"".equals(nodePackage)) {
    String[] packages=nodePackage.split("\\.");
    String pack="";
    PackageNode current=null;
    for (    String aPackage : packages) {
      if (pack.length() > 0) {
        pack+=".";
      }
      pack+=aPackage;
      if (!myPackageNodes.containsKey(pack)) {
        PackageNode parent=current;
        current=new PackageNode(this,aPackage,parent);
        myPackageNodes.put(pack,current);
        current.registerInModelNode(this,parent);
      }
      current=myPackageNodes.get(pack);
    }
    return current;
  }
  return null;
}
