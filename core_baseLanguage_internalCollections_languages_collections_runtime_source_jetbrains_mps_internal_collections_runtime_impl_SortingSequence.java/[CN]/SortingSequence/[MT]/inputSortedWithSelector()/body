{
  ArrayList<U> cache=new ArrayList<U>();
  for (  U u : input) {
    cache.add(u);
  }
  U[] array=(U[])cache.toArray();
  Arrays.sort(array,new Comparator<U>(){
    public int compare(    U a,    U b){
      Comparable<Object> cmpa=(Comparable<Object>)selector.select(a);
      Comparable<Object> cmpb=(Comparable<Object>)selector.select(b);
      return cmpa.compareTo(cmpb);
    }
  }
);
  return Arrays.asList(array);
}
