{
  Map<SNode,Set<SNode>> result=new HashMap<SNode,Set<SNode>>();
  for (  Pair<SNode,SNode> pair : pairs) {
    boolean isSecond=pair.o1 == null;
    SNode node=(isSecond) ? pair.o2 : pair.o1;
    if (node == null)     continue;
    SNode root=node.getContainingRoot();
    if (!result.containsKey(root)) {
      result.put(root,new HashSet<SNode>());
    }
    result.get(root).add(node);
  }
  return result;
}
