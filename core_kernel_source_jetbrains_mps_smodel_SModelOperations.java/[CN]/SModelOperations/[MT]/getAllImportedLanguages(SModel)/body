{
  List<SModuleReference> langs=((jetbrains.mps.smodel.SModelInternal)model).importedLanguages();
  List<SModuleReference> devkits=((jetbrains.mps.smodel.SModelInternal)model).importedDevkits();
  Set<SModuleReference> result=new HashSet<SModuleReference>(langs.size() + devkits.size() * 8);
  result.addAll(langs);
  if (!MPSCore.getInstance().isMergeDriverMode()) {
    for (    SModuleReference dk : devkits) {
      DevKit devKit=((DevKit)dk.resolve(MPSModuleRepository.getInstance()));
      if (devKit == null)       continue;
      for (      Language l : devKit.getExportedLanguages()) {
        result.add(l.getModuleReference());
      }
    }
  }
  return result;
}
