{
  Set<SModelReference> result=new HashSet<SModelReference>();
  for (  SNode node : sModel.nodes()) {
    Iterable<SReference> references=(List<SReference>)jetbrains.mps.util.SNodeOperations.getReferences(node);
    for (    SReference reference : references) {
      if (!reference.isExternal())       continue;
      SModelReference targetModelReference=reference.getTargetSModelReference();
      if (targetModelReference == null || result.contains(targetModelReference))       continue;
      result.add(targetModelReference);
    }
  }
  return result;
}
