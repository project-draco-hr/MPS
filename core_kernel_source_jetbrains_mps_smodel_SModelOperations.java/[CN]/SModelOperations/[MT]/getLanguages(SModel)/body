{
  ArrayList<Language> languages=new ArrayList<>();
  SRepository repository=model.getRepository();
  if (repository == null) {
    repository=MPSModuleRepository.getInstance();
  }
  LanguageRegistry languageRegistry=LanguageRegistry.getInstance(repository);
  for (  SLanguage lang : new SLanguageHierarchy(languageRegistry,SModelOperations.getAllLanguageImports(model)).getExtended()) {
    final SModuleReference sourceModuleRef=lang.getSourceModuleReference();
    if (sourceModuleRef == null) {
      continue;
    }
    final SModule sourceModule=sourceModuleRef.resolve(repository);
    if (sourceModule instanceof Language) {
      languages.add((Language)sourceModule);
    }
  }
  return languages;
}
