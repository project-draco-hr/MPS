{
  Set<Language> languages=new LinkedHashSet<Language>();
  for (  SLanguage lang : model.usedLanguages()) {
    Language language=((Language)lang.getSourceModule());
    if (language != null) {
      languages.add(language);
      languages.addAll(LanguageDependenciesManager.getAllExtendedLanguages(language));
    }
  }
  for (  SModuleReference dk : model.importedDevkits()) {
    DevKit devKit=(DevKit)dk.resolve(MPSModuleRepository.getInstance());
    if (devKit != null) {
      for (      Language l : devKit.getAllExportedLanguages()) {
        if (languages.add(l)) {
          languages.addAll(LanguageDependenciesManager.getAllExtendedLanguages(l));
        }
      }
    }
  }
  return new ArrayList<Language>(languages);
}
