{
  Set<SModuleReference> result=new HashSet<SModuleReference>();
  final ModelDependencyScanner ms=new ModelDependencyScanner().usedLanguages(true).crossModelReferences(false);
  ms.walk(model);
  for (  SLanguage l : ms.getUsedLanguages()) {
    Language lang=findModule(l);
    if (lang == null)     continue;
    result.add(lang.getModuleReference());
  }
  return result;
}
