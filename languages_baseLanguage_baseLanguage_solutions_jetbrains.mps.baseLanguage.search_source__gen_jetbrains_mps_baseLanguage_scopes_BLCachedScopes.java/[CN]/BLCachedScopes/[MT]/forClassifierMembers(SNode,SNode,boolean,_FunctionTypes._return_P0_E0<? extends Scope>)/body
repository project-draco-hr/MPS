{
  TransactionCache<Tuples._2<SNode,SNode>,Scope> cache=TransactionCache.instance();
  Tuples._2<SNode,SNode> key=MultiTuple.<SNode,SNode>from(classifier,kind);
  Scope scope=cache.get(key);
  if (scope != null) {
    return scope;
  }
  scope=scopeCreator.invoke();
  if (doFlat) {
    scope=new SimpleScope(scope.getAvailableElements(null));
  }
  return cache.put(key,scope);
}
