{
  if (!myInitialLoadHappened.compareAndSet(false,true))   return;
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      MPSModuleRepository.getInstance().addModuleRepositoryListener(new ModuleRepositoryAdapter(){
        @Override public void moduleAdded(        IModule module){
          String namespace=module.getModuleFqName();
          if (!myExtensionDescriptors.containsKey(namespace)) {
            ExtensionDescriptor desc=findExtensionDescriptor(module);
            if (desc != null) {
              myExtensionDescriptors.put(namespace,desc);
              myModuleToNamespace.put(module,namespace);
              registerExtensionDescriptor(desc);
            }
          }
        }
        @Override public void moduleRemoved(        IModule module){
          String namespace=myModuleToNamespace.get(module);
          if (namespace != null) {
            ExtensionDescriptor desc=myExtensionDescriptors.remove(namespace);
            if (desc != null) {
              unregisterExtensionDescriptor(desc);
              myModuleToNamespace.remove(module);
            }
          }
        }
      }
);
      reloadExtensionDescriptors();
    }
  }
);
}
