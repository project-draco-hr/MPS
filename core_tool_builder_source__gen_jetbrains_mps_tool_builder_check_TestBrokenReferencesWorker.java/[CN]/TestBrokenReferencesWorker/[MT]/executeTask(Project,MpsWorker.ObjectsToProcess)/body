{
  for (  Project p : go.getProjects()) {
    extractModels(go.getModels(),p);
  }
  for (  SModule m : go.getModules()) {
    extractModels(go.getModels(),m);
  }
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      for (      SModel sm : go.getModels()) {
        if (!(SModelStereotype.isUserModel(sm))) {
          continue;
        }
        String testName="test references for " + sm.getModelName();
        output(myBuildServerMessageFormat.formatTestStart(testName));
        StringBuffer errorMessages=checkModel(sm);
        if (errorMessages.length() > 0) {
          output(myBuildServerMessageFormat.formatTestFailure(testName,"Broken References",errorMessages.toString()));
        }
        output(myBuildServerMessageFormat.formatTestFinish(testName));
      }
    }
  }
);
}
