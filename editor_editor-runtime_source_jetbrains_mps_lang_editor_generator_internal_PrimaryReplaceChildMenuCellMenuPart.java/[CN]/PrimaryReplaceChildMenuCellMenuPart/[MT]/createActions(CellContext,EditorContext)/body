{
  SNode parentNode=(SNode)cellContext.get(BasicCellContext.EDITED_NODE);
  SNode linkDeclaration=(SNode)cellContext.get(AggregationCellContext.LINK_DECLARATION);
  final String role=CellUtil.getLinkDeclarationRole(linkDeclaration);
  SNode currentChild=(SNode)cellContext.getOpt(AggregationCellContext.CURRENT_CHILD_NODE);
  return ModelActions.createChildNodeSubstituteActions(parentNode,currentChild,CellUtil.getLinkDeclarationTarget(linkDeclaration),new AbstractChildNodeSetter(){
    @Override public SNode doExecute(    SNode parentNode,    SNode oldChild,    SNode newChild,    IScope scope,    @Nullable EditorContext editorContext){
      if (oldChild == null) {
        parentNode.addChild(role,newChild);
      }
 else {
        SNodeUtil.replaceWithAnother(oldChild,newChild);
      }
      return newChild;
    }
  }
,editorContext.getOperationContext());
}
