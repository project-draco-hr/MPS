{
  nodeEditor=context.getNodeEditorComponent();
  EditorCell selectedCell=nodeEditor.getSelectedCell();
  EditorCell deepestSelectedCell=nodeEditor.getDeepestSelectedCell();
  if (selectedCell != null) {
    caretX=new Integer(deepestSelectedCell.getCaretX());
    if (deepestSelectedCell instanceof EditorCell_Label && deepestSelectedCell.isErrorState()) {
      errorCellText=((EditorCell_Label)deepestSelectedCell).getRenderedText();
    }
    cellInfo=selectedCell.getCellInfo();
    selectedStack=nodeEditor.getSelectedStackForMemento();
    EditorCell rootCell=nodeEditor.getRootCell();
    if (rootCell instanceof EditorCell_Collection)     fillBracesInfo((EditorCell_Collection)rootCell);
  }
}
