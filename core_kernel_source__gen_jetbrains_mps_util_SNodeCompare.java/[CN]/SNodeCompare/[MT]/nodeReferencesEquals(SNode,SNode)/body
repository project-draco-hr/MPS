{
  final Map<String,SReference> aMap=MapSequence.fromMap(new HashMap<String,SReference>());
  final Map<String,SReference> bMap=MapSequence.fromMap(new HashMap<String,SReference>());
  Sequence.fromIterable(jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations.getReferences((SNode)a)).visitAll(new IVisitor<SReference>(){
    public void visit(    SReference ref){
      MapSequence.fromMap(aMap).put(SLinkOperations.getRole(ref),ref);
    }
  }
);
  Sequence.fromIterable(jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations.getReferences((SNode)b)).visitAll(new IVisitor<SReference>(){
    public void visit(    SReference ref){
      MapSequence.fromMap(bMap).put(SLinkOperations.getRole(ref),ref);
    }
  }
);
  for (  String r : SetSequence.fromSet(MapSequence.fromMap(aMap).keySet()).union(SetSequence.fromSet(MapSequence.fromMap(bMap).keySet()))) {
    SReference aRef=a.getReference(r);
    SReference bRef=b.getReference(r);
    if (aRef == null || bRef == null) {
      return false;
    }
    if (neq_acety0_a0e0f0c(aRef.getTargetSModelReference(),bRef.getTargetSModelReference())) {
      return false;
    }
    if (neq_acety0_a0f0f0c(aRef.getResolveInfo(),bRef.getResolveInfo())) {
      return false;
    }
    if (aRef instanceof DynamicReference || bRef instanceof DynamicReference) {
      if (aRef instanceof DynamicReference && bRef instanceof DynamicReference) {
      }
 else {
        return false;
      }
    }
 else {
      if (neq_acety0_a0b0a6a5a2(aRef.getTargetNodeId(),bRef.getTargetNodeId())) {
        return false;
      }
    }
  }
  return true;
}
