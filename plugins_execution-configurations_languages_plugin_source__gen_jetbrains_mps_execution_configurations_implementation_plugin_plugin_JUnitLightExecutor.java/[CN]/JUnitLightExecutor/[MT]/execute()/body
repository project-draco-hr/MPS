{
  final Iterable<? extends ITestNodeWrapper> nodes=myFilter.filter(myNodes);
  TestRunState runState=new TestRunState(nodes);
  TestEventsDispatcher eventsDispatcher=new TestEventsDispatcher(runState);
  TestLightExecutor lightExecutor=new TestLightExecutor(eventsDispatcher);
  final Future<?> future=doExecute(lightExecutor,nodes);
  final FakeProcessHandler process=new FakeProcessHandler(future,lightExecutor);
  JUnitProcessPack packProcess=new JUnitProcessPacker(myProject,runState,eventsDispatcher).packProcess(process);
  return packProcess;
}
