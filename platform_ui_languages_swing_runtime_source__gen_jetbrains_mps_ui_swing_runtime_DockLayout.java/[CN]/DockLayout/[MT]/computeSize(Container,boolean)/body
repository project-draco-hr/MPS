{
synchronized (container.getTreeLock()) {
    Component center=this.collectComponents();
    int width=this.size(this.west,pref).width + this.size(center,pref).width + this.size(this.east,pref).width;
    width=Math.max(width,this.size(this.north,pref).width);
    width=Math.max(width,this.size(this.south,pref).width);
    int mHeight=Math.max(this.size(this.east,pref).height,this.size(center,pref).height);
    mHeight=Math.max(mHeight,this.size(this.west,pref).height);
    int height=this.size(this.north,pref).height + mHeight + this.size(this.south,pref).height;
    Insets insets=container.getInsets();
    return new Dimension(width + insets.left + insets.right,height + insets.top + insets.bottom);
  }
}
