{
  if (!myAdded) {
    throw new IllegalStateException(String.format("Trying to remove tree node which have not been added, tree=%s, node=%s",myTree != null ? myTree.getClass().getName() : "null",getClass().getName()));
  }
  try {
    onRemove();
  }
 catch (  Throwable t) {
    LOG.error(null,t);
  }
  myAdded=false;
  if (!isInitialized()) {
    return;
  }
  for (  MPSTreeNode node : this) {
    node.removeThisAndChildren();
  }
  setParent(null);
  children=null;
}
