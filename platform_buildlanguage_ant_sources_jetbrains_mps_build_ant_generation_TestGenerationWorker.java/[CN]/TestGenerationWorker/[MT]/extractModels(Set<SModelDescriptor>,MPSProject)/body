{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      List<BaseTestConfiguration> testConfigurationList=project.getProjectDescriptor().getTestConfigurations();
      if (testConfigurationList.isEmpty()) {
        List<String> properties=myWhatToDo.getMPSProjectFiles().get(project);
        if (properties.contains(TestGenerationOnTeamcity.WHOLE_PROJECT)) {
          TestGenerationWorker.super.extractModels(modelDescriptors,project);
        }
 else {
          warning("No test configurations for project " + project.getProjectDescriptor().getName());
        }
      }
 else {
        for (        BaseTestConfiguration config : testConfigurationList) {
          GenParameters genParams=config.getGenParams(project,true);
          myTestConfigurations.put(config,genParams);
          modelDescriptors.addAll(genParams.getModelDescriptors());
        }
      }
    }
  }
);
}
