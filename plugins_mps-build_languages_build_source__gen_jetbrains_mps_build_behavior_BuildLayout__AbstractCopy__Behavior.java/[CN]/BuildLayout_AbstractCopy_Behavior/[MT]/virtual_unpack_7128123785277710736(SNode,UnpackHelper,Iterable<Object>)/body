{
  if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(thisNode,"fileset",true),"jetbrains.mps.build.structure.BuildInputSingleFile")) {
    SNode parent=helper.parent(thisNode);
    String parentLocation=helper.contentLocations().get(parent);
    SNode path=SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(thisNode,"fileset",true),"jetbrains.mps.build.structure.BuildInputSingleFile"),"path",true);
    if (path != null) {
      String lastSegment=BehaviorReflection.invokeVirtual(String.class,path,"virtual_getLastSegment_1368030936106771141",new Object[]{helper.getMacroHelper()});
      if (lastSegment != null) {
        String fileLocation=parentLocation + "/" + lastSegment;
        helper.locations().put(thisNode,fileLocation);
      }
    }
  }
}
