{
  ReferenceScopeProvider scopeProvider=ModelConstraintsManager.getNodeReferentSearchScopeProvider(referenceNodeConcept,linkRole);
  ReferentConstraintContext referentConstraintContext=new ReferentConstraintContext(model,enclosingNode,referenceNode,linkTarget,containingLinkDeclaration);
  DefaultReferencePresentation referencePresentation=null;
  if (scopeProvider != null) {
    referencePresentation=scopeProvider.hasPresentation() ? new DefaultReferencePresentation(context,referentConstraintContext,scopeProvider) : null;
    ISearchScope searchScope=scopeProvider.createSearchScope(context,referentConstraintContext);
    if (!(searchScope instanceof UndefinedSearchScope)) {
      return newOK(searchScope,referencePresentation,false,scopeProvider.getSearchScopeValidatorNode());
    }
  }
  ISearchScope searchScope=createDefaultScope(model,context);
  return newOK(searchScope,referencePresentation,true,null);
}
