{
  INodeReferentSearchScopeProvider scopeProvider=ModelConstraintsManager.getInstance().getNodeReferentSearchScopeProvider(referenceNodeConcept,linkRole);
  ReferentConstraintContext referentConstraintContext=new ReferentConstraintContext(model,enclosingNode,referenceNode,BaseAdapter.fromAdapter(linkTarget));
  DefaultReferencPresentation referencePresentation=null;
  if (scopeProvider != null) {
    referencePresentation=scopeProvider.hasPresentation() ? new DefaultReferencPresentation(context,referentConstraintContext,scopeProvider) : null;
    ISearchScope searchScope=scopeProvider.createNodeReferentSearchScope(context,referentConstraintContext);
    if (!(searchScope instanceof UndefinedSearchScope)) {
      return newOK(searchScope,referencePresentation,false,scopeProvider.getSearchScopeValidatorNodePointer());
    }
  }
  ISearchScope searchScope=SModelSearchUtil.createModelAndImportedModelsScope(model,false,context.getScope());
  return newOK(searchScope,referencePresentation,true,null);
}
