{
  final SModel model;
  if (enclosingNode != null) {
    model=enclosingNode.getModel();
  }
 else   if (referenceNode != null) {
    model=referenceNode.getModel();
    enclosingNode=referenceNode.getParent();
  }
 else {
    model=null;
  }
  return new ReferentConstraintContext(model,exists,referenceNode != null ? referenceNode : enclosingNode,role,index,enclosingNode,referenceNode,linkTarget,containingLinkDeclaration);
}
