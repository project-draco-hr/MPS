{
  String linkRole=SModelUtil_new.getGenuineLinkRole(referenceLinkDeclaration);
  AbstractConceptDeclaration linkTarget=referenceLinkDeclaration.getTarget();
  final SModel model;
  if (enclosingNode != null) {
    model=enclosingNode.getModel();
  }
 else   if (referenceNode != null) {
    model=referenceNode.getModel();
    enclosingNode=referenceNode.getParent();
  }
 else {
    model=null;
  }
  INodeReferentSearchScopeProvider scopeProvider=ModelConstraintsManager.getInstance().getNodeReferentSearchScopeProvider(referenceNodeConcept,linkRole);
  ReferentConstraintContext referentConstraintContext=new ReferentConstraintContext(model,enclosingNode,referenceNode,BaseAdapter.fromAdapter(linkTarget));
  return new DefaultReferencPresentation(context,referentConstraintContext,scopeProvider);
}
