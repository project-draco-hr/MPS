{
  return ModelAccess.instance().runReadAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      try {
        if (path.startsWith(MPSNodeVirtualFile.NODE_PREFIX)) {
          SNode node=NiceReferenceSerializer.deserializeNode(MPSModuleRepository.getInstance(),path.substring(MPSNodeVirtualFile.NODE_PREFIX.length()));
          if (node == null) {
            return null;
          }
          return getFileFor(node);
        }
 else         if (path.startsWith(MPSModelVirtualFile.MODEL_PREFIX)) {
          SModel model=NiceReferenceSerializer.deserializeModel(MPSModuleRepository.getInstance(),path.substring(MPSModelVirtualFile.MODEL_PREFIX.length()));
          if (model == null) {
            return null;
          }
          return getFileFor(model.getReference());
        }
      }
 catch (      IllegalArgumentException e) {
      }
      return null;
    }
  }
);
}
