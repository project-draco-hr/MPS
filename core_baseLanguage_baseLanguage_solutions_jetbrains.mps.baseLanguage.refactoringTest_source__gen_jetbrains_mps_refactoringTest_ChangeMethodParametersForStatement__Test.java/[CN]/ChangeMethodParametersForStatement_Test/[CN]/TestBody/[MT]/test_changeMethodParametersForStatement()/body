{
  this.addNodeById("1230052406554");
  this.addNodeById("1230052406581");
{
    SNode c_ref=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.LocalVariableReference",null);
    SLinkOperations.setTarget(c_ref,"variableDeclaration",this.getNodeById("1230052406612"),false);
    SNodeOperations.replaceWithAnother(this.getNodeById("1230052406630"),c_ref);
    ExtractMethodRefactoringParameters params=new ExtractMethodRefactoringParameters(ListSequence.<SNode>fromArray(this.getNodeById("1230052406572")));
    params.getParameters().get(0).setSelected(false);
    MethodParameter p2=params.getParameters().get(1);
    MethodParameter p1=params.getParameters().get(2);
    params.getParameters().set(1,p1);
    params.getParameters().set(2,p2);
    p1.setName("p1");
    p2.setName("p2");
    params.setName("foo");
    ExtractMethodRefactoring ref=ExtractMethodFabric.createRefactoring(params);
    ref.doRefactor();
    Assert.assertEquals(null,NodesMatcher.matchNodes(ListSequence.<SNode>fromArray(this.getNodeById("1230052406555")),ListSequence.<SNode>fromArray(this.getNodeById("1230052406582"))));
  }
}
