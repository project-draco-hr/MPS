{
  myElements=elements;
  mySelectedNodes.clear();
  myNodeToParentMap.clear();
  myElementToNodeMap.clear();
  myContainerNodes.clear();
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      myTreeModel=buildModel();
    }
  }
);
  myTree.setModel(myTreeModel);
  myTree.setRootVisible(false);
  doSort();
  TreeUtil.expandAll(myTree);
  initOptions();
  myTree.doLayout();
  setOKActionEnabled(myElements != null && myElements.length > 0);
}
