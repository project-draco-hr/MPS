{
  SModelHeader header=loadDescriptor(new InputSource(new InputStreamReader(new ByteArrayInputStream(data),FileUtil.DEFAULT_CHARSET)));
  IModelPersistence mp=getPersistence(header.getPersistenceVersion());
  if (!(mp instanceof XMLPersistence)) {
    LOG.error("Can't index old persistence. Please update persistence of old models.\n" + "Persistence version: " + header.getPersistenceVersion() + "\n"+ "Model: "+ header.getModelReference().getModelName());
    return;
  }
  Indexer indexSupport=((XMLPersistence)mp).getIndexSupport(newConsumer);
  indexSupport.index(new InputStreamReader(new ByteArrayInputStream(data),FileUtil.DEFAULT_CHARSET));
}
