{
  final SModelHeader result=new SModelHeader();
  loadDescriptor(result,file);
  if (result.getPersistenceVersion() < 7) {
    Map<String,String> metadata=loadMetadata(file);
    if (metadata != null) {
      if (metadata.containsKey(SModelHeader.VERSION)) {
        try {
          result.setVersion(Integer.parseInt(metadata.remove(SModelHeader.VERSION)));
        }
 catch (        NumberFormatException ignored) {
        }
      }
      if (metadata.containsKey(SModelHeader.DO_NOT_GENERATE)) {
        result.setDoNotGenerate(Boolean.parseBoolean(metadata.remove(SModelHeader.DO_NOT_GENERATE)));
      }
    }
  }
  return result;
}
