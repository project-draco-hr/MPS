{
  IModelPersistence modelPersistence=getModelPersistence(persistenceVersion);
  if (modelPersistence == null) {
    throw new IllegalArgumentException(String.format("Unknown persistence version %d",persistenceVersion));
  }
  model.calculateImplicitImports();
  return modelPersistence.getModelWriter().saveModel(model);
}
