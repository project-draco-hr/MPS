{
  if (module instanceof Generator) {
    return getClassLoader(((Generator)module).getSourceLanguage());
  }
  if (!ModuleClassLoaderSupport.canCreate(module)) {
    throw new IllegalArgumentException("Module " + module.getModuleName() + " can't load classes");
  }
  if (myClassLoaders.containsKey(module)) {
    return myClassLoaders.get(module);
  }
  ModuleClassLoaderSupport support=ModuleClassLoaderSupport.create(module);
  ModuleClassLoader classLoader=new ModuleClassLoader(this,support);
  for (  SModule dep : support.getCompileDependencies()) {
    if (!myBackRefs.containsKey(dep)) {
      myBackRefs.put(dep,new HashSet<SModule>());
    }
    myBackRefs.get(dep).add(module);
  }
  myClassLoaders.put(module,classLoader);
  return classLoader;
}
