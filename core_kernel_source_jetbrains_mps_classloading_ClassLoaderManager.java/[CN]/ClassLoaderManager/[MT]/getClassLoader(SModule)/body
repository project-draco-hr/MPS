{
  if (!canLoad(module)) {
    throw new IllegalArgumentException("Module " + module.getModuleName() + " can't load classes");
  }
  if (module instanceof Generator) {
    return getClassLoader(((Generator)module).getSourceLanguage());
  }
  if (myModuleClassLoaders.containsKey(module)) {
    return myModuleClassLoaders.get(module);
  }
  ModuleClassLoader classLoader=new ModuleClassLoader(module);
  myModuleClassLoaders.put(module,classLoader);
  return classLoader;
}
