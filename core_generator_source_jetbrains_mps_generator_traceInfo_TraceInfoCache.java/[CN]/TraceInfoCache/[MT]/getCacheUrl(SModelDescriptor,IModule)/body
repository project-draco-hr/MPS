{
  IClassPathItem classPathItem;
  if (module.isCompileInMPS() || !module.getModuleDescriptor().getStubModelEntries().isEmpty()) {
    classPathItem=module.getClassPathItem();
  }
 else {
    classPathItem=CommonPaths.getMPSClassPath();
  }
  if (classPathItem == null) {
    return null;
  }
  String resourceName=traceInfoResourceName(sm);
  URL url=classPathItem.getResource(resourceName);
  if (url == null) {
    if (InternalFlag.isInternalMode() && !(module.isCompileInMPS())) {
      for (      IdeaPluginDescriptor plugin : PluginManager.getPlugins()) {
        url=plugin.getPluginClassLoader().getResource(resourceName);
        if (url != null) {
          return url;
        }
      }
    }
  }
  return url;
}
