{
  if (SNodeOperations.isInstanceOf(_context.getSampleNode(),"jetbrains.mps.baseLanguage.collections.structure.InternalSequenceOperation")) {
    SLinkOperations.setTarget(_context.getNewNode(),"closure",SNodeOperations.detachNode(SLinkOperations.getTarget(SNodeOperations.cast(_context.getSampleNode(),"jetbrains.mps.baseLanguage.collections.structure.InternalSequenceOperation"),"closure",true)),true);
  }
 else {
    SNode filter=SLinkOperations.getTarget(_context.getNewNode(),"closure",true);
    if ((filter == null)) {
      filter=SNodeFactoryOperations.setNewChild(_context.getNewNode(),"closure","jetbrains.mps.baseLanguage.closures.structure.ClosureLiteral");
    }
    SNode pd=SNodeFactoryOperations.addNewChild(SNodeOperations.cast(filter,"jetbrains.mps.baseLanguage.closures.structure.ClosureLiteral"),"parameter","jetbrains.mps.baseLanguage.collections.structure.SmartClosureParameterDeclaration");
    SPropertyOperations.set(pd,"name","it");
  }
}
