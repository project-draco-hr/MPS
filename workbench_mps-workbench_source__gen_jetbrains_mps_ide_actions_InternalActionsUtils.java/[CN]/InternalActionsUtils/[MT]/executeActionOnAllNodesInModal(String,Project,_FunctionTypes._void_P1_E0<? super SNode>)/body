{
  if (ModelAccess.instance().canWrite()) {
    throw new IllegalStateException("Must be executed outside of write action");
  }
  ProgressManager.getInstance().run(new Task.Modal(project,actionName,true){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      InternalActionsUtils.executeActionOnAllNodes(actionName,new ProgressMonitorAdapter(indicator),nodeCallback);
    }
  }
);
}
