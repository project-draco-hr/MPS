{
  List<SModel> result=new ArrayList<SModel>();
  Map<String,String> options=new HashMap<String,String>();
  String moduleHome=null;
  SModule module=getModule();
  if (module != null) {
    options.put(ModelFactory.OPTION_MODULEREF,module.getModuleReference().toString());
    IFile moduleSourceDir=((AbstractModule)module).getModuleSourceDir();
    moduleHome=moduleSourceDir != null ? moduleSourceDir.getPath().replace("\\","/") : null;
  }
  for (  String path : getFiles(SOURCE_ROOTS)) {
    String relativePath=moduleHome != null ? makeRelative(moduleHome,path) : null;
    collectModels(FileSystem.getInstance().getFileByPath(path),"",relativePath,options,result);
  }
  return result;
}
