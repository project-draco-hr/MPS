{
  if (diff == null) {
    return;
  }
  if (diff instanceof EquationAddedOperation) {
    EquationAddedOperation eq=(jetbrains.mps.newTypesystem.operation.equation.EquationAddedOperation)diff;
    SNode child=eq.getChild();
    SNode parent=eq.getParent();
    if (myNodes.contains(child)) {
      myNodes.addAll(TypesUtil.getVariables(parent));
    }
    if (myNodes.contains(parent)) {
      myNodes.addAll(TypesUtil.getVariables(child));
    }
  }
  if (diff instanceof TypeAssignedOperation) {
    TypeAssignedOperation typeDifference=(TypeAssignedOperation)diff;
    if (myNodes.contains(typeDifference.getNode()) && TypesUtil.isVariable(typeDifference.getType())) {
      myNodes.add(typeDifference.getType());
    }
  }
  if (diff.getConsequences() != null) {
    for (    AbstractOperation childDiff : diff.getConsequences()) {
      getSliceVars(childDiff);
    }
  }
}
