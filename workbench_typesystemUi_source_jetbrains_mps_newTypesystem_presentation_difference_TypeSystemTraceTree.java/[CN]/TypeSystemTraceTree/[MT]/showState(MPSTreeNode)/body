{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      AbstractOperation rootDifference=myCurrentContext.getOperation();
      Object difference=newNode.getUserObject();
      if (myOldDifference == null) {
        myStateCopy.clear(false);
        myStateCopy.executeOperationsBeforeAnchor(rootDifference,difference);
      }
 else {
        myStateCopy.updateState(myOldDifference,(AbstractOperation)difference);
      }
      myParent.resetState(myStateCopy);
      myOldDifference=(AbstractOperation)difference;
    }
  }
);
}
