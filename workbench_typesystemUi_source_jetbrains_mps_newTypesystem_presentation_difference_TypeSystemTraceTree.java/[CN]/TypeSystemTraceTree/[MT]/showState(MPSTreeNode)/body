{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      State state=generationMode ? myGenerationStateCopy : myStateCopy;
      AbstractOperation rootDifference=myCurrentContext.getOperation();
      Object difference=newNode.getUserObject();
      if (myOldDifference == null) {
        state.clear(false);
        state.executeOperationsBeforeAnchor(rootDifference,difference);
      }
 else {
        state.updateState(myOldDifference,(AbstractOperation)difference);
      }
      myParent.resetState(state);
      myOldDifference=(AbstractOperation)difference;
    }
  }
);
}
