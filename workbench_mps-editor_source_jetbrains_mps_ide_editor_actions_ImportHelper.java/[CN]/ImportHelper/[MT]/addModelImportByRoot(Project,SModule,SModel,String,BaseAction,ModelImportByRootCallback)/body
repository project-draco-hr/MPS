{
  final jetbrains.mps.project.Project mpsProject=ProjectHelper.toMPSProject(project);
  BaseMPSChooseModel goToNodeModel=new RootChooseModel(mpsProject){
    @Override public NavigationItem doGetNavigationItem(    final NavigationTarget object){
      return new RootNodeElement(object){
        @Override public void navigate(        boolean requestFocus){
          new AddModelItem(project,model,object.getNodeReference().getModelReference()).navigate(requestFocus);
        }
      }
;
    }
    @Override @Nullable public String getPromptText(){
      return "Import model that contains root:";
    }
  }
;
  ChooseByNamePopup popup=MpsPopupFactory.createNodePopup(project,goToNodeModel,initialText,parentAction);
  popup.invoke(new ChooseByNamePopupComponent.Callback(){
    @Override public void onClose(){
    }
    @Override public void elementChosen(    final Object element){
      mpsProject.getModelAccess().runWriteAction(new Runnable(){
        @Override public void run(){
          NavigationItem navigationItem=(NavigationItem)element;
          navigationItem.navigate(true);
          callback.importForRootAdded(navigationItem.getPresentation().getPresentableText());
        }
      }
);
    }
  }
,ModalityState.current(),true);
}
