{
  BaseModelModel goToModelModel=new BaseModelModel(project){
    @Override public NavigationItem doGetNavigationItem(    final SModelReference modelReference){
      return new AddModelItem(project,model,modelReference,module);
    }
    @Override public SModelReference[] find(    IScope scope){
      Condition<SModelDescriptor> cond=new Condition<SModelDescriptor>(){
        @Override public boolean met(        SModelDescriptor modelDescriptor){
          boolean rightStereotype=SModelStereotype.isUserModel(modelDescriptor) || SModelStereotype.isStubModelStereotype(SModelStereotype.getStereotype(modelDescriptor));
          boolean hasModule=modelDescriptor.getModule() != null;
          return rightStereotype && hasModule;
        }
      }
;
      ConditionalIterable<SModelDescriptor> iter=new ConditionalIterable<SModelDescriptor>(scope.getModelDescriptors(),cond);
      List<SModelReference> filteredModelRefs=new ArrayList<SModelReference>();
      for (      SModelDescriptor md : iter) {
        filteredModelRefs.add(md.getReference());
      }
      return filteredModelRefs.toArray(new SModelReference[filteredModelRefs.size()]);
    }
    @Override @Nullable public String getPromptText(){
      return "Import model:";
    }
  }
;
  ChooseByNamePopup popup=MpsPopupFactory.createPackagePopup(project,goToModelModel,parentAction);
  popup.invoke(new ChooseByNamePopupComponent.Callback(){
    @Override public void onClose(){
    }
    @Override public void elementChosen(    final Object element){
      ((NavigationItem)element).navigate(true);
    }
  }
,ModalityState.current(),true);
}
