{
  BaseMPSChooseModel goToNodeModel=new RootChooseModel(project,new RootNodeNameIndex()){
    public NavigationItem doGetNavigationItem(    final NodeDescriptor object){
      return new RootNodeElement(object){
        public void navigate(        boolean requestFocus){
          ModelAccess.assertLegalRead();
          new AddModelItem(project,model,((SModelReference)object.getNodeReference().getModelReference()),contextModule).navigate(requestFocus);
        }
      }
;
    }
    @Nullable public String getPromptText(){
      return "Import model that contains root:";
    }
  }
;
  ChooseByNamePopup popup=MpsPopupFactory.createNodePopup(project,goToNodeModel,initialText,parentAction);
  popup.invoke(new ChooseByNamePopupComponent.Callback(){
    public void onClose(){
    }
    public void elementChosen(    final Object element){
      ModelAccess.instance().runWriteAction(new Runnable(){
        public void run(){
          NavigationItem navigationItem=(NavigationItem)element;
          navigationItem.navigate(true);
          callback.importForRootAdded(navigationItem.getPresentation().getPresentableText());
        }
      }
);
    }
  }
,ModalityState.current(),true);
}
