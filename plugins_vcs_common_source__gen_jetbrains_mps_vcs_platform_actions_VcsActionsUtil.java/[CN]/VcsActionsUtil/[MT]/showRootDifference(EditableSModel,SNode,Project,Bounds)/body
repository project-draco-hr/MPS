{
  try {
    VirtualFile file=ModelUtil.getVFilesByModelDescriptor(modelDescriptor).iterator().next();
    AbstractVcs vcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(file);
    VcsRevisionNumber revisionNumber=vcs.getDiffProvider().getCurrentRevision(file);
    String[] contentTitles={revisionNumber.asString() + " (Read-Only)","Your Version"};
    ContentRevision content=vcs.getDiffProvider().createFileContent(revisionNumber,file);
    SModel oldModel=ModelPersistence.readModel(content.getContent(),false);
    final Wrappers._T<SModel> newModel=new Wrappers._T<SModel>();
    final Wrappers._T<SNodeId> id=new Wrappers._T<SNodeId>();
    ModelAccess.instance().runReadAction(new Runnable(){
      public void run(){
        newModel.value=((SModelBase)node.getModel()).getSModelInternal();
        id.value=node.getNodeId();
      }
    }
);
    ModelDifferenceDialog.showRootDifference(oldModel,newModel.value,id.value,project,contentTitles[0],contentTitles[1],bounds);
  }
 catch (  VcsException e) {
    if (LOG.isEnabledFor(Priority.WARN)) {
      LOG.warn("",e);
    }
    Messages.showErrorDialog(project,"Can't show difference due to the following error: " + e.getMessage(),"Error");
  }
catch (  ModelReadException e) {
    Messages.showErrorDialog(project,"Can't load previous version: " + e.getMessage(),"Error");
  }
}
