{
  if (virtualFiles != null) {
    return Sequence.fromIterable(Sequence.fromArray(virtualFiles)).where(new IWhereFilter<VirtualFile>(){
      public boolean accept(      VirtualFile vf){
        return vf.isInLocalFileSystem() && vf.exists() && !(vf.isDirectory());
      }
    }
).select(new ISelector<VirtualFile,SModel>(){
      public SModel select(      VirtualFile vf){
        return ((SModel)SModelFileTracker.getInstance().findModel(VirtualFileUtils.toIFile(vf)));
      }
    }
).where(new IWhereFilter<SModel>(){
      public boolean accept(      SModel m){
        return m != null;
      }
    }
).toListSequence();
  }
 else {
    return ListSequence.fromList(new ArrayList<SModel>());
  }
}
