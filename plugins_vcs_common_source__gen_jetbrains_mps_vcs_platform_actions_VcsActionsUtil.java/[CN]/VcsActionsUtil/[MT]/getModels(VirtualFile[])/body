{
  if (virtualFiles != null) {
    return Sequence.fromIterable(Sequence.fromArray(virtualFiles)).where(new IWhereFilter<VirtualFile>(){
      public boolean accept(      VirtualFile vf){
        return vf.isInLocalFileSystem() && vf.exists() && !(vf.isDirectory());
      }
    }
).select(new ISelector<VirtualFile,org.jetbrains.mps.openapi.model.SModel>(){
      public org.jetbrains.mps.openapi.model.SModel select(      VirtualFile vf){
        return ((org.jetbrains.mps.openapi.model.SModel)SModelFileTracker.getInstance().findModel(VirtualFileUtils.toIFile(vf)));
      }
    }
).where(new IWhereFilter<org.jetbrains.mps.openapi.model.SModel>(){
      public boolean accept(      org.jetbrains.mps.openapi.model.SModel m){
        return m != null;
      }
    }
).toListSequence();
  }
 else {
    return ListSequence.fromList(new ArrayList<org.jetbrains.mps.openapi.model.SModel>());
  }
}
