{
  MyFileEditorState result=new MyFileEditorState();
  if (getEditorContext() != null && !getEditorContext().getModel().isDisposed()) {
    boolean full=level == FileEditorStateLevel.UNDO || level == FileEditorStateLevel.FULL;
    result.myMemento=getEditorContext().createMemento(full);
    NodeEditorComponent editorComponent=(NodeEditorComponent)getCurrentEditorComponent();
    if (editorComponent != null) {
      EditorComponent inspector=editorComponent.getInspector();
      result.myInspectorMemento=inspector.getEditorContext().createMemento(full);
      EditorCell selectedCell=editorComponent.getSelectedCell();
      if (selectedCell != null) {
        result.mySelectedCell=new DefaultCellInfo(selectedCell);
      }
    }
  }
  return result;
}
