{
  MigrationState msComponent=myProject.getComponent(MigrationState.class);
  MPSProject mpsProject=myProject.getComponent(MPSProject.class);
  if (msComponent.getMigrationState() == MState.INITIAL) {
    stageUpgradePersistence(mpsProject);
    msComponent.setMigrationState(MState.PERSISTENCE_UPGRADED);
    cleanRestart();
  }
  if (msComponent.getMigrationState() == MState.PERSISTENCE_UPGRADED) {
    stageFixDependencies(mpsProject);
    msComponent.setMigrationState(MState.LANGUAGES_DEPS_CORRECTED);
    cleanRestart();
  }
  if (msComponent.getMigrationState() == MState.LANGUAGES_DEPS_CORRECTED) {
    stageStubsMigration(mpsProject);
    msComponent.setMigrationState(MState.STUBS_CONVERTED);
    cleanRestart();
  }
  if (msComponent.getMigrationState() == MState.STUBS_CONVERTED) {
    stageLanguageMigrations(mpsProject);
    msComponent.setMigrationState(MState.LANGUAGES_MIGRATION);
    cleanRestart();
  }
  if (msComponent.getMigrationState() == MState.LANGUAGES_MIGRATION) {
    stageRegeneration(mpsProject);
    msComponent.setMigrationState(MState.REGENERATION);
  }
  if (msComponent.getMigrationState() == MState.REGENERATION) {
    msComponent.setMigrationState(MState.DONE);
  }
}
