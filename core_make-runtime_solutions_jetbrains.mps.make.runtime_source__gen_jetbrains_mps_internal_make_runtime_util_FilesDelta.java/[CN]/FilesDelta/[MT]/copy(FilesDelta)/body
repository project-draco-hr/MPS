{
  if (DirUtil.startsWith(this.key,that.key)) {
    this.key=that.key;
  }
 else   if (!(DirUtil.startsWith(that.key,this.key))) {
    throw new IllegalArgumentException();
  }
  for (  IFile file : MapSequence.fromMap(that.files).keySet()) {
    FilesDelta.Status newStatus=MapSequence.fromMap(that.files).get(file);
    if (newStatus == FilesDelta.Status.STALE && MapSequence.fromMap(files).containsKey(file)) {
      continue;
    }
 else {
      MapSequence.fromMap(files).put(file,newStatus);
    }
  }
  return this;
}
