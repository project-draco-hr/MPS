{
  visitor.acceptRoot(rootDir);
  MapSequence.fromMap(files).visitAll(new IVisitor<IMapping<IFile,FilesDelta.Status>>(){
    public void visit(    IMapping<IFile,FilesDelta.Status> m){
      if (m.value() == FilesDelta.Status.KEPT && !(m.key().isDirectory())) {
        visitor.acceptKept(m.key());
      }
 else       if (m.value() == FilesDelta.Status.WRITTEN) {
        visitor.acceptWritten(m.key());
      }
    }
  }
);
  ListSequence.fromList(this.collectFilesToDelete()).visitAll(new IVisitor<IFile>(){
    public void visit(    IFile f){
      visitor.acceptDeleted(f);
    }
  }
);
  return true;
}
