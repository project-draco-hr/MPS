{
  if (!(root instanceof FileBasedModelRoot)) {
    return null;
  }
  FileBasedModelRoot modelRoot=(FileBasedModelRoot)root;
  Collection<String> sourceRoots=new LinkedHashSet<String>(modelRoot.getFiles(FileBasedModelRoot.SOURCE_ROOTS));
  if (sourceRoots.isEmpty()) {
    return null;
  }
  if (sourceRoot == null || !sourceRoots.contains(sourceRoot)) {
    sourceRoot=null;
    for (    String sr : sourceRoots) {
      if (root instanceof DefaultModelRoot && ((DefaultModelRoot)root).isLanguageAspectsSourceRoot(sr)) {
        continue;
      }
      sourceRoot=sr;
      break;
    }
    if (sourceRoot == null) {
      return null;
    }
  }
  IFile folder=FileSystem.getInstance().getFileByPath(sourceRoot + File.separator + NameUtil.pathFromNamespace(modelName));
  if (folder.getDescendant(FilePerRootDataSource.HEADER_FILE).exists()) {
    return null;
  }
  return new FilePerRootDataSource(folder,root);
}
