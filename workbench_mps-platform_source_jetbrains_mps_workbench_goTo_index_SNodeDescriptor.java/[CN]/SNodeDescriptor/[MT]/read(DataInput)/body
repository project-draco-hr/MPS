{
  SModelReference modelReference;
  byte c=in.readByte();
  if (c == 7) {
    SModelId id=jetbrains.mps.smodel.SModelId.regular(new UUID(in.readLong(),in.readLong()));
    modelReference=PersistenceFacade.getInstance().createModelReference(null,id,readString(in));
  }
 else {
    modelReference=PersistenceFacade.getInstance().createModelReference(readString(in));
  }
  SNodeId nodeId;
  c=in.readByte();
  if (c == 0x70) {
    nodeId=null;
  }
 else   if (c == 11) {
    nodeId=new jetbrains.mps.smodel.SNodeId.Regular(in.readLong());
  }
 else {
    nodeId=jetbrains.mps.smodel.SNodeId.fromString(readString(in));
  }
  SConcept concept=MetaAdapterFactory.getConcept(SConceptId.deserialize(readString(in)),readString(in));
  return new SNodeDescriptor(readString(in),concept,new SNodePointer(modelReference,nodeId));
}
