{
  return new ModelAccessHelper(myRepoFiles.getRepository()).runReadAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      SModel model=myModelReference.resolve(myRepoFiles.getRepository());
      if (model == null) {
        return null;
      }
      DataSource ds=model.getSource();
      if (ds instanceof FileDataSource) {
        return VirtualFileUtils.getVirtualFile(((FileDataSource)ds).getFile());
      }
 else       if (ds instanceof FolderDataSource) {
        return VirtualFileUtils.getVirtualFile(((FolderDataSource)ds).getFolder());
      }
 else {
        return null;
      }
    }
  }
);
}
