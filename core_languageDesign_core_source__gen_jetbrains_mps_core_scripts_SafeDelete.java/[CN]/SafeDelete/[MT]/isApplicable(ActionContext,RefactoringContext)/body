{
{
    SNode node=actionContext.getNode();
    if (node == null) {
      return false;
    }
    SearchQuery searchQuery=new SearchQuery(new SNodePointer(node),actionContext.getScope());
    IDEProjectFrame projectFrame=(IDEProjectFrame)actionContext.get(IDEProjectFrame.class);
    IAdaptiveProgressMonitor monitor=projectFrame.createAdaptiveProgressMonitor();
    NodeUsages_Finder finder=new NodeUsages_Finder();
    refactoringContext.setParameter("searchResults",finder.find(searchQuery));
    List<SearchResult> aliveResults=((SearchResults)refactoringContext.getParameter("searchResults")).getAliveResults();
    if (!(aliveResults.isEmpty())) {
      int size=aliveResults.size();
      String message=size + " usages found. delete anyway?";
      JFrame component=projectFrame.getMainFrame();
      int option=JOptionPane.showConfirmDialog(component,message,"Safe Delete",JOptionPane.YES_NO_OPTION);
      if (option == JOptionPane.YES_OPTION) {
        refactoringContext.setParameter("showAffectedNodes",true);
        return true;
      }
      return false;
    }
    refactoringContext.setParameter("showAffectedNodes",false);
    return true;
  }
}
