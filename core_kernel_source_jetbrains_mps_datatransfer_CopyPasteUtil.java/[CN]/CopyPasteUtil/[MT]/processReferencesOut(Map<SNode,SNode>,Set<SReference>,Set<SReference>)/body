{
  for (  SReference sourceReference : allReferences) {
    SNode oldSourceNode=sourceReference.getSourceNode();
    SNode newSourceNode=sourceNodesToNewNodes.get(oldSourceNode);
    SNode oldTargetNode=sourceReference.getTargetNode();
    SNode newTargetNode=sourceNodesToNewNodes.get(oldTargetNode);
    SReference newReference;
    if (newTargetNode != null) {
      newReference=SReference.create(sourceReference.getRole(),newSourceNode,newTargetNode);
    }
 else {
      if (SNodeOperations.isInstanceOf(newSourceNode,IMethodCall.concept) && oldTargetNode != null) {
        newReference=SReference.create(sourceReference.getRole(),newSourceNode,oldTargetNode);
      }
 else {
        String resolveInfo=oldTargetNode == null ? sourceReference.getResolveInfo() : oldTargetNode.getName();
        if (resolveInfo != null) {
          newReference=new StaticReference(sourceReference.getRole(),newSourceNode,null,null,resolveInfo);
          referencesRequireResolve.add(newReference);
        }
 else         if (oldTargetNode != null) {
          newReference=SReference.create(sourceReference.getRole(),newSourceNode,oldTargetNode);
        }
 else {
          continue;
        }
      }
    }
    newSourceNode.addReference(newReference);
  }
}
