{
  List<SNode> result=ConceptEditorHelper.getAvailableConceptAspects(SNodeOperations.getModel(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.TemplateSwitch")),node);
  ListSequence.fromList(result).addElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence"));
  ListSequence.fromList(result).addElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.InlineTemplateWithContext_RuleConsequence"));
  boolean rootable=SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979ba0450L,"jetbrains.mps.lang.structure.structure.ConceptDeclaration")) && SPropertyOperations.getBoolean((SNodeOperations.cast(node,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979ba0450L,"jetbrains.mps.lang.structure.structure.ConceptDeclaration"))),MetaAdapterFactory.getProperty(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979ba0450L,0xff49c1d648L,"rootable"));
  boolean isInterface=SNodeOperations.isInstanceOf(node,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103556dcafL,"jetbrains.mps.lang.structure.structure.InterfaceConceptDeclaration"));
  if (rootable || isInterface) {
    boolean isNeedRootTemplate=true;
    for (    SNode genFragment : BehaviorReflection.invokeNonVirtual((Class<List<SNode>>)((Class)Object.class),node,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration","call_findGeneratorFragments_6409339300305625383",new Object[]{})) {
      if ((AttributeOperations.getAttribute(genFragment,new IAttributeDescriptor.NodeAttribute("jetbrains.mps.lang.generator.structure.RootTemplateAnnotation")) != null)) {
        isNeedRootTemplate=false;
        break;
      }
    }
    if (isNeedRootTemplate) {
      for (      SModuleReference moduleRef : ((SModelInternal)SNodeOperations.getModel(node)).importedLanguages()) {
        Language language=ModuleRepositoryFacade.getInstance().getModule(moduleRef,Language.class);
        if (language == null) {
          continue;
        }
        SModel structureModel=language.getStructureModelDescriptor();
        for (        SNode nodeToAdd : SModelOperations.roots(structureModel,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979ba0450L,"jetbrains.mps.lang.structure.structure.ConceptDeclaration"))) {
          SNode conceptToAdd=(SNode)nodeToAdd;
          if (SPropertyOperations.getBoolean(nodeToAdd,MetaAdapterFactory.getProperty(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0xf979ba0450L,0xff49c1d648L,"rootable"))) {
            ListSequence.fromList(result).addElement(conceptToAdd);
          }
        }
      }
    }
  }
  return result;
}
