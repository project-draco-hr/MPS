{
  if (binding instanceof ParameterizedMethodBinding) {
    binding=((ParameterizedMethodBinding)binding).original();
  }
  INodeAdapter adapter=myReferentsCreator.myBindingMap.get(binding);
  if (adapter != null) {
    return SReference.create(role,sourceNode,adapter.getNode());
  }
  if (binding.declaringClass instanceof BinaryTypeBinding) {
    BinaryTypeBinding binaryTypeBinding=(BinaryTypeBinding)binding.declaringClass;
    SNodeId nodeId=createMethodId(binding,binaryTypeBinding);
    SModelReference modelReference=modelReferenceFromBinaryClassBinding(binaryTypeBinding);
    SReference result=getRegularMPSNodeReferenceFromForeignId(sourceNode,role,modelReference,nodeId,TargetKind.METHOD);
    if ("~List.add(null):boolean".equals(nodeId.toString())) {
      nodeId=createMethodId(binding,binaryTypeBinding);
      modelReference=modelReferenceFromBinaryClassBinding(binaryTypeBinding);
      result=getRegularMPSNodeReferenceFromForeignId(sourceNode,role,modelReference,nodeId,TargetKind.METHOD);
    }
    return result;
  }
  if (binding.declaringClass instanceof ParameterizedTypeBinding) {
    ParameterizedTypeBinding parameterizedTypeBinding=(ParameterizedTypeBinding)binding.declaringClass;
    if (parameterizedTypeBinding.genericType() instanceof BinaryTypeBinding) {
      BinaryTypeBinding binaryTypeBinding=(BinaryTypeBinding)parameterizedTypeBinding.genericType();
      SNodeId nodeId=createMethodId(binding,binaryTypeBinding);
      SModelReference modelReference=modelReferenceFromBinaryClassBinding(binaryTypeBinding);
      return getRegularMPSNodeReferenceFromForeignId(sourceNode,role,modelReference,nodeId,TargetKind.METHOD);
    }
  }
  LOG.error("can't create a reference to a method in a class of type " + binding.declaringClass.getClass());
  return null;
}
