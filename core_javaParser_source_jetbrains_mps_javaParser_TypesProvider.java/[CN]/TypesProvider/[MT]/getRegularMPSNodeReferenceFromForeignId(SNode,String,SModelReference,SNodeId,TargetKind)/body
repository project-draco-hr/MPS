{
  SModelDescriptor regularModel=regularModelReferenceFromForeign(modelReference);
  if (regularModel == null) {
    return SReference.create(role,sourceNode,modelReference,nodeId);
  }
  SNode target;
  SModel model=regularModel.getSModel();
switch (targetKind) {
case CLASS:
{
      target=getMPSClassById(model,nodeId).getNode();
      break;
    }
case FIELD:
{
    target=getMPSFieldById(model,nodeId).getNode();
    break;
  }
case METHOD:
{
  target=getMPSMethodById(model,nodeId).getNode();
  break;
}
default :
{
target=null;
}
}
if (target == null) {
return SReference.create(role,sourceNode,modelReference,nodeId);
}
return SReference.create(role,sourceNode,target);
}
