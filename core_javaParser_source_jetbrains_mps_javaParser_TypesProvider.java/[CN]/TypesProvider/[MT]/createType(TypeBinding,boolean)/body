{
  SModel model=myReferentsCreator.myCurrentModel;
  if (binding instanceof BaseTypeBinding) {
    if (binding == TypeBinding.BOOLEAN) {
      return BooleanType.newInstance(model);
    }
    if (binding == TypeBinding.BYTE) {
      return ByteType.newInstance(model);
    }
    if (binding == TypeBinding.CHAR) {
      return CharType.newInstance(model);
    }
    if (binding == TypeBinding.DOUBLE) {
      return DoubleType.newInstance(model);
    }
    if (binding == TypeBinding.FLOAT) {
      return FloatType.newInstance(model);
    }
    if (binding == TypeBinding.INT) {
      return IntegerType.newInstance(model);
    }
    if (binding == TypeBinding.LONG) {
      return LongType.newInstance(model);
    }
    if (binding == TypeBinding.SHORT) {
      return ShortType.newInstance(model);
    }
    if (binding == TypeBinding.VOID) {
      return VoidType.newInstance(model);
    }
    throw new JavaConverterException("Unknown base type : " + binding);
  }
  if (binding instanceof ArrayBinding) {
    ArrayBinding arrayBinding=(ArrayBinding)binding;
    TypeBinding componentTypeBinding=arrayBinding.leafComponentType;
    int dimensions=arrayBinding.dimensions;
    Type outerType=varArg ? VariableArityType.newInstance(model) : ArrayType.newInstance(model);
    Type smallestVectorType=outerType;
    while (dimensions > 1) {
      ArrayType newArrayType=ArrayType.newInstance(model);
      setComponentType(smallestVectorType,newArrayType);
      smallestVectorType=newArrayType;
      dimensions--;
    }
    setComponentType(smallestVectorType,createType(componentTypeBinding));
    return outerType;
  }
  if (binding instanceof ReferenceBinding) {
    if (binding instanceof WildcardBinding) {
      WildcardBinding wildcardBinding=(WildcardBinding)binding;
      if (wildcardBinding.isUnboundWildcard()) {
        return WildCardType.newInstance(model);
      }
 else {
        if (wildcardBinding.boundKind == Wildcard.EXTENDS) {
          UpperBoundType upperBoundType=UpperBoundType.newInstance(model);
          upperBoundType.setBound(createType(wildcardBinding.bound));
          return upperBoundType;
        }
 else {
          LowerBoundType lowerBoundType=LowerBoundType.newInstance(model);
          lowerBoundType.setBound(createType(wildcardBinding.bound));
          return lowerBoundType;
        }
      }
    }
    if (binding instanceof ParameterizedTypeBinding) {
      ParameterizedTypeBinding parameterizedTypeBinding=(ParameterizedTypeBinding)binding;
      ReferenceBinding originalType=parameterizedTypeBinding.genericType();
      ClassifierType result=ClassifierType.newInstance(model);
      result.getNode().addReference(createClassifierReference(originalType,ClassifierType.CLASSIFIER,result.getNode()));
      if (!(parameterizedTypeBinding instanceof RawTypeBinding)) {
        TypeBinding[] typeBindings=parameterizedTypeBinding.arguments;
        if (typeBindings != null) {
          for (          TypeBinding typeBinding : typeBindings) {
            result.addParameter(createType(typeBinding));
          }
        }
      }
      return result;
    }
    if (binding instanceof SourceTypeBinding) {
      ClassifierType classifierType=ClassifierType.newInstance(model);
      classifierType.setClassifier((Classifier)myReferentsCreator.myBindingMap.get(binding));
      return classifierType;
    }
    if (binding instanceof BinaryTypeBinding) {
      ClassifierType classifierType=ClassifierType.newInstance(model);
      BinaryTypeBinding binaryTypeBinding=(BinaryTypeBinding)binding;
      SReference reference=createClassifierReference(binaryTypeBinding,ClassifierType.CLASSIFIER,classifierType.getNode());
      classifierType.getNode().addReference(reference);
      return classifierType;
    }
    if (binding instanceof TypeVariableBinding) {
      TypeVariableBinding typeVariableBinding=(TypeVariableBinding)binding;
      TypeVariableReference tvr=TypeVariableReference.newInstance(model);
      INodeAdapter declaringGeneric=myReferentsCreator.myBindingMap.get(typeVariableBinding.declaringElement);
      if (declaringGeneric instanceof GenericDeclaration) {
        tvr.setTypeVariableDeclaration(((GenericDeclaration)declaringGeneric).getTypeVariableDeclarations().get(typeVariableBinding.rank));
      }
 else {
        throw new JavaConverterException("Declaring element for a type var is not a GenericDeclaration");
      }
      return tvr;
    }
    if (binding instanceof ProblemReferenceBinding) {
      ClassifierType classifierType=ClassifierType.newInstance(model);
      ProblemReferenceBinding problemReferenceBinding=(ProblemReferenceBinding)binding;
      char[][] chars=problemReferenceBinding.compoundName;
      char[] name=chars[chars.length - 1];
      SReference reference=createErrorReference(ClassifierType.CLASSIFIER,new String(name),classifierType.getNode());
      classifierType.getNode().addReference(reference);
      return classifierType;
    }
  }
  return null;
}
