{
  if (type instanceof ParameterizedTypeBinding) {
    StringBuilder sb=new StringBuilder();
    sb.append(asString(((ParameterizedTypeBinding)type).genericType()));
    return sb.toString();
  }
  if (type instanceof BinaryTypeBinding) {
    return classFqNameFromCompoundName(((BinaryTypeBinding)type).compoundName);
  }
  if (type instanceof SourceTypeBinding) {
    return classFqNameFromCompoundName(((SourceTypeBinding)type).compoundName);
  }
  if (type instanceof ArrayBinding) {
    if (context != null && context.isVarargs() && context.parameters[context.parameters.length - 1] == type) {
      return asString(((ArrayBinding)type).elementsType()) + "...";
    }
 else {
      return asString(((ArrayBinding)type).elementsType()) + "[]";
    }
  }
  if (type instanceof BaseTypeBinding) {
    return new String(((BaseTypeBinding)type).simpleName);
  }
  if (type instanceof TypeVariableBinding) {
    TypeVariableBinding typeVariableBinding=(TypeVariableBinding)type;
    return asString(typeVariableBinding.superclass);
  }
  if (type instanceof WildcardBinding && ((WildcardBinding)type).boundKind == Wildcard.EXTENDS) {
    return asString(((WildcardBinding)type).bound);
  }
  if (type instanceof WildcardBinding && ((WildcardBinding)type).boundKind == Wildcard.SUPER) {
    return asString(((WildcardBinding)type).bound);
  }
  if (type.isUnboundWildcard()) {
    return "java.lang.Object";
  }
  throw new RuntimeException("unexpected type: " + type);
}
