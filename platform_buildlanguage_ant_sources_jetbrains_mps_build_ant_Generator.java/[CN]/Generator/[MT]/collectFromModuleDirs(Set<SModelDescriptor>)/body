{
  for (  final File f : myWhatToGenerate.getModuleDirectories()) {
    List<IModule> modules=ModelAccess.instance().runWriteAction(new Computable<List<IModule>>(){
      public List<IModule> compute(){
        return MPSModuleRepository.getInstance().readModuleDescriptors(FileSystem.getFile(f.getPath()),new MPSModuleOwner(){
        }
);
      }
    }
);
    for (    IModule module : modules) {
      info("Loaded module " + module);
      modelDescriptors.addAll(module.getOwnModelDescriptors());
      if (module instanceof Language) {
        Language language=(Language)module;
        for (        jetbrains.mps.smodel.Generator gen : language.getGenerators()) {
          modelDescriptors.addAll(gen.getOwnModelDescriptors());
        }
      }
    }
  }
}
