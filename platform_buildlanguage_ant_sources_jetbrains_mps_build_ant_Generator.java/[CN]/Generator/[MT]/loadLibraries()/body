{
  MyState state=LibraryManager.getInstance().getState();
  Map<String,Library> libraries=state.getLibraries();
  for (  String libName : myWhatToGenerate.getLibraries().keySet()) {
    Library library=new Library();
    library.setName(libName);
    library.setPath(myWhatToGenerate.getLibraries().get(libName).getAbsolutePath());
    libraries.put(libName,library);
  }
  LibraryManager.getInstance().loadState(state);
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      LibraryManager.getInstance().update();
    }
  }
);
}
