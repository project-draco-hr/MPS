{
  if (mySModel == null)   return;
  final SModel oldModel=mySModel;
  ((jetbrains.mps.smodel.SModelInternal)oldModel).setModelDescriptor(null);
  mySModel=null;
  if (ModelAccess.instance().canWrite()) {
    notifyModelReplaced(oldModel);
  }
 else {
    ModelAccess.instance().runWriteInEDT(new Runnable(){
      @Override public void run(){
        notifyModelReplaced(oldModel);
      }
    }
);
  }
}
