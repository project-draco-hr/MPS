{
  String projectPath=getProjectPath(testClass);
  MpsTestsSupport.initEnv(true);
  IdeMain.setTestMode(IdeMain.TestMode.CORE_TEST);
  initPathMacros();
  if (ourMPSProject != null) {
    throw new InitializationError("One MPS project was already openned in this java process: " + ourMPSProject.getName() + " (on trying to open: "+ projectPath+ ")");
  }
  ourMPSProject=TestMain.PROJECT_CONTAINER.getProject(projectPath);
  ModelAccess.instance().flushEventQueue();
}
