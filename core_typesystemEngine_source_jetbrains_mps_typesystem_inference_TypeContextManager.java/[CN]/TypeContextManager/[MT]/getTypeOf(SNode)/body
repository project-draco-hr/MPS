{
  if (node == null)   return null;
  if (myTypeChecker.isGenerationMode()) {
    TypeCheckingContext context=myTypeChecker.hasPerformanceTracer() ? new TargetTypecheckingContext_Tracer(node,myTypeChecker) : new TargetTypecheckingContext(node,myTypeChecker);
    try {
      return context.getTypeOf_generationMode(node);
    }
  finally {
      context.dispose();
    }
  }
  final ITypeContextOwner contextOwner=myTypecheckingContextOwner.get();
  return new Executor<SNode>(contextOwner,node,new Computation<SNode>(){
    @Override public SNode compute(    TypeCheckingContext context){
      return context != null ? context.getTypeOf(node,myTypeChecker) : null;
    }
  }
).execute();
}
