{
  ModelAccess.assertLegalRead();
  if (node == null)   return null;
  if (myTypeChecker.isGenerationMode()) {
    TypeCheckingContext context=myTypeChecker.hasPerformanceTracer() ? new TargetTypecheckingContext_Tracer(node,myTypeChecker) : new TargetTypecheckingContext(node,myTypeChecker);
    try {
      return context.getTypeOf_generationMode(node);
    }
  finally {
      context.dispose();
    }
  }
  final ITypeContextOwner contextOwner=myTypecheckingContextOwner.get();
  TypeCheckingContext context=acquireTypecheckingContext(node,contextOwner);
  if (context == null) {
    return TypesUtil.createRuntimeErrorType();
  }
  try {
    return context.getTypeOf(node,myTypeChecker);
  }
  finally {
    releaseTypecheckingContext(node,contextOwner);
  }
}
