{
  final ITypeContextOwner savedOwner=myTypecheckingContextOwner.get();
  myTypecheckingContextOwner.set(contextOwner);
  final SubtypingCache savedSubtypingCache=mySubtypingCache.get();
  mySubtypingCache.set(null);
  TypeCheckingContext context=acquireTypecheckingContext(node,contextOwner);
  try {
    return r.compute(context);
  }
  finally {
    releaseTypecheckingContext(node,contextOwner);
    myTypecheckingContextOwner.set(savedOwner);
    mySubtypingCache.set(savedSubtypingCache);
  }
}
