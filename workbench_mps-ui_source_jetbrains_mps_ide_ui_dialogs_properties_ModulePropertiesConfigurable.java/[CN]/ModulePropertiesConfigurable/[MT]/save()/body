{
  for (  SModuleFacet moduleFacet : myModule.getFacets()) {
    if (!(moduleFacet instanceof ModuleFacetBase)) {
      continue;
    }
    final String facetType=((ModuleFacetBase)moduleFacet).getFacetType();
    for (    ModuleFacetDescriptor facetDescriptor : myModuleDescriptor.getModuleFacetDescriptors()) {
      if (!facetType.equals(facetDescriptor.getType())) {
        continue;
      }
      moduleFacet.save(facetDescriptor.getMemento());
    }
  }
  myModule.setModuleDescriptor(myModuleDescriptor);
  if (myModule instanceof Generator) {
    myModule=(AbstractModule)MPSModuleRepository.getInstance().getModule(myModule.getModuleId());
  }
  myModule.save();
}
