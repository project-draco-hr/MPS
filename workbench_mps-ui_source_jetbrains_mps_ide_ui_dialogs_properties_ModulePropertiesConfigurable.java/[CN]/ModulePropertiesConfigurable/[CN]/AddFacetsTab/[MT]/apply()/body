{
  for (  FacetCheckBox checkBox : myCheckBoxes) {
    Collection<ModuleFacetDescriptor> moduleFacetDescriptors=myModuleDescriptor.getModuleFacetDescriptors();
    ModuleFacetBase facet=checkBox.getFacet();
    if (checkBox.isNewlyCreated()) {
      Tab tab=checkBox.getTab();
      if (tab != null) {
        tab.apply();
      }
      Memento memento=new MementoImpl();
      facet.save(memento);
      boolean alreadyThere=false;
      for (      ModuleFacetDescriptor d : moduleFacetDescriptors) {
        if (facet.getFacetType().equals(d.getType())) {
          alreadyThere=true;
          break;
        }
      }
      if (!alreadyThere) {
        moduleFacetDescriptors.add(new ModuleFacetDescriptor(facet.getFacetType(),memento));
      }
    }
 else     if (checkBox.isExistingToRemove()) {
      for (Iterator<ModuleFacetDescriptor> it=moduleFacetDescriptors.iterator(); it.hasNext(); ) {
        ModuleFacetDescriptor facetDescriptor=it.next();
        if (facetDescriptor.getType().equals(facet.getFacetType())) {
          moduleFacetDescriptors.remove(facetDescriptor);
          break;
        }
      }
    }
  }
}
