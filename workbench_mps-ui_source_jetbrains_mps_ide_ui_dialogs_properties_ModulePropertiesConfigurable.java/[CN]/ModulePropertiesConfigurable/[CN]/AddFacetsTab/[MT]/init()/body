{
  final HashMap<String,ModuleFacetBase> facetsTypes=new HashMap<String,ModuleFacetBase>();
  for (  final SModuleFacet moduleFacet : myModule.getFacets()) {
    if (!(moduleFacet instanceof ModuleFacetBase))     continue;
    facetsTypes.put(((ModuleFacetBase)moduleFacet).getFacetType(),(ModuleFacetBase)moduleFacet);
  }
  Set<String> usedLangs=new HashSet<String>();
  for (  SModuleReference reference : myModuleDescriptor.getUsedLanguages()) {
    usedLangs.add(reference.getModuleName());
  }
  Set<String> applicableFacetTypes=FacetsFacade.getInstance().getApplicableFacetTypes(usedLangs);
  for (  String facet : FacetsFacade.getInstance().getFacetTypes()) {
    ModuleFacetBase sModuleFacet=facetsTypes.get(facet);
    if (sModuleFacet == null) {
      SModuleFacet newInstance=FacetsFacade.getInstance().getFacetFactory(facet).create();
      if (newInstance instanceof ModuleFacetBase) {
        sModuleFacet=(ModuleFacetBase)newInstance;
        sModuleFacet.setModule(myModule);
      }
    }
    final String facetPresentation=applicableFacetTypes.contains(facet) ? sModuleFacet.getFacetPresentation() + " (recommended)" : sModuleFacet.getFacetPresentation();
    final JBCheckBox checkBox=new JBCheckBox(facetPresentation,facetsTypes.keySet().contains(facet));
    checkBox.putClientProperty(CHECKBOX_PROPERTY_KEY,sModuleFacet);
    myCheckBoxes.add(checkBox);
    checkBox.addItemListener(new FacetCheckBoxItemListener(checkBox));
  }
  final JPanel panel=new JPanel();
  panel.setLayout(new BoxLayout(panel,BoxLayout.Y_AXIS));
  final int i=5;
  panel.setBorder(BorderFactory.createEmptyBorder(i,i,i,i));
  for (  JCheckBox checkBox : myCheckBoxes) {
    panel.add(checkBox);
  }
  setTabComponent(panel);
}
