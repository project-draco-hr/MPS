{
  final SearchQuery query;
  final IResultProvider provider;
  if (value instanceof SModelReference) {
    query=new SearchQuery((SModelReference)value,new ModulesScope(Arrays.asList(myModule)));
    provider=FindUtils.makeProvider(new ModelUsagesFinder());
  }
 else   if (value instanceof SModuleReference) {
    final SModuleReference moduleReference=(SModuleReference)value;
    query=new SearchQuery(new GenericHolder(moduleReference,moduleReference.getModuleName()),GlobalScope.getInstance());
    provider=FindUtils.makeProvider(new ModuleUsagesFinder());
  }
 else {
    return;
  }
  final UsageToolOptions uvOpt=new UsageToolOptions().allowRunAgain(true).forceNewTab(true).navigateIfSingle(false);
  UsagesViewTool.showUsages(ProjectHelper.toIdeaProject(myProject),provider,query,uvOpt);
  forceCancelCloseDialog();
}
