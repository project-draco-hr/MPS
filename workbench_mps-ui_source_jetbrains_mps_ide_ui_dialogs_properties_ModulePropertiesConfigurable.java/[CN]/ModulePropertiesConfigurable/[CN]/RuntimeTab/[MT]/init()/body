{
  JPanel usedLangsTab=new JPanel();
  usedLangsTab.setLayout(new GridLayoutManager(2,1,INSETS,-1,-1));
  final JBTable runtimeTable=new JBTable();
  runtimeTable.setShowHorizontalLines(false);
  runtimeTable.setShowVerticalLines(false);
  runtimeTable.setAutoCreateRowSorter(false);
  runtimeTable.setAutoscrolls(true);
  runtimeTable.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
  myRuntimeTableModel=new RuntimeTableModel();
  runtimeTable.setModel(myRuntimeTableModel);
  final SRepository contextRepo=new ModelComputeRunnable<SRepository>(new GetModuleRepo(myModule)).runRead(myProject.getModelAccess());
  runtimeTable.setDefaultRenderer(SModuleReference.class,new ModuleTableCellRender(contextRepo));
  ToolbarDecorator decorator=ToolbarDecorator.createDecorator(runtimeTable);
  decorator.setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
      Iterable<SModule> modules=new ConditionalIterable<SModule>(getProjectModules(),new ModuleInstanceCondition(Solution.class));
      modules=new ConditionalIterable<SModule>(modules,new VisibleModuleCondition());
      ComputeRunnable<List<SModuleReference>> c=new ComputeRunnable<List<SModuleReference>>(new ModuleCollector(modules));
      myProject.getModelAccess().runReadAction(c);
      List<SModuleReference> list=CommonChoosers.showModuleSetChooser(myProject,"Choose solutions",c.getResult());
      for (      SModuleReference reference : list) {
        myRuntimeTableModel.addItem(reference);
      }
    }
  }
).setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
      int first=runtimeTable.getSelectionModel().getMinSelectionIndex();
      int last=runtimeTable.getSelectionModel().getMaxSelectionIndex();
      TableUtil.removeSelectedItems(runtimeTable);
      myRuntimeTableModel.fireTableRowsDeleted(first,last);
      first=Math.max(0,first - 1);
      runtimeTable.getSelectionModel().setSelectionInterval(first,first);
    }
  }
);
  decorator.setPreferredSize(new Dimension(500,150));
  JPanel table=decorator.createPanel();
  table.setBorder(IdeBorderFactory.createBorder());
  usedLangsTab.add(table,new GridConstraints(0,0,1,1,GridConstraints.ANCHOR_CENTER,GridConstraints.FILL_BOTH,GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,null,null,null,0,false));
  new SpeedSearchBase<JBTable>(runtimeTable){
    @Override public int getSelectedIndex(){
      return runtimeTable.getSelectedRow();
    }
    @Override protected int convertIndexToModel(    int viewIndex){
      return runtimeTable.convertRowIndexToModel(viewIndex);
    }
    @Override public Object[] getAllElements(){
      final int count=myRuntimeTableModel.getRowCount();
      Object[] elements=new Object[count];
      for (int idx=0; idx < count; idx++) {
        elements[idx]=myRuntimeTableModel.getValueAt(idx);
      }
      return elements;
    }
    @Override public String getElementText(    Object element){
      if (!(element instanceof SModuleReference))       return "";
      return ((SModuleReference)element).getModuleName();
    }
    @Override public void selectElement(    Object element,    String selectedText){
      final int count=myRuntimeTableModel.getRowCount();
      for (int row=0; row < count; row++) {
        if (element.equals(myRuntimeTableModel.getValueAt(row))) {
          final int viewRow=runtimeTable.convertRowIndexToView(row);
          runtimeTable.getSelectionModel().setSelectionInterval(viewRow,viewRow);
          TableUtil.scrollSelectionToVisible(runtimeTable);
          break;
        }
      }
    }
  }
.setComparator(new SpeedSearchComparator(false,true));
  final JBTable accessoriesTable=new JBTable();
  accessoriesTable.setShowHorizontalLines(false);
  accessoriesTable.setShowVerticalLines(false);
  accessoriesTable.setAutoCreateRowSorter(false);
  accessoriesTable.setAutoscrolls(true);
  accessoriesTable.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
  myAccessoriesModelsTableModel=new AccessoriesModelsTableModel();
  accessoriesTable.setModel(myAccessoriesModelsTableModel);
  accessoriesTable.setDefaultRenderer(SModelReference.class,new ModelTableCellRender());
  ToolbarDecorator decoratorForAccessories=ToolbarDecorator.createDecorator(accessoriesTable);
  decoratorForAccessories.setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
      List<SModelReference> list=(new ModelChooser()).compute();
      for (      SModelReference reference : list)       myAccessoriesModelsTableModel.addItem(reference);
    }
  }
).setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
      int first=accessoriesTable.getSelectionModel().getMinSelectionIndex();
      int last=accessoriesTable.getSelectionModel().getMaxSelectionIndex();
      TableUtil.removeSelectedItems(accessoriesTable);
      myAccessoriesModelsTableModel.fireTableRowsDeleted(first,last);
      first=Math.max(0,first - 1);
      accessoriesTable.getSelectionModel().setSelectionInterval(first,first);
    }
  }
);
  decoratorForAccessories.setPreferredSize(new Dimension(500,150));
  table=decoratorForAccessories.createPanel();
  table.setBorder(IdeBorderFactory.createBorder());
  usedLangsTab.add(table,new GridConstraints(1,0,1,1,GridConstraints.ANCHOR_CENTER,GridConstraints.FILL_BOTH,GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,null,null,null,0,false));
  new SpeedSearchBase<JBTable>(accessoriesTable){
    @Override public int getSelectedIndex(){
      return accessoriesTable.getSelectedRow();
    }
    @Override protected int convertIndexToModel(    int viewIndex){
      return accessoriesTable.convertRowIndexToModel(viewIndex);
    }
    @Override public Object[] getAllElements(){
      final int count=myAccessoriesModelsTableModel.getRowCount();
      Object[] elements=new Object[count];
      for (int idx=0; idx < count; idx++) {
        elements[idx]=myAccessoriesModelsTableModel.getValueAt(idx);
      }
      return elements;
    }
    @Override public String getElementText(    Object element){
      if (!(element instanceof SModelReference))       return "";
      return element.toString();
    }
    @Override public void selectElement(    Object element,    String selectedText){
      final int count=myAccessoriesModelsTableModel.getRowCount();
      for (int row=0; row < count; row++) {
        if (element.equals(myAccessoriesModelsTableModel.getValueAt(row))) {
          final int viewRow=accessoriesTable.convertRowIndexToView(row);
          accessoriesTable.getSelectionModel().setSelectionInterval(viewRow,viewRow);
          TableUtil.scrollSelectionToVisible(accessoriesTable);
          break;
        }
      }
    }
  }
.setComparator(new SpeedSearchComparator(false,true));
  setTabComponent(usedLangsTab);
}
