{
  if (myModule instanceof Language || myModule instanceof Solution || myModule instanceof Generator) {
    return new AnActionButtonRunnable(){
      @Override public void run(      AnActionButton anActionButton){
        final List<Dependency> list=(new DependencyChooser()).compute();
        ModelAccess.instance().runReadAction(new Runnable(){
          @Override public void run(){
            for (            Dependency dependency : list) {
              ModuleReference moduleReference=dependency.getModuleRef();
              if (MPSModuleRepository.getInstance().getModuleByFqName(moduleReference.getModuleName()) instanceof Language)               myDependTableModel.addItem(new DependenciesTableItem<ModuleReference>(dependency.getModuleRef(),SDependencyScope.DEFAULT,dependency.isReexport()).setModuleType(ModuleType.LANGUAGE));
 else               if (MPSModuleRepository.getInstance().getModuleByFqName(moduleReference.getModuleName()) instanceof Generator)               myDependTableModel.addItem(new DependenciesTableItem<ModuleReference>(dependency.getModuleRef(),SDependencyScope.DEFAULT,dependency.isReexport()).setModuleType(ModuleType.GENERATOR));
 else               myDependTableModel.addItem(new DependenciesTableItem<ModuleReference>(dependency.getModuleRef(),SDependencyScope.DEFAULT,dependency.isReexport()));
            }
          }
        }
);
      }
    }
;
  }
 else   if (myModule instanceof DevKit) {
    return new AnActionButtonRunnable(){
      @Override public void run(      AnActionButton anActionButton){
        final List<ModuleReference> list=(new LDSChooser()).compute();
        ModelAccess.instance().runReadAction(new Runnable(){
          @Override public void run(){
            for (            ModuleReference moduleReference : list) {
              if (MPSModuleRepository.getInstance().getModuleByFqName(moduleReference.getModuleName()) instanceof Language)               myDependTableModel.addItem(new DependenciesTableItem<ModuleReference>(moduleReference,SDependencyScope.EXTENDS).setModuleType(ModuleType.LANGUAGE));
 else               if (MPSModuleRepository.getInstance().getModuleByFqName(moduleReference.getModuleName()) instanceof DevKit)               myDependTableModel.addItem(new DependenciesTableItem<ModuleReference>(moduleReference,SDependencyScope.EXTENDS).setModuleType(ModuleType.DEVKIT));
 else               if (MPSModuleRepository.getInstance().getModuleByFqName(moduleReference.getModuleName()) instanceof Solution)               myDependTableModel.addItem(new DependenciesTableItem<ModuleReference>(moduleReference,SDependencyScope.EXTENDS).setModuleType(ModuleType.SOLUTION));
            }
          }
        }
);
      }
    }
;
  }
  return new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
    }
  }
;
}
