{
  final com.intellij.openapi.project.Project ideaProject=ProjectHelper.toIdeaProject(myMpsProject);
  StartupManager.getInstance(ideaProject).runWhenProjectIsInitialized(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          int result=Messages.showYesNoDialog(myProject,DIALOG_TEXT,"Migration required","Migrate","Postpone",null);
          if (result == Messages.NO) {
            return;
          }
          myState.migrationRequired=true;
          ProjectManagerEx.getInstance().reloadProject(ideaProject);
        }
      }
);
    }
  }
);
  myMigrationQueued=true;
}
