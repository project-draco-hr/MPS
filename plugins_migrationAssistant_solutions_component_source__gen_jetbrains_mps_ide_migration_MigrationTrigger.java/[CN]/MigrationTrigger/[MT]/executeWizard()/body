{
  final MigrationAssistantWizard wizard=new MigrationAssistantWizard(myProject,myMigrationManager);
  wizard.showAndGetOk().doWhenDone(new Consumer<Boolean>(){
    @Override public void consume(    Boolean finished){
      if (!(finished)) {
        return;
      }
      if (!(wizard.isFinishSuccessfull())) {
        return;
      }
      myState.migrationRequired=false;
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          ProjectManagerEx.getInstance().reloadProject(myProject);
        }
      }
);
    }
  }
);
}
