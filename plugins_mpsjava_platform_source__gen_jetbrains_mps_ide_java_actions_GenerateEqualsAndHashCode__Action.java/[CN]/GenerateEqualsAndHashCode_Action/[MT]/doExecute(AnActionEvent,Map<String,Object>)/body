{
  try {
    SNode classConcept=GenerateEqualsAndHashCode_Action.this.getClassConcept(_params);
    SNodeReference[] fields;
    fields=Sequence.fromIterable(BehaviorReflection.invokeNonVirtual((Class<Iterable<SNode>>)((Class)Object.class),classConcept,"jetbrains.mps.baseLanguage.structure.ClassConcept","call_fields_5292274854859383272",new Object[]{})).select(new ISelector<SNode,SNodePointer>(){
      public SNodePointer select(      SNode it){
        return new SNodePointer(it);
      }
    }
).toGenericArray(SNodePointer.class);
    SelectFieldsDialog selectFieldsDialog=new SelectFieldsDialog(fields,true,((EditorContext)MapSequence.fromMap(_params).get("editorContext")).getOperationContext().getProject());
    selectFieldsDialog.setTitle("Choose fields to be included in equals() and hashCode()");
    selectFieldsDialog.show();
    if (!(selectFieldsDialog.isOK())) {
      return;
    }
    SNodeReference[] selectedFields=Sequence.fromIterable(((Iterable<SNodeReference>)selectFieldsDialog.getSelectedElements())).toGenericArray(SNodeReference.class);
    final SNode thisExp=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.ThisExpression",null);
    final SNode equalsDeclaration=_quotation_createNode_x9xljz_a0m0a(thisExp,thisExp,classConcept,classConcept);
    SNode thatDeclaration=SLinkOperations.getTarget(SNodeOperations.cast(ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(equalsDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).last(),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068581242864l,"jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068581242864l,1068581242865l,"localVariableDeclaration"));
    SNode thatRef=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null);
    SLinkOperations.setTarget(thatRef,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,1068581517664l,"variableDeclaration"),thatDeclaration);
    SNode fieldRefLocal=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null);
    SNode fieldRefOperation=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.FieldReferenceOperation",null);
    for (    SNodeReference fieldPtr : selectedFields) {
      SNode field=SNodeOperations.cast(((SNodePointer)fieldPtr).resolve(MPSModuleRepository.getInstance()),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068390468200l,"jetbrains.mps.baseLanguage.structure.FieldDeclaration"));
      SLinkOperations.setTarget(fieldRefLocal,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,1068581517664l,"variableDeclaration"),field);
      SLinkOperations.setTarget(fieldRefOperation,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1197029447546l,1197029500499l,"fieldDeclaration"),field);
      SNode checkStmt;
      if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1164118113764l,"jetbrains.mps.baseLanguage.structure.PrimitiveType"))) {
        if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534436861l,"jetbrains.mps.baseLanguage.structure.FloatType"))) {
          checkStmt=_quotation_createNode_x9xljz_a0a0a0f0u0a(thatRef,SNodeOperations.copyNode(fieldRefOperation),SNodeOperations.copyNode(fieldRefLocal));
        }
 else         if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534513062l,"jetbrains.mps.baseLanguage.structure.DoubleType"))) {
          checkStmt=_quotation_createNode_x9xljz_a0a0a0a5a02a0(thatRef,SNodeOperations.copyNode(fieldRefOperation),SNodeOperations.copyNode(fieldRefLocal));
        }
 else {
          checkStmt=_quotation_createNode_x9xljz_a0a0a0a5a02a0_0(thatRef,SNodeOperations.copyNode(fieldRefOperation),SNodeOperations.copyNode(fieldRefLocal));
        }
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534760951l,"jetbrains.mps.baseLanguage.structure.ArrayType"))) {
        checkStmt=_quotation_createNode_x9xljz_a0a0a5a02a0(SNodeOperations.copyNode(fieldRefLocal),thatRef,SNodeOperations.copyNode(fieldRefOperation));
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107535904670l,"jetbrains.mps.baseLanguage.structure.ClassifierType"))) {
        checkStmt=_quotation_createNode_x9xljz_a0a0b5a02a0(thatRef,SNodeOperations.copyNode(fieldRefOperation),SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal),thatRef,SNodeOperations.copyNode(fieldRefOperation));
      }
 else {
        checkStmt=_quotation_createNode_x9xljz_a0a0a5a02a0_0(thatRef,SNodeOperations.copyNode(fieldRefOperation),SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal),thatRef,SNodeOperations.copyNode(fieldRefOperation));
      }
      ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(equalsDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).addElement(checkStmt);
    }
    SNodeFactoryOperations.addNewChild(SLinkOperations.getTarget(equalsDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"),"jetbrains.mps.baseLanguage.structure.Statement");
    ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(equalsDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).addElement(_quotation_createNode_x9xljz_a0a22a0());
    ListSequence.fromList(SLinkOperations.getChildren(classConcept,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,5375687026011219971l,"member"))).addElement(equalsDeclaration);
    SNode hashCodeDeclaration=ListSequence.fromList(SLinkOperations.getChildren(classConcept,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,5375687026011219971l,"member"))).addElement(_quotation_createNode_x9xljz_a0a0z0a());
    SNode resultDeclaration=_quotation_createNode_x9xljz_a0ab0a();
    SNode resultReference=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null);
    SLinkOperations.setTarget(resultReference,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,1068581517664l,"variableDeclaration"),SLinkOperations.getTarget(resultDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068581242864l,1068581242865l,"localVariableDeclaration")));
    SNode tempDeclaration=_quotation_createNode_x9xljz_a0db0a();
    SNode tempReference=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null);
    SLinkOperations.setTarget(tempReference,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,1068581517664l,"variableDeclaration"),SLinkOperations.getTarget(tempDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068581242864l,1068581242865l,"localVariableDeclaration")));
    if (Sequence.fromIterable(BehaviorReflection.invokeNonVirtual((Class<Iterable<SNode>>)((Class)Object.class),classConcept,"jetbrains.mps.baseLanguage.structure.ClassConcept","call_fields_5292274854859383272",new Object[]{})).any(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534513062l,"jetbrains.mps.baseLanguage.structure.DoubleType"));
      }
    }
)) {
      ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(hashCodeDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).addElement(tempDeclaration);
    }
    ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(hashCodeDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).addElement(resultDeclaration);
    for (    SNodeReference fieldPtr : selectedFields) {
      final SNode field=SNodeOperations.cast(((SNodePointer)fieldPtr).resolve(MPSModuleRepository.getInstance()),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068390468200l,"jetbrains.mps.baseLanguage.structure.FieldDeclaration"));
      SLinkOperations.setTarget(fieldRefLocal,MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1068498886296l,1068581517664l,"variableDeclaration"),field);
      SNode calcStatement;
      SNode mulExpression=_quotation_createNode_x9xljz_a0d0ib0a(resultReference);
      if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534370425l,"jetbrains.mps.baseLanguage.structure.IntegerType"))) {
        calcStatement=_quotation_createNode_x9xljz_a0a0e0ib0a(resultReference,SNodeOperations.copyNode(fieldRefLocal),mulExpression);
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068581242867l,"jetbrains.mps.baseLanguage.structure.LongType"))) {
        calcStatement=_quotation_createNode_x9xljz_a0a0a4a43a0(mulExpression,SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal),resultReference);
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534604311l,"jetbrains.mps.baseLanguage.structure.ByteType")) || SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534555686l,"jetbrains.mps.baseLanguage.structure.CharType")) || SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070533982221l,"jetbrains.mps.baseLanguage.structure.ShortType"))) {
        calcStatement=_quotation_createNode_x9xljz_a0a0b4a43a0(SNodeOperations.copyNode(fieldRefLocal),mulExpression,resultReference);
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534513062l,"jetbrains.mps.baseLanguage.structure.DoubleType"))) {
        ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(hashCodeDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).addElement(_quotation_createNode_x9xljz_a0a0a2e0ib0a(tempReference,SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal)));
        calcStatement=_quotation_createNode_x9xljz_a0b0c4a43a0(resultReference,mulExpression,tempReference,tempReference);
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534436861l,"jetbrains.mps.baseLanguage.structure.FloatType"))) {
        calcStatement=_quotation_createNode_x9xljz_a0a0d4a43a0(resultReference,mulExpression,SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal));
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1225271177708l,"jetbrains.mps.baseLanguage.structure.StringType"))) {
        calcStatement=_quotation_createNode_x9xljz_a0a0e4a43a0(resultReference,mulExpression,SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal));
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534760951l,"jetbrains.mps.baseLanguage.structure.ArrayType"))) {
        calcStatement=_quotation_createNode_x9xljz_a0a0f4a43a0(mulExpression,SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal),resultReference);
      }
 else       if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(field,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107535904670l,"jetbrains.mps.baseLanguage.structure.ClassifierType"))) {
        calcStatement=_quotation_createNode_x9xljz_a0a0g4a43a0(SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal),mulExpression,resultReference);
      }
 else {
        calcStatement=_quotation_createNode_x9xljz_a0a0a4a43a0_0(SNodeOperations.copyNode(fieldRefLocal),SNodeOperations.copyNode(fieldRefLocal),mulExpression,resultReference);
      }
      ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(hashCodeDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).addElement(calcStatement);
    }
    ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(hashCodeDeclaration,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123132l,1068580123135l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1068580123136l,1068581517665l,"statement"))).addElement(_quotation_createNode_x9xljz_a0a53a0(resultReference));
    ((EditorContext)MapSequence.fromMap(_params).get("editorContext")).select(equalsDeclaration);
  }
 catch (  Throwable t) {
    if (LOG.isEnabledFor(Level.ERROR)) {
      LOG.error("User's action execute method failed. Action:" + "GenerateEqualsAndHashCode",t);
    }
  }
}
