{
  final NodeEditorComponent nec=(NodeEditorComponent)nodeEditor.getCurrentEditorComponent();
  final InspectorTool inspectorTool=nec.getInspectorTool();
  if (inspectorTool == null)   return;
  if (nec.getLastInspectedNode() == null)   return;
  FileEditor fileEditor=(FileEditor)DataManager.getInstance().getDataContext(nodeEditor.getComponent()).getData(MPSDataKeys.FILE_EDITOR.getName());
  final EditorComponent inspector=inspectorTool.getInspector();
  inspectorTool.inspect(nec.getLastInspectedNode(),context,fileEditor,new Runnable(){
    public void run(){
      SNode currentTargetNode=node;
      while (currentTargetNode != null) {
        EditorCell cellInInspector=inspector.findNodeCell(currentTargetNode);
        if (cellInInspector != null) {
          boolean hasInspector=!(inspector.getRootCell() instanceof DefaultInspectorCell);
          if (hasInspector) {
            nec.getInspectorTool().openTool(focus);
          }
          inspector.selectNode(node);
          doFocus(focus,nodeEditor,hasInspector);
          return;
        }
        currentTargetNode=currentTargetNode.getParent();
      }
    }
  }
);
}
