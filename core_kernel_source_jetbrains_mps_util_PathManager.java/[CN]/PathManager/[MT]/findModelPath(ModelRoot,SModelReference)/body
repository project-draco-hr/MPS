{
  String modelFQName=modelReference.getLongName();
  String name=modelFQName;
  String packagePrefix=modelRoot.getPrefix();
  if (packagePrefix != null && packagePrefix.length() > 0) {
    if (modelFQName.startsWith(packagePrefix + '.')) {
      name=modelFQName.substring(packagePrefix.length());
    }
 else {
      return null;
    }
  }
  String path=name.replace('.',File.separatorChar);
  if (!path.startsWith(File.separator)) {
    path=File.separator + path;
  }
  if (!modelReference.getStereotype().equals("")) {
    String littleName=path.substring(path.lastIndexOf(File.separator) + 1);
    String rawPath=path.substring(0,path.lastIndexOf(File.separator) + 1);
    System.err.println("littleName = " + littleName + ", rawPath = "+ rawPath);
    path=rawPath + modelReference.getStereotype() + "@"+ littleName;
  }
  path=modelRoot.getPath() + path + MPSExtentions.DOT_MODEL;
  if (!(new File(path)).exists()) {
    return null;
  }
  return path;
}
