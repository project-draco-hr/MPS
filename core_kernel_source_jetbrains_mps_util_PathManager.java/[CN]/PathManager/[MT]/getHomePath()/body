{
  if (ourHomePath != null) {
    return ourHomePath;
  }
  if (System.getProperty(PROPERTY_HOME_PATH) != null) {
    ourHomePath=getAbsolutePath(System.getProperty(PROPERTY_HOME_PATH));
    return ourHomePath;
  }
  final Class aClass=PathManager.class;
  String rootPath=getContainingJar(aClass);
  if (rootPath == null)   return new File(".").getAbsolutePath();
  File root=new File(rootPath);
  root=root.getAbsoluteFile();
  while ((!isMpsDir(root)) && (root.getParentFile() != null)) {
    root=root.getParentFile();
  }
  ourHomePath=root.getAbsolutePath();
  if (ourHomePath.equals("/")) {
    throw new IllegalStateException("cannot detect MPS location");
  }
  return ourHomePath;
}
