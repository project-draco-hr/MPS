{
  final IFile ifile=FileSystem.getInstance().getFileByPath(f.getAbsolutePath());
  SModel model=SModelFileTracker.getInstance().findModel(ifile);
  if (model != null) {
    models.add(model);
    info("Found model " + model);
    return;
  }
  try {
    SModelHeader dr=ModelPersistence.loadDescriptor(new FileDataSource(ifile));
    SModelReference modelReference;
    if (dr.getUID() != null) {
      modelReference=PersistenceFacade.getInstance().createModelReference(dr.getUID());
    }
 else {
      String modelName=FileUtil.getNameWithoutExtension(ifile.getName());
      modelReference=PersistenceFacade.getInstance().createModelReference(modelName);
    }
    info("Read model " + modelReference);
    SModelHeader d=ModelPersistence.loadDescriptor(new FileDataSource(ifile));
    SModel existingDescr=SModelRepository.getInstance().getModelDescriptor(d.getModelReference());
    if (existingDescr == null) {
      error("Module for " + ifile.getPath() + " was not found. Use \"library\" tag to load required modules.");
    }
 else {
      models.add(existingDescr);
    }
  }
 catch (  ModelReadException e) {
    log(e);
  }
}
