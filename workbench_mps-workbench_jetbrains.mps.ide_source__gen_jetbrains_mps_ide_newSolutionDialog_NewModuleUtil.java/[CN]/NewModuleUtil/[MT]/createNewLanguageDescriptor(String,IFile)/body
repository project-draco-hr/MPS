{
  LanguageDescriptor languageDescriptor=new LanguageDescriptor();
  languageDescriptor.setNamespace(languageNamespace);
  languageDescriptor.setId(ModuleId.regular());
  IFile languageModels=descriptorFile.getParent().getDescendant(Language.LANGUAGE_MODELS);
  if (languageModels.exists()) {
    throw new IllegalStateException("Trying to create a language in an existing language's directory");
  }
  DefaultModelRoot modelRoot=new DefaultModelRoot(new IdeaFileSystem());
  modelRoot.setContentRoot(languageModels.getParent().getPath());
  modelRoot.addFile(DefaultModelRoot.SOURCE_ROOTS,languageModels.getPath());
  languageDescriptor.getModelRootDescriptors().add(modelRoot.toDescriptor());
  return languageDescriptor;
}
