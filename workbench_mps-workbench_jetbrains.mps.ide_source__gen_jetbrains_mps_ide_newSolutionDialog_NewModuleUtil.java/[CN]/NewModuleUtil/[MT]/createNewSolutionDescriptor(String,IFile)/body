{
  SolutionDescriptor descriptor=new SolutionDescriptor();
  descriptor.setNamespace(namespace);
  descriptor.setId(ModuleId.regular());
  final IFile modelsDir=descriptorFile.getParent().getDescendant(Solution.SOLUTION_MODELS);
  if (modelsDir.exists() && modelsDir.getChildren().size() != 0) {
    throw new IllegalStateException("Trying to create a solution in an existing solution's directory: " + descriptorFile.getParent());
  }
 else {
    modelsDir.mkdirs();
  }
  DefaultModelRoot modelRoot=new DefaultModelRoot(descriptorFile.getFileSystem());
  modelRoot.setContentRoot(modelsDir.getParent().getPath());
  modelRoot.addFile(DefaultModelRoot.SOURCE_ROOTS,modelsDir.getPath());
  descriptor.getModelRootDescriptors().add(modelRoot.toDescriptor());
  return descriptor;
}
