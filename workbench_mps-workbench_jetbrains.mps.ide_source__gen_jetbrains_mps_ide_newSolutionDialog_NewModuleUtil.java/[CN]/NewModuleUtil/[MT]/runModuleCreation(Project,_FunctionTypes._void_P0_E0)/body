{
  p.getRepository().getModelAccess().executeCommand(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().assertWriteAccessAllowed();
      r.invoke();
    }
  }
);
}
