{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
synchronized (myDisposedLock) {
        myDisposed=true;
        try {
synchronized (myChangesMessages) {
            SetSequence.fromSet(MapSequence.fromMap(myChangesMessages).keySet()).toListSequence().visitAll(new IVisitor<ModelChange>(){
              public void visit(              ModelChange ch){
                removeMessages(ch);
              }
            }
);
          }
          getHighlightManager().clearForOwner(ChangesEditorHighlighter.this);
          if (myFoldingAreaPainter != null) {
            getLeftEditorHighlighter().removeFoldingAreaPainter(myFoldingAreaPainter);
          }
        }
  finally {
          if (myCurrentDifference != null) {
            myCurrentDifference.removeDifferenceListener(myListener);
            myListener=null;
          }
        }
      }
    }
  }
);
}
