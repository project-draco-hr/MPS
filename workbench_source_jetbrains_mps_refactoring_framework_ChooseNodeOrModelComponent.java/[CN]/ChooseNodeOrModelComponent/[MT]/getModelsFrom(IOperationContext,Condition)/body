{
  Set<SModelDescriptor> models=new HashSet<SModelDescriptor>(SModelRepository.getInstance().getModelDescriptors());
  for (  SModelDescriptor model : new ArrayList<SModelDescriptor>(models)) {
    if (!(model instanceof BaseSModelDescriptorWithSource)) {
      models.remove(model);
    }
 else     if (!SModelStereotype.isUserModel(model)) {
      models.remove(model);
    }
 else     if (((BaseSModelDescriptorWithSource)model).isReadOnly()) {
      models.remove(model);
    }
 else     if (myReturnLoadedModels && !condition.met(model.getSModel())) {
      models.remove(model);
    }
 else     if (!myReturnLoadedModels && !condition.met(model)) {
      models.remove(model);
    }
  }
  return models;
}
