{
  SNode refNode=APICellAdapter.getSNodeWRTReference(((EditorCell)MapSequence.fromMap(_params).get("editorCell")));
  if (SNodeOperations.isInstanceOf(refNode,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"))) {
    return SNodeOperations.cast(refNode,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"));
  }
  if (SNodeOperations.isInstanceOf(refNode,MetaAdapterFactory.getConcept(0xaf65afd8f0dd4942L,0x87d963a55f2a9db1L,0x11d43471eedL,"jetbrains.mps.lang.behavior.structure.ConceptConstructorDeclaration"))) {
    SNode concept=SNodeOperations.getNodeAncestor(refNode,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"),false,false);
    if (concept != null) {
      return concept;
    }
  }
  SNode outerConcept=SNodeOperations.getNodeAncestor(((SNode)MapSequence.fromMap(_params).get("node")),MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"),true,false);
  if (outerConcept != null) {
    return outerConcept;
  }
  if (!(((Editor)MapSequence.fromMap(_params).get("editor")) instanceof TabbedEditor)) {
    return null;
  }
  TabbedEditor tabbedEditor=(TabbedEditor)((Editor)MapSequence.fromMap(_params).get("editor"));
  SNode editedNode=tabbedEditor.getCurrentlyEditedNode().resolve(((MPSProject)MapSequence.fromMap(_params).get("mpsProject")).getRepository());
  if (!(SNodeOperations.isInstanceOf(editedNode,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration")))) {
    return null;
  }
  return SNodeOperations.cast(editedNode,MetaAdapterFactory.getConcept(0xc72da2b97cce4447L,0x8389f407dc1158b7L,0x1103553c5ffL,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"));
}
