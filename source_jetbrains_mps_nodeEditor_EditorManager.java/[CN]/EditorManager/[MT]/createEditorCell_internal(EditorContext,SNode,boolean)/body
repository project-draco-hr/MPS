{
  myCreatingInspectedCell=false;
  INodeEditor editor=getEditor(context,node);
  AbstractEditorComponent abstractEditorComponent=context.getNodeEditorComponent();
  EditorCell nodeCell=null;
  CellBuildNodeAccessListener nodeAccessListener=new CellBuildNodeAccessListener(abstractEditorComponent);
  try {
    NodeReadAccessCaster.setNodeReadAccessListener(nodeAccessListener);
    nodeCell=isInspectorCell ? editor.createInspectedCell(context,node) : editor.createEditorCell(context,node);
  }
 catch (  Exception e) {
    LOG.error("Failed to create cell for node " + node.getDebugText(),e);
    nodeCell=EditorCell_Error.create(context,node,"!exception!:" + node.getDebugText());
  }
 finally {
    if (nodeCell != null) {
      nodeCell.putUserObject(IS_BIG_CELL,true);
      abstractEditorComponent.registerAsBigCell(nodeCell);
      nodeAccessListener.recordingFinishedForCell(nodeCell);
    }
    NodeReadAccessCaster.removeNodeAccessListener();
  }
  if (node.hasRightTransformHint()) {
    EditorCell_Collection rowWrapper=EditorCell_Collection.createHorizontal(context,node);
    rowWrapper.setSelectable(false);
    rowWrapper.addEditorCell(nodeCell);
    final EditorCell_Constant rightTransformHintCell=EditorCell_Constant.create(context,node,"",true);
    rightTransformHintCell.putUserObject(EditorCell.CELL_ID,node.getId());
    rightTransformHintCell.setEditable(true);
    rightTransformHintCell.setAction(EditorCellAction.DELETE,new CellAction_DeleteProperty(node,SNode.RIGHT_TRANSFORM_HINT));
    rightTransformHintCell.setSubstituteInfo(new AbstractNodeSubstituteInfo(context){
      protected List<INodeSubstituteItem> createActions(){
        return (List)ModelActions.createRightTransformHintSubstituteActions(node,context.getOperationContext().getScope());
      }
    }
);
    rowWrapper.addEditorCell(rightTransformHintCell);
    if (node.getUserObject(SNode.RIGHT_TRANSFORM_HINT_JUST_ADDED) != null) {
      node.removeUserObject(SNode.RIGHT_TRANSFORM_HINT_JUST_ADDED);
      CommandProcessor.instance().invokeLater(new Runnable(){
        public void run(){
          context.getNodeEditorComponent().changeSelection(rightTransformHintCell);
        }
      }
);
    }
    return rowWrapper;
  }
  nodeCell.setInspectorCell(isInspectorCell);
  return nodeCell;
}
