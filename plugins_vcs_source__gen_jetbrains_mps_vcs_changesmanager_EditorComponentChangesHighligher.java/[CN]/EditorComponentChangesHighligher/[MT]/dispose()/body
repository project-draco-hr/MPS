{
synchronized (myDisposedLock) {
    myDisposed=true;
    try {
synchronized (myChangesMessages) {
        SetSequence.fromSet(MapSequence.fromMap(myChangesMessages).keySet()).toListSequence().visitAll(new IVisitor<OldChange>(){
          public void visit(          OldChange ch){
            unhighlightChange(ch);
          }
        }
);
      }
      getHighlightManager().clearForOwner(this);
      myEditorComponent.getLeftEditorHighlighter().removeFoldingAreaPainter(myFoldingAreaPainter);
    }
  finally {
      if (myModelChangesManager != null) {
synchronized (this) {
          myModelChangesManager.removeChangeListener(myChangeListener);
          myChangeListener=null;
        }
      }
    }
  }
}
