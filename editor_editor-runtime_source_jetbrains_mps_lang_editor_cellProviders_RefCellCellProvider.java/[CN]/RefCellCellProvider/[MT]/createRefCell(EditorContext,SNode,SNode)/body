{
  AbstractCellProvider inlineComponent=myAuxiliaryCellProvider;
  myAuxiliaryCellProvider.setSNode(effectiveNode);
  if (inlineComponent instanceof InlineCellProvider) {
    InlineCellProvider inlineComponentProvider=(InlineCellProvider)inlineComponent;
    inlineComponentProvider.setRefNode(node);
  }
  EditorCell editorCell;
  if (myIsAggregation) {
    editorCell=inlineComponent.createEditorCell(context);
  }
 else {
    editorCell=((jetbrains.mps.nodeEditor.EditorContext)context).createReferentCell(inlineComponent,getSNode(),effectiveNode,myGenuineRole);
    CellUtil.setupIDeprecatableStyles(effectiveNode,editorCell);
  }
  setSemanticNodeToCells(editorCell,node);
  if (myIsCardinality1) {
    if (ReferenceConceptUtil.getCharacteristicReference(((jetbrains.mps.smodel.SNode)node).getConceptDeclarationNode()) != null) {
      editorCell.setAction(CellActionType.DELETE,new CellAction_DeleteNode(node));
      editorCell.setAction(CellActionType.BACKSPACE,new CellAction_DeleteNode(node));
    }
 else {
      editorCell.setAction(CellActionType.DELETE,EmptyCellAction.getInstance());
      editorCell.setAction(CellActionType.BACKSPACE,EmptyCellAction.getInstance());
    }
  }
 else {
    if (myIsAggregation) {
      editorCell.setAction(CellActionType.DELETE,new CellAction_DeleteNode(node));
      editorCell.setAction(CellActionType.BACKSPACE,new CellAction_DeleteNode(node));
    }
 else {
      editorCell.setAction(CellActionType.DELETE,new CellAction_DeleteReference(node,myGenuineRole));
      editorCell.setAction(CellActionType.BACKSPACE,new CellAction_DeleteReference(node,myGenuineRole));
    }
  }
  return editorCell;
}
