{
  final AbstractCellProvider inlineComponent=myAuxiliaryCellProvider;
  myAuxiliaryCellProvider.setSNode(effectiveNode);
  if (inlineComponent instanceof InlineCellProvider) {
    InlineCellProvider inlineComponentProvider=(InlineCellProvider)inlineComponent;
    inlineComponentProvider.setRefNode(node);
  }
  EditorCell editorCell;
  if (myIsAggregation) {
    editorCell=inlineComponent.createEditorCell(context);
  }
 else {
    editorCell=context.getEditorComponent().getUpdater().getCurrentUpdateSession().updateReferencedNodeCell(new Computable<EditorCell>(){
      @Override public EditorCell compute(){
        return inlineComponent.createEditorCell(context);
      }
    }
,effectiveNode,myGenuineRole);
    CellUtil.setupIDeprecatableStyles(effectiveNode,editorCell);
  }
  if (!myIsAggregation) {
    setSemanticNodeToCells(editorCell,node);
  }
  if (myIsCardinality1) {
    if (ReferenceConceptUtil.getCharacteristicReference(new SNodeLegacy(node).getConceptDeclarationNode()) != null) {
      editorCell.setAction(CellActionType.DELETE,new CellAction_DeleteNode(node,DeleteDirection.FORWARD));
      editorCell.setAction(CellActionType.BACKSPACE,new CellAction_DeleteNode(node,DeleteDirection.BACKWARD));
    }
 else {
      editorCell.setAction(CellActionType.DELETE,EmptyCellAction.getInstance());
      editorCell.setAction(CellActionType.BACKSPACE,EmptyCellAction.getInstance());
    }
  }
 else {
    if (myIsAggregation) {
      editorCell.setAction(CellActionType.DELETE,new CellAction_DeleteNode(node,DeleteDirection.FORWARD));
      editorCell.setAction(CellActionType.BACKSPACE,new CellAction_DeleteNode(node,DeleteDirection.BACKWARD));
    }
 else {
      editorCell.setAction(CellActionType.DELETE,new CellAction_DeleteReference(node,myGenuineRole));
      editorCell.setAction(CellActionType.BACKSPACE,new CellAction_DeleteReference(node,myGenuineRole));
    }
  }
  return editorCell;
}
