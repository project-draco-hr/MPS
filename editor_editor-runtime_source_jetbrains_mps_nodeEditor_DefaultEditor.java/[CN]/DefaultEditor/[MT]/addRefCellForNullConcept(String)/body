{
  SNode referentNode=null;
  SReference reference=mySNode.getReference(role);
  String myErrorText;
  if (reference != null) {
    referentNode=reference.getTargetNode();
    if (referentNode == null || referentNode.getModel() == null || !VisibilityUtil.isVisible(myEditorContext.getModel(),referentNode.getModel())) {
      String rinfo=((jetbrains.mps.smodel.SReference)reference).getResolveInfo();
      myErrorText=rinfo != null ? rinfo : "?" + role + "?";
      addErrorCell(myErrorText);
      return;
    }
  }
  if (referentNode == null) {
    addLabel("<no target>");
    return;
  }
  final AbstractCellProvider inlineComponent=new MyAbstractCellProvider(role);
  inlineComponent.setSNode(referentNode);
  EditorCell cell=myEditorContext.getEditorComponent().getUpdater().getCurrentUpdateSession().updateReferencedNodeCell(new Computable<EditorCell>(){
    @Override public EditorCell compute(){
      return inlineComponent.createEditorCell(myEditorContext);
    }
  }
,referentNode,role);
  setSemanticNodeToCells(cell,mySNode);
  if (cell.getRole() == null) {
    cell.setRole(role);
    cell.setReferenceCell(true);
  }
  addCell(cell);
}
