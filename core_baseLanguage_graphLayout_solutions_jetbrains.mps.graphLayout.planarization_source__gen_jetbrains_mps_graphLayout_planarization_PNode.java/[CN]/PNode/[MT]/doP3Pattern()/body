{
  PQNode newFullNode=new PNode();
  newFullNode.setState(PQNode.State.FULL);
  newFullNode.addGraphNode(this.getGraphNode());
  PQNode newEmptyNode=new PNode();
  newEmptyNode.setState(PQNode.State.EMPTY);
  newEmptyNode.addGraphNode(this.getGraphNode());
  Iterator<PQNode> nodeItr=ListSequence.fromList(getChildren()).iterator();
  while (nodeItr.hasNext()) {
    PQNode node=nodeItr.next();
    nodeItr.remove();
    if (node.getState() == PQNode.State.FULL) {
      newFullNode.addLastChild(node);
    }
 else {
      newEmptyNode.addLastChild(node);
    }
  }
  QNode replacement=new QNode();
  replacement.addLastChild(newEmptyNode);
  replacement.addLastChild(newFullNode);
  replacement.setState(PQNode.State.PARTIAL);
  replacement.setParent(this.getParent());
  return replacement;
}
