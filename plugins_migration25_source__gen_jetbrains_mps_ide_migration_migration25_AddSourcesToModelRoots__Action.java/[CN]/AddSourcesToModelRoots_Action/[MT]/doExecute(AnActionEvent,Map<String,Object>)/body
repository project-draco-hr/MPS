{
  try {
    MPSProject mpsProject=((Project)MapSequence.fromMap(_params).get("project")).getComponent(MPSProject.class);
    List<IModule> allModules=ListSequence.fromListWithValues(new ArrayList<IModule>(),mpsProject.getModules());
    for (    final IModule module : ListSequence.fromList(allModules)) {
      ModuleDescriptor descriptor=module.getModuleDescriptor();
      if (descriptor == null) {
        continue;
      }
      Collection<String> sp=descriptor.getSourcePaths();
      if (sp == null || sp.isEmpty()) {
        continue;
      }
      Collection<ModelRootDescriptor> mrs=descriptor.getModelRootDescriptors();
      boolean exist=CollectionSequence.fromCollection(mrs).select(new ISelector<ModelRootDescriptor,ModelRoot>(){
        public ModelRoot select(        ModelRootDescriptor it){
          return it.getRoot();
        }
      }
).where(new IWhereFilter<ModelRoot>(){
        public boolean accept(        ModelRoot it){
          return it != null && LanguageID.JAVA_MANAGER.equals(it.getManager()) && EqualUtil.equals(it.getPath(),module.getClassesGen().getPath());
        }
      }
).isNotEmpty();
      if (exist) {
        continue;
      }
      SModelRoot mr=new SModelRoot(LanguageID.JAVA_MANAGER);
      mr.setPath(module.getClassesGen().getPath());
      CollectionSequence.fromCollection(mrs).addElement(mr.toDescriptor());
      module.setModuleDescriptor(descriptor,false);
      module.save();
    }
    ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
  }
 catch (  Throwable t) {
    if (log.isErrorEnabled()) {
      log.error("User's action execute method failed. Action:" + "AddSourcesToModelRoots",t);
    }
  }
}
