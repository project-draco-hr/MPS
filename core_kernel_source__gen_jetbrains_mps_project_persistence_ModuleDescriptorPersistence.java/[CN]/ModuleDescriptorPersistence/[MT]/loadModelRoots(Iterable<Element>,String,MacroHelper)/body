{
  List<ModelRootDescriptor> result=ListSequence.fromList(new ArrayList<ModelRootDescriptor>());
  ModelRootDescriptor[] cache=new ModelRootDescriptor[2];
  for (  Element element : modelRootElements) {
    Memento m=new MementoImpl();
    readMemento(m,element,macroHelper);
    String type=element.getAttributeValue("type");
    if (type == null) {
      String msg=String.format("Unsupported model root detected in module at %s. Likely outdated module is being loaded, please check your environment",macroHelper.expandPath("${module}"));
      if (LOG.isEnabledFor(Level.ERROR)) {
        LOG.error(msg);
      }
      throw new IllegalStateException(msg);
    }
    ModelRootDescriptor descriptor=createDescriptor(type,m,moduleContentRoot,cache);
    if (descriptor != null) {
      ListSequence.fromList(result).addElement(descriptor);
    }
  }
  return result;
}
