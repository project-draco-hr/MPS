{
  if (type != null) {
    return new ModelRootDescriptor(type,m);
  }
  Memento manager=m.getChild("manager");
  if (manager == null) {
    String path=FileUtil.stripLastSlashes(m.get("path"));
    return mergeFileBasedModelRoot(path,PersistenceRegistry.DEFAULT_MODEL_ROOT,moduleContentRoot,0,cache);
  }
 else   if (matches(manager,LanguageID.JAVA_MANAGER)) {
    String path=m.get("path");
    m=new MementoImpl();
    m.put("path",path);
    return new ModelRootDescriptor(PersistenceRegistry.JAVA_CLASSES_ROOT,m);
  }
 else   if ("jetbrains.mps.lang.project.stubs.ProjectStubs".equals(manager.get("className")) && "86ef8290-12bb-4ca7-947f-093788f263a9".equals(manager.get("moduleId"))) {
    String path=FileUtil.stripLastSlashes(m.get("path"));
    return mergeFileBasedModelRoot(path,ProjectStructureModelRoot.TYPE,moduleContentRoot,1,cache);
  }
 else {
    return new ModelRootDescriptor(PersistenceRegistry.OBSOLETE_MODEL_ROOT,m);
  }
}
