{
  SNode applicableConcept=SLinkOperations.getTarget(node,"applicableConcept",false);
  String name=CreateFromUsageUtil.getText(editorContext);
  if (name == null || name.length() == 0) {
    name="reduce_";
    if (applicableConcept != null) {
      name+=SPropertyOperations.getString(applicableConcept,"name");
    }
  }
  SNode t=SNodeFactoryOperations.createNewRootNode(SNodeOperations.getModel(node),"jetbrains.mps.lang.generator.structure.TemplateDeclaration",null);
  SPropertyOperations.set(t,"name",name);
  SLinkOperations.setTarget(t,"applicableConcept",applicableConcept,false);
  SNodeAccessUtil.setProperty(t,SNodeUtil.property_BaseConcept_virtualPackage,SPropertyOperations.getString(SNodeOperations.cast(SNodeOperations.getContainingRoot(node),"jetbrains.mps.lang.core.structure.BaseConcept"),"virtualPackage"));
  SNode tr=SNodeFactoryOperations.setNewChild(node,"ruleConsequence","jetbrains.mps.lang.generator.structure.TemplateDeclarationReference");
  SLinkOperations.setTarget(tr,"template",t,false);
}
