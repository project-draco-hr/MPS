{
  if (node != null) {
    if (child) {
      if (targetNode == null) {
        node.setChild(role,null);
      }
 else {
        SNode targetParent=targetNode.getParent();
        if (targetParent != node) {
          if (targetParent != null) {
            targetParent.removeChild(targetNode);
          }
          node.setChild(role,targetNode);
        }
      }
    }
 else {
      node.setReferent(role,targetNode);
    }
  }
  return targetNode;
}
