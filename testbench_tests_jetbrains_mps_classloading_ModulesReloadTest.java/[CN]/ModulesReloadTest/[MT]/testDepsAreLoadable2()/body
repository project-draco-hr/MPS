{
  final Language l=createLanguage();
  final Solution s=createSolution();
  getModelAccess().runWriteAction(new Runnable(){
    @Override public void run(){
      addClassTo(s);
      l.addDependency(s.getModuleReference(),false);
      s.getModuleDescriptor().setKind(SolutionKind.PLUGIN_CORE);
      s.reload();
      Assert.assertTrue(classIsLoadableFromModule(l));
    }
  }
);
}
