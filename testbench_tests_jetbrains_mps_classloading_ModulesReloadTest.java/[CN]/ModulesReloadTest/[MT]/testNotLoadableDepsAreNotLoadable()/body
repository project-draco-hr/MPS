{
  final Solution solution=createSolution();
  addClassTo(solution);
  solution.getModuleDescriptor().setKind(SolutionKind.NONE);
  final Language l1=createLanguage();
  myAccess.runWriteAction(new Runnable(){
    @Override public void run(){
      ClassLoaderManager.getInstance().reloadModule(solution);
      l1.addDependency(solution.getModuleReference(),false);
      ClassLoaderManager.getInstance().reloadModule(solution);
      Assert.assertFalse(classIsLoadableFromModule(l1));
    }
  }
);
}
