{
  IGraph graph=layoutInfo.getGraph();
  if (!(graph instanceof HyperGraph)) {
    throw new RuntimeException("can layout only hyper graphs");
  }
  myGraph=((HyperGraph)graph);
  myClusteredGraph=new ClusteredGraph();
  myInclusionTree=myClusteredGraph.getInclusionTree();
  Node root=myGraph.getRoot();
  makeClusterGraph(root);
  myClusteredGraph.setRoot(MapSequence.<Node,Node>fromMap(myClusterMap).get(root));
  this.copyEdges();
  LayoutInfo clusterInfo=this.createClusterInfo(layoutInfo);
  IGraphLayout ilayout=myClusterLayouter.doLayout(clusterInfo);
  if (!(ilayout instanceof ClusteredGraphLayout)) {
    throw new RuntimeException("internal layout must be able to process clustered graphs");
  }
  ClusteredGraphLayout layout=((ClusteredGraphLayout)ilayout);
  return this.restoreLayout(layout);
}
