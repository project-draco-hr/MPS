{
  SNode node=myEditorComponent.getRootCell().getSNode();
  if (node == null)   return;
  myErrosLabel.setIcon(Icons.OK);
  if (node.getUserObject(SNode.LAST_UPDATE) == null || (Long)node.getUserObject(SNode.LAST_UPDATE) < node.getModel().getModelDescriptor().state()) {
    myErrosLabel.setIcon(Icons.IN_PROGRESS);
    return;
  }
  TSStatus status=(TSStatus)node.getUserObject(SNode.STATUS);
  removeAllMessages();
  if (status != null && status.isError()) {
    List<TSStatus> tsStatuses=new ArrayList<TSStatus>();
    if (status instanceof TSStatus.ERROR_COMPOSITE) {
      tsStatuses.addAll(status.getAllErrors());
    }
 else {
      tsStatuses.add(status);
    }
    myErrosLabel.setIcon(Icons.ERRORS);
    for (    final TSStatus s : tsStatuses) {
      add(new IGutterMessage(){
        public int getStart(){
          return getNodeCell().getY();
        }
        public int getHeight(){
          return getNodeCell().getHeight();
        }
        public String getMessage(){
          return s.getMessage();
        }
        public void doNavigate(){
          myEditorComponent.changeSelection(getNodeCell());
        }
        public boolean isValid(){
          return getNodeCell() == null;
        }
        private EditorCell getNodeCell(){
          return myEditorComponent.getBigValidCellForNode(s.getSNode());
        }
      }
);
    }
  }
 else {
    myErrosLabel.setIcon(Icons.OK);
  }
}
