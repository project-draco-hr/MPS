{
  SNode node=myEditorComponent.getRootCell().getSNode();
  if (node == null)   return;
  SModelDescriptor modelDescriptor=node.getModel().getModelDescriptor();
  if (!modelDescriptor.isTypesUpToDate()) {
    myErrosLabel.setIcon(Icons.IN_PROGRESS);
    return;
  }
  myErrosLabel.setIcon(Icons.OK);
  IStatus status=(IStatus)node.getUserObject(SNode.ERROR_STATUS);
  if (status != null && status.isError()) {
    myErrosLabel.setIcon(Icons.ERRORS);
  }
 else {
    status=(IStatus)node.getUserObject(SNode.CHILDREN_ERROR_STATUS);
    if (status != null && status.isError()) {
      myErrosLabel.setIcon(Icons.ERRORS);
    }
  }
  if (status != null && status.isError()) {
    TSStatus type=TypeCheckerAccess.instance().getTypeChecker().getNodeType(node);
    List<TSStatus> tsStatuses=new ArrayList<TSStatus>();
    if (type instanceof TSStatus.ERROR_COMPOSITE) {
      tsStatuses.addAll(type.getAllErrors());
    }
 else {
      tsStatuses.add(type);
    }
    removeAllMessages();
    for (    final TSStatus s : tsStatuses) {
      final EditorCell cellForNode=myEditorComponent.findNodeCell(s.getSNode());
      if (cellForNode == null)       return;
      add(new IGutterMessage(){
        public int getStart() throws NodeNotFoundException {
          EditorCell nodeCell=getNodeCell();
          return nodeCell.getY();
        }
        public int getHeight() throws NodeNotFoundException {
          return getNodeCell().getHeight();
        }
        public String getMessage(){
          return s.getMessage();
        }
        public void doNavigate() throws NodeNotFoundException {
          myEditorComponent.changeSelection(getNodeCell());
        }
        private EditorCell getNodeCell() throws NodeNotFoundException {
          EditorCell nodeCell=myEditorComponent.findNodeCell(s.getSNode());
          if (nodeCell == null) {
            throw new NodeNotFoundException();
          }
          return nodeCell;
        }
      }
);
    }
  }
}
