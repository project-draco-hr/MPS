{
  SRepository repository=myProject.getRepository();
  repository.getModelAccess().executeCommandInEDT(new Runnable(){
    @Override public void run(){
      List<SNode> nodes=new ArrayList<SNode>();
      for (      SNodeReference selectedNode : mySelectedNodes) {
        SNode node=selectedNode.resolve(repository);
        SNode theParent=null;
        if (node != null) {
          nodes.add(node);
          if (theParent == null) {
            theParent=node.getParent();
          }
 else           if (theParent != node.getParent()) {
            return;
          }
        }
      }
      if (nodes.isEmpty()) {
        return;
      }
      CopyPasteUtil.copyNodesToClipboard(nodes);
      if (cut) {
        for (        SNode node : nodes) {
          SNodeOperations.deleteNode(node);
        }
        myModelDescriptor.save();
      }
    }
  }
);
}
