{
  if (!node.isInRepository())   return;
  SModel sm=node.getModel();
  if (!myNodesCount.containsKey(sm)) {
    ((SModelInternal)sm).addModelListener(myListener);
    myNodesCount.put(sm,1);
  }
 else {
    Integer oldValue=myNodesCount.get(sm);
    myNodesCount.put(sm,oldValue + 1);
  }
  WeakReference<SNode> ref=new WeakReference<SNode>(node,myReferenceQueue);
  myDescriptors.put(ref,sm);
}
