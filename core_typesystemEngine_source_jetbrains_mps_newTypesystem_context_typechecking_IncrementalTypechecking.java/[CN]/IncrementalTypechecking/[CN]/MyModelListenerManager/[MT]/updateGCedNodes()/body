{
  while (true) {
    WeakReference<SNode> ref=(WeakReference<SNode>)myReferenceQueue.poll();
    if (ref == null)     return;
    SModel sm=myDescriptors.get(ref);
    Integer count=myNodesCount.get(sm);
    if (count == 1) {
      ((SModelInternal)sm).removeModelListener(myModelListener);
      sm.removeModelListener(mySModelListener);
      myNodesCount.remove(sm);
      mySModelNodes.remove(sm);
    }
 else {
      myNodesCount.put(sm,count - 1);
    }
    myDescriptors.remove(ref);
  }
}
