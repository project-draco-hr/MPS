{
  if (myLibraryContibutor == null) {
    Set<LibraryContributor.LibDescriptor> libraryPaths=new HashSet<LibraryContributor.LibDescriptor>();
    if (myLoadBootstrapLibraries) {
      for (      String bpath : CollectionSequence.fromCollection(PathManager.getBootstrapPaths())) {
        libraryPaths.add(new LibraryContributor.LibDescriptor(bpath,null));
      }
      libraryPaths.add(new LibraryContributor.LibDescriptor(PathManager.getLanguagesPath(),null));
      libraryPaths.addAll(PathManager.getExtensionsPaths());
    }
    for (    String libName : myLibraries.keySet()) {
      libraryPaths.add(new LibraryContributor.LibDescriptor(myLibraries.get(libName).getAbsolutePath(),null));
    }
    this.myLibraryContibutor=new SetLibraryContributor(libraryPaths);
    LibraryInitializer.getInstance().addContributor(myLibraryContibutor);
  }
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      LibraryInitializer.getInstance().update();
    }
  }
);
}
