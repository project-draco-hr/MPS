{
  List<Point> path=layout.getEdgeLayout(edge);
  if (node == edge.getSource()) {
    return GeomUtil.getDirection(ListSequence.fromList(path).getElement(0),ListSequence.fromList(path).getElement(1));
  }
 else {
    int last=ListSequence.fromList(path).count() - 1;
    return GeomUtil.getDirection(ListSequence.fromList(path).getElement(last),ListSequence.fromList(path).getElement(last - 1));
  }
}
