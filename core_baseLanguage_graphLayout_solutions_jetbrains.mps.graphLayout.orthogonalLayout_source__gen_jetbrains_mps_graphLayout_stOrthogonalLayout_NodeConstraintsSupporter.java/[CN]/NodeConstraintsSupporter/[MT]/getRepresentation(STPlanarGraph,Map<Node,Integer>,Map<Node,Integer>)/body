{
  myStPlanarGraph=stPlanarGraph;
  Graph graph=myStPlanarGraph.getGraph();
  myModifiedGraph=splitNodes(graph);
  myModifiedDualGraph=modifyDualGraph(stPlanarGraph);
  Map<Edge,Integer> edgeWeights=MapSequence.fromMap(new HashMap<Edge,Integer>());
  for (  Node node : ListSequence.fromList(graph.getNodes())) {
    MapSequence.fromMap(edgeWeights).put(MapSequence.fromMap(myFakeEdges).get(node),MapSequence.fromMap(verConstraints).get(node));
  }
  for (  Edge edge : ListSequence.fromList(graph.getEdges())) {
    MapSequence.fromMap(edgeWeights).put(MapSequence.fromMap(myEdgesMap).get(edge),myMinEdgeYDistance);
  }
  Map<Edge,Integer> dualEdgeWeights=MapSequence.fromMap(new HashMap<Edge,Integer>());
  for (  Edge edge : ListSequence.fromList(myModifiedDualGraph.getEdges())) {
    MapSequence.fromMap(dualEdgeWeights).put(edge,myMinEdgeXDistance);
  }
  for (  Node node : ListSequence.fromList(graph.getNodes())) {
    MapSequence.fromMap(dualEdgeWeights).put(MapSequence.fromMap(myFakeDualEdges).get(node),MapSequence.fromMap(horConstraints).get(node));
  }
  myVerNumbering=WeightedTopologicalNumbering.number(myModifiedGraph,edgeWeights);
  myHorNumbering=WeightedTopologicalNumbering.number(myModifiedDualGraph,dualEdgeWeights);
  Map<Object,Rectangle> representation=MapSequence.fromMap(new HashMap<Object,Rectangle>());
  for (  Node node : ListSequence.fromList(graph.getNodes())) {
    MapSequence.fromMap(representation).put(node,getRectangle(node,MapSequence.fromMap(myFakeEdges).get(node)));
  }
  for (  Edge edge : ListSequence.fromList(graph.getEdges())) {
    MapSequence.fromMap(representation).put(edge,getRectangle(edge,MapSequence.fromMap(myEdgesMap).get(edge)));
  }
  return representation;
}
