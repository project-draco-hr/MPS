{
  IModule module=MPSModuleRepository.getInstance().getModule(myModuleRef);
  if (module == null) {
    throw new IllegalGeneratorConfigurationException("Can't find module " + myModuleRef.getModuleFqName());
  }
  if (module instanceof Solution) {
    Solution solution=(Solution)module;
    List<EditableSModelDescriptor> models=new ArrayList<EditableSModelDescriptor>();
    for (    SModelDescriptor sm : solution.getOwnModelDescriptors()) {
      if (!fullRegeneration && !ModelGenerationStatusManager.getInstance().generationRequired(sm,project,NoCachesStrategy.createBuildCachesStrategy())) {
        continue;
      }
      if (ModelGenerationStatusManager.isDoNotGenerate(sm)) {
        continue;
      }
      if (SModelStereotype.isUserModel(sm) && (sm instanceof EditableSModelDescriptor)) {
        models.add(((EditableSModelDescriptor)sm));
      }
    }
    return new GenParameters(models,solution);
  }
 else   if (module instanceof Language) {
    Language lang=(Language)module;
    List<EditableSModelDescriptor> inputModels=GeneratorConfigUtil.getLanguageModels(lang);
    Iterator<EditableSModelDescriptor> it=inputModels.iterator();
    while (it.hasNext()) {
      SModelDescriptor model=it.next();
      if ((!fullRegeneration && !ModelGenerationStatusManager.getInstance().generationRequired(model,project,NoCachesStrategy.createBuildCachesStrategy())) || ModelGenerationStatusManager.isDoNotGenerate(model)) {
        it.remove();
      }
    }
    return new GenParameters(inputModels,lang);
  }
  throw new IllegalGeneratorConfigurationException("Not applicable to non-language/solution module " + myModuleRef.getModuleFqName());
}
