{
  List<CheckpointState> states=myCheckpoints.get(model);
  if (states != null) {
    return new ModelCheckpoints(states.toArray(new CheckpointState[states.size()]));
  }
  return new ModelAccessHelper(myTransientModelProvider.getRepository()).runReadAction(new Computable<ModelCheckpoints>(){
    @Override public ModelCheckpoints compute(){
      SModel[] cpModels=getCheckpointModelsFor(model);
      return new ModelCheckpoints(myTransientModelProvider.getRepository(),cpModels);
    }
  }
);
}
