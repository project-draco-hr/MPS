{
  boolean[] canExecuteWasCalledOutsideRead={false};
  ModelAccess modelAccess=new SimpleModelAccess();
  new CanExecuteFilter(modelAccess).apply(Collections.singletonList(new ActionItemBase(){
    @Override public boolean canExecute(    @NotNull String pattern){
      if (!modelAccess.canRead()) {
        canExecuteWasCalledOutsideRead[0]=true;
      }
      return true;
    }
  }
));
  assertFalse("canExecute should only be called in a read action",canExecuteWasCalledOutsideRead[0]);
}
