{
  SNode language=SNodeOperations.cast(SNodeOperations.getParent(modelReference),"jetbrains.mps.lang.project.structure.Language");
  if (language == null) {
    genContext.showErrorMessage(modelReference,"Parent of ModelReference is not a Language: " + SPropertyOperations.getString(modelReference,"qualifiedName"));
    return null;
  }
  SModuleReference moduleReference=PersistenceFacade.getInstance().createModuleReference(BehaviorReflection.invokeVirtual(String.class,language,"virtual_getModuleReference_9020561928507315628",new Object[]{}));
  Language languageModule=ModuleRepositoryFacade.getInstance().getModule(moduleReference,Language.class);
  if (languageModule == null) {
    genContext.showErrorMessage(language,"No language in repository: " + SPropertyOperations.getString(language,"namespace"));
    return null;
  }
  SModel aspectModel=aspect.get(languageModule);
  return (aspectModel == null || !(aspectModel.getModelId().toString().equals(SPropertyOperations.getString(modelReference,"uuid"))) ? null : aspectModel);
}
