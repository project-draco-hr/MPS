{
  AsPattern asPattern=AsPattern_AnnotationLink.getAsPattern((BaseConcept)BaseAdapter.fromNode(patternNode));
  ListPattern currentListPattern=asPattern instanceof ListPattern ? (ListPattern)asPattern : (ListPattern)BaseAdapter.fromNode(patternNode.getAttribute());
  ourCurrentListPatterns.push(currentListPattern);
  boolean stillMatches=true;
  for (  SNode node : nodes) {
    boolean matchesNow=matchNodes(node,patternNode,substitution);
    stillMatches=stillMatches && matchesNow;
    if (!stillMatches)     break;
    substitution.addNodeToListBindedWithVar(currentListPattern,node);
  }
  ListPattern poppedListPattern=ourCurrentListPatterns.pop();
  LOG.assertLog(poppedListPattern == currentListPattern);
  return stillMatches;
}
