{
  final GenerationTracer tracer=myProject.getComponentSafe(GenerationTracer.class);
  JPopupMenu result=new JPopupMenu();
  final TracerNode tracerNode=this.getTracerNode();
  boolean enable=tracerNode != null && tracerNode.getNodePointer() != null && tracerNode.getNodePointer().getNode() != null;
  GenerationTracerTreeNode rootNode=(GenerationTracerTreeNode)getRoot();
  TracerNode rootTracerNode=rootNode.getTracerNode();
  if (rootTracerNode != null && (rootTracerNode.getKind() == Kind.INPUT || rootTracerNode.getKind() == Kind.RULE)) {
    AbstractActionWithEmptyIcon showTracebackAction=new PopupAction("Show Traceback"){
      public void action(){
        tracer.showTracebackData(tracerNode.getNodePointer().getNode());
      }
    }
;
    showTracebackAction.setEnabled(enable && tracer.hasTracebackData(tracerNode.getNodePointer().getModelUID()));
    result.add(showTracebackAction);
  }
  AbstractActionWithEmptyIcon showNextTraceAction=new PopupAction("Show Next Step Trace"){
    public void action(){
      tracer.showTraceInputData(tracerNode.getNodePointer().getNode());
    }
  }
;
  showNextTraceAction.setEnabled(enable && tracer.hasTraceInputData(tracerNode.getNodePointer().getModelUID()));
  result.add(showNextTraceAction);
  return result;
}
