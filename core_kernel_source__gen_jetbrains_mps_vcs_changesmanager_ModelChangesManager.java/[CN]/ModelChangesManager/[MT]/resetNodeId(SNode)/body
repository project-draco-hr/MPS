{
  SNode copyOfNode=CopyUtil.copy(node);
  SNode parent=node.getParent();
  if (parent == null) {
    return;
  }
 else {
    MapSequence.fromMap(myRollbackReplaceCache).put(node.getSNodeId(),copyOfNode.getSNodeId());
    parent.replaceChild(node,copyOfNode);
    node.delete();
  }
}
