{
  final IEditor[] result=new IEditor[1];
  result[0]=null;
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    public void run(){
      FileEditorManager fileEditorManager=getFileEditorManager(mpsProject);
      FileEditor[] selectedEditors=fileEditorManager.getSelectedEditors();
      if (selectedEditors.length > 0) {
        FileEditor fileEditor=selectedEditors[0];
        if (fileEditor instanceof MPSFileNodeEditor) {
          MPSFileNodeEditor mpsFileNodeEditor=(MPSFileNodeEditor)fileEditor;
          result[0]=mpsFileNodeEditor.getNodeEditor();
          return;
        }
      }
    }
  }
,ModalityState.defaultModalityState());
  return result[0];
}
