{
  final SearchResults<SNode> results=new SearchResults();
  ProgressManager.getInstance().run(new Task.Modal(myProject,"References search",true){
    public void run(    @NotNull ProgressIndicator indicator){
      final ProgressMonitor monitor=new ProgressMonitorAdapter(indicator);
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          try {
            monitor.start("filtering references",ListSequence.fromList(myReferences).count());
            for (            SReference ref : myReferences) {
              if (scope.contains(ref.getTargetNode())) {
                results.getSearchResults().add(new SearchResult(ref.getSourceNode(),"reference"));
              }
              monitor.advance(1);
            }
          }
  finally {
            monitor.done();
          }
        }
      }
);
    }
  }
);
  myReferencesView.setContents(results);
}
