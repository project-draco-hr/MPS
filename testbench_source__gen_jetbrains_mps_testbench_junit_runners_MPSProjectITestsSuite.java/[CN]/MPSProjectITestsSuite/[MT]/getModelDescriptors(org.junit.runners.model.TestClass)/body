{
  Project mpsProject=MPSOpenProjectRunner.getCurrentMPSProject();
  String moduleUUID=getModuleUUID(klass);
  if (moduleUUID != null) {
    for (    SModule module : Sequence.fromIterable(mpsProject.getModules())) {
      if (moduleUUID.equals(module.getModuleId().toString())) {
        return module.getModels();
      }
    }
    throw new InitializationError("Module with specified UUID: " + moduleUUID + " was not found in MPS project: "+ mpsProject.getProjectFile().getAbsolutePath());
  }
  String modelLongName=getModelLongName(klass);
  if (modelLongName != null) {
    for (    SModel modelDescriptor : Sequence.fromIterable(mpsProject.getProjectModels())) {
      if (modelLongName.equals(modelDescriptor.getModelName())) {
        return Collections.singletonList(modelDescriptor);
      }
    }
    throw new InitializationError("Model with specified longName: " + modelLongName + " was not found in MPS project: "+ mpsProject.getProjectFile().getAbsolutePath());
  }
  return mpsProject.getProjectModels();
}
