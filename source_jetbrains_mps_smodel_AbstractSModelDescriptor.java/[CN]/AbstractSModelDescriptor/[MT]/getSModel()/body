{
  if (mySModel == null) {
    mySModel=loadModel();
    CommandProcessor.instance().executeCommand(new Runnable(){
      public void run(){
        SModelRepository.getInstance().repositoryChanged();
      }
    }
);
    LOG.assertLog(mySModel != null,"Couldn't load model \"" + getModelUID() + "\"");
    if (myModelListeners != null) {
      for (      SModelListener listener : myModelListeners) {
        if (!mySModel.hasSModelListener(listener)) {
          mySModel.addSModelListener(listener);
        }
      }
      myModelListeners.clear();
      myModelListeners=null;
    }
    if (myCommandListeners != null) {
      for (      SModelCommandListener listener : myCommandListeners) {
        if (!mySModel.hasSModelCommandListener(listener)) {
          mySModel.addSModelCommandListener(listener);
        }
      }
      myCommandListeners.clear();
      myCommandListeners=null;
    }
    if (myModelCommandListenersForImportedModels != null) {
      Iterator<SModelDescriptor> iterator=mySModel.importedModels(GlobalScope.getInstance());
      while (iterator.hasNext()) {
        SModelDescriptor imported=iterator.next();
        for (        SModelCommandListener listener : myModelCommandListenersForImportedModels) {
          imported.addSModelCommandListener(listener);
        }
      }
      myModelCommandListenersForImportedModels.clear();
      myModelCommandListenersForImportedModels=null;
    }
    if (mySModel.roots().hasNext()) {
      updateNodeStatuses();
    }
  }
  return mySModel;
}
