{
  Map<String,SNode> old=generator.setPreviousInputNodesByMappingName(myInputNodesByMappingName);
  SNode outputTargetNode;
  try {
    generator.setCurrentBuilder(getOutputSourceNode());
    outputTargetNode=expandReferenceMacro(generator);
    generator.setCurrentBuilder(null);
  }
  finally {
    generator.setPreviousInputNodesByMappingName(old);
  }
  return outputTargetNode;
}
