{
  List<Pair<SNode,String>> oldInputHistory=generator.setInputHistory(myInputHistory);
  SNode outputTargetNode;
  try {
    generator.setCurrentBuilder(getOutputSourceNode());
    outputTargetNode=expandReferenceMacro(generator);
    generator.setCurrentBuilder(null);
  }
  finally {
    generator.setInputHistory(oldInputHistory);
  }
  return outputTargetNode;
}
