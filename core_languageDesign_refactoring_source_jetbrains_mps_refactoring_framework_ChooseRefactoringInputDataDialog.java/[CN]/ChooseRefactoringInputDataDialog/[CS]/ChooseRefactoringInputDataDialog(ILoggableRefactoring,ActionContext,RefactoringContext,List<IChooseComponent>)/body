{
  super(actionContext.getOperationContext().getMainFrame(),"Input data for refactoring");
  myRefactoring=refactoring;
  myActionContext=actionContext;
  myRefactoringContext=refactoringContext;
  myComponents=new ArrayList<IChooseComponent>(components);
  myInnerPanel=new JPanel();
  GridBagLayout layout=new GridBagLayout();
  GridBagConstraints constraints=new GridBagConstraints();
  constraints.gridx=0;
  constraints.gridy=GridBagConstraints.RELATIVE;
  constraints.gridwidth=1;
  constraints.fill=GridBagConstraints.BOTH;
  constraints.weightx=1;
  constraints.weighty=0;
  myInnerPanel.setLayout(layout);
  boolean isLocalByDefault=true;
  IModule module=refactoringContext.getSelectedModule();
  if (module instanceof Language) {
    Language l=(Language)module;
    if (l.isBootstrap()) {
      isLocalByDefault=false;
    }
  }
  if (myRefactoring.doesUpdateModel()) {
    myIsLocalCheckBox=new JCheckBox("is local");
    myIsLocalCheckBox.setSelected(isLocalByDefault);
    myInnerPanel.add(myIsLocalCheckBox,constraints);
  }
  myFirstComponent=null;
  for (int i=0; i < myComponents.size(); i++) {
    IChooseComponent component=myComponents.get(i);
    if (myFirstComponent == null && component instanceof JComponent) {
      myFirstComponent=component;
    }
    if (i == myComponents.size() - 1) {
      constraints.weighty=1;
    }
    myInnerPanel.add(component.getMainComponent(),constraints);
  }
}
