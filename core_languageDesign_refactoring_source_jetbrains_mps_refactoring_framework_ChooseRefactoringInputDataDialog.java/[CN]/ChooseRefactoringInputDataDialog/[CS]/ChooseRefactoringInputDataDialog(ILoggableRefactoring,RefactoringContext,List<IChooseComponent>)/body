{
  super(refactoringContext.getCurrentOperationContext().getMainFrame(),"Input Data for " + refactoring.getUserFriendlyName());
  myRefactoring=refactoring;
  myRefactoringContext=refactoringContext;
  myComponents=new ArrayList<IChooseComponent>(components);
  myInnerPanel=new JPanel();
  GridBagLayout layout=new GridBagLayout();
  GridBagConstraints constraints=new GridBagConstraints();
  constraints.gridx=0;
  constraints.gridy=GridBagConstraints.RELATIVE;
  constraints.gridwidth=1;
  constraints.fill=GridBagConstraints.BOTH;
  constraints.weightx=1;
  constraints.weighty=0;
  myInnerPanel.setLayout(layout);
  myFirstComponent=null;
  for (  IChooseComponent component : myComponents) {
    if (myFirstComponent == null && component instanceof JComponent) {
      myFirstComponent=component;
    }
    myInnerPanel.add(component.getMainComponent(),constraints);
  }
  JPanel checkBoxPanel=new JPanel(new GridBagLayout());
  GridBagConstraints checkBoxPanelConstraints=new GridBagConstraints();
  checkBoxPanelConstraints.gridy=0;
  checkBoxPanelConstraints.weightx=0;
  checkBoxPanelConstraints.weighty=0;
  boolean isLocalByDefault=ModelAccess.instance().runReadAction(new Computable<Boolean>(){
    public Boolean compute(){
      IModule module=refactoringContext.getSelectedModule();
      if (module instanceof Language) {
        Language l=(Language)module;
        if (l.isBootstrap()) {
          return false;
        }
      }
      return true;
    }
  }
);
  if (myRefactoring.doesUpdateModel()) {
    myIsLocalCheckBox=new JCheckBox("is local");
    myIsLocalCheckBox.setSelected(isLocalByDefault);
    checkBoxPanelConstraints.gridx=0;
    checkBoxPanel.add(myIsLocalCheckBox,checkBoxPanelConstraints);
  }
  checkBoxPanelConstraints.gridx=1;
  checkBoxPanel.add(myGenerateModelsCheckBox=new JCheckBox("generate models"),checkBoxPanelConstraints);
  myGenerateModelsCheckBox.setSelected(true);
  checkBoxPanelConstraints.gridx=2;
  checkBoxPanelConstraints.weightx=1;
  checkBoxPanel.add(new JPanel(),checkBoxPanelConstraints);
  constraints.weighty=0;
  constraints.insets=new Insets(7,0,0,0);
  myInnerPanel.add(checkBoxPanel,constraints);
  constraints.weighty=1;
  myInnerPanel.add(new JPanel(),constraints);
}
