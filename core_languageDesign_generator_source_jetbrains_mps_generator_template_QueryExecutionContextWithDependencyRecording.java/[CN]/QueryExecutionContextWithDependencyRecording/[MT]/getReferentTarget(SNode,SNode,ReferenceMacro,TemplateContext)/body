{
  try {
    NodeReadEventsCaster.setNodesReadListener(listener);
    Object target=wrapped.getReferentTarget(node,outputNode,refMacro,context);
    if (target instanceof SNode) {
      listener.readNode((SNode)target);
    }
    return target;
  }
  finally {
    NodeReadEventsCaster.removeNodesReadListener();
  }
}
