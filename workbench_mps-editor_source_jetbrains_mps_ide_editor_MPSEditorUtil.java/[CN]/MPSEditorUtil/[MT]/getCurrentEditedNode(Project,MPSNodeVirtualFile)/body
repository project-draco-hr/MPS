{
  FileEditor editor=FileEditorManager.getInstance(project).getSelectedEditor(file);
  if (!(editor instanceof MPSFileNodeEditor))   return null;
  Editor nodeEditor=((MPSFileNodeEditor)editor).getNodeEditor();
  if (nodeEditor == null || !nodeEditor.isTabbed())   return null;
  EditorComponent tabEditor=nodeEditor.getCurrentEditorComponent();
  if (!(tabEditor instanceof NodeEditorComponent))   return null;
  return tabEditor.getEditedNode();
}
