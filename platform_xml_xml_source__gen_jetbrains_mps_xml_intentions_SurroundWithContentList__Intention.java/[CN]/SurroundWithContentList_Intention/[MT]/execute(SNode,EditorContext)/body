{
  SNode contentList=SNodeFactoryOperations.createNewNode("jetbrains.mps.xml.structure.ContentList",null);
  List<SNode> selectedNodes=editorContext.getNodeEditorComponent().getNodeRangeSelection().getNodes();
  if (ListSequence.fromList(selectedNodes).isEmpty()) {
    ListSequence.fromList(selectedNodes).addElement(editorContext.getSelectedNode());
  }
  SNode first=ListSequence.fromList(selectedNodes).getElement(0);
  SNodeOperations.insertPrevSiblingChild(first,contentList);
  for (  SNode selectedNode : ListSequence.fromList(selectedNodes)) {
    ListSequence.fromList(SLinkOperations.getTargets(contentList,"content",true)).addElement(SNodeOperations.cast(selectedNode,"jetbrains.mps.xml.structure.Content"));
  }
  SNodeFactoryOperations.addNewChild(contentList,"content","jetbrains.mps.xml.structure.Content");
}
