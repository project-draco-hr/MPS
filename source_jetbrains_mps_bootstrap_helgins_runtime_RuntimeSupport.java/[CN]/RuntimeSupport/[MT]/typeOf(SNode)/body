{
  if (node == null)   return null;
  SNode type;
  NodeTypesComponent currentTypesComponent=myTypeChecker.getCurrentTypesComponent();
  if (currentTypesComponent != null) {
    type=currentTypesComponent.getRawTypeFromContext(node);
    if (type != null)     return type;
  }
  NodeTypesComponent nodeTypesComponent=NodeTypesComponentsRepository.getInstance().getNodeTypesComponent(node.getContainingRoot());
  if (nodeTypesComponent != null && nodeTypesComponent != currentTypesComponent) {
    type=nodeTypesComponent.getType(node);
    if (type != null)     return type;
  }
  SNode var=createNewRuntimeTypesVariable(false);
  type=TypeChecker.asType(var);
  myTypeChecker.getMainContext().put(node,type);
  return myTypeChecker.getEquationManager().getRepresentator(type);
}
