{
  if (node == null)   return null;
  NodeTypesComponent nodeTypesComponent=NodeTypesComponentsRepository.getInstance().getNodeTypesComponent(node.getContainingRoot());
  SNode type;
  if (nodeTypesComponent != null) {
    type=nodeTypesComponent.getType(node);
    if (type != null)     return type;
  }
  Map<SNode,SNode> typesContext=myTypeChecker.getMainContext();
  type=typesContext.get(node);
  if (type == null) {
    SNode var=createNewRuntimeTypesVariable(false);
    type=TypeChecker.asType(var);
    typesContext.put(node,type);
  }
  return myTypeChecker.getEquationManager().getRepresentator(type);
}
