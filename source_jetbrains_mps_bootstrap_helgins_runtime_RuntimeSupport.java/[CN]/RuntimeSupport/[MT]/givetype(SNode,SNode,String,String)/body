{
  Map<SNode,SNode> typesContext=myTypeChecker.getMainContext();
  NodeTypesComponent_new component=myTypeChecker.getCurrentTypesComponent();
  if (component != null) {
    component.addDependcyOnCurrent(node);
    component.markNodeAsAffectedByRule(node,ruleModel,ruleId);
  }
  SNode nodesType=typesContext.get(node);
  if (nodesType == null) {
    typesContext.put(node,getRepresentatorIfNecessary(type,component));
  }
 else {
    createEquation(nodesType,type,node,null,ruleModel,ruleId);
  }
}
