{
  for (  List<Edge> list : Sequence.fromIterable(MapSequence.fromMap(history).values())) {
    Edge first=ListSequence.fromList(list).first();
    if (MapSequence.fromMap(replacedEdges).containsKey(first)) {
      ListSequence.fromList(list).setElement(0,MapSequence.fromMap(replacedEdges).get(first));
    }
    if (ListSequence.fromList(list).count() > 1) {
      Edge last=ListSequence.fromList(list).last();
      if (MapSequence.fromMap(replacedEdges).containsKey(last)) {
        ListSequence.fromList(list).setElement(ListSequence.fromList(list).count() - 1,MapSequence.fromMap(replacedEdges).get(last));
      }
    }
  }
}
