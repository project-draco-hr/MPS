{
  IdeMain.setTestMode(true);
  configureMPS();
  URL resource=MergeTestCase.class.getResource(pathToZip);
  File zipfile=new File(resource.getFile());
  final SModel[] models=MergeTestUtil.loadTestModels(zipfile);
  Merger merger=new Merger(getBase(models),getMyne(models),getRepo(models));
  merger.doRebuild(new Runnable(){
    public void run(){
    }
  }
);
  final SModel resultModel=merger.getResultModel();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      ModelAssert.assertDeepModelEquals(getExpected(models),resultModel);
    }
  }
);
}
