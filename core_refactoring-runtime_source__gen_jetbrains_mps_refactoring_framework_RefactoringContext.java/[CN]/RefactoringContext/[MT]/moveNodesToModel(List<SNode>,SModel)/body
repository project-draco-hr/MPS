{
  if (sourceNodes.isEmpty()) {
    return new ArrayList<SNode>();
  }
  SModel sourceModel=sourceNodes.get(0).getModel();
  HashMap<SNode,SNode> mapping=new HashMap<SNode,SNode>();
  List<SNode> targetNodes=CopyUtil.copy(sourceNodes,mapping);
  for (  SNode node : targetNodes) {
    targetModel.addRoot(node);
  }
  for (  SNode key : mapping.keySet()) {
    SNode target=mapping.get(key);
    myMoveMap.put(new StructureModificationData.FullNodeId(key),new StructureModificationData.FullNodeId(target));
    myCachesAreUpToDate=false;
    myLoggedData.getData().add(new StructureModification.MoveNode(new SNodePointer(key),new SNodePointer(target)));
  }
  for (  SNode node : sourceNodes) {
    node.delete();
  }
  SModelOperations.validateLanguagesAndImports(targetModel,true,true);
  return targetNodes;
}
