{
  myFQNamesToConceptFeaturesCache.clear();
  myNodeIdsToFullNodeIdsCache.clear();
  for (  StructureModificationData.FullNodeId fullNodeId : myMoveMap.keySet()) {
    SNodeId nodeId=fullNodeId.getNodeId();
    Set<StructureModificationData.FullNodeId> ids=myNodeIdsToFullNodeIdsCache.get(nodeId);
    if (ids == null) {
      ids=new HashSet<StructureModificationData.FullNodeId>();
      myNodeIdsToFullNodeIdsCache.put(nodeId,ids);
    }
    ids.add(fullNodeId);
  }
  for (  StructureModificationData.ConceptFeature conceptFeature : myConceptFeatureMap.keySet()) {
    String conceptFQName=conceptFeature.getConceptFQName();
    Set<StructureModificationData.ConceptFeature> conceptFeatures=myFQNamesToConceptFeaturesCache.get(conceptFQName);
    if (conceptFeatures == null) {
      conceptFeatures=new HashSet<StructureModificationData.ConceptFeature>();
      myFQNamesToConceptFeaturesCache.put(conceptFQName,conceptFeatures);
    }
    conceptFeatures.add(conceptFeature);
  }
  myCachesAreUpToDate=true;
}
