{
  SNode ifStatement=SNodeOperations.getAncestor(node,"jetbrains.mps.baseLanguage.structure.IfStatement",false,false);
  if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(ifStatement),"jetbrains.mps.baseLanguage.structure.StatementList")) {
    final SNode statementList=SNodeOperations.cast(SNodeOperations.getParent(ifStatement),"jetbrains.mps.baseLanguage.structure.StatementList");
    final Wrappers._int index=new Wrappers._int(ListSequence.fromList(SLinkOperations.getTargets(statementList,"statement",true)).indexOf(ifStatement));
    ListSequence.fromList(SLinkOperations.getTargets(statementList,"statement",true)).removeElementAt(index.value);
    ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(ifStatement,"ifTrue",true),"statement",true)).visitAll(new IVisitor<SNode>(){
      public void visit(      SNode it){
        ListSequence.fromList(SLinkOperations.getTargets(statementList,"statement",true)).insertElement(index.value,it);
        index.value+=1;
      }
    }
);
  }
 else {
    SNode statement=SNodeOperations.replaceWithNewChild(ifStatement,"jetbrains.mps.baseLanguage.structure.BlockStatement");
    SLinkOperations.setTarget(statement,"statements",SLinkOperations.getTarget(ifStatement,"ifTrue",true),true);
  }
  SNodeOperations.deleteNode(ifStatement);
}
