{
  SModel m=new SModel(descriptor.getSModelReference());
  for (  IFile child : ListSequence.fromList(dir.getChildren())) {
    if (!(child.getName().endsWith(".txt"))) {
      continue;
    }
    SNode root=SModelOperations.createNewRootNode(m,"jetbrains.mps.samples.plainText.structure.TextFile",null);
    try {
      InputStream is=child.openInputStream();
      byte[] buf=new byte[1000000];
      int len=is.read(buf);
      SPropertyOperations.set(root,"name",child.getName());
      SPropertyOperations.set(root,"text",new String(buf,0,len));
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  return new ModelLoadResult(m,ModelLoadingState.FULLY_LOADED);
}
