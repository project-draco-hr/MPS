{
  super("Migrate IModule to SModule");
  this.addRefactoring(new AbstractMigrationRefactoring(operationContext){
    public String getName(){
      return "Replacing static field references referencing static fields declared in jetbrains.mps.project.IModule classified with static fields from org.jetbrains.mps.openapi.module.SModule";
    }
    public String getAdditionalInfo(){
      return "Replacing static field references referencing static fields declared in jetbrains.mps.project.IModule classified with static fields from org.jetbrains.mps.openapi.module.SModule";
    }
    public String getFqNameOfConceptToSearchInstances(){
      return "jetbrains.mps.baseLanguage.structure.StaticFieldReference";
    }
    public boolean isApplicableInstanceNode(    SNode node){
      SReference reference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.StaticFieldReference","staticFieldDeclaration"));
      if (reference == null || jetbrains.mps.util.SNodeOperations.getTargetNodeSilently(reference) != null) {
        return false;
      }
      if (!(PersistenceFacade.getInstance().createModelReference("f:java_stub#6ed54515-acc8-4d1e-a16c-9fd6cfe951ea#jetbrains.mps.project(MPS.Core/jetbrains.mps.project@java_stub)").equals(reference.getTargetSModelReference()))) {
        return false;
      }
      SNodeId targetNodeId=reference.getTargetNodeId();
      return false;
    }
    public void doUpdateInstanceNode(    SNode node){
      SReference oldReference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.StaticFieldReference","staticFieldDeclaration"));
      SReference newReference=new StaticReference(oldReference.getRole(),node,PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),oldReference.getTargetNodeId(),((jetbrains.mps.smodel.SReference)oldReference).getResolveInfo());
      node.setReference(oldReference.getRole(),null);
      node.setReference("staticFieldDeclaration",newReference);
      ((SModelInternal)node.getModel()).addModelImport(PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),false);
      ((AbstractModule)node.getModel().getModule()).addDependency(PersistenceFacade.getInstance().createModuleReference("8865b7a8-5271-43d3-884c-6fd1d9cfdd34(MPS.OpenAPI)"),false);
    }
    public boolean isShowAsIntention(){
      return false;
    }
  }
);
  this.addRefactoring(new AbstractMigrationRefactoring(operationContext){
    public String getName(){
      return "Pull up and remove all methods from jetbrains.mps.project.IModule to org.jetbrains.mps.openapi.module.SModule";
    }
    public String getAdditionalInfo(){
      return "Pull up and remove all methods from jetbrains.mps.project.IModule to org.jetbrains.mps.openapi.module.SModule";
    }
    public String getFqNameOfConceptToSearchInstances(){
      return "jetbrains.mps.baseLanguage.structure.IMethodCall";
    }
    public boolean isApplicableInstanceNode(    SNode node){
      SReference reference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.IMethodCall","baseMethodDeclaration"));
      if (reference == null || jetbrains.mps.util.SNodeOperations.getTargetNodeSilently(reference) != null) {
        return false;
      }
      if (!(PersistenceFacade.getInstance().createModelReference("f:java_stub#6ed54515-acc8-4d1e-a16c-9fd6cfe951ea#jetbrains.mps.project(MPS.Core/jetbrains.mps.project@java_stub)").equals(reference.getTargetSModelReference()))) {
        return false;
      }
      SNodeId targetNodeId=reference.getTargetNodeId();
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getModuleId():org.jetbrains.mps.openapi.module.SModuleId").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getModuleName():java.lang.String").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getModuleReference():org.jetbrains.mps.openapi.module.SModuleReference").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.isReadOnly():boolean").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.isPackaged():boolean").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getRepository():org.jetbrains.mps.openapi.module.SRepository").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getDeclaredDependencies():java.lang.Iterable").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getUsedLanguages():java.util.Set").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.resolveInDependencies(org.jetbrains.mps.openapi.model.SModelId):org.jetbrains.mps.openapi.model.SModel").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getModel(org.jetbrains.mps.openapi.model.SModelId):org.jetbrains.mps.openapi.model.SModel").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getModels():java.lang.Iterable").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getFacets():java.lang.Iterable").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getFacet(java.lang.Class):org.jetbrains.mps.openapi.module.SModuleFacet").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.getModelRoots():java.lang.Iterable").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.addModuleListener(org.jetbrains.mps.openapi.module.SModuleListener):void").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModule.removeModuleListener(org.jetbrains.mps.openapi.module.SModuleListener):void").equals(targetNodeId)) {
        return true;
      }
      return false;
    }
    public void doUpdateInstanceNode(    SNode node){
      SReference oldReference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.IMethodCall","baseMethodDeclaration"));
      SReference newReference=new StaticReference(oldReference.getRole(),node,PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),oldReference.getTargetNodeId(),((jetbrains.mps.smodel.SReference)oldReference).getResolveInfo());
      node.setReference(oldReference.getRole(),null);
      node.setReference("baseMethodDeclaration",newReference);
      ((SModelInternal)node.getModel()).addModelImport(PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),false);
      ((AbstractModule)node.getModel().getModule()).addDependency(PersistenceFacade.getInstance().createModuleReference("8865b7a8-5271-43d3-884c-6fd1d9cfdd34(MPS.OpenAPI)"),false);
    }
    public boolean isShowAsIntention(){
      return false;
    }
  }
);
  this.addRefactoring(new AbstractMigrationRefactoring(operationContext){
    public String getName(){
      return "Replacing static field references referencing static fields declared in jetbrains.mps.project.structure.modules.ModuleReference classified with static fields from org.jetbrains.mps.openapi.module.SModuleReference";
    }
    public String getAdditionalInfo(){
      return "Replacing static field references referencing static fields declared in jetbrains.mps.project.structure.modules.ModuleReference classified with static fields from org.jetbrains.mps.openapi.module.SModuleReference";
    }
    public String getFqNameOfConceptToSearchInstances(){
      return "jetbrains.mps.baseLanguage.structure.StaticFieldReference";
    }
    public boolean isApplicableInstanceNode(    SNode node){
      SReference reference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.StaticFieldReference","staticFieldDeclaration"));
      if (reference == null || jetbrains.mps.util.SNodeOperations.getTargetNodeSilently(reference) != null) {
        return false;
      }
      if (!(PersistenceFacade.getInstance().createModelReference("f:java_stub#6ed54515-acc8-4d1e-a16c-9fd6cfe951ea#jetbrains.mps.project.structure.modules(MPS.Core/jetbrains.mps.project.structure.modules@java_stub)").equals(reference.getTargetSModelReference()))) {
        return false;
      }
      SNodeId targetNodeId=reference.getTargetNodeId();
      return false;
    }
    public void doUpdateInstanceNode(    SNode node){
      SReference oldReference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.StaticFieldReference","staticFieldDeclaration"));
      SReference newReference=new StaticReference(oldReference.getRole(),node,PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),oldReference.getTargetNodeId(),((jetbrains.mps.smodel.SReference)oldReference).getResolveInfo());
      node.setReference(oldReference.getRole(),null);
      node.setReference("staticFieldDeclaration",newReference);
      ((SModelInternal)node.getModel()).addModelImport(PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),false);
      ((AbstractModule)node.getModel().getModule()).addDependency(PersistenceFacade.getInstance().createModuleReference("8865b7a8-5271-43d3-884c-6fd1d9cfdd34(MPS.OpenAPI)"),false);
    }
    public boolean isShowAsIntention(){
      return false;
    }
  }
);
  this.addRefactoring(new AbstractMigrationRefactoring(operationContext){
    public String getName(){
      return "Pull up and remove all methods from jetbrains.mps.project.structure.modules.ModuleReference to org.jetbrains.mps.openapi.module.SModuleReference";
    }
    public String getAdditionalInfo(){
      return "Pull up and remove all methods from jetbrains.mps.project.structure.modules.ModuleReference to org.jetbrains.mps.openapi.module.SModuleReference";
    }
    public String getFqNameOfConceptToSearchInstances(){
      return "jetbrains.mps.baseLanguage.structure.IMethodCall";
    }
    public boolean isApplicableInstanceNode(    SNode node){
      SReference reference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.IMethodCall","baseMethodDeclaration"));
      if (reference == null || jetbrains.mps.util.SNodeOperations.getTargetNodeSilently(reference) != null) {
        return false;
      }
      if (!(PersistenceFacade.getInstance().createModelReference("f:java_stub#6ed54515-acc8-4d1e-a16c-9fd6cfe951ea#jetbrains.mps.project.structure.modules(MPS.Core/jetbrains.mps.project.structure.modules@java_stub)").equals(reference.getTargetSModelReference()))) {
        return false;
      }
      SNodeId targetNodeId=reference.getTargetNodeId();
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModuleReference.getModuleId():org.jetbrains.mps.openapi.module.SModuleId").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModuleReference.getModuleName():java.lang.String").equals(targetNodeId)) {
        return true;
      }
      if (jetbrains.mps.smodel.SNodeId.fromString("~SModuleReference.resolve(org.jetbrains.mps.openapi.module.SRepository):org.jetbrains.mps.openapi.module.SModule").equals(targetNodeId)) {
        return true;
      }
      return false;
    }
    public void doUpdateInstanceNode(    SNode node){
      SReference oldReference=SNodeOperations.getReference(node,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.IMethodCall","baseMethodDeclaration"));
      SReference newReference=new StaticReference(oldReference.getRole(),node,PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),oldReference.getTargetNodeId(),((jetbrains.mps.smodel.SReference)oldReference).getResolveInfo());
      node.setReference(oldReference.getRole(),null);
      node.setReference("baseMethodDeclaration",newReference);
      ((SModelInternal)node.getModel()).addModelImport(PersistenceFacade.getInstance().createModelReference("f:java_stub#8865b7a8-5271-43d3-884c-6fd1d9cfdd34#org.jetbrains.mps.openapi.module(MPS.OpenAPI/org.jetbrains.mps.openapi.module@java_stub)"),false);
      ((AbstractModule)node.getModel().getModule()).addDependency(PersistenceFacade.getInstance().createModuleReference("8865b7a8-5271-43d3-884c-6fd1d9cfdd34(MPS.OpenAPI)"),false);
    }
    public boolean isShowAsIntention(){
      return false;
    }
  }
);
}
