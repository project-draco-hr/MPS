{
  Module module=configuration.getFacet().getModule();
  String moduleFileName=module.getModuleFilePath();
  copyResource(moduleFileName,"makeTests.iml","/tests/makeTests/makeTests.iml");
  final IFile codeModel=copyResource("models","code.mps","code.mps","/tests/makeTests/models/code.mps");
  final IFile dataModel=copyResource("models","data.mps","data.mps","/tests/makeTests/models/data.mps");
  if (secondPass) {
    final IFile caches=copyResource("","caches.zip","caches.zip","/tests/makeTests/caches.zip");
    String cachesOutputPath=MPSCompilerPaths.getCachesOutputPath(new MPSCompiler2(module.getProject()),module,false);
    ZipUtil.extract(new File(caches.getPath()),new File(cachesOutputPath),null);
    new File(cachesOutputPath,"code/generated").setLastModified(codeModel.lastModified() - 1L);
    new File(cachesOutputPath,"data/generated").setLastModified(dataModel.lastModified() - 1L);
  }
  configuration.getState().setModelRootPaths(codeModel.getParent().getPath());
  prepareTestData(configuration,codeModel.getParent());
  secondPass=true;
}
