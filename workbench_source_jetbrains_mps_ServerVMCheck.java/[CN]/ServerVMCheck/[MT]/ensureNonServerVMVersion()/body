{
  if (InternalFlag.isInternalMode())   return true;
  if (SystemInfo.isMac)   return true;
  String vmName=System.getProperty("java.vm.name");
  if (!vmName.toLowerCase().contains("server"))   return true;
  if (Main.isHeadless()) {
    LOG.error("MPS can't be started in headless mode under server VM: " + vmName);
    return false;
  }
  int result=JOptionPane.showConfirmDialog(null,"<html>MPS was launched under <b>server VM</b>: " + vmName + ".<br>"+ "This will result in MPS crash with PermGen space error after some time.","Compatibility Error",JOptionPane.YES_OPTION,JOptionPane.ERROR_MESSAGE);
  return result != 0;
}
