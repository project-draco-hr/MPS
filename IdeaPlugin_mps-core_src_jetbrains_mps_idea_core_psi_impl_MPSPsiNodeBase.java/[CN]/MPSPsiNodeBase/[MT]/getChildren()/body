{
  int count=0;
  MPSPsiNodeBase curr=first;
  while (curr != null) {
    curr=curr.next;
    count++;
  }
  PsiElement[] result=new PsiElement[count];
  curr=first;
  count=0;
  while (curr != null) {
    result[count++]=curr;
    curr=curr.next;
  }
  return result;
}
