{
  if (myRequiredSet.isEmpty()) {
    return;
  }
  loadCachedModel();
  List<SNode> toCopy=new ArrayList<SNode>(myRequiredSet.size() * 2 + 16);
  List<MappingsMemento> toImport=new ArrayList<MappingsMemento>(myRequiredSet.size() * 2);
  for (  SNode root : myCachedModel.getRoots()) {
    String originalId=myCachedModel.getOriginal(root);
    if (myRequiredSet.containsKey(originalId)) {
      SNode originalRoot=myRequiredSet.get(originalId);
      if (nextStepToOriginalMap == null) {
        nextStepToOriginalMap=new HashMap<SNode,SNode>();
      }
      nextStepToOriginalMap.put(root,originalRoot);
      toCopy.add(root);
      MappingsMemento val=myCachedModel.getMappingsMemento(originalId);
      if (val != null) {
        toImport.add(val);
      }
    }
  }
  for (  SNode node : toCopy) {
    currentOutputModel.addRoot(node);
  }
  for (  MappingsMemento val : toImport) {
    mappings.importPersisted(val,currentInputModel,currentOutputModel);
  }
}
