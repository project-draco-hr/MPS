{
  SNode parameterNode=(SNode)getParameterObject();
  if (myCurrentReferent != parameterNode) {
    SNode linkDeclaration=myLinkDeclaration;
    if (!SModelUtil.isAcceptableTarget(linkDeclaration,parameterNode)) {
      throw new RuntimeException("Couldn't set referent node: " + SNodeOperations.getDebugText(parameterNode));
    }
    SNodeAccessUtil.setReferenceTarget(getSourceNode(),SModelUtil.getGenuineLinkRole(linkDeclaration),parameterNode);
    if (editorContext != null) {
      editorContext.flushEvents();
      jetbrains.mps.openapi.editor.cells.EditorCell selectedCell=editorContext.getSelectedCell();
      if (selectedCell instanceof EditorCell_Label && ((EditorCell_Label)selectedCell).isEditable()) {
        EditorCell_Label cell=(EditorCell_Label)selectedCell;
        cell.end();
      }
    }
  }
  return null;
}
