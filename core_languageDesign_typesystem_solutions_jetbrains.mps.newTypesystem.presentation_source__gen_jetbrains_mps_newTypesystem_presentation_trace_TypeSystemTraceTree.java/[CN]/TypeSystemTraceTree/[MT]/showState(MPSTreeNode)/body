{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      AbstractOperation rootDifference=myCurrentContext.getOperation();
      Object difference=newNode.getUserObject();
      if (myOldOperation == null) {
        myCurrentState.clear(false);
        myCurrentState.executeOperationsBeforeAnchor(rootDifference,difference);
      }
 else {
        myCurrentState.updateState(myOldOperation,(AbstractOperation)difference);
      }
      myParent.resetState(myCurrentState);
      myOldOperation=(AbstractOperation)difference;
    }
  }
);
}
