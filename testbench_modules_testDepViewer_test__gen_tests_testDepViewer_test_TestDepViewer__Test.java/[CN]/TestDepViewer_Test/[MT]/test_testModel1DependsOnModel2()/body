{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      ReferencesFinder finder=new ReferencesFinder();
      DependencyViewerScope testScope=new DependencyViewerScope();
      testScope.add(SModelRepository.getInstance().getModelDescriptor("tests.testDepViewer.model1"));
      DependencyViewerScope targetScope=new DependencyViewerScope();
      targetScope.add(SModelRepository.getInstance().getModelDescriptor("tests.testDepViewer.model2"));
      Iterable<SNode> nodes=finder.getNodes(testScope);
      SearchResults refSearchResults=finder.getRefsBetweenScopes(nodes,testScope,targetScope,new EmptyProgressMonitor());
      Assert.assertFalse(refSearchResults.getSearchResults().isEmpty());
    }
  }
);
}
