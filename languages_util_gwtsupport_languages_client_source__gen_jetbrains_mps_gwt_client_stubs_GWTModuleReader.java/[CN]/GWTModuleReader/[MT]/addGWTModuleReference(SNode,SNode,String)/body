{
  SModelReference trgsmref=this.gwtstubResolver.stubModelReference(namespace(fqName));
  if (SNodeOperations.getModel(src).getReference().equals(trgsmref)) {
    SNode trg=ListSequence.fromList(SModelOperations.getRoots(SNodeOperations.getModel(src),"jetbrains.mps.gwt.client.structure.GWTModule")).findFirst(new IWhereFilter<SNode>(){
      public boolean accept(      SNode gwtmod){
        return SPropertyOperations.getString(gwtmod,"name").equals(shortName(fqName));
      }
    }
);
    src.setReference(SReference.create(SPropertyOperations.getString(link,"role"),src,trg).getRole(),SReference.create(SPropertyOperations.getString(link,"role"),src,trg));
  }
 else {
    src.setReference(new DynamicReference(SPropertyOperations.getString(link,"role"),src,trgsmref,shortName(fqName)).getRole(),new DynamicReference(SPropertyOperations.getString(link,"role"),src,trgsmref,shortName(fqName)));
  }
}
