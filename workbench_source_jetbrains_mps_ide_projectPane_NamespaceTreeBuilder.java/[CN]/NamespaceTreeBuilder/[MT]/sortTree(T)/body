{
  List<MPSTreeNode> nodes=new ArrayList<MPSTreeNode>();
  List<T> namespaces=new ArrayList<T>();
  for (int i=0; i < node.getChildCount(); i++) {
    MPSTreeNode child=(MPSTreeNode)node.getChildAt(i);
    if (myBuilder.isNamespaceNode(child)) {
      sortTree((T)child);
      namespaces.add((T)child);
    }
 else {
      nodes.add(child);
    }
  }
  Collections.sort(namespaces,new ToStringComparator());
  Collections.sort(nodes,new jetbrains.mps.ide.projectPane.logicalview.nodes.ModuleTreeNodeComparator());
  node.removeAllChildren();
  for (  T ns : namespaces) {
    node.add(ns);
  }
  for (  MPSTreeNode n : nodes) {
    node.add(n);
  }
}
