{
  List<MPSTreeNode> nodes=new ArrayList<MPSTreeNode>();
  List<NamespaceNode> namespaces=new ArrayList<NamespaceNode>();
  for (int i=0; i < node.getChildCount(); i++) {
    MPSTreeNode child=(MPSTreeNode)node.getChildAt(i);
    if (child instanceof NamespaceNode) {
      sortTree((NamespaceNode)child);
      namespaces.add((NamespaceNode)child);
    }
 else {
      nodes.add(child);
    }
  }
  Collections.sort(namespaces,new ToStringComparator());
  if (isSorted()) {
    Collections.sort(nodes,new ToStringComparator());
  }
  node.removeAllChildren();
  for (  NamespaceNode ns : namespaces) {
    node.add(ns);
  }
  for (  MPSTreeNode n : nodes) {
    node.add(n);
  }
}
