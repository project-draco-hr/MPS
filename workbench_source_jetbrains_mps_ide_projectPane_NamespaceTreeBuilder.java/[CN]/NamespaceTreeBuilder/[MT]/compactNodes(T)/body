{
  for (int i=0; i < node.getChildCount(); i++) {
    MPSTreeNode child=(MPSTreeNode)node.getChildAt(i);
    if (myBuilder.isNamespaceNode(child)) {
      compactNodes((T)child);
    }
  }
  if (node.getParent() != null && node.getChildCount() == 1 && myBuilder.isNamespaceNode((MPSTreeNode)node.getChildAt(0))) {
    T child=(T)node.getChildAt(0);
    myBuilder.setName(node,myBuilder.getName(node) + "." + myBuilder.getName(child));
    for (    MPSTreeNode c : (List<MPSTreeNode>)CollectionUtil.asList(CollectionUtil.asIterable(child.children()))) {
      child.remove(c);
      node.add(c);
    }
    node.remove(child);
  }
}
