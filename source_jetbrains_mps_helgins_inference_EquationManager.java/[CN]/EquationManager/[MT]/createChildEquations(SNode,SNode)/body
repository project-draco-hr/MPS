{
  Set<Pair<SNode,SNode>> result=new HashSet<Pair<SNode,SNode>>();
  Set<String> childRoles1=node1.getChildRoles();
  Set<String> childRoles2=node2.getChildRoles();
  Set<String> allChildRoles=new HashSet<String>(childRoles1);
  allChildRoles.addAll(childRoles2);
  for (  String childRole : allChildRoles) {
    List<SNode> childrenInNode1=node1.getChildren(childRole);
    List<SNode> childrenInNode2=node2.getChildren(childRole);
    Iterator<SNode> childrenIterator2=childrenInNode2.iterator();
    for (    SNode child1 : childrenInNode1) {
      SNode child2=childrenIterator2.hasNext() ? childrenIterator2.next() : null;
      result.add(new Pair<SNode,SNode>(child1,child2));
    }
    for (; childrenIterator2.hasNext(); ) {
      SNode child2=childrenIterator2.next();
      result.add(new Pair<SNode,SNode>(null,child2));
    }
  }
  return result;
}
