{
  FastRuleFinder rf=myRuleManager.getRuleFinder();
  Collection<SNode> outputNodes=tryToReduce(rf,new DefaultTemplateContext(inputNode),env);
  if (outputNodes != null) {
    if (outputNodes.size() == 1) {
      SNode reducedNode=outputNodes.iterator().next();
      addCopiedOutputNodeForInputNode(inputNode,reducedNode);
      if (TracingUtil.getInput(reducedNode) == null) {
        jetbrains.mps.util.SNodeOperations.copyUserObjects(inputNode,reducedNode);
      }
      if (inputNode.getModel() == getGeneratorSessionContext().getOriginalInputModel()) {
        TracingUtil.putInputNode(reducedNode,inputNode);
      }
    }
    return outputNodes;
  }
  return null;
}
