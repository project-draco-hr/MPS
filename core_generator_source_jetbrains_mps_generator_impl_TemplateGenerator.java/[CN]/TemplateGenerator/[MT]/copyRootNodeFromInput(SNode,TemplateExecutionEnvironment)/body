{
  for (  TemplateDropRootRule dropRootRule : myRuleManager.getDropRootRules()) {
    if (isApplicableDropRootRule(inputRootNode,dropRootRule,environment)) {
      return;
    }
  }
  myGenerationTracer.pushInputNode(inputRootNode);
  try {
    boolean[] changed=new boolean[]{false};
    SNode root=copyNodeFromInputNode_internal(null,inputRootNode,environment.getReductionContext(),changed);
    registerRoot(root,inputRootNode,null,true);
    if (changed[0]) {
      setChanged();
    }
  }
  finally {
    myGenerationTracer.closeInputNode(inputRootNode);
  }
}
