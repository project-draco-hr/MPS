{
  try {
    if (environment.getQueryExecutor().isApplicable(rule,environment,null)) {
      myNewRootsAreAdded=true;
      myGenerationTracer.pushRule(rule.getRuleNode());
      try {
        createRootNodeByRule(rule,environment);
      }
  finally {
        myGenerationTracer.closeRule(rule.getRuleNode());
      }
    }
  }
 catch (  GenerationException e) {
    if (e instanceof GenerationCanceledException)     throw (GenerationCanceledException)e;
    if (e instanceof GenerationFailureException)     throw (GenerationFailureException)e;
    showErrorMessage(null,rule.getRuleNode().resolve(MPSModuleRepository.getInstance()),"internal error: " + e.toString());
  }
}
