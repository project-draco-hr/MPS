{
  Charset rv=myEncoding;
  if (rv == null) {
    final String encodingString=getLegacyEncoding();
    if (encodingString != null && Charset.isSupported(encodingString)) {
      rv=Charset.forName(encodingString);
    }
  }
  return rv == null ? FileUtil.DEFAULT_CHARSET : rv;
}
