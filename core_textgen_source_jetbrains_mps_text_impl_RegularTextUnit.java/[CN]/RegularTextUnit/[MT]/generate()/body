{
  if (!TextGenRegistry.getInstance().hasTextGen(myStartNode)) {
    myState=Status.Empty;
    return;
  }
  myTraceCollector=new TraceInfoCollector();
  TextBuffer trueBuffer=new TextBufferImpl();
  myLayoutBuilder.prepareBuffer(trueBuffer);
  myLegacyBuffer=TextGen.newUserObjectHolder(getStartNode());
  myState=Status.Failed;
  doGenerate(myLegacyBuffer,trueBuffer);
  final BufferSnapshot textSnapshot=myLayoutBuilder.prepareSnapshot(trueBuffer);
  myTraceCollector.populatePositions(textSnapshot);
  myOutcome=textSnapshot.getText().toString();
  if (myLegacyBuffer.hasErrors()) {
    myState=Status.Failed;
  }
 else {
    myState=Status.Generated;
  }
}
