{
  VirtualFile virtualFile=VirtualFileUtils.getVirtualFile(file);
  AbstractVcs vcs=VcsUtil.getVcsForFile(virtualFile);
  if (vcs == null) {
    return null;
  }
  DiffProvider diffProvider=vcs.getDiffProvider();
  if (diffProvider == null) {
    return null;
  }
  return diffProvider.getCurrentRevision(virtualFile);
}
