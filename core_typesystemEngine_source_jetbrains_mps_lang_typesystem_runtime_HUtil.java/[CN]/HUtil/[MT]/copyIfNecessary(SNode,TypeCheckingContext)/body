{
  if (node != null && (node.getParent() != null || node.getModel() != null && node.getModel().isRoot(node))) {
    SNode copy=CopyUtil.copy(node,new THashMap<SNode,SNode>(1),false);
    if (typeCheckingContext != null) {
      if (isRuntimeTypeVariable(copy)) {
        typeCheckingContext.registerTypeVariable(copy);
      }
    }
    return copy;
  }
 else {
    return node;
  }
}
