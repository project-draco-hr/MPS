{
  SNode variable=myTypeChecker.getRulesManager().provideVariable(node);
  if (variable != null) {
    return variable;
  }
 else {
    for (    SNode child : new ArrayList<SNode>(node.getChildren())) {
      SNode newChild=prepareType_internal(child);
      if (newChild != child) {
        node.replaceChild(child,newChild);
      }
    }
    return node;
  }
}
