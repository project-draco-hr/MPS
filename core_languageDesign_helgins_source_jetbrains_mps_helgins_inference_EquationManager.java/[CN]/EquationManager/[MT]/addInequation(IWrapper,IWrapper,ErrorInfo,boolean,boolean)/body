{
  IWrapper subtypeRepresentator=getRepresentatorWrapper(subType);
  IWrapper supertypeRepresentator=getRepresentatorWrapper(supertype);
  if (PREPARE_TYPES) {
    if (subType == subtypeRepresentator && subType != null && subType.isConcrete()) {
      subtypeRepresentator=NodeWrapper.createWrapperFromNode(prepareType(subtypeRepresentator.getNode()),this);
    }
    if (supertype == supertypeRepresentator && supertype != null && supertype.isConcrete()) {
      supertypeRepresentator=NodeWrapper.createWrapperFromNode(prepareType(supertypeRepresentator.getNode()),this);
    }
  }
  if (NodeWrapper.fromWrapper(subtypeRepresentator) == NodeWrapper.fromWrapper(supertypeRepresentator))   return;
  if (subtypeRepresentator instanceof NodeWrapper && supertypeRepresentator instanceof NodeWrapper) {
    SNode node1=subtypeRepresentator.getNode();
    SNode node2=supertypeRepresentator.getNode();
    Set<InequationReplacementRule_Runtime> inequationReplacementRules=myTypeChecker.getRulesManager().getReplacementRules(node1,node2);
    for (    InequationReplacementRule_Runtime inequationReplacementRule : inequationReplacementRules) {
      inequationReplacementRule.processInequation(node1,node2,errorInfo);
      return;
    }
  }
  RuntimeTypeVariable varSubtype=subtypeRepresentator == null ? null : subtypeRepresentator.getVariable();
  RuntimeTypeVariable varSupertype=supertypeRepresentator == null ? null : supertypeRepresentator.getVariable();
  Set<SNodePointer> vars=myNonConcreteVars.get(subtypeRepresentator);
  boolean hasNonConcreteVars=vars != null && !vars.isEmpty() && solveOnlyConcrete;
  if (varSubtype != null || hasNonConcreteVars || varSupertype != null) {
    if (isWeak) {
      addSubtyping(subtypeRepresentator,supertypeRepresentator,errorInfo);
    }
 else {
      addStrongSubtyping(subtypeRepresentator,supertypeRepresentator,errorInfo);
    }
    return;
  }
  if (subtypeRepresentator instanceof NodeWrapper) {
    NodeWrapper subtypeNodeWrapper=(NodeWrapper)subtypeRepresentator;
    SModel typesModel=myTypeChecker.getRuntimeTypesModel();
    NodeWrapper representatorCopy=NodeWrapper.fromNode(CopyUtil.copy(subtypeNodeWrapper.getNode(),typesModel),this);
    subtypeRepresentator=expandWrapper(null,representatorCopy,typesModel);
  }
  if (supertypeRepresentator instanceof NodeWrapper) {
    NodeWrapper supertypeNodeWrapper=(NodeWrapper)supertypeRepresentator;
    SModel typesModel=myTypeChecker.getRuntimeTypesModel();
    NodeWrapper representatorCopy=NodeWrapper.fromNode(CopyUtil.copy(supertypeNodeWrapper.getNode(),typesModel),this);
    supertypeRepresentator=expandWrapper(null,representatorCopy,typesModel);
  }
  if (myTypeChecker.getSubtypingManager().isSubtype(subtypeRepresentator,supertypeRepresentator,this,errorInfo,isWeak)) {
    return;
  }
  if (errorInfo.getErrorString() != null) {
    myTypeChecker.reportTypeError(errorInfo.getNodeWithError(),errorInfo.getErrorString());
    return;
  }
  String strongString=isWeak ? "" : " strong";
  IErrorReporter errorReporter=new EquationErrorReporter(this,"type ",subtypeRepresentator," is not a" + strongString + " subtype of ",supertypeRepresentator,"",errorInfo.getRuleModel(),errorInfo.getRuleId());
  myTypeChecker.reportTypeError(errorInfo.getNodeWithError(),errorReporter);
}
