{
  final Wrappers._T<List<IModule>> res=new Wrappers._T<List<IModule>>(ListSequence.fromList(new ArrayList<IModule>()));
  final MPSModuleRepository repo=MPSModuleRepository.getInstance();
  final IFile mpsFile=FileSystem.getInstance().getFileByPath(file.getPath());
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      res.value=(file.isDirectory() ? repo.findModulesUnderDir(mpsFile) : Collections.singletonList(repo.getModuleByFile(mpsFile)));
    }
  }
);
  return res.value;
}
