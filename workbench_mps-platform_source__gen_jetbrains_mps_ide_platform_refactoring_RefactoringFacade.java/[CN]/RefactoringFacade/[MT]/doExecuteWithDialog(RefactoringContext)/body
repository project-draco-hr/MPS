{
  final IRefactoring refactoring=refactoringContext.getRefactoring();
  final Project ideaProject=ProjectHelper.toIdeaProject(refactoringContext.getCurrentOperationContext().getProject());
  final List<SModel> modelsToGenerate=getModelsToGenerate(refactoring,refactoringContext);
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      final boolean cancelled=RefactoringAccess.getInstance().showRefactoringDialog(ideaProject,refactoringContext,refactoring,!(modelsToGenerate.isEmpty()));
      ModelAccess.instance().runWriteInEDT(new Runnable(){
        public void run(){
          if (!(cancelled)) {
            executeSimple(refactoringContext);
          }
        }
      }
);
    }
  }
);
}
