{
  final boolean[] cancelled=new boolean[]{true};
  ThreadUtils.runInUIThreadAndWait(new Runnable(){
    public void run(){
      IRefactoring refactoring=refactoringContext.getRefactoring();
      Frame mainFrame=ProjectHelper.toMainFrame(refactoringContext.getCurrentOperationContext().getProject());
      List<SModel> modelsToGenerate=getModelsToGenerate(refactoring,refactoringContext);
      cancelled[0]=RefactoringAccess.getInstance().showRefactoringDialog(mainFrame,refactoringContext,refactoring,!(modelsToGenerate.isEmpty()));
    }
  }
);
  if (cancelled[0]) {
    return;
  }
  doExecute(refactoringContext);
}
