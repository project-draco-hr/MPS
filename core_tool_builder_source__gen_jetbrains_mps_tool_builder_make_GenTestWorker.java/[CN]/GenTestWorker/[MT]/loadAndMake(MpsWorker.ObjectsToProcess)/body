{
  ModelAccess.instance().runWriteAction(new Runnable(){
    @Override public void run(){
      LibraryInitializer.getInstance().update();
    }
  }
);
  final JavaCompilerProperties properties=new JavaCompilerProperties(myWhatToDo);
  ModelAccess.instance().runReadAction(new Computable<MPSCompilationResult>(){
    public MPSCompilationResult compute(){
      return new ModuleMaker().make(go.getModules(),new EmptyProgressMonitor(){
        @Override public void step(        String text){
        }
        @Override public void start(        String taskName,        int work){
        }
      }
,new JavaCompilerOptions(JavaCompilerOptionsComponent.JavaVersion.parse(properties.getTargetJavaVersion())));
    }
  }
);
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      ClassLoaderManager.getInstance().reloadModules(go.getModules());
      for (      SModule m : MPSModuleRepository.getInstance().getModules()) {
        if (!((m instanceof AbstractModule))) {
          continue;
        }
        ((AbstractModule)m).updateModelsSet();
      }
    }
  }
);
}
