{
  if (indicator == null)   indicator=new EmptyProgressIndicator();
  SearchResults results=doGetResults(query,indicator);
  if (results.getSearchedNodes().contains(null)) {
    LOG.error("GetResults returned nodes containing null, which means that some of your filters and finders is incorrect");
    results.getSearchedNodes().remove(null);
  }
  boolean error=false;
  for (  SearchResult result : (List<SearchResult>)results.getSearchResults()) {
    if (result.getObject() == null) {
      LOG.error("GetResults returned results containing null, which means that some of your filters and finders is incorrect");
      error=true;
    }
  }
  if (error) {
    List<SearchResult> newResults=new ArrayList<SearchResult>();
    for (    SearchResult result : (List<SearchResult>)results.getSearchResults()) {
      if (result.getObject() != null) {
        newResults.add(result);
      }
    }
    results=new SearchResults(results.getSearchedNodes(),newResults);
  }
  return results;
}
