{
  removeAll();
  EditorCell selectedCell=getSelectedCell();
  int caretPosition=selectedCell instanceof EditorCell_Label ? ((EditorCell_Label)selectedCell).getTextLine().getCaretPosition() : 0;
  String id="";
  SNodeProxy nodeProxy=null;
  if (selectedCell != null) {
    nodeProxy=selectedCell.getSNodeProxy();
    id=(String)selectedCell.getUserObject(EditorCell.CELL_ID);
  }
  setRootCell(createRootCell(events));
  for (  JComponent component : myRootCell.getSwingComponents()) {
    this.add(component);
  }
  if (nodeProxy != null && id != null) {
    EditorCell cell=findNodeCell(nodeProxy.getNode(),id);
    changeSelection(cell);
    if (cell instanceof EditorCell_Label) {
      ((EditorCell_Label)cell).getTextLine().setCaretPosition(caretPosition);
    }
  }
 else {
    changeSelection(null);
  }
}
