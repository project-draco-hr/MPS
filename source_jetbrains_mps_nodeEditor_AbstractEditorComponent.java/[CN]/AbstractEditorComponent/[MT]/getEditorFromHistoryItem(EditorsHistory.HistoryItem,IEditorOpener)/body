{
  AbstractEditorComponent nodeEditor=historyItem.editor;
  EditorCell selectedCell=historyItem.selectedCell;
  Stack<EditorCell> selectedStack=historyItem.selectedStack;
  IEditor newEditor=editorOpener.openEditor(nodeEditor.getRootCell().getSNode(),nodeEditor.getOperationContext());
  if (selectedCell != null && newEditor instanceof NodeEditor) {
    AbstractEditorComponent aec=((NodeEditor)newEditor).getEditorComponent();
    EditorCell nodeCell=aec.findNodeCell(selectedCell.getSNode(),(String)selectedCell.getUserObject(EditorCell.CELL_ID));
    if (nodeCell == null)     nodeCell=aec.findNodeCell(selectedCell.getSNode());
    if (nodeCell != null)     aec.changeSelection(nodeCell);
  }
  if (newEditor instanceof NodeEditor) {
    AbstractEditorComponent aec=((NodeEditor)newEditor).getEditorComponent();
    aec.setSelectedStackFromHistory(selectedStack);
    return aec;
  }
  return null;
}
