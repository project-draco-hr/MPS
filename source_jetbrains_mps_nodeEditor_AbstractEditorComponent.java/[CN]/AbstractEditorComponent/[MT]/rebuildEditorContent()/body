{
  Point selectionPoint=null;
  Point prevSelectablePoint=null;
  int caretX=0;
  if (mySelectedCell != null) {
    selectionPoint=new Point(mySelectedCell.getX(),mySelectedCell.getY());
    EditorCell prevSelectableCell=findPrevSelectableCell(findNodeCell(mySelectedCell.getSemanticNode()));
    if (prevSelectableCell != null) {
      prevSelectablePoint=new Point(prevSelectableCell.getX(),prevSelectableCell.getY());
    }
    caretX=mySelectedCell.getCaretX();
  }
  mySelectedCell=null;
  mySelectedStack.clear();
  setRootCell(createRootCell());
  System.out.println("rebuildEditorContent root node: " + (myRootCell.getSemanticNode() != null ? myRootCell.getSemanticNode().getDebugText() : "NULL"));
  EditorCell newSelection=null;
  if (selectionPoint != null) {
    newSelection=findNearestCell(selectionPoint.x,selectionPoint.y);
  }
  if (newSelection == null && prevSelectablePoint != null) {
    newSelection=findNearestCell(prevSelectablePoint.x,prevSelectablePoint.y);
  }
  if (newSelection != null) {
    changeSelection(newSelection);
    newSelection.setCaretX(caretX);
  }
}
