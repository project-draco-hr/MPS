{
  if (keyEvent.getKeyCode() == KeyEvent.VK_LEFT && keyEvent.getModifiers() == 0) {
    return EditorCellAction.LEFT;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_RIGHT && keyEvent.getModifiers() == 0) {
    return EditorCellAction.RIGHT;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_UP && keyEvent.getModifiers() == 0) {
    return EditorCellAction.UP;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN && keyEvent.getModifiers() == 0) {
    return EditorCellAction.DOWN;
  }
  if (!SystemInfo.isMac && keyEvent.getKeyCode() == KeyEvent.VK_INSERT && keyEvent.getModifiers() == 0) {
    return EditorCellAction.INSERT_BEFORE;
  }
  if (SystemInfo.isMac && keyEvent.getKeyCode() == KeyEvent.VK_ENTER && keyEvent.getModifiers() == KeyEvent.SHIFT_MASK) {
    return EditorCellAction.INSERT_BEFORE;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.INSERT;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_LEFT && keyEvent.isControlDown() && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.LEFT_SPECIAL;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_RIGHT && keyEvent.isControlDown() && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.RIGHT_SPECIAL;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_UP && keyEvent.isControlDown() && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.UP_SPECIAL;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_W && keyEvent.isControlDown() && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.UP_SPECIAL;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN && keyEvent.isControlDown() && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.DOWN_SPECIAL;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_W && keyEvent.isControlDown() && keyEvent.isShiftDown() && !keyEvent.isAltDown()) {
    return EditorCellAction.DOWN_SPECIAL;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_HOME && keyEvent.isControlDown() && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.CTRL_HOME;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_END && keyEvent.isControlDown() && !(keyEvent.isShiftDown() || keyEvent.isAltDown())) {
    return EditorCellAction.CTRL_END;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_HOME && keyEvent.getModifiers() == 0) {
    return EditorCellAction.HOME;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_END && keyEvent.getModifiers() == 0) {
    return EditorCellAction.END;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_PAGE_DOWN && keyEvent.getModifiers() == 0) {
    return EditorCellAction.PAGE_DOWN;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_PAGE_UP && keyEvent.getModifiers() == 0) {
    return EditorCellAction.PAGE_UP;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_TAB && keyEvent.getModifiers() == 0) {
    return EditorCellAction.NEXT;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_TAB && keyEvent.isShiftDown() && !(keyEvent.isControlDown() || keyEvent.isAltDown())) {
    return EditorCellAction.PREV;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_SPACE && keyEvent.getModifiers() == 0) {
    EditorCell selectedCell=editorContext.getNodeEditorComponent().getSelectedCell();
    if (!(selectedCell instanceof EditorCell_Label)) {
      return EditorCellAction.RIGHT_TRANSFORM;
    }
    EditorCell_Label labelCell=(EditorCell_Label)selectedCell;
    if (!labelCell.isEditable()) {
      return EditorCellAction.RIGHT_TRANSFORM;
    }
    String text=labelCell.getText();
    int caretPosition=labelCell.getTextLine().getCaretPosition();
    if (caretPosition == text.length()) {
      return EditorCellAction.RIGHT_TRANSFORM;
    }
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_DELETE && keyEvent.isControlDown()) {
    return EditorCellAction.DELETE;
  }
  if ((keyEvent.getKeyCode() == KeyEvent.VK_DELETE || keyEvent.getKeyCode() == KeyEvent.VK_BACK_SPACE) && keyEvent.getModifiers() == 0) {
    EditorCell selectedCell=editorContext.getNodeEditorComponent().getSelectedCell();
    if (selectedCell instanceof EditorCell_Label) {
      if (((EditorCell_Label)selectedCell).getText().length() == 0) {
        return EditorCellAction.DELETE;
      }
    }
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_ADD && keyEvent.isControlDown()) {
    if (keyEvent.isShiftDown()) {
      return EditorCellAction.UNFOLD_ALL;
    }
 else {
      return EditorCellAction.UNFOLD;
    }
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_SUBTRACT && keyEvent.isControlDown()) {
    if (keyEvent.isShiftDown()) {
      return EditorCellAction.FOLD_ALL;
    }
 else {
      return EditorCellAction.FOLD;
    }
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_C && keyEvent.isControlDown()) {
    return EditorCellAction.COPY;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_X && keyEvent.isControlDown()) {
    return EditorCellAction.CUT;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_V && keyEvent.isControlDown()) {
    if (keyEvent.isShiftDown() && !keyEvent.isAltDown()) {
      return EditorCellAction.PASTE_BEFORE;
    }
 else     if (!keyEvent.isShiftDown() && keyEvent.isAltDown()) {
      return EditorCellAction.PASTE_AFTER;
    }
    return EditorCellAction.PASTE;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_INSERT && keyEvent.isControlDown()) {
    return EditorCellAction.COPY;
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_INSERT && keyEvent.isShiftDown()) {
    return EditorCellAction.PASTE;
  }
  return null;
}
