{
  EditorCell childCell=findNodeCell(child);
  if (childCell == null) {
    return;
  }
  EditorCell errorCell=null;
  if (childCell instanceof EditorCell_Collection) {
    errorCell=findErrorCell((EditorCell_Collection)childCell);
  }
  if (errorCell == null) {
    EditorCell_Collection collection=childCell.getParent();
    while (errorCell == null && collection != null) {
      errorCell=findErrorCell(collection);
      collection=collection.getParent();
    }
  }
  if (errorCell != null) {
    changeSelection(errorCell);
    if (((EditorCell_Error)errorCell).getText().length() > 0) {
      activateNodeSubstituteChooser(errorCell,false);
    }
    return;
  }
  boolean childSelected=false;
  if (mySelectedCell != null) {
    EditorCell cell=mySelectedCell;
    while (cell != null && cell.getSemanticNode() != child) {
      cell=cell.getParent();
    }
    childSelected=(cell != null);
  }
  if (!childSelected) {
    if (childCell instanceof EditorCell_Collection) {
      EditorCell selectableLeaf=((EditorCell_Collection)childCell).findFirstSelectableLeaf();
      if (selectableLeaf != null) {
        changeSelection(selectableLeaf);
        childSelected=true;
      }
    }
  }
  if (childSelected) {
    if (mySelectedCell instanceof EditorCell_Label && ((EditorCell_Label)mySelectedCell).isEditable()) {
      TextLine textLine=((EditorCell_Label)mySelectedCell).getTextLine();
      textLine.setCaretPosition(textLine.getText().length());
    }
  }
}
