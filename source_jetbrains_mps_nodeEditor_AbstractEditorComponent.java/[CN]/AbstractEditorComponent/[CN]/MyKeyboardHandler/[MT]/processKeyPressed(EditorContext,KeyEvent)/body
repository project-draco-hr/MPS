{
  if (myNodeSubstituteChooser.isVisible()) {
    if (myNodeSubstituteChooser.processKeyPressed(keyEvent)) {
      keyEvent.consume();
      return true;
    }
  }
  if (mySelectedCell != null) {
    EditorCell oldSelection=mySelectedCell;
    if (mySelectedCell.processKeyPressed(keyEvent) == true) {
      if (oldSelection != mySelectedCell) {
        mySelectedStack.removeAllElements();
      }
      keyEvent.consume();
      return true;
    }
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_F5) {
    rebuildEditorContent();
    keyEvent.consume();
    return true;
  }
  if (mySelectedCell == null) {
    return false;
  }
  if ((keyEvent.getKeyCode() == KeyEvent.VK_SPACE && keyEvent.isControlDown()) || (keyEvent.getKeyCode() == KeyEvent.VK_ENTER && !keyEvent.isControlDown())) {
    if (activateNodeSubstituteChooser(mySelectedCell,keyEvent.getKeyCode() == KeyEvent.VK_ENTER)) {
      keyEvent.consume();
      System.out.println("SUBSTITUTE");
      return true;
    }
    System.out.println("NO SUBSTITUTE");
  }
  if (keyEvent.getKeyCode() == KeyEvent.VK_D && keyEvent.isControlDown()) {
    if (mySelectedCell != null) {
      System.out.println("--- Dump cells ---");
      dumpCells(mySelectedCell,0);
    }
  }
  return false;
}
