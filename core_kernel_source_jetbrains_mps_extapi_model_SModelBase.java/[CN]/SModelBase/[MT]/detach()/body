{
  assertCanChange();
  if (myRepository != null) {
    myModelEventDispatch.modelDetached(this,myRepository);
    myRepository=null;
  }
  fireBeforeModelDisposed(this);
  jetbrains.mps.smodel.SModel model=getCurrentModelInternal();
  if (model != null) {
    model.dispose();
  }
  clearListeners();
}
