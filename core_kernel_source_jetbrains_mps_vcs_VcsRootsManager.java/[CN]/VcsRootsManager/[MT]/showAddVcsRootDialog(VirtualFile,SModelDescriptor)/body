{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      String message="You have changed model " + sm + ".\n"+ "Do you want to add folder "+ vcsRoot.getPath()+ " to the list of vcs roots so you would be able to commit your changes?\n"+ "You can always do it later choosing Settings -> Project Settings -> Version Control.";
      String title="Add folder " + vcsRoot.getPath() + " to the list of vcs roots?";
      int result=Messages.showYesNoDialog(myProject,message,title,Messages.getQuestionIcon());
      if (result == DialogWrapper.OK_EXIT_CODE) {
        List<VcsDirectoryMapping> vcsDirectoryMappings=new ArrayList<VcsDirectoryMapping>(myVcsManager.getDirectoryMappings());
        vcsDirectoryMappings.add(new VcsDirectoryMapping(vcsRoot.getPath(),myVcsManager.findVersioningVcs(vcsRoot).getName()));
        myVcsManager.setDirectoryMappings(vcsDirectoryMappings);
      }
 else {
        myExcludedRoots.add(vcsRoot);
      }
    }
  }
,ModalityState.NON_MODAL);
}
