{
  Thread thread=myShowIntentionsThread.get();
  if (thread != null) {
    thread.interrupt();
  }
  hideLightBulb();
  myShowIntentionsThread.set(new Thread("Intentions"){
    @Override public void run(){
      try {
        Thread.sleep(IntentionsSupport.INTENTION_SHOW_DELAY);
        if (interrupted()) {
          return;
        }
        final IntentionType intentionType=ModelAccess.instance().runReadAction(new Computable<IntentionType>(){
          @Override public IntentionType compute(){
            if (isInconsistentEditor() || myEditor.isReadOnly())             return null;
            return TypeContextManager.getInstance().runTypeCheckingComputation(myEditor.getTypecheckingContextOwner(),myEditor.getEditedNode(),new Computation<IntentionType>(){
              @Override public IntentionType compute(              TypeCheckingContext context){
                return IntentionsManager.getInstance().getHighestAvailableBaseIntentionType(myEditor.getSelectedNode(),myEditor.getEditorContext());
              }
            }
);
          }
        }
);
        if (intentionType == null || interrupted()) {
          return;
        }
        ModelAccess.instance().runReadInEDT(new Runnable(){
          @Override public void run(){
            if (isInconsistentEditor() || myEditor.isReadOnly() || interrupted())             return;
            if (myEditor.getSelectedCell() == null) {
              hideLightBulb();
            }
 else {
              adjustLightBulbLocation();
              showLightBulbComponent(intentionType == IntentionType.NORMAL ? Icons.INTENTION : intentionType.getIcon());
            }
          }
        }
);
      }
 catch (      InterruptedException e) {
      }
catch (      RuntimeInterruptedException e) {
      }
 finally {
        myShowIntentionsThread.compareAndSet(this,null);
      }
    }
  }
);
  myShowIntentionsThread.get().start();
}
