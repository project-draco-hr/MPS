{
  if (action instanceof ActionGroup) {
    for (    AnAction child : ((ActionGroup)action).getChildren(null)) {
      collectActionsAsIntentions(child,actions,dataContext);
    }
  }
 else   if (action instanceof BaseAction) {
    Presentation presentation=new Presentation();
    presentation.setDescription(action.getTemplatePresentation().getDescription());
    action.update(new AnActionEvent(null,dataContext,"",presentation,ActionManager.getInstance(),0));
    if (presentation.isVisible()) {
      actions.add(action);
    }
  }
}
