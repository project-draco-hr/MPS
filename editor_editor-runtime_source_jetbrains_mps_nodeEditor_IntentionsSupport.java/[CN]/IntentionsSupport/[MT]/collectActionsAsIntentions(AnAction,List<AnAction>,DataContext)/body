{
  if (action instanceof ActionGroup) {
    for (    AnAction child : ((ActionGroup)action).getChildren(null)) {
      collectActionsAsIntentions(child,actions,dataContext);
    }
  }
 else   if (action instanceof BaseAction) {
    Presentation presentation=action.getTemplatePresentation();
    if (presentation.getIcon() == null)     presentation.setIcon(Icons.REAL_INTENTION);
    action.update(new AnActionEvent(null,dataContext,"",presentation,ActionManager.getInstance(),0));
    if (presentation.isVisible()) {
      actions.add(action);
    }
  }
}
