{
  if (!isChanged())   return;
  myRepository.getModelAccess().runReadAction(new Runnable(){
    @Override public void run(){
      if (!isChanged())       return;
      LOG.debug("Recount status map for modules");
      boolean updated=myModuleUpdater.refreshGraph();
      Collection<SModuleReference> invalidModules=findInvalidModules();
      updated|=(!invalidModules.equals(myCurrentInvalidModules));
      if (updated) {
        myCurrentInvalidModules=invalidModules;
        refillStatusMap(invalidModules);
      }
    }
  }
);
}
