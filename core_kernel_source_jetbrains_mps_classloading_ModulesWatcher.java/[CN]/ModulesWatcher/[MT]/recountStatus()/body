{
  if (!isChanged())   return;
  myRepository.getModelAccess().runReadAction(new Runnable(){
    @Override public void run(){
synchronized (LOCK) {
        if (!isChanged())         return;
        myChanged=false;
        LOG.debug("Recount status map for modules");
        boolean updated=myModuleUpdater.updateGraph();
        Collection<SModuleReference> invalidModules=findInvalidModules();
        updated|=(!invalidModules.equals(myCurrentInvalidModules));
        if (updated) {
          myCurrentInvalidModules=invalidModules;
          refillStatusMap(invalidModules);
        }
      }
    }
  }
);
}
