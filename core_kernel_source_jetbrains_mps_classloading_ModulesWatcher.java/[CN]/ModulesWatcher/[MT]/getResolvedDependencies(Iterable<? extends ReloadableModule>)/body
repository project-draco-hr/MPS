{
synchronized (LOCK) {
    Collection<SModuleReference> refs=new LinkedHashSet<SModuleReference>();
    for (    ReloadableModule module : modules)     refs.add(((ReloadableModuleBase)module).getModuleReference());
    Collection<? extends SModuleReference> referencedDeps=getDepsFromRefs(refs);
    Collection<? extends ReloadableModuleBase> resolvedDeps=resolveRefs(referencedDeps);
    assert(resolvedDeps.size() == referencedDeps.size());
    return resolvedDeps;
  }
}
