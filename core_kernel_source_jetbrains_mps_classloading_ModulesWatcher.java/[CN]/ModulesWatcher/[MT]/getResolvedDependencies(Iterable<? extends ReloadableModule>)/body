{
synchronized (LOCK) {
    Collection<SModuleReference> refs=new LinkedHashSet<SModuleReference>();
    for (    ReloadableModule module : modules)     refs.add(module.getModuleReference());
    Collection<? extends SModuleReference> referencedDeps=getDependencies(refs);
    Collection<? extends ReloadableModule> resolvedDeps=resolveRefs(referencedDeps);
    assert(resolvedDeps.size() == referencedDeps.size());
    return resolvedDeps;
  }
}
