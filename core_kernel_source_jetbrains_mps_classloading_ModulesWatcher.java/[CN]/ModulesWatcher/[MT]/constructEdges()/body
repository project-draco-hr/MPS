{
  checkGraphsCorrectness();
  int wasEdges=myDepGraph.clearEdges();
  myBackDepGraph.clearEdges();
  final Collection<SModule> modules=getModules();
  for (  SModule module : modules) {
    if (checkNotDisposed(module))     continue;
    for (    SModule depModule : GlobalModuleDependenciesManager.directlyUsedModules(module,true,true)) {
      if (modules.contains(depModule)) {
        myDepGraph.addEdge(module,depModule);
        myBackDepGraph.addEdge(depModule,module);
      }
    }
  }
  LOG.debug("Difference in the edge count after validation " + (myDepGraph.getEdgesCount() - wasEdges));
}
