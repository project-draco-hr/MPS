{
  List<SNode> references=SNodeOperations.getDescendants(body,"jetbrains.mps.baseLanguage.structure.LocalVariableReference",false,new String[]{});
  for (  final SNode declaration : ListSequence.fromList(SNodeOperations.getDescendants(body,"jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration",false,new String[]{}))) {
    if (ListSequence.fromList(references).where(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return SLinkOperations.getTarget(it,"variableDeclaration",false) == declaration;
      }
    }
).isEmpty()) {
      SNodeOperations.deleteNode(SNodeOperations.getParent(declaration));
    }
  }
}
