{
  SNode lastStatement=ListSequence.<SNode>fromList(SLinkOperations.getTargets(body,"statement",true)).last();
  if (SNodeOperations.isInstanceOf(lastStatement,"jetbrains.mps.baseLanguage.structure.ReturnStatement")) {
    SNode lastReturn=SNodeOperations.cast(lastStatement,"jetbrains.mps.baseLanguage.structure.ReturnStatement");
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(lastReturn,"expression",true),"jetbrains.mps.baseLanguage.structure.LocalVariableReference")) {
      optimizeAssignmentFollowedByReturn(body,lastReturn,SNodeOperations.cast(SLinkOperations.getTarget(lastReturn,"expression",true),"jetbrains.mps.baseLanguage.structure.LocalVariableReference"));
    }
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(lastReturn,"expression",true),"jetbrains.mps.baseLanguage.structure.LocalVariableReference")) {
      optimizeVariableFollowedByReturn(body,lastReturn,SNodeOperations.cast(SLinkOperations.getTarget(lastReturn,"expression",true),"jetbrains.mps.baseLanguage.structure.LocalVariableReference"));
    }
  }
  removeUnusedDeclarations(body);
}
