{
  String nodeConcept=node.getConceptFqName();
  Class<SNodeTextGen> textgenClass;
  if (myClassesCache != null) {
    textgenClass=myClassesCache.get(nodeConcept);
    if (textgenClass == null) {
      textgenClass=textGenForNode(node);
      myClassesCache.put(nodeConcept,textgenClass);
    }
  }
 else {
    textgenClass=textGenForNode(node);
  }
  try {
    SNodeTextGen result=textgenClass.newInstance();
    result.setContext(context);
    return result;
  }
 catch (  InstantiationException e) {
    LOG.error(e,node);
  }
catch (  IllegalAccessException e) {
    LOG.error(e,node);
  }
  DefaultTextGen result=new DefaultTextGen();
  result.setContext(context);
  return result;
}
