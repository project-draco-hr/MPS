{
  SNode baseConcept=SModelUtil.getBaseConcept();
  while (cd != baseConcept) {
    Language l=SModelUtil.getDeclaringLanguage(cd,GlobalScope.getInstance());
    String packageName=NameUtil.namespaceFromConceptFQName(NameUtil.nodeFQName(cd));
    String className=cd.getName();
    String textgenClassname=packageName + ".textGen." + className+ "_TextGen";
    Class textgenClass=l.getClass(textgenClassname);
    if (textgenClass != null) {
      return textgenClass;
    }
    cd=cd.getReferent(ConceptDeclaration.EXTENDS);
    if (cd == null)     cd=baseConcept;
  }
  return DefaultTextGen.class;
}
