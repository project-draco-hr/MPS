{
  if (myContentEntriesEditor != null) {
    Disposer.dispose(myContentEntriesEditor);
    myContentEntriesEditor=null;
  }
  myContentEntriesEditor=new ContentEntriesEditor(data.getSolutionDescriptor());
  Disposer.register(myParentDisposable,myContentEntriesEditor);
  myContentEntriesEditor.setDefaultFolder(myContext.getModule().getModuleFile() != null ? myContext.getModule().getModuleFile().getParent().getCanonicalPath() : myContext.getProject().getBasePath());
  myRootPanel.removeAll();
  myRootPanel.add(myContentEntriesEditor.getComponent(),BorderLayout.CENTER);
  for (  ModelRootEntryContainer container : myContentEntriesEditor.getModelRootsEntries()) {
    container.getModelRootEntry().addModelRootEntryListener(new ModelRootEntryListener(){
      @Override public void fireDataChanged(){
        final ModifiableRootModel modifiableRootModel=myContext.getModifiableRootModel();
        for (        ModelRoot path : myContentEntriesEditor.getModelRoots()) {
          if (path instanceof FileBasedModelRoot) {
            for (            String file : ((FileBasedModelRoot)path).getFiles(FileBasedModelRoot.SOURCE_ROOTS)) {
              for (              ContentEntry contentEntry : modifiableRootModel.getContentEntries()) {
                if (!(contentEntry instanceof ContentEntryImpl))                 continue;
                for (                SourceFolder source : contentEntry.getSourceFolders()) {
                  if (!file.contains(source.getFile().getPath()))                   continue;
                  contentEntry.addSourceFolder(VirtualFileUtils.getVirtualFile(file),source.isTestSource());
                }
              }
            }
          }
        }
      }
    }
);
  }
}
