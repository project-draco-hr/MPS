{
  RoleValidationStatus status=generator.validateChild(contextParentNode,childRole,outputNodeToWeave);
  if (status != null) {
    status.reportProblem(false,"",GeneratorUtil.describe(inputNode,"input"),GeneratorUtil.describe(templateNode.getNode(),"template"));
  }
  LinkDeclaration childLinkDeclaration=contextParentNode.getLinkDeclaration(childRole);
  if (childLinkDeclaration == null) {
    contextParentNode.addChild(childRole,outputNodeToWeave);
  }
 else {
    Cardinality cardinality=childLinkDeclaration.getSourceCardinality();
    if (cardinality == Cardinality._0__1 || cardinality == Cardinality._1) {
      contextParentNode.setChild(childRole,outputNodeToWeave);
    }
 else {
      contextParentNode.addChild(childRole,outputNodeToWeave);
    }
  }
}
