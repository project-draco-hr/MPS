{
  FastRuleFinder rf=generator.getRuleManager().getSwitchRules(_switch);
  Collection<SNode> outputNodes=tryToReduce(rf,context);
  if (outputNodes != null) {
    if (outputNodes.size() == 1 && context.getInputName() != null) {
      SNode reducedNode=outputNodes.iterator().next();
      generator.registerMappingLabel(context.getInput(),context.getInputName(),reducedNode);
    }
    generator.recordTransformInputTrace(context.getInput(),outputNodes);
    return outputNodes;
  }
  TemplateSwitchMapping current=generator.getSwitch(_switch);
  if (current != null) {
    outputNodes=current.applyDefault(this,_switch,context.getInputName(),context);
    generator.recordTransformInputTrace(context.getInput(),outputNodes);
    return outputNodes;
  }
  return null;
}
