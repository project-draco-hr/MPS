{
  TemplateModel templateModel=generator.getGenerationPlan().getTemplateModel(templateDeclaration.getModelReference());
  TemplateDeclaration templateDeclarationInstance=templateModel == null ? null : templateModel.loadTemplate(templateDeclaration,arguments);
  if (templateModel == null || templateDeclarationInstance == null) {
    String msg="%s not found: cannot apply template declaration, try to check & regenerate affected generators";
    getLogger().error(templateNode,String.format(msg,templateModel == null ? "template model" : "declaration"),GeneratorUtil.describeIfExists(context.getInput(),"input"),GeneratorUtil.describe(templateNode,"template"),GeneratorUtil.describe(templateDeclaration,"template declaration"));
    return null;
  }
  return templateDeclarationInstance;
}
