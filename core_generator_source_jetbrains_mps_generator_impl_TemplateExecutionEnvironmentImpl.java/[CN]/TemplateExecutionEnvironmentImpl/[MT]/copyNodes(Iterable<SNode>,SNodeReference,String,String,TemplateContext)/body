{
  final Iterator<SNode> it=inputNodes.iterator();
  if (!it.hasNext()) {
    return Collections.emptyList();
  }
  ArrayList<SNode> outputNodes=new ArrayList<SNode>();
  while (it.hasNext()) {
    SNode newInputNode=it.next();
    if (templateId == null) {
      SNode template=templateNode.resolve(MPSModuleRepository.getInstance());
      templateId=GeneratorUtil.getTemplateNodeId(template);
    }
    Collection<SNode> _outputNodes=generator.copySrc(mappingName,templateId,newInputNode,this);
    ChildAdopter a=new ChildAdopter(generator);
    for (    SNode outputNode : _outputNodes) {
      a.checkIsExpectedLanguage(outputNode,templateNode,templateContext);
    }
    outputNodes.addAll(_outputNodes);
  }
  return outputNodes;
}
