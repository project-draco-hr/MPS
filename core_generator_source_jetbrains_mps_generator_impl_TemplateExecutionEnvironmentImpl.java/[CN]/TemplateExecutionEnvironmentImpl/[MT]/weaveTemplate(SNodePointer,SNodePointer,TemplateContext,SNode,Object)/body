{
  TemplateModel templateModel=generator.getRuleManager().getTemplateModel(templateDeclaration.getModelReference());
  if (templateModel == null) {
    generator.getLogger().error(templateNode.getNode(),"template model not found: cannot apply template declaration, try to check & regenerate affected generators",GeneratorUtil.describeIfExists(context.getInput(),"input"),GeneratorUtil.describeIfExists(templateNode.getNode(),"template"),GeneratorUtil.describeIfExists(templateDeclaration.getNode(),"template declaration"));
    return Collections.emptyList();
  }
  TemplateDeclaration templateDeclarationInstance=templateModel.loadTemplate(templateDeclaration,arguments);
  if (templateDeclarationInstance == null || !(templateDeclarationInstance instanceof TemplateDeclarationWeavingAware)) {
    generator.getLogger().error(templateNode.getNode(),"declaration not found: cannot apply template declaration, try to check & regenerate affected generators",GeneratorUtil.describeIfExists(context.getInput(),"input"),GeneratorUtil.describeIfExists(templateNode.getNode(),"template"),GeneratorUtil.describeIfExists(templateDeclaration.getNode(),"template declaration"));
    return Collections.emptyList();
  }
  return ((TemplateDeclarationWeavingAware)templateDeclarationInstance).weave(this,context,outputContextNode);
}
