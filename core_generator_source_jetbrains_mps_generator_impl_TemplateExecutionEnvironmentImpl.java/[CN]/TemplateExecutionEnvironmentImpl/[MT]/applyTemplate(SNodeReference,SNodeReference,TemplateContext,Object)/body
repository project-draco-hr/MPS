{
  TemplateModel templateModel=generator.getRuleManager().getTemplateModel(templateDeclaration.getModelReference());
  if (templateModel == null) {
    getLogger().error(templateNode.resolve(MPSModuleRepository.getInstance()),"template model not found: cannot apply template declaration, try to check & regenerate affected generators",GeneratorUtil.describeIfExists(context.getInput(),"input"),GeneratorUtil.describeIfExists(templateNode.resolve(MPSModuleRepository.getInstance()),"template"),GeneratorUtil.describeIfExists(templateDeclaration.resolve(MPSModuleRepository.getInstance()),"template declaration"));
    return Collections.emptyList();
  }
  TemplateDeclaration templateDeclarationInstance=templateModel.loadTemplate(templateDeclaration,arguments);
  if (templateDeclarationInstance == null) {
    getLogger().error(templateNode.resolve(MPSModuleRepository.getInstance()),"declaration not found: cannot apply template declaration, try to check & regenerate affected generators",GeneratorUtil.describeIfExists(context.getInput(),"input"),GeneratorUtil.describeIfExists(templateNode.resolve(MPSModuleRepository.getInstance()),"template"),GeneratorUtil.describeIfExists(templateDeclaration.resolve(MPSModuleRepository.getInstance()),"template declaration"));
    return Collections.emptyList();
  }
  return templateDeclarationInstance.apply(this,context);
}
