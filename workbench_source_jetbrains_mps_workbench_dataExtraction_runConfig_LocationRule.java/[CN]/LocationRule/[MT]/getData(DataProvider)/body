{
  Project project=(Project)dataProvider.getData(MPSDataKeys.PROJECT.getName());
  if (project == null)   project=ProjectManager.getInstance().getOpenProjects()[0];
  if (project == null)   return null;
  SNode node=(SNode)dataProvider.getData(MPSDataKeys.NODE.getName());
  if (node != null)   return new MPSLocation(project,node);
  SModelDescriptor model=(SModelDescriptor)dataProvider.getData(MPSDataKeys.MODEL.getName());
  if (model != null)   return new MPSLocation(project,model.getSModel());
  IModule module=(IModule)dataProvider.getData(MPSDataKeys.MODULE.getName());
  if (module != null)   return new MPSLocation(project,module);
  MPSProject mpsProject=(MPSProject)dataProvider.getData(MPSDataKeys.MPS_PROJECT.getName());
  if (mpsProject != null)   return new MPSLocation(project,mpsProject);
  return null;
}
