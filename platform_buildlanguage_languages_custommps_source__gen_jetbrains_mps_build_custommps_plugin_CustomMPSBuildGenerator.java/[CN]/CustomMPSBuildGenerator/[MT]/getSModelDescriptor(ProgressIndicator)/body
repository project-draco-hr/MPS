{
  final SModelDescriptor descriptor=super.getSModelDescriptor(indicator);
  final Language custommpsLanguage=MPSModuleRepository.getInstance().getLanguage("jetbrains.mps.build.custommps");
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      ModuleReference moduleReference=custommpsLanguage.getModuleReference();
      Solution module=(Solution)descriptor.getModule();
      SolutionDescriptor moduleDescriptor=module.getModuleDescriptor();
      moduleDescriptor.getUsedLanguages().add(moduleReference);
      module.setModuleDescriptor(moduleDescriptor,false);
    }
  }
);
  return descriptor;
}
