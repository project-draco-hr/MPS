{
  if (facet instanceof JavaModuleFacet) {
    facet=new JavaModuleFacetImpl(){
      @Override public IFile getClassesGen(){
        IFile descriptorFile=getDescriptorFile();
        if (descriptorFile != null && descriptorFile.isReadOnly()) {
          myCompileContext.processMessage(new CompilerMessage(MPSMakeConstants.BUILDER_ID,Kind.INFO," super.ClassesGen " + super.getClassesGen()));
          return super.getClassesGen();
        }
        File outputDir=JpsJavaExtensionService.getInstance().getOutputDirectory(myModule,false);
        if (outputDir == null)         return null;
        MPSCompilerUtil.debug(myCompileContext," ClassesGen from module " + outputDir.getPath());
        return FileSystem.getInstance().getFileByPath(outputDir.getPath());
      }
    }
;
  }
  return super.setupFacet(facet,memento);
}
