{
  if (state instanceof BaseRunProfileState) {
    BaseRunProfileState baseRunProfileState=(BaseRunProfileState)state;
    AbstractDebugSessionCreator debugSessionCreator=baseRunProfileState.createDebugSessionCreator(project);
    ExecutionResult executionResult=debugSessionCreator.startSession(executor,this,state,project);
    AbstractDebugSession debugSession=debugSessionCreator.getDebugSession();
    DebugSessionManagerComponent.getInstance(project).addDebugSession(debugSession);
    DebuggerToolContentBuilder contentBuilder=new DebuggerToolContentBuilder(project,this,executor,executionResult,env);
    return contentBuilder.showRunContent(contentToReuse);
  }
 else {
    throw new RuntimeException("Unknown Run Profile State");
  }
}
