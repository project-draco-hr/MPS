{
  if (node == null)   return null;
  SNode root=node.getContainingRoot();
  NodeTypesComponent nodeTypesComponent=getNodeTypesComponent(root);
  if (nodeTypesComponent != null) {
    return nodeTypesComponent;
  }
  nodeTypesComponent=NodeTypesComponentsFactory.createNodeTypesComponent(root,myTypeChecker);
  myNodesToComponents.put(nodeTypesComponent.getNode(),nodeTypesComponent);
  SModelRepository.getInstance().removeModelRepositoryListener(myModelRepositoryListener);
  SModelRepository.getInstance().addModelRepositoryListener(myModelRepositoryListener);
  return nodeTypesComponent;
}
