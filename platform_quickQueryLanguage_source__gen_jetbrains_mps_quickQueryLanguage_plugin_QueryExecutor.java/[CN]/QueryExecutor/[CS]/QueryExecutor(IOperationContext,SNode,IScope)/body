{
  this.myModelQuery=modelQuery;
  this.myScope=scope;
  this.myProject=context.getProject();
  final Wrappers._T<SModelDescriptor> model=new Wrappers._T<SModelDescriptor>();
  final ModelOwner modelOwner=new ModelOwner(){
  }
;
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      model.value=ProjectModels.createDescriptorFor(modelOwner);
      model.value.getSModel().addRoot(SNodeOperations.copyNode(QueryExecutor.this.myModelQuery));
    }
  }
);
  this.myClassName=model.value.getLongName() + this.myClassType;
  GeneratorManager manager=context.getComponent(GeneratorManager.class);
  final MyGenerationType type=new MyGenerationType();
  manager.generateModelsWithProgressWindow(Arrays.asList(model.value),context,type,false);
  SModelRepository.getInstance().unRegisterModelDescriptors(modelOwner);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      String languageFqName=QueryExecutor.this.myLanguageFqName;
      IModule lang=QueryExecutor.this.myScope.getLanguage(languageFqName);
      ClassLoader parentClassLoader=ClassLoaderManager.getInstance().getClassLoaderFor(lang);
      QueryExecutor.this.myLoader=type.getClassLoader(parentClassLoader);
    }
  }
);
}
