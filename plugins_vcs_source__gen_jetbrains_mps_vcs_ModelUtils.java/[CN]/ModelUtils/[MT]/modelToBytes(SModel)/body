{
  final Wrappers._T<Document> document=new Wrappers._T<Document>();
  ModelAccess.instance().runReadAction(new Computable<Document>(){
    public Document compute(){
      return document.value=ModelPersistence.saveModel(result);
    }
  }
);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  try {
    JDOMUtil.writeDocument(document.value,baos);
    return baos.toByteArray();
  }
 catch (  IOException e) {
    if (log.isErrorEnabled()) {
      log.error("",e);
    }
  }
  return new byte[0];
}
