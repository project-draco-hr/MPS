{
  TemplateSwitchGraphNode bottomSwitchNode=myTemplateSwitchToGraphNodeMap.get(baseSwitch);
  if (bottomSwitchNode == bottomSwitchNode.myModifiedSwitchNode) {
    throw new RuntimeException("Template switch declaration " + baseSwitch + " extends itself.");
  }
  while (bottomSwitchNode.myModifiedSwitchNode != null) {
    bottomSwitchNode=bottomSwitchNode.myModifiedSwitchNode;
  }
  List<TemplateSwitchGraphNode> graphNodes=new LinkedList<TemplateSwitchGraphNode>();
  modifierSwitchesToList(bottomSwitchNode,graphNodes);
  graphNodes.add(bottomSwitchNode);
  List<TemplateSwitch> switches=new LinkedList<TemplateSwitch>();
  for (  TemplateSwitchGraphNode switchGraphNode : graphNodes) {
    switches.add(switchGraphNode.myTemplateSwitch);
  }
  return switches;
}
