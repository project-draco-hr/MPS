{
  final RepositoryVirtualFiles rvf=findRepoFiles(md);
  if (rvf == null) {
    return;
  }
  final Collection<MPSNodeVirtualFile> filesInModel=rvf.getKnownVirtualFilesIn(md.getReference());
  updateModificationStamp(filesInModel);
  Collection<MPSNodeVirtualFile> deletedFiles=new ArrayList<MPSNodeVirtualFile>();
  Collection<MPSNodeVirtualFile> changedFiles=new ArrayList<MPSNodeVirtualFile>();
  for (  MPSNodeVirtualFile vf : filesInModel) {
    if (vf.getNode() == null) {
      deletedFiles.add(vf);
    }
 else {
      changedFiles.add(vf);
    }
  }
  VFSNotifier vfsNotifier=new VFSNotifier(rvf);
  vfsNotifier.deleted(deletedFiles);
  vfsNotifier.changed(changedFiles);
  vfsNotifier.execute();
}
