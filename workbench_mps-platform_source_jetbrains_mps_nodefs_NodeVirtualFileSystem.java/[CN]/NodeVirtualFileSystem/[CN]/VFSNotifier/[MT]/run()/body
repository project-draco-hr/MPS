{
  if (myDisposed) {
    return;
  }
  ArrayList<MPSNodeVirtualFile> deletedFiles;
  ArrayList<MPSNodeVirtualFile> changedFiles;
synchronized (this) {
    deletedFiles=new ArrayList<>(myDeletedFiles);
    changedFiles=new ArrayList<>(myChangedFiles);
    myDeletedFiles.clear();
    myChangedFiles.clear();
  }
  changedFiles.removeAll(deletedFiles);
  for (  MPSNodeVirtualFile deletedFile : deletedFiles) {
    fireBeforeFileDeletion(this,deletedFile);
    deletedFile.invalidate();
    fireFileDeleted(this,deletedFile,deletedFile.getName(),null);
  }
  for (  MPSNodeVirtualFile changedFile : changedFiles) {
    String oldName=changedFile.getName();
    changedFile.updateFields();
    String newName=changedFile.getName();
    if (!oldName.equals(newName)) {
      firePropertyChanged(this,changedFile,VirtualFile.PROP_NAME,oldName,newName);
    }
  }
}
