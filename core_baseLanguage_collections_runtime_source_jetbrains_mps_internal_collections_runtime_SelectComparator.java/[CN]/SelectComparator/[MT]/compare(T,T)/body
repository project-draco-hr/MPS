{
  if (a == b) {
    return 0;
  }
  if (a == null || b == null) {
    return a == null ? -1 : 1;
  }
  Comparable<Object> cmpa=(Comparable<Object>)selector.select(a);
  Comparable<Object> cmpb=(Comparable<Object>)selector.select(b);
  if (cmpa == cmpb) {
    return 0;
  }
  if (cmpa == null || cmpb == null) {
    return cmpa == null ? -1 : 1;
  }
  return cmpa.compareTo(cmpb);
}
