{
  EditorCell cell=selectedCell;
  while (cell != null) {
    MenuLookup<TransformationMenu> key=cell.getTransformationMenuLookup();
    if (key != null) {
      return new Pair<>(key,cell);
    }
    if (cell.isBig()) {
      SConcept concept=cell.getSNode().getConcept();
      DefaultTransformationMenuLookup menuLookup=new DefaultTransformationMenuLookup(LanguageRegistry.getInstance(cell.getContext().getRepository()),concept);
      Collection<TransformationMenu> defaultMenu=menuLookup.lookup(MenuUtil.getUsedLanguages(cell.getSNode()));
      boolean hasDefaultMenu=!defaultMenu.isEmpty();
      if (hasDefaultMenu) {
        return new Pair<>(menuLookup,cell);
      }
    }
    cell=cell.getParent();
  }
  return null;
}
