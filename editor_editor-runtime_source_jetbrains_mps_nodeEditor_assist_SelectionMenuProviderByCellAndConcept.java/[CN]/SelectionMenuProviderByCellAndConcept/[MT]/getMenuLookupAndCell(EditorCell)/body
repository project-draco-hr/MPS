{
  EditorCell cell=selectedCell;
  while (cell != null) {
    TransformationMenuLookup key=cell.getTransformationMenuLookup();
    if (key != null) {
      return new Pair<>(key,cell);
    }
    if (cell.isBig()) {
      SConcept concept=cell.getSNode().getConcept();
      DefaultMenuLookup menuLookup=new DefaultMenuLookup(LanguageRegistry.getInstance(cell.getContext().getRepository()),concept);
      Collection<TransformationMenu> defaultMenu=menuLookup.lookup(Collections.singleton(concept.getLanguage()));
      boolean hasDefaultMenu=!defaultMenu.isEmpty();
      if (hasDefaultMenu) {
        return new Pair<>(menuLookup,cell);
      }
    }
    cell=cell.getParent();
  }
  return null;
}
