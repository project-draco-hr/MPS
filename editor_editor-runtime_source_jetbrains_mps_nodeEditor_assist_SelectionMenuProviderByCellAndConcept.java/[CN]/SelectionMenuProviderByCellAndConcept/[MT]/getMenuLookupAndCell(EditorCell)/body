{
  EditorCell cell=selectedCell;
  while (cell != null) {
    TransformationMenuLookup key=cell.getTransformationMenuLookup();
    if (key != null) {
      return new Pair<>(key,cell);
    }
    if (cell.isBig()) {
      DefaultMenuLookup menuLookup=new DefaultMenuLookup(LanguageRegistry.getInstance(cell.getContext().getRepository()),cell.getSNode().getConcept());
      Collection<TransformationMenu> defaultMenu=menuLookup.lookup(Collections.singleton(cell.getSNode().getConcept().getLanguage()));
      boolean hasDefaultMenu=!defaultMenu.isEmpty();
      if (hasDefaultMenu) {
        return new Pair<>(menuLookup,cell);
      }
    }
    cell=cell.getParent();
  }
  return null;
}
