{
  PropertySupport propertySupport=new ChangeSetBuilder.DefaultPropertySupport();
  if (!(RuntimeFlags.isMergeDriverMode())) {
    SNode propertyDeclaration=((jetbrains.mps.smodel.SNode)oldNode).getPropertyDeclaration(name);
    if (propertyDeclaration != null) {
      propertySupport=PropertySupport.getPropertySupport(propertyDeclaration);
    }
  }
  String oldPresentableValue=propertySupport.fromInternalValue(oldNode.getProperty(name));
  String newPresentableValue=propertySupport.fromInternalValue(newNode.getProperty(name));
  if (!(EqualUtil.equals(oldPresentableValue,newPresentableValue))) {
    ListSequence.fromList(myNewChanges).addElement(new SetPropertyChange(myChangeSet,oldNode.getNodeId(),name,newNode.getProperty(name)));
  }
}
