{
  SReference oldReference=oldNode.getReference(role);
  SReference newReference=newNode.getReference(role);
  SNodeId oldTargetId=(oldReference instanceof DynamicReference ? null : check_nbyrtw_a0a2a3(oldReference));
  SNodeId newTargetId=(newReference instanceof DynamicReference ? null : check_nbyrtw_a0a3a3(newReference));
  SModelReference oldTargetModel=check_nbyrtw_a0e0d(oldReference);
  if (jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations.getModel(oldNode).getSModelReference().equals(oldTargetModel)) {
    oldTargetModel=null;
  }
  SModelReference newTargetModel=check_nbyrtw_a0g0d(newReference);
  if (jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations.getModel(newNode).getSModelReference().equals(newTargetModel)) {
    newTargetModel=null;
  }
  if (eq_nbyrtw_a0a0i0d(oldTargetId,newTargetId) && eq_nbyrtw_a0a0i0d_0(oldTargetModel,newTargetModel) && eq_nbyrtw_a0a8a3(check_nbyrtw_a0a8a3(oldReference),check_nbyrtw_a0a8a3_0(newReference))) {
  }
 else {
    SModelReference targetModel=check_nbyrtw_a0a0a8a3(newReference);
    ListSequence.fromList(myNewChanges).addElement(new SetReferenceChange(myChangeSet,oldNode.getSNodeId(),role,targetModel,newTargetId,check_nbyrtw_f0a0a1a0i0d(newReference)));
  }
}
