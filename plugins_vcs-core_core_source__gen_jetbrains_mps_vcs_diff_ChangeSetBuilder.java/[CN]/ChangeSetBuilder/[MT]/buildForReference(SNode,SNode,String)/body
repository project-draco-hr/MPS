{
  SReference oldReference=oldNode.getReference(role);
  SReference newReference=newNode.getReference(role);
  SNodeId oldTargetId=(oldReference instanceof DynamicReference ? null : check_nbyrtw_a0a2a9(oldReference));
  SNodeId newTargetId=(newReference instanceof DynamicReference ? null : check_nbyrtw_a0a3a9(newReference));
  SModelReference oldTargetModel=check_nbyrtw_a0e0j(oldReference);
  if (jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations.getModel(oldNode).getReference().equals(oldTargetModel)) {
    oldTargetModel=null;
  }
  SModelReference newTargetModel=check_nbyrtw_a0g0j(newReference);
  if (jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations.getModel(newNode).getReference().equals(newTargetModel)) {
    newTargetModel=null;
  }
  if (eq_nbyrtw_a0a0i0j(oldTargetId,newTargetId) && eq_nbyrtw_a0a0i0j_0(oldTargetModel,newTargetModel) && eq_nbyrtw_a0a8a9(check_nbyrtw_a0a8a9(((jetbrains.mps.smodel.SReference)oldReference)),check_nbyrtw_a0a8a9_0(((jetbrains.mps.smodel.SReference)newReference)))) {
  }
 else {
    SModelReference targetModel=check_nbyrtw_a0a0a8a9(newReference);
    ListSequence.fromList(myNewChanges).addElement(new SetReferenceChange(myChangeSet,oldNode.getNodeId(),role,targetModel,newTargetId,check_nbyrtw_f0a0a1a0i0j(((jetbrains.mps.smodel.SReference)newReference))));
  }
}
