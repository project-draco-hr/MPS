{
  SReference oldReference=oldNode.getReference(role);
  SReference newReference=newNode.getReference(role);
  SNodeId oldTargetId=(oldReference instanceof DynamicReference ? null : check_nbyrtw_a0a2a51(oldReference));
  SNodeId newTargetId=(newReference instanceof DynamicReference ? null : check_nbyrtw_a0a3a51(newReference));
  SModelReference oldTargetModel=check_nbyrtw_a0e0p(oldReference);
  if (SNodeOperations.getModel(oldNode).getReference().equals(oldTargetModel)) {
    oldTargetModel=null;
  }
  SModelReference newTargetModel=check_nbyrtw_a0g0p(newReference);
  if (SNodeOperations.getModel(newNode).getReference().equals(newTargetModel)) {
    newTargetModel=null;
  }
  if (eq_nbyrtw_a0a0i0p(oldTargetId,newTargetId) && eq_nbyrtw_a0a0i0p_0(oldTargetModel,newTargetModel) && eq_nbyrtw_a0a8a51(check_nbyrtw_a0a8a51(((jetbrains.mps.smodel.SReference)oldReference)),check_nbyrtw_a0a8a51_0(((jetbrains.mps.smodel.SReference)newReference)))) {
  }
 else {
    SModelReference targetModel=check_nbyrtw_a0a0a8a51(newReference);
    ListSequence.fromList(myNewChanges).addElement(new SetReferenceChange(myChangeSet,oldNode.getNodeId(),role,targetModel,newTargetId,check_nbyrtw_f0a0a1a0i0p(((jetbrains.mps.smodel.SReference)newReference))));
  }
}
