{
  IHolder objectHolder=searchQuery.getObjectHolder();
  IOperationContext operationContext;
  List<SModelDescriptor> modelDescriptors;
  List<IModule> modules=null;
  if (objectHolder instanceof ModelsHolder) {
    ModelsHolder modelsHolder=(ModelsHolder)objectHolder;
    operationContext=modelsHolder.getOperationContext();
    modelDescriptors=modelsHolder.getObject();
  }
 else   if (objectHolder instanceof ModulesHolder) {
    ModulesHolder modulesHolder=(ModulesHolder)objectHolder;
    operationContext=modulesHolder.getOperationContext();
    modelDescriptors=ModelCheckerUtils.getModelDescriptors(modulesHolder.getObject());
    modules=modulesHolder.getObject();
  }
 else {
    throw new IllegalArgumentException();
  }
  ProgressContext progressContext=new ProgressContext(indicator,ListSequence.<SModelDescriptor>fromList(modelDescriptors).<String>select(new ISelector<SModelDescriptor,String>(){
    public String select(    SModelDescriptor md){
      return getTaskName(md);
    }
  }
));
  ModuleChecker moduleChecker=null;
  if (modules != null) {
    moduleChecker=new ModuleChecker(progressContext);
    indicator.setIndeterminate(true);
    for (    IModule module : ListSequence.<IModule>fromList(modules)) {
      moduleChecker.checkModule(module);
      if (moduleChecker.isCancelled()) {
        break;
      }
    }
  }
  ModelChecker modelChecker;
  if (moduleChecker != null) {
    modelChecker=new ModelChecker(operationContext,progressContext,moduleChecker.getSearchResults());
  }
 else {
    modelChecker=new ModelChecker(operationContext,progressContext);
  }
  modelChecker.setSpecificCheckers(getSpecificCheckers());
  for (  SModelDescriptor modelDescriptor : ListSequence.<SModelDescriptor>fromList(modelDescriptors)) {
    long modelStartTime=System.currentTimeMillis();
    modelChecker.checkModel(modelDescriptor);
    if (modelChecker.isCancelled()) {
      break;
    }
    progressContext.saveEstimatedTime(modelStartTime);
  }
  return modelChecker.getSearchResults();
}
