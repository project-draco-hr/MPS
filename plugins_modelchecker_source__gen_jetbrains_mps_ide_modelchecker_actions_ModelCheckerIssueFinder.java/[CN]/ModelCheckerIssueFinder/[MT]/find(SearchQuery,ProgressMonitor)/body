{
  IHolder objectHolder=searchQuery.getObjectHolder();
  IOperationContext operationContext;
  List<SModel> modelDescriptors;
  List<IModule> modules=null;
  if (objectHolder instanceof ModelsHolder) {
    ModelsHolder modelsHolder=(ModelsHolder)objectHolder;
    operationContext=modelsHolder.getOperationContext();
    modelDescriptors=modelsHolder.getObject();
  }
 else   if (objectHolder instanceof ModulesHolder) {
    ModulesHolder modulesHolder=(ModulesHolder)objectHolder;
    operationContext=modulesHolder.getOperationContext();
    modelDescriptors=ModelCheckerUtils.getModelDescriptors(modulesHolder.getObject());
    modules=modulesHolder.getObject();
  }
 else {
    throw new IllegalArgumentException();
  }
  int work=((modules != null ? ListSequence.fromList(modules).count() : 0)) + ListSequence.fromList(modelDescriptors).count() + 1;
  monitor.start("Checking",work);
  try {
    ModuleChecker moduleChecker=null;
    if (modules != null) {
      moduleChecker=new ModuleChecker();
      for (      IModule module : ListSequence.fromList(modules)) {
        moduleChecker.checkModule(module,monitor.subTask(1));
        if (monitor.isCanceled()) {
          break;
        }
      }
    }
    monitor.advance(0);
    ModelChecker modelChecker;
    if (moduleChecker != null) {
      modelChecker=new ModelChecker(operationContext,moduleChecker.getSearchResults());
    }
 else {
      modelChecker=new ModelChecker(operationContext);
    }
    modelChecker.setSpecificCheckers(getSpecificCheckers());
    monitor.advance(1);
    for (    SModel modelDescriptor : ListSequence.fromList(modelDescriptors)) {
      modelChecker.checkModel(modelDescriptor,monitor.subTask(1));
      if (monitor.isCanceled()) {
        break;
      }
    }
    return modelChecker.getSearchResults();
  }
  finally {
    monitor.done();
  }
}
