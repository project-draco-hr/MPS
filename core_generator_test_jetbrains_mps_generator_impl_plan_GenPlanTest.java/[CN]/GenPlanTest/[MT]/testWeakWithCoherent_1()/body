{
  TemplateMappingConfiguration tmcA=new MockMapConfig("A",false);
  TemplateMappingConfiguration tmcB=new MockMapConfig("B",false);
  TemplateMappingConfiguration tmcC=new MockMapConfig("C",false);
  final List<TemplateMappingConfiguration> allConfigs=Arrays.asList(tmcA,tmcB,tmcC);
  mySolver.prepare(allConfigs);
  addWeak(tmcA,tmcB);
  addCoherentConfigs(tmcB,tmcC);
  final List<GenerationPhase> phases=mySolver.solveNew();
  assertFalse(myConflicts.hasConflicts());
  assertEquals(1,phases.size());
  final List<Group> groups=phases.get(0).getGroups();
  assertEquals(2,groups.size());
  HashSet<Group> expected=new HashSet<Group>();
  expected.add(new Group(tmcA));
  expected.add(new Group(tmcB).union(new Group(tmcC)));
  assertEquals(expected,new HashSet<Group>(groups));
}
