{
  SNode language=SNodeOperations.cast(myModule,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,"jetbrains.mps.build.mps.structure.BuildMps_Language"));
  LanguageDescriptor languageDescriptor=(LanguageDescriptor)myModuleDescriptor;
  String langName=languageDescriptor.getModuleReference().getModuleName();
  if (languageDescriptor.getGenerators().size() > 1) {
    report("more than one generator for language `" + langName + "'");
    return;
  }
  if (languageDescriptor.getGenerators().isEmpty()) {
    if (type.doCheck && (SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x7fae147806433827L,"generator")) != null)) {
      report("no generators in module descriptor for `" + langName + "'");
    }
    if (type.doPartialImport) {
      SLinkOperations.setTarget(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x7fae147806433827L,"generator"),null);
    }
    return;
  }
  GeneratorDescriptor generatorDescriptor=languageDescriptor.getGenerators().get(0);
  String generatorName=generatorDescriptor.getGeneratorUID();
  if (generatorName != null && !(generatorName.startsWith(langName + "#"))) {
    report("wrong generator name `" + generatorName + "', should start with `"+ langName+ "#'");
    return;
  }
  if (type.doCheck && (SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x7fae147806433827L,"generator")) == null)) {
    report("language generator should be extracted for `" + langName + "'");
    return;
  }
  if (type.doPartialImport & (SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x7fae147806433827L,"generator")) == null)) {
    SLinkOperations.setTarget(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x7fae147806433827L,"generator"),SModelOperations.createNewNode(SNodeOperations.getModel(language),null,SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4c6db07d2e56a8b4L,"jetbrains.mps.build.mps.structure.BuildMps_Generator"))));
  }
  ModuleChecker moduleCheckerForGenerator=new ModuleChecker(SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x7fae147806433827L,"generator")),myVisibleModules,myPathConverter,myModuleDescriptorFile,generatorDescriptor,myReporter);
  moduleCheckerForGenerator.check(type);
  if (type.doFullImport) {
    Set<SNode> alreadyInDeps=unwrapExtractedDeps(language);
    SetSequence.fromSet(alreadyInDeps).addElement(language);
    Set<SNode> generatorDeps=unwrapExtractedDeps(SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x7fae147806433827L,"generator")));
    for (    SNode dep : generatorDeps) {
      SNode extraDep=dep;
      if (SNodeOperations.isInstanceOf(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4c6db07d2e56a8b4L,"jetbrains.mps.build.mps.structure.BuildMps_Generator"))) {
        extraDep=SLinkOperations.getTarget(SNodeOperations.cast(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4c6db07d2e56a8b4L,"jetbrains.mps.build.mps.structure.BuildMps_Generator")),MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4c6db07d2e56a8b4L,0xc0f2d501dbb734cL,"sourceLanguage"));
      }
      if (SetSequence.fromSet(alreadyInDeps).contains(extraDep)) {
        continue;
      }
      SNode newDep=SModelOperations.createNewNode(SNodeOperations.getModel(language),null,SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyOnModule")));
      SLinkOperations.setTarget(newDep,MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,0x48e82d5083341cb9L,"module"),extraDep);
      ListSequence.fromList(SLinkOperations.getChildren(language,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508331930cL,0x48e82d5083341cb8L,"dependencies"))).addElement(newDep);
      SetSequence.fromSet(alreadyInDeps).addElement(extraDep);
    }
  }
}
