{
  SNode language=SNodeOperations.cast(myModule,MetaAdapterFactory.getConcept(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,"jetbrains.mps.build.mps.structure.BuildMps_Language"));
  LanguageDescriptor languageDescriptor=(LanguageDescriptor)myModuleDescriptor;
  String langName=languageDescriptor.getModuleReference().getModuleName();
  if (languageDescriptor.getGenerators().size() > 1) {
    report("more than one generator for language `" + langName + "'",myOriginalModule);
    return;
  }
  if (languageDescriptor.getGenerators().isEmpty()) {
    if (type.doCheck && (SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator")) != null)) {
      report("no generators in module descriptor for `" + langName + "'",myOriginalModule);
    }
    if (type.doPartialImport) {
      SLinkOperations.setTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator"),null);
    }
    return;
  }
  GeneratorDescriptor generatorDescriptor=languageDescriptor.getGenerators().get(0);
  String generatorName=generatorDescriptor.getGeneratorUID();
  if (generatorName != null && !(generatorName.startsWith(langName + "#"))) {
    report("wrong generator name `" + generatorName + "', should start with `"+ langName+ "#'",myOriginalModule);
    return;
  }
  if (type.doCheck && (SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator")) == null)) {
    report("language generator should be extracted for `" + langName + "'",myOriginalModule);
    return;
  }
  if (type.doPartialImport & (SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator")) == null)) {
    SLinkOperations.setTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator"),SModelOperations.createNewNode(SNodeOperations.getModel(language),null,"jetbrains.mps.build.mps.structure.BuildMps_Generator"));
  }
  ModuleChecker moduleCheckerForGenerator=new ModuleChecker(SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator")),SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator")),myVisibleModules,myPathConverter,myGenContext,myModuleSourceDir,generatorDescriptor,myReporter);
  moduleCheckerForGenerator.check(type);
  if (type.doFullImport) {
    Set<SNode> alreadyInDeps=unwrapExtractedDeps(language);
    SetSequence.fromSet(alreadyInDeps).addElement(language);
    Set<SNode> generatorDeps=unwrapExtractedDeps(SLinkOperations.getTarget(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),3189788309731840248l,9200313594498201639l,"generator")));
    for (    SNode dep : generatorDeps) {
      SNode extraDep=dep;
      if (SNodeOperations.isInstanceOf(dep,MetaAdapterFactory.getConcept(new UUID(934837630734519964l,-6831122735637083229l),5507251971038816436l,"jetbrains.mps.build.mps.structure.BuildMps_Generator"))) {
        extraDep=SLinkOperations.getTarget(SNodeOperations.cast(dep,MetaAdapterFactory.getConcept(new UUID(934837630734519964l,-6831122735637083229l),5507251971038816436l,"jetbrains.mps.build.mps.structure.BuildMps_Generator")),MetaAdapterFactory.getReferenceLink(new UUID(934837630734519964l,-6831122735637083229l),5507251971038816436l,868963075225252684l,"sourceLanguage"));
      }
      if (SetSequence.fromSet(alreadyInDeps).contains(extraDep)) {
        continue;
      }
      SNode newDep=SModelOperations.createNewNode(SNodeOperations.getModel(language),null,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyOnModule");
      SLinkOperations.setTarget(newDep,MetaAdapterFactory.getReferenceLink(new UUID(934837630734519964l,-6831122735637083229l),5253498789149585690l,5253498789149547705l,"module"),extraDep);
      ListSequence.fromList(SLinkOperations.getChildren(language,MetaAdapterFactory.getContainmentLink(new UUID(934837630734519964l,-6831122735637083229l),5253498789149381388l,5253498789149547704l,"dependencies"))).addElement(newDep);
      SetSequence.fromSet(alreadyInDeps).addElement(extraDep);
    }
  }
}
