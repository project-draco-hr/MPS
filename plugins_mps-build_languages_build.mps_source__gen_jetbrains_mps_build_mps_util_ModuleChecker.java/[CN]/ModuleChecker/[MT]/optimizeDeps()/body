{
  SNode module=SNodeOperations.cast(myModule,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508331930cL,"jetbrains.mps.build.mps.structure.BuildMps_Module"));
  List<SNode> deps=ListSequence.fromListWithValues(new ArrayList<SNode>(),SLinkOperations.getChildren(module,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508331930cL,0x48e82d5083341cb8L,"dependencies")));
  Map<String,SNode> ndeps=MapSequence.fromMap(new HashMap<String,SNode>());
  Set<String> extendedLanguages=SetSequence.fromSet(new HashSet<String>());
  Set<String> usedLanguages=SetSequence.fromSet(new HashSet<String>());
  for (  SNode originalDep : deps) {
    SNode dep=(SNodeOperations.isInstanceOf(originalDep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,"jetbrains.mps.build.mps.structure.BuildMps_ExtractedModuleDependency")) ? SLinkOperations.getTarget(SNodeOperations.cast(originalDep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,"jetbrains.mps.build.mps.structure.BuildMps_ExtractedModuleDependency")),MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,0x64bd442e1cf7aaefL,"dependency")) : originalDep);
    if (SNodeOperations.isInstanceOf(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyOnModule"))) {
      SNode depOnModule=SNodeOperations.cast(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyOnModule"));
      String uuid=SPropertyOperations.getString(SLinkOperations.getTarget(depOnModule,MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,0x48e82d5083341cb9L,"module")),MetaAdapterFactory.getProperty(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4780308f5d333ebL,0x4780308f5d3868bL,"uuid"));
      if (MapSequence.fromMap(ndeps).containsKey(uuid)) {
        SPropertyOperations.set(MapSequence.fromMap(ndeps).get(uuid),MetaAdapterFactory.getProperty(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,0x48e82d5083341cc1L,"reexport"),"" + (SPropertyOperations.getBoolean(MapSequence.fromMap(ndeps).get(uuid),MetaAdapterFactory.getProperty(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,0x48e82d5083341cc1L,"reexport")) || SPropertyOperations.getBoolean(depOnModule,MetaAdapterFactory.getProperty(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,0x48e82d5083341cc1L,"reexport"))));
        SNodeOperations.deleteNode(originalDep);
        continue;
      }
      MapSequence.fromMap(ndeps).put(uuid,depOnModule);
    }
 else     if (SNodeOperations.isInstanceOf(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x3b60c4a45c19032eL,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyExtendLanguage"))) {
      SNode extLang=SNodeOperations.cast(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x3b60c4a45c19032eL,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyExtendLanguage"));
      String uuid=SPropertyOperations.getString(SLinkOperations.getTarget(extLang,MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x3b60c4a45c19032eL,0x3b60c4a45c190330L,"language")),MetaAdapterFactory.getProperty(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4780308f5d333ebL,0x4780308f5d3868bL,"uuid"));
      if (SetSequence.fromSet(extendedLanguages).contains(uuid)) {
        SNodeOperations.deleteNode(originalDep);
        continue;
      }
      SetSequence.fromSet(extendedLanguages).addElement(uuid);
    }
 else     if (SNodeOperations.isInstanceOf(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c4467914643d2d2L,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyUseLanguage"))) {
      SNode extLang=SNodeOperations.cast(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c4467914643d2d2L,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyUseLanguage"));
      String uuid=SPropertyOperations.getString(SLinkOperations.getTarget(extLang,MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c4467914643d2d2L,0x2c4467914643d2d3L,"language")),MetaAdapterFactory.getProperty(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4780308f5d333ebL,0x4780308f5d3868bL,"uuid"));
      if (SetSequence.fromSet(usedLanguages).contains(uuid)) {
        SNodeOperations.deleteNode(originalDep);
        continue;
      }
      SetSequence.fromSet(usedLanguages).addElement(uuid);
    }
  }
  for (  SNode dep : ListSequence.fromListWithValues(new ArrayList<SNode>(),SLinkOperations.getChildren(module,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508331930cL,0x48e82d5083341cb8L,"dependencies")))) {
    if (SNodeOperations.isInstanceOf(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,"jetbrains.mps.build.mps.structure.BuildMps_ExtractedModuleDependency"))) {
      SNodeOperations.replaceWithAnother(dep,SLinkOperations.getTarget(SNodeOperations.cast(dep,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,"jetbrains.mps.build.mps.structure.BuildMps_ExtractedModuleDependency")),MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,0x64bd442e1cf7aaefL,"dependency")));
    }
  }
}
