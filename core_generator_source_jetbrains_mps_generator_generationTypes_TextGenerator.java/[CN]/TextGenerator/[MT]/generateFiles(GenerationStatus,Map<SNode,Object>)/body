{
  for (  SNode outputRootNode : outputNodeContents.keySet()) {
    String name=getFileName(outputRootNode);
    if (name == null) {
      Message m=new Message(MessageKind.ERROR,"Can't create file with no name. Root node [" + outputRootNode.getSNodeId() + "] in model "+ outputRootNode.getModel().getSModelFqName());
      m.setHintObject(new SNodePointer(outputRootNode));
      myTextGenProblems.add(m);
      continue;
    }
    Object contents=outputNodeContents.get(outputRootNode);
    if (contents instanceof String) {
      myStreamHandler.saveStream(name,(String)contents,false);
    }
 else {
      myStreamHandler.saveStream(name,(byte[])contents,false);
    }
  }
  DebugInfo debugInfoCache=null;
  ModelDependencies modelDep=null;
  GenerationDependencies dependencies=status.getDependencies();
  if (dependencies != null) {
    for (    GenerationRootDependencies rdep : dependencies.getUnchangedDependencies()) {
      for (      String filename : rdep.getFiles()) {
        if (myStreamHandler.touch(filename,false)) {
          if (modelDep == null) {
            modelDep=BLDependenciesCache.getInstance().get(status.getOriginalInputModel());
          }
          if (modelDep != null) {
            RootDependencies root=modelDep.getDependency(filename);
            if (root != null) {
              status.getBLDependencies().replaceRoot(root);
            }
          }
        }
      }
      if (debugInfoCache == null) {
        debugInfoCache=TraceInfoCache.getInstance().get(status.getOriginalInputModel());
      }
      if (debugInfoCache != null) {
        SNode node=rdep.getRootId() == null ? null : new SNodePointer(status.getOriginalInputModel().getSModelReference().toString(),rdep.getRootId()).getNode();
        DebugInfoRoot infoRoot=debugInfoCache.getRootInfo(node);
        if (infoRoot != null && status.getDebugInfo() != null) {
          status.getDebugInfo().replaceRoot(infoRoot);
        }
      }
    }
  }
}
