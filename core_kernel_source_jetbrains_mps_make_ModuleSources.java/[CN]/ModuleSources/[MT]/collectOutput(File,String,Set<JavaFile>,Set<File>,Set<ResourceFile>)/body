{
  File[] files=classesGen.listFiles();
  if (files == null)   return;
  for (  File file : files) {
    if (isIgnoredFileName(file.getName()))     continue;
    if (file.getName().endsWith(MPSExtentions.DOT_CLASSFILE)) {
      boolean isInnerClass=false;
      String containerName=file.getName().substring(0,file.getName().length() - MPSExtentions.DOT_CLASSFILE.length());
      if (containerName.contains("$")) {
        containerName=containerName.substring(0,containerName.indexOf("$"));
        isInnerClass=true;
      }
      String fqName=toPack(addSubPath(path,containerName));
      JavaFile javaFile=myJavaFiles.get(fqName);
      if (javaFile == null) {
        toDelete.add(file);
      }
 else       if (!isInnerClass && isFileUpToDate(javaFile,file.lastModified())) {
        toCompile.remove(javaFile);
      }
    }
 else     if (!file.isDirectory() && isResourceFileName(file.getName())) {
      String childPath=addSubPath(path,file.getName());
      ResourceFile resourceFile=myResourceFiles.get(childPath);
      if (resourceFile == null) {
        toDelete.add(file);
      }
 else       if (resourceFile.getFile().lastModified() < file.lastModified()) {
        resourcesToCopy.remove(resourceFile);
      }
    }
 else {
      collectOutput(file,addSubPath(path,file.getName()),toCompile,toDelete,resourcesToCopy);
    }
  }
}
