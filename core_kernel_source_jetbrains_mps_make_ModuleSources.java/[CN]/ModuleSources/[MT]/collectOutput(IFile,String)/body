{
  List<IFile> files=current.list();
  if (files == null)   return;
  for (  IFile file : files) {
    if (isIgnored(file))     continue;
    if (file.isDirectory()) {
      collectOutput(file,addSubPath(path,file.getName()));
    }
 else {
      if (file.getName().endsWith(MPSExtentions.DOT_CLASSFILE)) {
        String containerName=file.getName().substring(0,file.getName().length() - MPSExtentions.DOT_CLASSFILE.length());
        if (containerName.contains("$")) {
          containerName=containerName.substring(0,containerName.indexOf("$"));
        }
        String fqName=toPack(addSubPath(path,containerName));
        JavaFile javaFile=myJavaFiles.get(fqName);
        if (javaFile == null) {
          myFilesToDelete.add(file);
        }
 else         if (javaFile.getFile().lastModified() < file.lastModified()) {
          myFilesToCompile.remove(javaFile);
        }
      }
      if (isResourceFile(file)) {
        String childPath=addSubPath(path,file.getName());
        ResourceFile resourceFile=myResourceFiles.get(childPath);
        if (resourceFile == null) {
          myFilesToDelete.add(file);
        }
 else         if (resourceFile.getFile().lastModified() < file.lastModified()) {
          myResourcesToCopy.remove(resourceFile);
        }
      }
    }
  }
}
