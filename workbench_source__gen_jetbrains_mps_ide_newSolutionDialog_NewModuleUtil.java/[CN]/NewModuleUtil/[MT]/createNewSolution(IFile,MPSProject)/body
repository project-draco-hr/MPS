{
  File dir=solutionFile.toFile().getParentFile();
  if (!(dir.exists())) {
    dir.mkdirs();
  }
  SolutionDescriptor solutionDescriptor=new SolutionDescriptor();
  solutionDescriptor.setExternallyVisible(true);
  String fileName=solutionFile.getName();
  solutionDescriptor.setNamespace(fileName.substring(0,fileName.length() - 4));
  ModelRoot modelRoot=new ModelRoot();
  modelRoot.setPrefix("");
  modelRoot.setPath(solutionFile.getParent().getAbsolutePath());
  solutionDescriptor.getModelRoots().add(modelRoot);
  SolutionDescriptorPersistence.saveSolutionDescriptor(solutionFile,solutionDescriptor);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      VirtualFile file=VFileSystem.refreshAndGetFile(solutionFile);
      VcsMigrationUtil.getHandler().addFilesToVcs(Collections.singletonList(file),false,true);
    }
  }
,ModalityState.NON_MODAL);
  return project.addProjectSolution(solutionFile.toFile());
}
