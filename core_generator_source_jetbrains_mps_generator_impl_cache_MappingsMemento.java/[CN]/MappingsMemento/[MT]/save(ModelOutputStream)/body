{
  os.writeInt(myMappingNameAndInputNodeToOutputNodeMap.size());
  for (  Entry<String,Map<SNodeId,Object>> e : myMappingNameAndInputNodeToOutputNodeMap.entrySet()) {
    os.writeString(e.getKey());
    Map<SNodeId,Object> innerMap=e.getValue();
    os.writeInt(innerMap.size());
    for (    Entry<SNodeId,Object> v : innerMap.entrySet()) {
      os.writeNodeId(v.getKey());
      Object value=v.getValue();
      if (value instanceof SNodeId) {
        os.writeInt(1);
        os.writeNodeId((SNodeId)value);
      }
 else       if (value instanceof List) {
        os.writeInt(((List)value).size());
        for (        SNodeId id : (List<SNodeId>)value) {
          os.writeNodeId(id);
        }
      }
    }
  }
  os.writeInt(myCopiedOutputNodeForInputNode.size());
  for (  Entry<SNodeId,Object> e : myCopiedOutputNodeForInputNode.entrySet()) {
    os.writeNodeId(e.getKey());
    Object val=e.getValue();
    if (val instanceof SNodeId) {
      os.writeNodeId((SNodeId)val);
      os.writeBoolean(true);
    }
 else {
      os.writeNodeId(((List<SNodeId>)val).get(0));
      os.writeBoolean(false);
    }
  }
  os.writeByte('!');
}
