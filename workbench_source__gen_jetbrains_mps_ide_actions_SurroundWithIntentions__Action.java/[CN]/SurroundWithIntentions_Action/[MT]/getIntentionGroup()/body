{
  BaseGroup group=new BaseGroup("");
  List<Pair<Intention,SNode>> groupItems=new ArrayList<Pair<Intention,SNode>>();
  SNode nodeWithIntentions;
  if (SurroundWithIntentions_Action.this.nodes != null) {
    nodeWithIntentions=ListSequence.fromList(SurroundWithIntentions_Action.this.nodes).last();
  }
 else   if (SNodeOperations.isInstanceOf(SurroundWithIntentions_Action.this.selectedNode,"jetbrains.mps.baseLanguage.structure.Statement") || SNodeOperations.isInstanceOf(SurroundWithIntentions_Action.this.selectedNode,"jetbrains.mps.baseLanguage.structure.Expression")) {
    nodeWithIntentions=SurroundWithIntentions_Action.this.selectedNode;
  }
 else {
    nodeWithIntentions=SNodeOperations.getAncestor(SurroundWithIntentions_Action.this.selectedNode,"jetbrains.mps.baseLanguage.structure.Statement",false,false);
  }
  groupItems.addAll(IntentionsManager.getInstance().getAvailableIntentions(nodeWithIntentions,SurroundWithIntentions_Action.this.editorContext,null,SurroundWithIntention.class));
  if (groupItems.isEmpty()) {
    return null;
  }
  Collections.sort(groupItems,new Comparator<Pair<Intention,SNode>>(){
    public int compare(    Pair<Intention,SNode> p0,    Pair<Intention,SNode> p1){
      Intention intention1=p0.getFirst();
      Intention intention2=p1.getFirst();
      SNode node1=p0.getSecond();
      SNode node2=p1.getSecond();
      return intention1.getDescription(node1,SurroundWithIntentions_Action.this.editorContext).compareTo(intention2.getDescription(node2,SurroundWithIntentions_Action.this.editorContext));
    }
  }
);
  for (  final Pair<Intention,SNode> pair : groupItems) {
    BaseAction action=new BaseAction(pair.getFirst().getDescription(pair.getSecond(),SurroundWithIntentions_Action.this.editorContext)){
      protected void doExecute(      AnActionEvent p0){
        ModelAccess.instance().runCommandInEDT(new Runnable(){
          public void run(){
            pair.getFirst().execute(pair.getSecond(),SurroundWithIntentions_Action.this.editorContext);
          }
        }
);
      }
    }
;
    action.setExecuteOutsideCommand(true);
    group.add(action);
  }
  return group;
}
