{
  if (isLoading()) {
    myRoots.clear();
  }
 else {
    List<SNode> roots=new ArrayList<SNode>(myRoots);
    for (    SNode root : roots) {
      fireBeforeRootDeletedEvent(root);
      myRoots.remove(root);
      String id=root.getId();
      UndoManager.instance().undoableActionPerformed(new UndoRootAddOrDelete(root,id,true));
      fireRootDeletedEvent(root);
    }
  }
}
