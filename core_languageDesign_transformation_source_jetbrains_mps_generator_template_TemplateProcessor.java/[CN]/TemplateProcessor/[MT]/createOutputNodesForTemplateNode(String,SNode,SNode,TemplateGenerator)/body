{
  TemplateProcessor templateProcessor=new TemplateProcessor(generator);
  Map<String,SNode> old=generator.setPreviousInputNodesByMappingName(templateProcessor.myInputNodesByMappingName);
  try {
    List<SNode> outputNodels=templateProcessor.createOutputNodesForTemplateNode(mappingName,templateNode,inputNode,0,true);
    if (outputNodels == null) {
      throw new TemplateProcessingFailureException();
    }
    return outputNodels;
  }
  finally {
    generator.setPreviousInputNodesByMappingName(old);
  }
}
