{
  TemplateProcessor templateProcessor=new TemplateProcessor(generator);
  Map<String,SNode> old=generator.setPreviousInputNodesByMappingName(templateProcessor.myInputNodesByMappingName);
  try {
    List<SNode> outputNodels=templateProcessor.createOutputNodesForTemplateNode(mappingName,templateNode,inputNode,0,true);
    if (outputNodels == null) {
      throw new TemplateProcessingFailureException();
    }
    return outputNodels;
  }
 catch (  StackOverflowError e) {
    throw new GenerationFailedException(new GenerationFailueInfo("couldn't process template",inputNode,templateNode,null,generator.getOperationContext()),e);
  }
 finally {
    generator.setPreviousInputNodesByMappingName(old);
  }
}
