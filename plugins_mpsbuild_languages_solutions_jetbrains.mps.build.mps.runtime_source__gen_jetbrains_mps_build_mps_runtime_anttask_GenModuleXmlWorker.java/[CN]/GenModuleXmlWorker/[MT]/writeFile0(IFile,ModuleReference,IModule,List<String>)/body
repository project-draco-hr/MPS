{
  Element moduleElem=new Element("module");
  moduleElem.setAttribute("namespace",moduleRef.getModuleFqName());
  moduleElem.setAttribute("uuid",moduleRef.getModuleId() + "");
  moduleElem.setAttribute("type",(module instanceof Solution ? "solution" : (module instanceof Language ? "language" : "unknown")));
  Element depElem=new Element("dependencies");
  moduleElem.addContent(depElem);
  Collection<IModule> dependencies=getDepenencies(module);
  if (dependencies == null) {
    System.out.println("module " + moduleRef + " was not found in repository");
    return;
  }
  for (  IModule m : dependencies) {
    depElem.addContent(new Element("module").setAttribute("ref",m.getModuleReference().toString()));
  }
  StringBuilder sb=new StringBuilder();
  for (  String line : extraText) {
    sb.append(line).append("\n");
  }
  try {
    SAXBuilder builder=new SAXBuilder();
    Document doc=builder.build(new StringReader(sb.toString()));
    moduleElem.addContent(doc.detachRootElement());
    JDOMUtil.writeDocument(new Document(moduleElem),file);
  }
 catch (  JDOMException e) {
    error("Error writing \"" + sb.toString() + "\" to "+ file.getPath());
  }
catch (  IOException e) {
    error("Error writing to " + file.getPath());
  }
}
