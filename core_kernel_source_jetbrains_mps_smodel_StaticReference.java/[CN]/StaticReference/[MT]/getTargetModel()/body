{
  if (!isExternal()) {
    return getSourceNode().getModel();
  }
  SModelReference targetModelReference=getTargetSModelReference();
  if (targetModelReference == null) {
    return null;
  }
  SModelDescriptor current=getSourceNode().getModel().getModelDescriptor();
  SModelDescriptor modelDescriptor=current == null ? SModelRepository.getInstance().getModelDescriptor(targetModelReference) : current.resolveModel(targetModelReference);
  if (modelDescriptor == null) {
    return null;
  }
  SModel model=modelDescriptor.getSModel();
  if (model == null) {
    error("failed to get model '" + getTargetSModelReference() + "' from model desctiptor");
  }
  return model;
}
