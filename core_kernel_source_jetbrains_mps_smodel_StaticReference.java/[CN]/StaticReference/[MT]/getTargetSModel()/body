{
  SModel current=getSourceNode().getModel();
  if (current != null && current.getSModelReference().equals(getTargetSModelReference()))   return current;
  SModelReference targetModelReference=getTargetSModelReference();
  if (targetModelReference == null)   return null;
  SModelDescriptor modelDescriptor=null;
  if (current != null && current.getModelDescriptor() != null) {
    modelDescriptor=current.getModelDescriptor().resolveModel(targetModelReference);
  }
 else   if (!MPSCore.getInstance().isMergeDriverMode()) {
    modelDescriptor=SModelRepository.getInstance().getModelDescriptor(targetModelReference);
  }
  if (modelDescriptor == null)   return null;
  SModel model=modelDescriptor.getSModel();
  if (model == null) {
    error("failed to get model '" + getTargetSModelReference() + "' from model desctiptor");
  }
  return model;
}
