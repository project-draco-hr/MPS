{
  SModel current=getSourceNode().getModel();
  if (current != null && current.getReference().equals(getTargetSModelReference()))   return current;
  SModelReference targetModelReference=getTargetSModelReference();
  if (targetModelReference == null)   return null;
  SModel modelDescriptor=null;
  if (current != null && current.isInRepository()) {
    modelDescriptor=current.resolveModel(targetModelReference);
  }
 else   if (!MPSCore.getInstance().isMergeDriverMode()) {
    modelDescriptor=SModelRepository.getInstance().getModelDescriptor(targetModelReference);
  }
  if (modelDescriptor == null)   return null;
  SModel model=modelDescriptor;
  if (model == null) {
    error("failed to get model '" + getTargetSModelReference() + "' from model desctiptor");
  }
  return model;
}
