{
  ConceptDeclaration applicableConcept=rule.getApplicableConcept();
  if (applicableConcept == null) {
    generator.showErrorMessage(null,null,rule,"rule has no applicable concept defined");
    return;
  }
  boolean includeInheritors=rule.getApplyToConceptInheritors();
  List<SNode> nodes=outputModel.getModelDescriptor().getFastNodeFinder().getNodes((jetbrains.mps.bootstrap.structureLanguage.structure.ConceptDeclaration)applicableConcept.getAdapter(),includeInheritors);
  for (  SNode inputNode : nodes) {
    if (checkConditionForBaseMappingRule(generator,inputNode,rule)) {
      SNode templateNode=rule.getTemplate();
      createRootNodeFromTemplate(generator,rule.getName(),outputModel,templateNode,inputNode);
    }
  }
}
