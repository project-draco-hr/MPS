{
  TemplateDeclaration templateDeclaration=rule.getTemplate();
  List<SNode> inputNodes=createInputNodeListForWeavingRule(rule);
  for (  SNode inputNode : inputNodes) {
    SNode outputContextNode=getContextNodeForWeavingingRule(inputNode,rule.getNode(),rule.getContextProviderAspectId(),null);
    if (outputContextNode == null) {
      myGenerator.showErrorMessage(inputNode,rule.getNode(),"couldn't create context node");
      continue;
    }
    myGenerator.setChanged(true);
    weaveTemplateDeclaration(inputNode,templateDeclaration,outputContextNode,rule.getNode());
  }
}
