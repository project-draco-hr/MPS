{
  TemplateDeclaration templateDeclaration=rule.getTemplate();
  List<SNode> sourceNodes=createSourceNodeListForWeavingRule(rule);
  for (  SNode sourceNode : sourceNodes) {
    INodeBuilder contextNodeBuilder=getContextNodeForWeavingingRule(sourceNode,rule.getNode(),rule.getContextProviderAspectId());
    if (contextNodeBuilder == null) {
      myGenerator.showErrorMessage(sourceNode,rule.getNode(),"couldn't create context node");
      continue;
    }
    weaveTemplateDeclaration(sourceNode,templateDeclaration,contextNodeBuilder,rule.getNode());
  }
}
