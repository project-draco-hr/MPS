{
  TemplateDeclaration templateDeclaration=rule.getTemplate();
  List<SNode> inputNodes=createInputNodeListForWeavingRule(rule);
  for (  SNode inputNode : inputNodes) {
    INodeBuilder contextNodeBuilder=getContextNodeForWeavingingRule(inputNode,rule.getNode(),rule.getContextProviderAspectId());
    if (contextNodeBuilder == null) {
      myGenerator.showErrorMessage(inputNode,rule.getNode(),"couldn't create context node");
      continue;
    }
    myGenerator.setChanged(true);
    weaveTemplateDeclaration(inputNode,templateDeclaration,contextNodeBuilder.getTargetNode(),rule.getNode());
  }
}
