{
  TemplateDeclaration templateDeclaration=rule.getTemplate();
  List<SNode> sourceNodes=createSourceNodeListForWeavingRule(rule,generator);
  for (  SNode sourceNode : sourceNodes) {
    SNode contextNode=getContextNodeForWeavingingRule(sourceNode,rule,rule.getContextProviderAspectId(),generator);
    if (contextNode == null) {
      generator.showErrorMessage(sourceNode,rule,"couldn't create context node");
      continue;
    }
    weaveTemplateDeclaration(generator,outputModel,sourceNode,templateDeclaration,contextNode,rule);
  }
}
