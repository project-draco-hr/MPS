{
  TemplateDeclaration templateDeclaration=rule.getTemplate();
  List<SNode> sourceNodes=createSourceNodeListForWeavingRule(rule,generator);
  for (  SNode sourceNode : sourceNodes) {
    SNode contextNode=getContextNodeForWeavingingRule(sourceNode,rule.getNode(),rule.getContextProviderAspectId(),generator);
    if (contextNode == null) {
      generator.showErrorMessage(sourceNode,rule.getNode(),"couldn't create context node");
      continue;
    }
    weaveTemplateDeclaration(generator,outputModel,sourceNode,templateDeclaration,contextNode,rule.getNode());
  }
}
