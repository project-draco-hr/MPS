{
  List<SNode> outputNodes=myRuleManager.getReductionRuleManager().tryToReduce(templateNode);
  if (outputNodes != null) {
    return outputNodes;
  }
  SNode outputNode=ModelPersistence.createNodeInstance(templateNode.getClass().getName(),myOutputModel);
  if (outputNode == null) {
    myGenerator.showErrorMessage(null,templateNode,"'copyNodeFromInputNode' cannot create output node");
    return null;
  }
  myOutputModel.addLanguage(templateNode.getLanguage(myGenerator.getScope()));
  for (  String property : templateNode.getProperties().keySet()) {
    outputNode.setProperty(property,templateNode.getProperty(property),false);
  }
  for (  SReference reference : templateNode.getReferences()) {
    SNode templateReferentNode=reference.getTargetNode();
    if (templateReferentNode == null) {
      myGenerator.showErrorMessage(null,templateNode,"'copyNodeFromInputNode' referent node is null in template model");
      continue;
    }
    outputNode.addReferent(reference.getRole(),templateReferentNode);
  }
  for (  BaseAdapter templateChildNode : templateNode.getAdapter().getChildren()) {
    String childRole=templateNode.getRoleOf(templateChildNode.getNode());
    List<SNode> outputChildNodes=copyNodeFromInputNode(ruleName,templateChildNode.getNode(),inputNode);
    if (outputChildNodes != null) {
      for (      SNode outputChildNode : outputChildNodes) {
        outputNode.addChild(childRole,outputChildNode);
      }
    }
  }
  outputNodes=new LinkedList<SNode>();
  outputNodes.add(outputNode);
  return outputNodes;
}
