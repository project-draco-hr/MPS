{
  if (ruleConsequence instanceof DismissTopMappingRule) {
    GeneratorMessage message=((DismissTopMappingRule)ruleConsequence).getGeneratorMessage();
    String text=message.getMessageText();
    if (message.getMessageType() == GeneratorMessageType.error) {
      generator.showErrorMessage(inputNode,null,ruleNode,text);
    }
 else     if (message.getMessageType() == GeneratorMessageType.warning) {
      generator.showWarningMessage(inputNode,text);
    }
 else {
      generator.showInformationMessage(inputNode,text);
    }
    throw new DismissTopMappingRuleException();
  }
 else   if (ruleConsequence instanceof TemplateDeclarationReference) {
    TemplateDeclaration templateDecl=((TemplateDeclarationReference)ruleConsequence).getTemplate();
    TemplateFragment fragment=getFragmentFromTemplate(templateDecl,inputNode,ruleNode,generator);
    if (fragment != null) {
      return fragment.getParent().getNode();
    }
    return null;
  }
 else   if (ruleConsequence instanceof InlineTemplate_RuleConsequence) {
    return BaseAdapter.fromAdapter(((InlineTemplate_RuleConsequence)ruleConsequence).getTemplateNode());
  }
  generator.showErrorMessage(inputNode,null,ruleNode,"failed to process $SWITCH$ : unsupported rule consequence");
  return null;
}
