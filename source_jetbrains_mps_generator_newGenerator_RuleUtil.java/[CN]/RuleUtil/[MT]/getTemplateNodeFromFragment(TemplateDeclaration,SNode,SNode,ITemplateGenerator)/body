{
  List<TemplateFragment> templateFragments=getTemplateFragments(template);
  if (templateFragments.isEmpty()) {
    generator.showErrorMessage(inputNode,BaseAdapter.fromAdapter(template),ruleNode,"couldn't process template: no template fragments found");
    return null;
  }
  if (templateFragments.size() > 1) {
    generator.showErrorMessage(inputNode,BaseAdapter.fromAdapter(template),ruleNode,"couldn't process template: more than one (" + templateFragments.size() + ") fragments found");
    return null;
  }
  TemplateFragment templateFragment=templateFragments.get(0);
  SNode templateNode=BaseAdapter.fromAdapter(templateFragment.getParent());
  return templateNode;
}
