{
  final EditorCell_RTHint rightTransformHintCell=EditorCell_RTHint.create(context,node);
  final CellInfo nodeCellInfo=context.getNodeEditorComponent().getRecentlySelectedCellInfo();
  rightTransformHintCell.setAction(EditorCellAction.DELETE,new EditorCellAction(){
    public void execute(    final EditorContext context){
      removeRTHintAndChangeSelection(context,node,nodeCellInfo);
    }
  }
);
  rightTransformHintCell.setAction(EditorCellAction.RIGHT_TRANSFORM,new EditorCellAction(){
    public void execute(    EditorContext context){
      removeRTHintAndChangeSelection(context,node,nodeCellInfo);
    }
  }
);
  EditorCellKeyMap keyMap=new EditorCellKeyMap();
  keyMap.putAction(EditorCellKeyMap.KEY_MODIFIERS_NONE,"VK_ESCAPE",new EditorCellKeyMapAction(){
    public void execute(    KeyEvent keyEvent,    final EditorContext context){
      removeRTHintAndChangeSelection(context,node,nodeCellInfo);
    }
  }
);
  rightTransformHintCell.addKeyMap(keyMap);
  final String transformTag=(String)node.getUserObject(RIGHT_TRANSFORM_HINT_ANCHOR_TAG);
  rightTransformHintCell.setSubstituteInfo(new AbstractNodeSubstituteInfo(context){
    protected List<INodeSubstituteAction> createActions(){
      List list=ModelActions.createRightTransformHintSubstituteActions(node,transformTag,context.getOperationContext());
      List wrapperList=new LinkedList();
      for (      Object action : list) {
        wrapperList.add(new NodeSubstituteActionWrapper((INodeSubstituteAction)action){
          public SNode doSubstitute(          String pattern){
            node.removeRightTransformHint();
            return super.doSubstitute(pattern);
          }
        }
);
      }
      return wrapperList;
    }
  }
);
  EditorCell resultCell;
  Object anchorId=node.getUserObject(RIGHT_TRANSFORM_HINT_ANCHOR_CELL_ID);
  EditorCell anchorCell=anchorId == null ? null : context.getNodeEditorComponent().findCellWithId(nodeCell,anchorId.toString());
  if (anchorCell != null && anchorCell != nodeCell) {
    EditorCell_Collection cellCollection=anchorCell.getParent();
    cellCollection.addCellAt(cellCollection.indexOf(anchorCell) + 1,rightTransformHintCell);
    resultCell=nodeCell;
    rightTransformHintCell.setAnchor(anchorCell);
  }
 else {
    EditorCell_Collection rowWrapper=EditorCell_Collection.createHorizontal(context,node);
    rowWrapper.setSelectable(false);
    rowWrapper.setDrawBorder(false);
    rowWrapper.addEditorCell(nodeCell);
    rowWrapper.addEditorCell(rightTransformHintCell);
    resultCell=rowWrapper;
    rightTransformHintCell.setAnchor(nodeCell);
  }
  if (node.getUserObject(RIGHT_TRANSFORM_HINT_JUST_ADDED) != null) {
    CommandProcessor.instance().invokeLater(new Runnable(){
      public void run(){
        node.removeUserObject(RIGHT_TRANSFORM_HINT_JUST_ADDED);
        if (node.hasRightTransformHint()) {
          context.getNodeEditorComponent().changeSelection(rightTransformHintCell);
        }
      }
    }
);
  }
  return resultCell;
}
