{
  final PathMacros pathMacros=PathMacros.getInstance();
  List<CommandPart> macroValues=ListSequence.fromList(new ArrayList<CommandPart>());
  if (toDefine == null || ListSequence.fromList(toDefine).contains("mps_home")) {
    ListSequence.fromList(macroValues).addElement(new PropertyCommandPart("mps_home",jetbrains.mps.util.PathManager.getHomePath()));
  }
  return ListSequence.fromList(macroValues).union(Sequence.fromIterable(Sequence.fromClosure(new ISequenceClosure<String>(){
    public Iterable<String> iterable(){
      return pathMacros.getUserMacroNames();
    }
  }
)).where(new IWhereFilter<String>(){
    public boolean accept(    String it){
      return toDefine == null || ListSequence.fromList(toDefine).contains(it);
    }
  }
).select(new ISelector<String,CommandPart>(){
    public CommandPart select(    String it){
      return (CommandPart)new PropertyCommandPart(it,pathMacros.getValue(it));
    }
  }
));
}
