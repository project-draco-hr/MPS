{
  SNode result=SNodeOperations.copyNode(typeWithVars);
  List<SNode> varRefs=SNodeOperations.getDescendants(result,"jetbrains.mps.baseLanguage.structure.TypeVariableReference",false,new String[]{});
  List<SNode> params=ListSequence.fromList(SLinkOperations.getTargets(classifierSubtype,"parameter",true)).toListSequence();
  for (  SNode varRef : varRefs) {
    SNodeOperations.replaceWithAnother(varRef,SNodeOperations.copyNode(ListSequence.fromList(params).getElement(SNodeOperations.getIndexInParent(SLinkOperations.getTarget(varRef,"typeVariableDeclaration",false)))));
  }
  return result;
}
