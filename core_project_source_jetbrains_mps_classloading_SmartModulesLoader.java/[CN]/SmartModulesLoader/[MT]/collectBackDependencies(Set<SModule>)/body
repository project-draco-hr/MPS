{
  Set<SModule> result=new HashSet<SModule>();
  Iterable<SModule> allModules=myRepository.getModules();
  for (  SModule module1 : allModules) {
    if (!myClassLoaderManager.canLoad(module1))     continue;
    if (modules.contains(module1)) {
      result.add(module1);
      continue;
    }
    Collection<SModule> dependencies=new GlobalModuleDependenciesManager(module1).getModules(Deptype.COMPILE);
    for (    SModule module : modules)     if (dependencies.contains(module)) {
      result.add(module1);
      break;
    }
  }
  return result;
}
