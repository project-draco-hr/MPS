{
  if (!(node instanceof SModelTreeNode || node instanceof ProjectModuleTreeNode || node instanceof ProjectTreeNode)) {
    return;
  }
  myExecutor.execute(new Runnable(){
    public void run(){
      if (!TreeNodeUpdater.checkDisposed(node))       return;
      Project project=ProjectHelper.toIdeaProject(node.getOperationContext().getProject());
      if (project != null) {
        DumbService.getInstance(project).waitForSmartMode();
      }
      if (node instanceof SModelTreeNode) {
        visitModelNode(((SModelTreeNode)node));
      }
      if (node instanceof ProjectModuleTreeNode) {
        visitModuleNode(((ProjectModuleTreeNode)node));
      }
      if (node instanceof ProjectTreeNode) {
        visitProjectNode(((ProjectTreeNode)node));
      }
    }
  }
);
}
