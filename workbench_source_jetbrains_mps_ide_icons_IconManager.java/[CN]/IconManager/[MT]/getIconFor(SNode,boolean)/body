{
  return ModelAccess.instance().runReadAction(new Computable<Icon>(){
    public Icon compute(){
      Icon mainIcon=null;
      if (SNodeOperations.isUnknown(node)) {
        return Icons.UNKNOWN_ICON;
      }
      if (node.getConceptDeclarationAdapter() instanceof ConceptDeclaration) {
        ConceptDeclaration concept=(ConceptDeclaration)node.getConceptDeclarationAdapter();
        Method alternativeIconMethod=ModelConstraintsManager.getInstance().getAlternativeIconMethod(concept);
        Icon alternativeIcon=null;
        try {
          if (alternativeIconMethod != null) {
            Object iconObject=alternativeIconMethod.invoke(null,node);
            if (iconObject != null) {
              String alternativeIconPath=(String)iconObject;
              alternativeIcon=getIconFor(concept,alternativeIconPath);
            }
          }
        }
 catch (        Throwable t) {
        }
        if (alternativeIcon != null) {
          mainIcon=alternativeIcon;
        }
 else {
          mainIcon=IconManager.getIconFor(concept);
        }
      }
      if (mainIcon == null) {
        if (node.isRoot()) {
          return Icons.DEFAULT_ROOT_ICON;
        }
 else {
          return Icons.DEFAULT_NODE_ICON;
        }
      }
      SModel model=node.getModel();
      if (model.isDisposed()) {
        return mainIcon;
      }
      if (model.isNotEditable()) {
        mainIcon=new LayeredIcon(mainIcon,com.intellij.util.Icons.LOCKED_ICON);
      }
      RowIcon result=new RowIcon(2);
      result.setIcon(mainIcon,0);
      if (!withoutAdditional) {
        result.setIcon(BaseConcept_Behavior.call_getAdditionalIcon_5017341185733863694(node),1);
      }
      List<Icon> markIcons=BaseConcept_Behavior.call_getMarkIcons_3923831204883340393(node);
      if (markIcons != null) {
        LayeredIcon layeredIcon=new LayeredIcon(markIcons.size() + 1);
        layeredIcon.setIcon(result,0);
        for (int i=0; i < markIcons.size(); i++) {
          layeredIcon.setIcon(markIcons.get(i),i + 1);
        }
        return layeredIcon;
      }
      return result;
    }
  }
);
}
