{
  ImageIcon icon=null;
  if (file.exists()) {
    byte[] image=new byte[(int)file.length()];
    InputStream is=null;
    try {
      is=file.openInputStream();
      int current=0;
      while (true) {
        int result=is.read(image,current,image.length - current);
        if (result == -1 || result == 0) {
          break;
        }
 else {
          current+=result;
        }
      }
    }
 catch (    IOException e) {
      LOG.error(e);
    }
 finally {
      try {
        if (is != null) {
          is.close();
        }
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
    icon=new ImageIcon(image);
    if ((icon.getImageLoadStatus() & IMAGE_LOADED) == 0) {
      icon=null;
    }
  }
  return icon;
}
