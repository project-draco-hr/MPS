{
  if (node == null)   return null;
  fireNodeTypeAccessed(node);
  TypeCheckingContext context;
  if (isGenerationMode() || isTransformationTestMode()) {
    if (myPerformanceTracer == null) {
      context=NodeTypesComponentsRepository.getInstance().createIsolatedTypeCheckingContext(node);
    }
 else {
      context=NodeTypesComponentsRepository.getInstance().createTracingTypeCheckingContext(node);
    }
  }
 else {
    context=NodeTypesComponentsRepository.getInstance().createTypeCheckingContext(node);
  }
  if (context == null)   return null;
  return context.getTypeOf(node,this);
}
