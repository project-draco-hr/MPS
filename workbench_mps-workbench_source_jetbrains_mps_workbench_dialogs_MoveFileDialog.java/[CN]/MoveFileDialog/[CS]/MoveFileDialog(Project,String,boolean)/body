{
  super(project);
  setTitle("Move");
  myDirectoryField.setText(initialText);
  myDirectoryField.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          FileChooserDescriptor chooser=new FileChooserDescriptor(false,true,false,false,false,false);
          FileChooserDialog dialog=FileChooserFactory.getInstance().createFileChooser(chooser,getOwner());
          VirtualFile[] selectedFiles=dialog.choose(VirtualFileUtils.getVirtualFile(FileSystem.getInstance().getFileByPath(initialText)),project);
          if (selectedFiles.length > 0 && selectedFiles[0] != null) {
            myDirectoryField.setText(selectedFiles[0].getPath());
          }
        }
      }
);
    }
  }
);
  String type=(isDirectory) ? "directory" : "file";
  myLabel=new JLabel("Move " + type + " "+ initialText);
  init();
}
