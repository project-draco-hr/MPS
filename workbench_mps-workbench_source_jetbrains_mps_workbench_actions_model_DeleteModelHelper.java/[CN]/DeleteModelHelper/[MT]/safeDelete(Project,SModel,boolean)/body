{
  IRefactoring ref=new SafeDeleteModelRefactoring(deleteFiles);
  final RefactoringContext context=new RefactoringContext(ref);
  context.setSelectedModel((SModelDescriptor)modelDescriptor);
  context.setSelectedModule((IModule)modelDescriptor.getModule());
  context.setSelectedProject(ProjectHelper.toMPSProject(project));
  context.setCurrentOperationContext(new ProjectOperationContext(ProjectHelper.toMPSProject(project)));
  ModelAccess.instance().runWriteInEDT(new Runnable(){
    @Override public void run(){
      if (modelDescriptor.getReference().resolve(MPSModuleRepository.getInstance()) != modelDescriptor)       return;
      RefactoringAccess.getInstance().getRefactoringFacade().execute(context);
    }
  }
);
}
