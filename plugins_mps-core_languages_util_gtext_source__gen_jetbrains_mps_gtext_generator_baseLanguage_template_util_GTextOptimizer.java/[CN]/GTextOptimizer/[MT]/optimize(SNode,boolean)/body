{
  if (SNodeOperations.isInstanceOf(item,"jetbrains.mps.gtext.structure.GItemList") || SNodeOperations.isInstanceOf(item,"jetbrains.mps.gtext.structure.GConditionalLine") || SNodeOperations.isInstanceOf(item,"jetbrains.mps.gtext.structure.GLine")) {
    if (optimizeItems(item) == 1 && mayReplace && SNodeOperations.isInstanceOf(item,"jetbrains.mps.gtext.structure.GItemList")) {
      SNode child=(SNode)(item.getChildren("item").iterator().next());
      SNodeOperations.replaceWithAnother(item,child);
      item=child;
    }
    return item;
  }
  return item;
}
