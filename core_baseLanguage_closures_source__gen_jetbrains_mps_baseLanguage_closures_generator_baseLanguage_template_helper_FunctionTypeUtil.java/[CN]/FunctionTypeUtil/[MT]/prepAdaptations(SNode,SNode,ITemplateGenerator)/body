{
  SNode lCType=(SNodeOperations.isInstanceOf(ltype,"jetbrains.mps.baseLanguage.structure.ClassifierType") ? ltype : null);
  SNode lFType=(SNodeOperations.isInstanceOf(ltype,"jetbrains.mps.baseLanguage.closures.structure.FunctionType") ? ltype : null);
  if ((lFType == null) && (lCType == null)) {
    return;
  }
  if (Constants.ONLY_CLOSURE_LITERAL_AS_FUNCTION_TYPE) {
    if (!(SNodeOperations.isInstanceOf(rexpr,"jetbrains.mps.baseLanguage.closures.structure.ClosureLiteral"))) {
      return;
    }
  }
  SNode rtype=TypeChecker.getInstance().getTypeOf(rexpr);
  SNode rFType=(SNodeOperations.isInstanceOf(rtype,"jetbrains.mps.baseLanguage.closures.structure.FunctionType") ? rtype : null);
  SNode rCType=(SNodeOperations.isInstanceOf(rtype,"jetbrains.mps.baseLanguage.structure.ClassifierType") ? rtype : null);
  if ((lCType != null) && (rFType != null)) {
    if (SNodeOperations.isInstanceOf(rexpr,"jetbrains.mps.baseLanguage.closures.structure.ClosureLiteral")) {
      ClosureLiteralUtil.addAdaptableClosureLiteralTarget(rexpr,lCType,generator);
    }
 else {
      FunctionTypeUtil.addAdaptableClassifierTypeTarget(ClassifierTypeUtil.getDeclarationClassifierType(rFType),lCType,generator);
      FunctionTypeUtil.putPrepData(rexpr,INamedConcept_Behavior.call_getFqName_1213877404258(SLinkOperations.getTarget(lCType,"classifier",false)),generator);
    }
  }
 else   if ((lFType != null) && (rCType != null)) {
    FunctionTypeUtil.addAdaptableClassifierTypeTarget(rCType,ClassifierTypeUtil.getDeclarationClassifierType(lFType),generator);
    FunctionTypeUtil.putPrepData(rexpr,INamedConcept_Behavior.call_getFqName_1213877404258(SLinkOperations.getTarget(ClassifierTypeUtil.getDeclarationClassifierType(lFType),"classifier",false)),generator);
  }
 else   if ((lFType != null) && (rFType != null)) {
    if (SNodeOperations.isInstanceOf(rexpr,"jetbrains.mps.baseLanguage.closures.structure.ClosureLiteral")) {
      ClosureLiteralUtil.addAdaptableClosureLiteralTarget(rexpr,ClassifierTypeUtil.getClassifierType(lFType,SLinkOperations.getTargets(rFType,"parameterType",true)),generator);
    }
 else     if (SLinkOperations.getCount(lFType,"throwsType") != SLinkOperations.getCount(rFType,"throwsType")) {
      FunctionTypeUtil.addAdaptableClassifierTypeTarget(ClassifierTypeUtil.getDeclarationClassifierType(rFType),ClassifierTypeUtil.getDeclarationClassifierType(lFType),generator);
      FunctionTypeUtil.putPrepData(rexpr,INamedConcept_Behavior.call_getFqName_1213877404258(SLinkOperations.getTarget(ClassifierTypeUtil.getDeclarationClassifierType(lFType),"classifier",false)),generator);
    }
  }
}
