{
  if (selectedNode instanceof MPSPsiElementTreeNode) {
    MPSPsiNode value=((MPSPsiElementTreeNode)selectedNode).getValue();
    return getModel(value);
  }
 else   if (selectedNode instanceof MPSPsiModelTreeNode) {
    MPSPsiModel psiModel=((MPSPsiModelTreeNode)selectedNode).getModel();
    SModel sModel=psiModel.getSModelReference().resolve(MPSModuleRepository.getInstance());
    return (EditableSModelDescriptor)sModel;
  }
  return null;
}
