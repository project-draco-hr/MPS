{
  if (selectedNode instanceof MPSPsiElementTreeNode) {
    MPSPsiNodeBase value=((MPSPsiElementTreeNode)selectedNode).getValue();
    return getModel(value);
  }
 else   if (selectedNode instanceof MPSPsiModelTreeNode) {
    MPSPsiModel psiModel=((MPSPsiModelTreeNode)selectedNode).getModel();
    SModel sModel=psiModel.getSModelReference().resolve(ProjectHelper.getProjectRepository(selectedNode.getProject()));
    return (EditableSModel)sModel;
  }
  return null;
}
