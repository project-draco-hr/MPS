{
  if (!(treeNode instanceof MPSPsiModelTreeNode)) {
    return null;
  }
  MPSPsiModelTreeNode modelTreeNode=(MPSPsiModelTreeNode)treeNode;
  VirtualFile modelVFile=modelTreeNode.getVirtualFile();
  if (modelVFile == null || modelVFile.getFileType() != MPSFileTypeFactory.MPS_FILE_TYPE)   return null;
  return modelVFile;
}
