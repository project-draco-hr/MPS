{
  final IFile modelFile=getModelFile(parent);
  if (modelFile == null || !(parent instanceof PsiFileNode))   return children;
  final List<AbstractTreeNode> newChildren=new ArrayList<AbstractTreeNode>(children);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      SModelDescriptor descr=SModelRepository.getInstance().findModel(modelFile);
      if (descr == null)       return;
      SModel model=descr.getSModel();
      if (model == null)       return;
      for (      SNode root : model.roots()) {
        newChildren.add(new MPSProjectViewNode(parent.getProject(),root,settings));
      }
    }
  }
);
  return newChildren;
}
