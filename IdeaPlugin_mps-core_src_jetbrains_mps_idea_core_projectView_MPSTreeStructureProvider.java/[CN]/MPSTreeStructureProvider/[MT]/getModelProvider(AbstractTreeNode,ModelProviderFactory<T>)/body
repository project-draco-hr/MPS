{
  if (!(treeNode instanceof MPSPsiModelTreeNode))   return null;
  MPSPsiModel psiModel=((MPSPsiModelTreeNode)treeNode).getModel();
  if (!psiModel.isValid())   return null;
  Project project=treeNode.getProject();
  EditableSModelDescriptor modelDescriptor=getModel(treeNode);
  jetbrains.mps.project.Project mpsProject=ProjectHelper.toMPSProject(project);
  if (mpsProject == null || modelDescriptor == null)   return null;
  SModel sModel=modelDescriptor;
  if (sModel == null)   return null;
  return createProvider.create(modelDescriptor,sModel,mpsProject);
}
