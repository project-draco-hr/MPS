{
  if (!(treeNode instanceof MPSPsiElementTreeNode)) {
    return null;
  }
  MPSPsiNodeBase psiNode=((MPSPsiElementTreeNode)treeNode).getValue();
  if (!(psiNode instanceof MPSPsiRealNode)) {
    return null;
  }
  final SNodeReference nodeRef=((MPSPsiRealNode)psiNode).getSNodeReference();
  final SRepository repository=ProjectHelper.getProjectRepository(treeNode.getProject());
  return new ModelComputeRunnable<SNode>(new Computable<SNode>(){
    @Override public SNode compute(){
      return nodeRef.resolve(repository);
    }
  }
).runRead(repository.getModelAccess());
}
