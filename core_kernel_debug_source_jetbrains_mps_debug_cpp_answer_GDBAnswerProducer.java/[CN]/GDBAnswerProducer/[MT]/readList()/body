{
  if (currentChar() != '[') {
    error("");
    return null;
  }
  myOffset++;
  if (currentChar() == ']') {
    myOffset++;
    return new ListValue();
  }
  Object first=getValueOrResult();
  boolean isMap=first instanceof Pair;
  if (isMap) {
    ListMapValue listMapValue=new ListMapValue();
    Pair<String,GDBValue> pair=(Pair<String,GDBValue>)first;
    listMapValue.putProperty(pair.o1,pair.o2);
    while (true) {
      Pair<String,GDBValue> result=readResult();
      if (currentChar() == ',') {
        listMapValue.putProperty(result.o1,result.o2);
        myOffset++;
      }
 else       if (currentChar() == ']') {
        listMapValue.putProperty(result.o1,result.o2);
        myOffset++;
        return listMapValue;
      }
 else {
        error("");
        return null;
      }
    }
  }
 else {
    ListValue listValue=new ListValue();
    listValue.add((GDBValue)first);
    while (true) {
      GDBValue value=readValue();
      if (currentChar() == ',') {
        listValue.add(value);
        myOffset++;
      }
 else       if (currentChar() == ']') {
        listValue.add(value);
        myOffset++;
        return listValue;
      }
 else {
        error("");
        return null;
      }
    }
  }
}
