{
  if (ListSequence.<SNode>fromList(AbstractConceptDeclaration_Behavior.call_getLinkDeclarations_1213877394480(thisNode)).contains(link) && !(ListSequence.<SNode>fromList(SLinkOperations.getTargets(thisNode,"linkDeclaration",true)).contains(link))) {
    for (    SNode linkDeclarationOfMine : SLinkOperations.getTargets(thisNode,"linkDeclaration",true)) {
      if (SLinkOperations.getTarget(linkDeclarationOfMine,"specializedLink",false) == link) {
        return null;
      }
    }
    if (SConceptOperations.isSuperConceptOf(SLinkOperations.getTarget(link,"target",false),NameUtil.nodeFQName(targetConcept))) {
      SNode result=SLinkOperations.addNewChild(thisNode,"linkDeclaration","jetbrains.mps.lang.structure.structure.LinkDeclaration");
      SLinkOperations.setTarget(result,"target",targetConcept,false);
      SLinkOperations.setTarget(result,"specializedLink",link,false);
      SPropertyOperations.set(result,"metaClass",SPropertyOperations.getString_def(link,"metaClass","reference"));
      SPropertyOperations.set(result,"role",SPropertyOperations.getString(link,"role"));
      return result;
    }
  }
  return null;
}
