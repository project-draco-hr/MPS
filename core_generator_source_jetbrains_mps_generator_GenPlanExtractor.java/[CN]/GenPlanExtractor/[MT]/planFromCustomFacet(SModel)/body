{
  final SModule ownerModule=model.getModule();
  final CustomGenerationModuleFacet facet=myOwnerModuleToFacet.get(ownerModule);
  if (facet != null) {
    return facet.getPlan(model);
  }
  if (!myOwnerModulesNoCustomFacet.contains(ownerModule)) {
    CustomGenerationModuleFacet f=ownerModule.getFacet(CustomGenerationModuleFacet.class);
    if (f != null) {
      myOwnerModuleToFacet.put(ownerModule,f);
      return f.getPlan(model);
    }
 else {
      myOwnerModulesNoCustomFacet.add(ownerModule);
    }
  }
  return null;
}
