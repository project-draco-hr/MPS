{
  super.preConfigureFacet(configuration);
  try {
    PlatformTestUtil.dispatchAllInvocationEventsInIdeEventQueue();
  }
 catch (  InterruptedException e) {
  }
  final Exception[] thrown=new Exception[1];
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      try {
        prepareTestData(configuration);
      }
 catch (      Exception e) {
        thrown[0]=e;
      }
    }
  }
);
  if (thrown[0] != null)   throw new RuntimeException(thrown[0]);
}
