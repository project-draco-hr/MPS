{
  int rowsCount=myIsDefSModelDescr ? 6 : 5;
  int rowIndex=0;
  final JPanel panel=new JPanel();
  panel.setLayout(new GridLayoutManager(rowsCount,1,INSETS,-1,-1));
  myDoNotGenerateCheckBox=new JBCheckBox(PropertiesBundle.message("mps.properties.model.info.checkboxDNG"),myModelProperties.isDoNotGenerate());
  panel.add(myDoNotGenerateCheckBox,new GridConstraints(rowIndex++,0,1,1,GridConstraints.ANCHOR_NORTHWEST,GridConstraints.FILL_HORIZONTAL,GridConstraints.SIZEPOLICY_CAN_GROW | GridConstraints.SIZEPOLICY_CAN_SHRINK,GridConstraints.SIZEPOLICY_FIXED,null,null,null,0,false));
  if (myIsDefSModelDescr) {
    myGenerateIntoModelFolderCheckBox=new JBCheckBox(PropertiesBundle.message("mps.properties.model.info.checkboxGIMF"),myModelProperties.isGenerateIntoModelFolder());
    panel.add(myGenerateIntoModelFolderCheckBox,new GridConstraints(rowIndex++,0,1,1,GridConstraints.ANCHOR_NORTHWEST,GridConstraints.FILL_HORIZONTAL,GridConstraints.SIZEPOLICY_CAN_GROW | GridConstraints.SIZEPOLICY_CAN_SHRINK,GridConstraints.SIZEPOLICY_FIXED,null,null,null,0,false));
  }
  panel.add(new JBLabel(PropertiesBundle.message("mps.properties.common.filepathlabel")),new GridConstraints(rowIndex++,0,1,1,GridConstraints.ANCHOR_NORTHWEST,GridConstraints.FILL_NONE,GridConstraints.SIZEPOLICY_FIXED,GridConstraints.SIZEPOLICY_FIXED,null,null,null,0,false));
  String filePath="(not editable model)";
  if (myModelDescriptor instanceof EditableSModel) {
    DataSource source=myModelDescriptor.getSource();
    if (source instanceof FileDataSource) {
      filePath=FileUtil.getCanonicalPath(((FileDataSource)source).getFile().getPath());
    }
 else     if (source instanceof FolderDataSource) {
      filePath=FileUtil.getCanonicalPath(((FolderDataSource)source).getFolder().getPath());
    }
  }
  JTextField textField=new JTextField();
  textField.setEditable(false);
  textField.setText(filePath);
  panel.add(textField,new GridConstraints(rowIndex++,0,1,1,GridConstraints.ANCHOR_NORTHWEST,GridConstraints.FILL_HORIZONTAL,GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,GridConstraints.SIZEPOLICY_FIXED,null,null,null));
  final JBTable languagesTable=new JBTable();
  languagesTable.setShowHorizontalLines(false);
  languagesTable.setShowVerticalLines(false);
  languagesTable.setAutoCreateRowSorter(false);
  languagesTable.setAutoscrolls(true);
  languagesTable.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
  myLangEngagedOnGenTM=new ModelsLangEngagedOnGenTM(myModelProperties);
  languagesTable.setModel(myLangEngagedOnGenTM);
  final SRepository contextRepo=myModelProperties.getModelDescriptor().getRepository();
  ModuleTableCellRender engagedLanguages=new ModuleTableCellRender(contextRepo);
  Set<SModuleReference> languagesInUse=new ModelComputeRunnable<Set<SModuleReference>>(new ComputeUsedLanguages(myModelDescriptor)).runRead(contextRepo.getModelAccess());
  IsModuleInUse inUseCondition=new IsModuleInUse(languagesInUse,Collections.<SModuleReference>emptySet());
  engagedLanguages.addCellState(inUseCondition,DependencyCellState.SUPERFLUOUS_ENGAGED);
  languagesTable.setDefaultRenderer(SModuleReference.class,engagedLanguages);
  ToolbarDecorator decorator=ToolbarDecorator.createDecorator(languagesTable);
  decorator.setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
      Iterable<SModule> modules=new ConditionalIterable<SModule>(getProjectModules(),new ModuleInstanceCondition(Language.class));
      modules=new ConditionalIterable<SModule>(modules,new VisibleModuleCondition());
      ComputeRunnable<List<SModuleReference>> c=new ComputeRunnable<List<SModuleReference>>(new ModuleCollector(modules));
      myProject.getModelAccess().runReadAction(c);
      List<SModuleReference> list=CommonChoosers.showModuleSetChooser(myProject,"Choose languages",c.getResult());
      for (      SModuleReference reference : list) {
        myLangEngagedOnGenTM.addItem(reference);
      }
    }
  }
).setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton anActionButton){
      int first=languagesTable.getSelectionModel().getMinSelectionIndex();
      int last=languagesTable.getSelectionModel().getMaxSelectionIndex();
      TableUtil.removeSelectedItems(languagesTable);
      myLangEngagedOnGenTM.fireTableRowsDeleted(first,last);
      first=Math.max(0,first - 1);
      languagesTable.getSelectionModel().setSelectionInterval(first,first);
    }
  }
);
  decorator.setPreferredSize(new Dimension(500,150));
  JPanel table=decorator.createPanel();
  table.setBorder(IdeBorderFactory.createBorder());
  panel.add(table,new GridConstraints(rowIndex,0,1,1,GridConstraints.ANCHOR_NORTHWEST,GridConstraints.FILL_BOTH,GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,null,null,null,0,false));
  new SpeedSearchBase<JBTable>(languagesTable){
    @Override public int getSelectedIndex(){
      return languagesTable.getSelectedRow();
    }
    @Override protected int convertIndexToModel(    int viewIndex){
      return languagesTable.convertRowIndexToModel(viewIndex);
    }
    @Override public Object[] getAllElements(){
      final int count=myLangEngagedOnGenTM.getRowCount();
      Object[] elements=new Object[count];
      for (int idx=0; idx < count; idx++) {
        elements[idx]=myLangEngagedOnGenTM.getValueAt(idx);
      }
      return elements;
    }
    @Override public String getElementText(    Object element){
      if (!(element instanceof SModuleReference))       return "";
      return ((SModuleReference)element).getModuleName();
    }
    @Override public void selectElement(    Object element,    String selectedText){
      final int count=myLangEngagedOnGenTM.getRowCount();
      for (int row=0; row < count; row++) {
        if (element.equals(myLangEngagedOnGenTM.getValueAt(row))) {
          final int viewRow=languagesTable.convertRowIndexToView(row);
          languagesTable.getSelectionModel().setSelectionInterval(viewRow,viewRow);
          TableUtil.scrollSelectionToVisible(languagesTable);
          break;
        }
      }
    }
  }
.setComparator(new SpeedSearchComparator(false,true));
  setTabComponent(panel);
}
