{
  SNode defaultConsequence=RuleUtil.getSwitchDefaultConsequence(mySwitch);
  if (defaultConsequence == null) {
    SNodeReference modifies=getModifiesSwitch();
    if (modifies == null) {
      return null;
    }
    TemplateSwitchMapping switchMapping=environment.getGenerator().getSwitch(modifies);
    if (switchMapping == null) {
      return null;
    }
    return switchMapping.applyDefault(environment,templateSwitch,mappingName,context);
  }
  try {
    RuleConsequenceProcessor rcp=new RuleConsequenceProcessor();
    context=context.subContext(mappingName);
    rcp.prepare(defaultConsequence,context);
    return rcp.processRuleConsequence();
  }
 catch (  AbandonRuleInputException ex) {
    return Collections.emptyList();
  }
}
