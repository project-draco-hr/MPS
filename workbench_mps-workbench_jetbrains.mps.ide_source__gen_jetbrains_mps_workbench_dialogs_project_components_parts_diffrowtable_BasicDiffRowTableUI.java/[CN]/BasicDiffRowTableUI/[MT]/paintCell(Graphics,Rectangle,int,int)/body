{
  int spacingHeight=table.getRowMargin();
  int spacingWidth=table.getColumnModel().getColumnMargin();
  cellRect.setBounds(cellRect.x + spacingWidth / 2,cellRect.y + spacingHeight / 2,cellRect.width - spacingWidth,cellRect.height - spacingHeight);
  if (table.isEditing() && table.getEditingRow() == row && table.getEditingColumn() == column) {
    Component component=table.getEditorComponent();
    component.setBounds(cellRect);
    component.validate();
  }
 else {
    TableCellRenderer renderer=table.getCellRenderer(row,column);
    Component component=table.prepareRenderer(renderer,row,column);
    if (component.getParent() == null) {
      rendererPane.add(component);
    }
    rendererPane.paintComponent(g,component,table,cellRect.x,cellRect.y,cellRect.width,cellRect.height,true);
  }
  cellRect.setBounds(cellRect.x - spacingWidth / 2,cellRect.y - spacingHeight / 2,cellRect.width + spacingWidth,cellRect.height + spacingHeight);
}
