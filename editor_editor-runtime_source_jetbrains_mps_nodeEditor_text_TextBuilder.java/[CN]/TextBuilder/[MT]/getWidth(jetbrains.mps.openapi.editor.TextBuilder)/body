{
  if (builder instanceof TextBuilder) {
    return ((TextBuilder)builder).getWidth();
  }
  int maxWidth=0;
  for (  StringBuffer line : builder.getLines()) {
    if (line.length() > maxWidth) {
      maxWidth=line.length();
    }
  }
  return maxWidth;
}
