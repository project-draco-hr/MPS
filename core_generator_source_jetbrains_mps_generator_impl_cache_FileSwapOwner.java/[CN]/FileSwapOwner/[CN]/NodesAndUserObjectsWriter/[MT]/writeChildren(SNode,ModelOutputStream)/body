{
  Object userObject=node.getUserObject(TemplateQueryContext.ORIGINAL_INPUT_NODE);
  if (userObject instanceof SNode) {
    os.writeInt(1);
    os.writeModelReference(((SNode)userObject).getModel().getSModelReference());
    os.writeNodeId(((SNode)userObject).getSNodeId());
  }
 else {
    os.writeInt(0);
  }
  Map<Object,Object> userObjects=node.getUserObjects();
  ArrayList<String> stringUserObjects=new ArrayList<String>();
  for (  Object key : userObjects.keySet()) {
    if (key instanceof String) {
      Object value=userObjects.get(key);
      if (value instanceof String) {
        stringUserObjects.add((String)key);
        stringUserObjects.add((String)value);
      }
    }
  }
  os.writeInt(stringUserObjects.size());
  for (  String stringUserObject : stringUserObjects) {
    os.writeString(stringUserObject);
  }
  super.writeChildren(node,os);
}
