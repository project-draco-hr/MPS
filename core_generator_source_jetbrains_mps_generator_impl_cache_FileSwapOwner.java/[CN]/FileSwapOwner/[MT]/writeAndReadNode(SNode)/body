{
  FileSwapOwner.NodesAndUserObjectsWriter writer=new FileSwapOwner.NodesAndUserObjectsWriter(node.getModel().getSModelReference());
  ByteArrayOutputStream os=new ByteArrayOutputStream();
  ModelOutputStream mos=new ModelOutputStream(os);
  writer.writeNode(node,mos);
  mos.close();
  FileSwapOwner.NodesAndUserObjectsReader reader=new FileSwapOwner.NodesAndUserObjectsReader(node.getModel().getSModelReference());
  ByteArrayInputStream is=new ByteArrayInputStream(os.toByteArray());
  return reader.readNode(node.getModel(),new ModelInputStream(is));
}
