{
  final Set<VirtualFile> scopeFiles=getScopeFiles(scope);
  String nodeId=node.getId();
  final Set<VirtualFile> candidates=getCandidates(scopeFiles,nodeId);
  Set<SReference> result=new HashSet<SReference>();
  for (  VirtualFile file : candidates) {
    SModelDescriptor sm=SModelRepository.getInstance().findModel(VFileSystem.toIFile(file));
    if (sm == null)     continue;
    sm.getSModel();
    result.addAll(new ModelFindOperations(sm).findUsages(node));
  }
  return result;
}
