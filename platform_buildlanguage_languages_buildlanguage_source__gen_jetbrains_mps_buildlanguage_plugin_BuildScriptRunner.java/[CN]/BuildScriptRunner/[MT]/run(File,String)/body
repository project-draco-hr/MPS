{
  List<String> parameters=ListSequence.fromList(new ArrayList<String>());
  BuildScriptRunner.addBasicParameters(parameters,file);
  BuildScriptRunner.addMacroValues(parameters);
  if (commandLine != null && StringUtils.isNotEmpty(commandLine)) {
    List<String> commandLineList=Arrays.asList(commandLine.split("\\s+"));
    ListSequence.fromList(parameters).addSequence(ListSequence.fromList(commandLineList));
  }
  ProcessBuilder builder=new ProcessBuilder(ListSequence.fromListWithValues(new ArrayList<String>(),parameters));
  builder.directory(file.getParentFile());
  try {
    Process process=builder.start();
    BaseOutputReader input=new BaseOutputReader(process.getInputStream()){
      protected void addMessage(      final String message){
        ModelAccess.instance().runReadInEDT(new Runnable(){
          public void run(){
            BuildScriptRunner.this.myComponent.addMessage(message);
          }
        }
);
      }
    }
;
    input.start();
    BaseOutputReader error=new BaseOutputReader(process.getErrorStream()){
      protected void addMessage(      final String message){
        ModelAccess.instance().runReadInEDT(new Runnable(){
          public void run(){
            BuildScriptRunner.this.myComponent.addError(message);
          }
        }
);
      }
    }
;
    error.start();
  }
 catch (  IOException exception) {
  }
}
