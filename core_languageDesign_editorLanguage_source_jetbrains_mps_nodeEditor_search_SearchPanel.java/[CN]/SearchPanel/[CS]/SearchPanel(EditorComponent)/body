{
  myEditor=editor;
  setLayout(new FlowLayout(FlowLayout.LEFT));
  setPreferredSize(new Dimension((int)getPreferredSize().getWidth(),(int)myText.getPreferredSize().getHeight() + 10));
  add(new JLabel("Text:"));
  add(myText);
  myText.setHideComplitionOnClick(true);
  add(myHistoryButton);
  myHistoryButton.setPreferredSize(new Dimension(myButtonSize,myButtonSize));
  myHistoryButton.setEnabled(false);
  myHistoryButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      myText.showCompletion();
    }
  }
);
  add(myPreviousButton);
  myPreviousButton.setEnabled(false);
  myPreviousButton.setPreferredSize(new Dimension(myButtonSize,myButtonSize));
  myPreviousButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      goUp();
    }
  }
);
  add(myNextButton);
  myNextButton.setEnabled(false);
  myNextButton.setPreferredSize(new Dimension(myButtonSize,myButtonSize));
  myNextButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      goDown();
    }
  }
);
  add(myIsCaseSensitive);
  myIsCaseSensitive.setMnemonic(KeyEvent.VK_C);
  myIsCaseSensitive.setFocusable(false);
  myIsCaseSensitive.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      search();
    }
  }
);
  add(myIsWordsOnly);
  myIsWordsOnly.setMnemonic(KeyEvent.VK_M);
  myIsWordsOnly.setFocusable(false);
  myIsWordsOnly.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      search();
    }
  }
);
  add(myIsRegex);
  myIsRegex.setMnemonic(KeyEvent.VK_R);
  myIsRegex.setFocusable(false);
  myIsRegex.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      myIsWordsOnly.setEnabled(!myIsWordsOnly.isEnabled());
    }
  }
);
  myText.getDocument().addDocumentListener(new DocumentListener(){
    public void insertUpdate(    DocumentEvent e){
      search();
    }
    public void removeUpdate(    DocumentEvent e){
      search();
    }
    public void changedUpdate(    DocumentEvent e){
      search();
    }
  }
);
  myText.setColumns(20);
  registerKeyboardAction(new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      goDown();
    }
  }
,KeyStroke.getKeyStroke("DOWN"),WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  registerKeyboardAction(new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      goUp();
    }
  }
,KeyStroke.getKeyStroke("UP"),WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  setVisible(false);
  registerKeyboardAction(new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      deactivate();
    }
  }
,KeyStroke.getKeyStroke("ESCAPE"),WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  editor.getRootCell();
}
