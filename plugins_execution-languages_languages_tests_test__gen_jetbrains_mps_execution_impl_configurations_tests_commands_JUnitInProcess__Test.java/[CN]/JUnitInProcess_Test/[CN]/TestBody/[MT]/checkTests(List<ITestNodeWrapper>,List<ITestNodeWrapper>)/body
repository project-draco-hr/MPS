{
  try {
    List<ITestNodeWrapper> testNodes=ListSequence.fromList(success).union(ListSequence.fromList(failure)).toListSequence();
    TestRunState runState=new TestRunState(testNodes);
    TestEventsDispatcher eventsDispatcher=new TestEventsDispatcher(runState);
    Executor processExecutor;
    processExecutor=new JUnitLightExecutor(testNodes,eventsDispatcher);
    ProcessHandler process=processExecutor.execute();
    CheckTestStateListener checkListener=new CheckTestStateListener(success,failure);
    runState.addListener(checkListener);
    OutputRedirector.redirect(process,new UnitTestProcessListener(eventsDispatcher));
  }
 catch (  ExecutionException e) {
    Assert.fail(e.getMessage());
  }
}
