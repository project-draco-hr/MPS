{
  final ITarget trg=context.mock(ITarget.class,name);
  context.checking(new Expectations(){
{
      this.atLeast(2).of(trg).getName();
      this.will(returnValue(tname));
    }
  }
);
  if (expIn != null) {
    context.checking(new Expectations(){
{
        this.atLeast(1).of(trg).requiresInput();
        this.will(returnValue(true));
        this.atLeast(1).of(trg).expectedInput();
        this.will(returnValue(Arrays.asList(expIn)));
      }
    }
);
  }
  return trg;
}
