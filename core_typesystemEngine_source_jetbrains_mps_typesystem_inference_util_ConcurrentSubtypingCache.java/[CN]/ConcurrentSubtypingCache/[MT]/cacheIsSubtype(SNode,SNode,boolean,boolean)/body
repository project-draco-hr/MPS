{
  ConcurrentMap<CacheNodeHandler,ConcurrentHashMap<CacheNodeHandler,MyBoolean>> cache=isWeak ? myCacheWeak : myCache;
  final CacheNodeHandler subtypeHandler=new CacheNodeHandler(subtype);
  ConcurrentHashMap<CacheNodeHandler,MyBoolean> supertypes=cache.get(subtypeHandler);
  if (supertypes == null) {
    supertypes=new ConcurrentHashMap<CacheNodeHandler,MyBoolean>();
    if (cache.putIfAbsent(subtypeHandler,supertypes) != null) {
      supertypes=cache.get(subtypeHandler);
    }
  }
  if (supertypes != null) {
    supertypes.put(new CacheNodeHandler(supertype),preprocessPutBoolean(answer));
  }
}
