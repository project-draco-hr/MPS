{
  if (existsModule(module,owner)) {
    throw new RuntimeException("Couldn't add module \"" + module.getModuleUID() + "\" : this module is already registered with this very owner: "+ owner);
  }
  try {
    File descriptorFile=module.getDescriptorFile();
    if (descriptorFile != null && !myFileToModuleMap.containsKey(descriptorFile.getCanonicalPath())) {
      myFileToModuleMap.put(descriptorFile.getCanonicalPath(),module);
    }
    putModuleWithUID(module.getModuleUID(),module);
    Set<MPSModuleOwner> owners=myModuleToOwnersMap.get(module);
    if (owners == null)     owners=new HashSet<MPSModuleOwner>();
    owners.add(owner);
    myModuleToOwnersMap.put(module,owners);
    fireModuleAdded(module);
  }
 catch (  IOException e) {
    throw new RuntimeException("Failed to add module \"" + module.getModuleUID() + "\"",e);
  }
}
