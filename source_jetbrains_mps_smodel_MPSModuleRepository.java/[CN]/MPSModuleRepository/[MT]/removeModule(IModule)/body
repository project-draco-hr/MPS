{
  IFile descriptorFile=module.getDescriptorFile();
  Set<MPSModuleOwner> toRemove=new HashSet<MPSModuleOwner>();
  for (  MPSModuleOwner owner : myModuleToOwnersMap.get(module)) {
    Set<IModule> modules=myOwnerToModules.get(owner);
    if (modules != null) {
      modules.remove(module);
      if (modules.isEmpty()) {
        toRemove.add(owner);
      }
    }
  }
  for (  MPSModuleOwner tr : toRemove) {
    myOwnerToModules.remove(tr);
  }
  myModuleToOwnersMap.remove(module);
  removeModuleFromUIDMap(module);
  if (descriptorFile != null) {
    myFileToModuleMap.remove(descriptorFile.getCanonicalPath());
  }
  fireModuleRemoved(module);
}
