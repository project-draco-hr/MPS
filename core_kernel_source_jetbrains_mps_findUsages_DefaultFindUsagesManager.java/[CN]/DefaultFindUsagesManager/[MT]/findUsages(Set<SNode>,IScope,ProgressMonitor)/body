{
  if (monitor == null)   monitor=new EmptyProgressMonitor();
  LOG.assertCanRead();
  Set<SReference> result=new HashSet<SReference>();
  try {
    Iterable<SModelDescriptor> models=scope.getModelDescriptors();
    int count;
    if (models instanceof Collection) {
      count=((Collection)models).size();
    }
 else {
      count=0;
      for (      SModelDescriptor model : models) {
        count++;
      }
    }
    monitor.start("Finding usages...",count);
    for (    SModelDescriptor model : models) {
      monitor.step(model.getLongName());
      result.addAll(new ModelFindOperations(model).findUsages(nodes));
      if (monitor.isCanceled()) {
        return result;
      }
      monitor.advance(1);
    }
    return result;
  }
  finally {
    monitor.done();
  }
}
