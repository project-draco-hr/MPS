{
  Sequence.fromIterable(ws).visitAll(new IVisitor<CycleDetector.Wrapper<V>>(){
    public void visit(    CycleDetector.Wrapper<V> w){
      w.clear();
    }
  }
);
  Sequence.fromIterable(ws).where(new IWhereFilter<CycleDetector.Wrapper<V>>(){
    public boolean accept(    CycleDetector.Wrapper<V> w){
      return !(w.entered);
    }
  }
).visitAll(new IVisitor<CycleDetector.Wrapper<V>>(){
    public void visit(    CycleDetector.Wrapper<V> w){
      dfsVisit(w,visitor,edges);
    }
  }
);
}
