{
  final File backupFile=doBackup(file,model);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      boolean needSave=FSChangesWatcher.instance().executeUnderBlockedReload(new Computable<Boolean>(){
        public Boolean compute(){
          if (file.exists()) {
            return showDiskMemoryQuestion(file,model,backupFile);
          }
 else {
            return showDeletedFromDiskQuestion(model,backupFile);
          }
        }
      }
);
      if (needSave) {
        ModelAccess.instance().runWriteActionInCommand(new Runnable(){
          public void run(){
            modelDescriptor.updateDiskTimestamp();
            modelDescriptor.save();
          }
        }
);
      }
 else {
        ModelAccess.instance().runWriteAction(new Runnable(){
          public void run(){
            modelDescriptor.reloadFromDisk();
          }
        }
);
      }
    }
  }
);
}
