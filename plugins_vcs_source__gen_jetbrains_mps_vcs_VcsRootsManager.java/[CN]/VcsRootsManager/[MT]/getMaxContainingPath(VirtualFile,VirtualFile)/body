{
  AbstractVcs vcs1=myVcsManager.findVersioningVcs(file1);
  if ((vcs1 == null) || !(vcs1.equals(myVcsManager.findVersioningVcs(file2)))) {
    return null;
  }
  if (VcsRootsManager.isParent(file1,file2)) {
    return file1;
  }
  if (VcsRootsManager.isParent(file2,file1)) {
    return file2;
  }
  VirtualFile parent1=file1.getParent();
  VirtualFile parent2=file2.getParent();
  if ((parent1 == null) && (parent2 == null)) {
    return null;
  }
 else   if (parent1 == null) {
    return getMaxContainingPath(file1,parent2);
  }
 else   if (parent2 == null) {
    return getMaxContainingPath(parent1,file2);
  }
  return getMaxContainingPath(parent1,parent2);
}
