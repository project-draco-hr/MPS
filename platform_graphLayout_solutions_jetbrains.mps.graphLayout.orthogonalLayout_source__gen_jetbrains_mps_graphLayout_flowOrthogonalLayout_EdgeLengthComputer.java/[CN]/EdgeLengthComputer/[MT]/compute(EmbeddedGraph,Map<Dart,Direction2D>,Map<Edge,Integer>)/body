{
  Map<Edge,Integer> horEdgeLengths=computeEdgeLengths(embeddedGraph,directions,Direction2D.RIGHT,predefinedLengths);
  Map<Edge,Integer> verEdgeLenghts=computeEdgeLengths(embeddedGraph,directions,Direction2D.DOWN,predefinedLengths);
  Map<Edge,Integer> lengths=MapSequence.fromMap(new HashMap<Edge,Integer>());
  for (  Edge edge : ListSequence.fromList(embeddedGraph.getGraph().getEdges())) {
    int length;
    if (MapSequence.fromMap(horEdgeLengths).containsKey(edge)) {
      length=MapSequence.fromMap(horEdgeLengths).get(edge);
    }
 else {
      length=MapSequence.fromMap(verEdgeLenghts).get(edge);
    }
    MapSequence.fromMap(lengths).put(edge,length);
  }
  if (SHOW_INFO > 0) {
    for (    Edge edge : ListSequence.fromList(embeddedGraph.getGraph().getEdges())) {
      System.out.println("edge: " + edge + " length = "+ MapSequence.fromMap(lengths).get(edge));
    }
  }
  return lengths;
}
