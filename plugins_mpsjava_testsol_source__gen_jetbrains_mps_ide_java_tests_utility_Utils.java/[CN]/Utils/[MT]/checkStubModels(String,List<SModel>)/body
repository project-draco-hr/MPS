{
  JavaSourceStubs stubMgr=new JavaSourceStubs();
  SModelRoot modelRoot=new SModelRoot(null);
  modelRoot.setModule(ourModule);
  modelRoot.setPath(dirPath);
  Collection<SModelDescriptor> mds=stubMgr.load(modelRoot);
  List<SModel> models=ListSequence.fromList(new ArrayList<SModel>());
  for (  SModelDescriptor md : CollectionSequence.fromCollection(mds)) {
    SModel m=md.getSModel();
    ListSequence.fromList(models).addElement(m);
  }
  for (  SModel m : ListSequence.fromList(models)) {
    for (    SNode root : ListSequence.fromList(SModelOperations.getRoots(m,null))) {
      NodePatcher.removeSModelAttrs(root);
    }
  }
  for (  SModel m : ListSequence.fromList(expected)) {
    for (    SNode root : ListSequence.fromList(SModelOperations.getRoots(m,null))) {
      NodePatcher.removeStatements(SNodeOperations.cast(root,"jetbrains.mps.baseLanguage.structure.Classifier"));
      NodePatcher.removeSModelAttrs(root);
    }
  }
  compare(models,expected);
}
