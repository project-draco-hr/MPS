{
  int reductions=0;
  int patternReductions=0;
  for (  MappingConfiguration c : configuration) {
    reductions+=c.getReductionMappingRulesCount();
    patternReductions+=c.getPatternReductionRulesCount();
  }
  List<TemplateReductionRule> rules=new ArrayList<TemplateReductionRule>(reductions + patternReductions);
  for (  MappingConfiguration c : configuration) {
    SNode node=c.getNode();
    for (    SNode child : node.getChildrenIterable()) {
      String role=child.getRole_();
      if (role.equals(MappingConfiguration.REDUCTION_MAPPING_RULE)) {
        rules.add(new TemplateReductionRuleInterpreted(child));
      }
 else       if (role.equals(MappingConfiguration.PATTERN_REDUCTION_RULE)) {
        rules.add(new TemplateReductionPatternRuleInterpreted(child));
      }
    }
  }
  return new FastRuleFinder(rules);
}
