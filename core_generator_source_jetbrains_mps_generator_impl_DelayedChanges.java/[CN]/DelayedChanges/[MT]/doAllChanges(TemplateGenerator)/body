{
  SNode[] newOutputNodes=new SNode[myPostProcessors.size()];
  int i=0;
  for (  NodePostProcessor p : myPostProcessors) {
    SNode child=p.substitute();
    if (child == null) {
      generator.getLogger().error(p.getTemplateNode(),"Unexpected null value. Transform function of MAP-SRC didn't produce any result. Please check the function and make sure it always supplies a node");
      continue;
    }
    if (child != p.getOutputAnchor()) {
      ChildAdopter ca=new ChildAdopter(generator);
      ca.checkIsExpectedLanguage(Collections.singletonList(child),p.getTemplateNode(),p.getTemplateContext());
      child=ca.adopt(child,p.getTemplateContext());
      generator.replacePlaceholderNode(p,child);
    }
    newOutputNodes[i++]=child;
  }
  i=0;
  for (  NodePostProcessor p : myPostProcessors) {
    if (newOutputNodes[i] != null) {
      p.postProcess(newOutputNodes[i++]);
    }
  }
  myPostProcessors.clear();
}
