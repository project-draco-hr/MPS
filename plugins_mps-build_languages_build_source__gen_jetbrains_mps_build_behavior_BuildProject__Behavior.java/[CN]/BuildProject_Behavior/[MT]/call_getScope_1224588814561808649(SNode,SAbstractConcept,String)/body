{
  if (SConceptOperations.isSubConceptOf(SNodeOperations.asSConcept(kind),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x63a87b9320d0bfc9L,"jetbrains.mps.build.structure.BuildExternalLayout"))) {
    return new ModelPlusImportedScope(SNodeOperations.getModel(thisNode),true,kind.getQualifiedName());
  }
  if (SConceptOperations.isSubConceptOf(SNodeOperations.asSConcept(kind),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,"jetbrains.mps.build.structure.BuildProject"))) {
    final SNode _this=thisNode;
    return ScopeUtil.where(new ModelPlusImportedScope(SNodeOperations.getModel(thisNode),true,kind.getQualifiedName()),new _FunctionTypes._return_P1_E0<Boolean,SNode>(){
      public Boolean invoke(      SNode n){
        return n != _this && !(Sequence.fromIterable(BuildProject_Behavior.call_getVisibleProjects_1224588814561807665(SNodeOperations.cast(n,MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,"jetbrains.mps.build.structure.BuildProject")),false)).contains(_this));
      }
    }
);
  }
  if ("layout".equals(role)) {
    if (SConceptOperations.isSubConceptOf(SNodeOperations.asSConcept(kind),MetaAdapterFactory.getInterfaceConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x6b9a2011083f9402L,"jetbrains.mps.build.structure.BuildSource_FilesetProjectPart"))) {
      return DescendantsScope.forNamedElements(thisNode,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x668c6cfbafacf6f2L,"parts"),kind);
    }
    for (    SNode plugin : ListSequence.fromList(SLinkOperations.getChildren(thisNode,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x5c3f3e2c1ce9ac70L,"plugins")))) {
      Scope layoutScope=BehaviorReflection.invokeVirtual(Scope.class,plugin,"virtual_getLayoutScope_1224588814561807654",new Object[]{kind});
      if (layoutScope != null) {
        return layoutScope;
      }
    }
  }
 else   if ("parts".equals(role)) {
    for (    SNode plugin : ListSequence.fromList(SLinkOperations.getChildren(thisNode,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x5c3f3e2c1ce9ac70L,"plugins")))) {
      Scope projectScope=BehaviorReflection.invokeVirtual(Scope.class,plugin,"virtual_getProjectStructureScope_3734116213129936182",new Object[]{kind});
      if (projectScope != null) {
        return projectScope;
      }
    }
  }
  return new EmptyScope();
}
