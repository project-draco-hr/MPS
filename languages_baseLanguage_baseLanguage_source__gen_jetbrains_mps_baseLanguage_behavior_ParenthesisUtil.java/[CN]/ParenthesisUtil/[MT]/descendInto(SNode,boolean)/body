{
  final List<SNode> result=ListSequence.fromList(new ArrayList<SNode>());
  if (completingByRightParen && (AttributeOperations.getAttribute(expr,new IAttributeDescriptor.NodeAttribute("jetbrains.mps.baseLanguage.structure.IncompleteLeftParen")) != null)) {
    ListSequence.fromList(result).addElement(expr);
  }
  ListSequence.fromList(getOrderedChildExpressions(expr)).visitAll(new IVisitor<SNode>(){
    public void visit(    SNode it){
      ListSequence.fromList(result).addSequence(ListSequence.fromList(descendInto(it,completingByRightParen)));
    }
  }
);
  if (!(completingByRightParen) && (AttributeOperations.getAttribute(expr,new IAttributeDescriptor.NodeAttribute("jetbrains.mps.baseLanguage.structure.IncompleteRightParen")) != null)) {
    ListSequence.fromList(result).addElement(expr);
  }
  return result;
}
