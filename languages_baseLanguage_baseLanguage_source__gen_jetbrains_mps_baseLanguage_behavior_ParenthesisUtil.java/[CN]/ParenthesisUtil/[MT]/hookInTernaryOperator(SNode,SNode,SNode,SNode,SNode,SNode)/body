{
  SNode bottomMostTernary=ParenthesisUtil.findBottomMostTernary(SNodeOperations.cast(firstCommon,"jetbrains.mps.baseLanguage.structure.TernaryOperatorExpression"));
  if (rightTurn != null) {
    SNodeOperations.replaceWithAnother(firstCommon,SLinkOperations.getTarget(bottomMostTernary,"ifFalse",true));
    if (leftTurn != null) {
      setLeftSideExpr(rightTurn,SLinkOperations.getTarget(firstCommon,"condition",true));
      setRightSideExpr(leftTurn,parens);
    }
 else {
      setLeftSideExpr(rightTurn,parens);
    }
  }
 else {
    if (leftTurn != null) {
      SNodeOperations.replaceWithAnother(firstCommon,SLinkOperations.getTarget(firstCommon,"condition",true));
      setRightSideExpr(leftTurn,parens);
    }
 else {
      SNodeOperations.replaceWithAnother(firstCommon,parens);
    }
  }
  SLinkOperations.setTarget(bottomMostTernary,"ifFalse",rightAccumulator,true);
  SLinkOperations.setTarget(firstCommon,"condition",leftAccumulator,true);
}
