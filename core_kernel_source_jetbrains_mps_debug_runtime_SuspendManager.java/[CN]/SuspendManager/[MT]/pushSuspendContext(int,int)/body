{
  SuspendContext suspendContext=new SuspendContext(myDebugProcess,suspendPolicy,nVotes,null){
    protected void resumeImpl(){
      LOG.debug("Start resuming...");
switch (getSuspendPolicy()) {
case EventRequest.SUSPEND_ALL:
        int resumeAttempts=5;
      while (--resumeAttempts > 0) {
        try {
          myDebugProcess.getVirtualMachine().resume();
          break;
        }
 catch (        InternalException e) {
          if (e.errorCode() == 13) {
            continue;
          }
 else {
            LOG.error(e);
            break;
          }
        }
      }
    LOG.debug("VM resumed ");
  break;
case EventRequest.SUSPEND_EVENT_THREAD:
getThread().resume();
LOG.debug("Thread resumed : " + getThread().toString());
break;
case EventRequest.SUSPEND_NONE:
LOG.debug("None resumed");
break;
}
}
}
;
pushContext(suspendContext);
return suspendContext;
}
