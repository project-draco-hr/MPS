{
  SuspendContext suspendContext;
  if (set == null) {
    suspendContext=new SuspendContext(myDebugProcess,EventRequest.SUSPEND_NONE,1,set){
      @Override protected void resumeImpl(){
      }
    }
;
  }
 else {
    suspendContext=new SuspendContextImpl(myDebugProcess,set.suspendPolicy(),set.size(),set){
      protected void resumeImpl(){
        final ThreadReference thread=this.getThread();
        if (thread != null) {
          try {
            if (!thread.isSuspended()) {
              LOG.assertLog(false,"Context thread must be suspended");
            }
          }
 catch (          ObjectCollectedException ignored) {
          }
        }
        doResume();
      }
      @Override protected void tryResume() throws ObjectCollectedException, InternalException {
        set.resume();
      }
    }
;
  }
  pushContext(suspendContext);
  return suspendContext;
}
