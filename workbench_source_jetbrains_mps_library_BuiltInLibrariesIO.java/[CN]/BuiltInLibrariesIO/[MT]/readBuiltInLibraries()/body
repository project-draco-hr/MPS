{
  Map<String,Library> result=new HashMap<String,Library>();
  URL resource=BuiltInLibrariesIO.class.getResource(CONFIG_FILE_WHOLE_NAME);
  if (resource == null)   return result;
  InputStream in=null;
  try {
    in=resource.openStream();
    Document document=JDOMUtil.loadDocument(in);
    Element element=document.getRootElement();
    List children=element.getChildren(LIBRARY_TAG);
    for (    Object childObj : children) {
      Element child=(Element)childObj;
      String name=child.getAttribute(LIBRARY_NAME_TAG).getValue();
      String path=child.getAttribute(LIBRARY_PATH_TAG).getValue();
      final String realPath=MacrosFactory.mpsHomeMacros().expandPath(path,new File(PathManager.getHomePath()));
      Library predefinedLibrary=new Library(name){
        @NotNull @Override public String getPath(){
          return realPath;
        }
      }
;
      result.put(name,predefinedLibrary);
    }
  }
 catch (  JDOMException e) {
    LOG.error(e);
  }
catch (  IOException e) {
    LOG.error(e);
  }
 finally {
    if (in != null) {
      try {
        in.close();
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
  return result;
}
