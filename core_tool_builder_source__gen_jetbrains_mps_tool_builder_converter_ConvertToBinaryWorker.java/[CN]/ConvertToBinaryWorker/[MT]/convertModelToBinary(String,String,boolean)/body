{
  IFile source=FileSystem.getInstance().getFileByPath(sourceFile);
  ModelFactory modelFactory=PersistenceFacade.getInstance().getModelFactory(FileUtil.getExtension(source.getName()));
  if (modelFactory == null) {
    modelFactory=PersistenceFacade.getInstance().getDefaultModelFactory();
  }
  try {
    SModel model=modelFactory.load(new FileDataSource(source),Collections.singletonMap(DefaultModelPersistence.OPTION_STRIP_IMPLEMENTATION,Boolean.toString(stripImplementation)));
    PersistenceFacade.getInstance().getModelFactory(MPSExtentions.MODEL_BINARY).save(model,new FileDataSource(FileSystem.getInstance().getFileByPath(destFile)));
  }
 catch (  ModelSaveException e) {
    throw new IOException(String.format("Failed to write model in binary format to file %s",destFile),e);
  }
}
