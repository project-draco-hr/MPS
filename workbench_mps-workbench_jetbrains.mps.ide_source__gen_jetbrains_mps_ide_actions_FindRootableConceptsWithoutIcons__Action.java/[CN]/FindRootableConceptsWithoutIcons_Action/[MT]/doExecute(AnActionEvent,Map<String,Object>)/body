{
  try {
    final ModelAccess modelAccess=((MPSProject)MapSequence.fromMap(_params).get("project")).getRepository().getModelAccess();
    ProgressManager.getInstance().run(new Task.Modal(((Project)MapSequence.fromMap(_params).get("ideaProject")),"Finding Usages",true){
      @Override public void run(      @NotNull ProgressIndicator p0){
        final Wrappers._T<SearchResults<SNode>> concepts=new Wrappers._T<SearchResults<SNode>>();
        final Wrappers._T<List<SearchResult<SNode>>> results=new Wrappers._T<List<SearchResult<SNode>>>();
        modelAccess.runReadAction(new Runnable(){
          public void run(){
            concepts.value=FindUtils.getSearchResults(new EmptyProgressMonitor(),SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.structure.structure.ConceptDeclaration"),GlobalScope.getInstance(),"jetbrains.mps.lang.structure.findUsages.ConceptInstances_Finder");
            results.value=ListSequence.fromList(((List<SearchResult<SNode>>)concepts.value.getSearchResults())).where(new IWhereFilter<SearchResult<SNode>>(){
              public boolean accept(              SearchResult<SNode> it){
                SNode node=(SNode)it.getObject();
                return SPropertyOperations.getBoolean(node,MetaAdapterFactory.getProperty(new UUID(-4094437568663370681l,-8968368868337559369l),1071489090640l,1096454100552l,"rootable")) && isEmptyString(SPropertyOperations.getString(node,MetaAdapterFactory.getProperty(new UUID(-4094437568663370681l,-8968368868337559369l),1071489090640l,1160488491229l,"iconPath")));
              }
            }
).toListSequence();
          }
        }
);
        if (p0.isCanceled()) {
          return;
        }
        SwingUtilities.invokeLater(new Runnable(){
          public void run(){
            RefactoringAccessEx.getInstance().showRefactoringView(((Project)MapSequence.fromMap(_params).get("ideaProject")),new RefactoringViewAction(){
              @Override public void performAction(              RefactoringViewItem refactoringViewItem){
                refactoringViewItem.close();
              }
            }
,new SearchResults<SNode>(concepts.value.getSearchedNodes(),results.value),false,"Safe Delete");
          }
        }
);
      }
    }
);
  }
 catch (  Throwable t) {
    if (LOG.isEnabledFor(Level.ERROR)) {
      LOG.error("User's action execute method failed. Action:" + "FindRootableConceptsWithoutIcons",t);
    }
  }
}
