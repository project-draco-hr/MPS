{
  return new Mapper<SNode,NodeDecoratorView>(getSNode(),new NodeDecoratorView()){
    @Override protected void registerSynchronizers(    Mapper.SynchronizersConfiguration configuration){
      super.registerSynchronizers(configuration);
      DiagramCell diagramCell=getDiagramCell();
      if (diagramCell == null) {
        return;
      }
      final Mapper<SNode,DiagramNodeView> blockMapper=getBlockMapper();
      if (blockMapper == null) {
        return;
      }
      configuration.add(Synchronizers.forProperty(myErrorItem,getTarget().hasError));
      configuration.add(Synchronizers.forProperty(blockMapper.getTarget().focused(),getTarget().isSelected));
      final BoxFigureExt contentView=(BoxFigureExt)getContentView();
      configuration.add(Synchronizers.forProperty(contentView.bounds(),getTarget().bounds));
      configuration.add(Synchronizers.forProperty(Properties.constant(Boolean.TRUE),getTarget().resizable));
      configuration.add(Synchronizers.forProperty(getTarget().boundsDelta,new WritableProperty<Rectangle>(){
        public void set(        Rectangle delta){
          if (delta == null) {
            return;
          }
          Vector positionDelta=delta.origin;
          Vector sizeDelta=delta.dimension;
          blockMapper.getTarget().move(positionDelta);
          contentView.prop(ResizableContentView.PREFERRED_SIZE).set(contentView.prop(ResizableContentView.PREFERRED_SIZE).get().add(sizeDelta));
        }
      }
));
      configuration.add(Synchronizers.forObservableRole(this,myInputPorts,getTarget().inputPortDecotatorView.children(),new MapperFactory<String,PortDecoratorView>(){
        public Mapper<? extends String,? extends PortDecoratorView> createMapper(        final String id){
          return new Mapper<String,PortDecoratorView>(id,new PortDecoratorView()){
            @Override protected void registerSynchronizers(            Mapper.SynchronizersConfiguration configuration){
              DiagramCell diagramCell=getDiagramCell();
              if (diagramCell == null) {
                return;
              }
              Mapper<? super SNode,?> blockDescendantMapper=getDiagramCell().getRootMapper().getDescendantMapper(getSNode());
              if (blockDescendantMapper == null) {
                return;
              }
              Set<Mapper<? super String,?>> mappers=blockDescendantMapper.getMappingContext().getMappers(blockDescendantMapper,id);
              if (mappers.isEmpty()) {
                return;
              }
              final Mapper<String,View> descendantMapper=((Mapper<String,View>)mappers.iterator().next());
              configuration.add(Synchronizers.forProperty(((View)descendantMapper.getTarget()).focused(),getTarget().isSelected));
              ReadableProperty<Rectangle> bounds=((View)descendantMapper.getTarget()).bounds();
              configuration.add(Synchronizers.forProperty(bounds,getTarget().bounds));
            }
          }
;
        }
      }
));
      configuration.add(Synchronizers.forObservableRole(this,myOutputPorts,getTarget().outputPortDecotatorView.children(),new MapperFactory<String,PortDecoratorView>(){
        public Mapper<? extends String,? extends PortDecoratorView> createMapper(        final String id){
          return new Mapper<String,PortDecoratorView>(id,new PortDecoratorView()){
            @Override protected void registerSynchronizers(            Mapper.SynchronizersConfiguration configuration){
              DiagramCell diagramCell=getDiagramCell();
              if (diagramCell == null) {
                return;
              }
              Mapper<? super SNode,?> blockDescendantMapper=getDiagramCell().getRootMapper().getDescendantMapper(getSNode());
              if (blockDescendantMapper == null) {
                return;
              }
              Set<Mapper<? super String,?>> mappers=blockDescendantMapper.getMappingContext().getMappers(blockDescendantMapper,id);
              if (mappers.isEmpty()) {
                return;
              }
              final Mapper<String,View> descendantMapper=((Mapper<String,View>)mappers.iterator().next());
              configuration.add(Synchronizers.forProperty(((View)descendantMapper.getTarget()).focused(),getTarget().isSelected));
              ReadableProperty<Rectangle> bounds=((View)descendantMapper.getTarget()).bounds();
              configuration.add(Synchronizers.forProperty(bounds,getTarget().bounds));
            }
          }
;
        }
      }
));
    }
  }
;
}
