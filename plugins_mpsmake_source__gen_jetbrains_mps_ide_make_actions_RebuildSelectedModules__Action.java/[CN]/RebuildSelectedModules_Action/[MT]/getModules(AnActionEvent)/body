{
  SModule cmd=event.getData(MPSCommonDataKeys.CONTEXT_MODULE);
  if (cmd instanceof Generator) {
    cmd=((Generator)cmd).getSourceLanguage();
  }
  List<SModule> rv=ListSequence.fromList(new ArrayList<SModule>());
  if (event.getData(MPSCommonDataKeys.MODULES) != null) {
    ListSequence.fromList(rv).addSequence(ListSequence.fromList(event.getData(MPSCommonDataKeys.MODULES)));
  }
  if (cmd != null && !(ListSequence.fromList(rv).contains(cmd))) {
    ListSequence.fromList(rv).addElement(cmd);
  }
  return rv;
}
