{
  int skipPrefix=sourceRoot.toString().length();
  String relativeDirName=dir.toString().substring(skipPrefix);
  String packageName=relativeDirName.replace('/','.').replace('\\','.');
  if (packageName.length() > 0 && packageName.charAt(0) == '.') {
    packageName=packageName.substring(1);
  }
  if (packageName.length() == 0) {
    packageName="<default package>";
  }
  SModelFqName fqName=new SModelFqName(packageName,"java_stub_zzz");
  jetbrains.mps.smodel.SModelId modelId=jetbrains.mps.smodel.SModelId.foreign(fqName.getStereotype(),getModule().getModuleId().toString(),fqName.getLongName());
  SModelReference modelRef=new SModelReference(fqName,modelId);
  PsiJavaStubDataSource ds=new PsiJavaStubDataSource(myModule,dir);
  return new PsiJavaStubModelDescriptor(modelRef,ds);
}
