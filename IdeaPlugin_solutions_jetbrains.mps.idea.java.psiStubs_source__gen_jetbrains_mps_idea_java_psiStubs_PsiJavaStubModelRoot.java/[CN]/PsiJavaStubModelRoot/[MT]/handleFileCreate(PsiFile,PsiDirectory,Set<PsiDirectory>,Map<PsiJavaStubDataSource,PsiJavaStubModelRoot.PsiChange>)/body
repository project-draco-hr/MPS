{
  PsiDirectory parent=(forcedParent == null ? file.getParent() : forcedParent);
  PsiJavaStubDataSource dataSource=MapSequence.fromMap(myDataSources).get(parent);
  if (dataSource == null) {
    PsiDirectory ourSourceRoot=findOurSourceRoot(file);
    if (ourSourceRoot != null) {
      SetSequence.fromSet(newDirs).addElement(parent);
    }
    return;
  }
  PsiJavaStubModelRoot.PsiChange change=MapSequence.fromMap(changes).get(dataSource);
  if (change == null) {
    change=new PsiJavaStubModelRoot.PsiChange();
    MapSequence.fromMap(changes).put(dataSource,change);
  }
  SetSequence.fromSet(change.created).addElement(file);
}
