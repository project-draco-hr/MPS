{
  AbstractOperation rootDiff=myCurrentContext.getOperation();
  if (myOldOperation == null) {
    myCurrentState.clear(false);
    myCurrentState.executeOperationsBeforeAnchor(rootDiff,fromDiff);
  }
 else {
    myCurrentState.updateState(myOldOperation,fromDiff);
  }
  return myCurrentState;
}
