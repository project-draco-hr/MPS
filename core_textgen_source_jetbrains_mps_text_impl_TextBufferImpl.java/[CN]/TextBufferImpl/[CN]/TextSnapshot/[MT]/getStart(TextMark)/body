{
  final MarkerImpl realMark=realMark(mark);
  int areaOffset=myOffsets.get(realMark.myTextArea);
  final int markStart=areaOffset + realMark.myStartOffset;
  int line=Arrays.binarySearch(myLineBreaks,markStart);
  if (line >= 0) {
    return new TextPosition(line,0);
  }
  line=-line - 2;
  final int lineStartOffset=myLineBreaks[line];
  return new TextPosition(line,markStart - lineStartOffset);
}
