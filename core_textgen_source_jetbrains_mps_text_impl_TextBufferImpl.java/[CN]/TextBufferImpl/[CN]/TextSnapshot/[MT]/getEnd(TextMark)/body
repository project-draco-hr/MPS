{
  final LiveLocation liveLoc=myMarks.get(mark);
  int areaOffset=myOffsets.get(liveLoc.getTextArea());
  final int markEnd=areaOffset + liveLoc.getStart() + liveLoc.getLength();
  int line=Arrays.binarySearch(myLineBreaks,markEnd);
  if (line >= 0) {
    return new TextPosition(line,0);
  }
  line=-line - 2;
  final int lineStartOffset=myLineBreaks[line];
  return new TextPosition(line,markEnd - lineStartOffset);
}
