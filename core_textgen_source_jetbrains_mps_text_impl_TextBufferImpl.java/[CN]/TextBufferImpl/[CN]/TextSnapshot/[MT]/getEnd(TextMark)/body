{
  final MarkerImpl realMark=realMark(mark);
  int areaOffset=myOffsets.get(realMark.myTextArea);
  final int markEnd=areaOffset + realMark.myStartOffset + realMark.myLength;
  int line=Arrays.binarySearch(myLineBreaks,markEnd);
  if (line >= 0) {
    return new TextPosition(line,0);
  }
  line=-line - 2;
  final int lineStartOffset=myLineBreaks[line];
  return new TextPosition(line,markEnd - lineStartOffset);
}
