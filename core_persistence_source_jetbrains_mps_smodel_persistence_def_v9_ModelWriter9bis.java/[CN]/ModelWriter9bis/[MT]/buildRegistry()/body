{
  Element registry=new Element("registry");
  for (  LangInfo ul : myMetaInfo.getLanguagesInUse()) {
    Element lang=new Element(ModelPersistence.LANGUAGE);
    lang.setAttribute(ModelPersistence.ID,myIdEncoder.toText(ul.getLanguageId()));
    lang.setAttribute(ModelPersistence.NAME,ul.getName());
    registry.addContent(lang);
    for (    ConceptInfo ci : ul.getConceptsInUse()) {
      Element conceptElement=new Element("concept");
      conceptElement.setAttribute(ModelPersistence.ID,myIdEncoder.toText(ci.getConceptId()));
      conceptElement.setAttribute(ModelPersistence.NAME,ci.getName());
      conceptElement.setAttribute("flags",ci.getConceptImplementationKind());
      conceptElement.setAttribute("index",ci.getIndex());
      for (      PropertyInfo pi : ci.getPropertiesInUse()) {
        Element e=new Element(ModelPersistence.PROPERTY);
        e.setAttribute(ModelPersistence.ID,myIdEncoder.toText(pi.getPropertyId()));
        e.setAttribute(ModelPersistence.NAME,pi.getName());
        e.setAttribute("index",pi.getIndex());
        conceptElement.addContent(e);
      }
      for (      AssociationLinkInfo li : ci.getAssociationsInUse()) {
        Element e=new Element("reference");
        e.setAttribute(ModelPersistence.ID,myIdEncoder.toText(li.getLinkId()));
        e.setAttribute(ModelPersistence.NAME,li.getName());
        e.setAttribute("index",li.getIndex());
        conceptElement.addContent(e);
      }
      for (      AggregationLinkInfo li : ci.getAggregationsInUse()) {
        Element e=new Element("child");
        e.setAttribute(ModelPersistence.ID,myIdEncoder.toText(li.getLinkId()));
        e.setAttribute(ModelPersistence.NAME,li.getName());
        e.setAttribute("index",li.getIndex());
        if (li.isUnordered()) {
          e.setAttribute("unordered","true");
        }
        conceptElement.addContent(e);
      }
      lang.addContent(conceptElement);
    }
  }
  return registry;
}
