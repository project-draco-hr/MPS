{
  SModule module=SNodeOperations.getModel(scriptNode).getModule();
  if (!(module instanceof Language)) {
    return null;
  }
  LanguageRuntime lr=LanguageRegistry.getInstance(contextProject).getLanguage((Language)module);
  ScriptAspectDescriptor scriptAspect=(lr == null ? null : lr.getAspect(ScriptAspectDescriptor.class));
  if (scriptAspect == null) {
    return null;
  }
  final SNodeReference scriptNodeRef=scriptNode.getReference();
  for (  RefactoringScript rs : scriptAspect.getRefactoringScripts()) {
    if (scriptNodeRef.equals(rs.getScriptNode())) {
      return rs;
    }
  }
  return null;
}
