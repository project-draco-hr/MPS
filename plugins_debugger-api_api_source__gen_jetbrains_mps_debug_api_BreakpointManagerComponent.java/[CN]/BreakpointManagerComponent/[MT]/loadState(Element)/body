{
synchronized (myBreakpoints) {
    clear();
    List breakpointsElement=state.getChildren();
    for (ListIterator it=breakpointsElement.listIterator(); it.hasNext(); ) {
      Element breakpointElement=(Element)it.next();
      try {
        IBreakpoint breakpoint=myBreakpointsIO.readBreakpoint(breakpointElement);
        if (breakpoint != null) {
          myBreakpoints.add(breakpoint);
        }
 else {
          myUnreadBreakpoints.add(breakpointElement);
        }
      }
 catch (      Throwable t) {
        LOG.error("Error while loading breakpoint from " + breakpointElement,t);
      }
    }
    ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
      @Override public void run(){
        ModelAccess.instance().runReadAction(new Runnable(){
          @Override public void run(){
synchronized (myBreakpoints) {
              myRootsToBreakpointsMap.clear();
              for (              IBreakpoint breakpoint : myBreakpoints) {
                if (breakpoint instanceof ILocationBreakpoint) {
                  addLocationBreakpoint((ILocationBreakpoint)breakpoint);
                }
              }
            }
          }
        }
);
      }
    }
);
  }
}
