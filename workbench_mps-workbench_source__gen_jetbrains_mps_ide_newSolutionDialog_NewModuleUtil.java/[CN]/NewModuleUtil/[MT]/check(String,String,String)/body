{
  if (MPSExtentions.DOT_LANGUAGE.equals(extension) && !(SourceVersion.isName(namespace))) {
    return "Language namespace should be valid Java package";
  }
  if (rootPath.length() == 0) {
    return "Path should be specified";
  }
  String message=NewModuleCheckUtil.checkModuleDirectory(new File(rootPath),extension,"Module");
  if (message != null) {
    return message;
  }
  if (namespace.length() == 0) {
    return "Namespace should be specified";
  }
  if (MPSModuleRepository.getInstance().getModuleByFqName(namespace) != null) {
    return "Module namespace already exists";
  }
  if (NameUtil.shortNameFromLongName(namespace).length() == 0) {
    return "Enter valid namespace";
  }
  IFile moduleDir=getModuleFile(namespace,rootPath,extension).getParent();
  if (moduleDir.getDescendant(Language.LANGUAGE_MODELS).exists() || moduleDir.getDescendant(Solution.SOLUTION_MODELS).exists()) {
    return "Module already exists in this folder";
  }
  return null;
}
