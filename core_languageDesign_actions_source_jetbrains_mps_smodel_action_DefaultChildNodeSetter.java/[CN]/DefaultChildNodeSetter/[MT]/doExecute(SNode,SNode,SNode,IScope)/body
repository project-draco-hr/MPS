{
  SNode linkDeclaration=BaseAdapter.fromAdapter(myLinkDeclaration);
  if (newChild != null && !SModelUtil.isAcceptableTarget(linkDeclaration,newChild)) {
    LOG.error("couldn't set instance of " + newChild.getConceptFqName() + " as child '"+ myLinkDeclaration.getRole()+ "' to "+ parentNode.getDebugText());
    return newChild;
  }
  if (oldChild == null) {
    parentNode.setChild(SModelUtil.getGenuineLinkRole(linkDeclaration),newChild);
  }
 else {
    parentNode.replaceChild(oldChild,newChild);
    oldChild.delete();
  }
  return newChild;
}
