{
  SNode solutionDescriptor=SConceptOperations.createNewNode("jetbrains.mps.projectLanguage.structure.SolutionDescriptor",null);
  SPropertyOperations.set(solutionDescriptor,"externallyVisible","" + (true));
  SPropertyOperations.set(solutionDescriptor,"compileInMPS","" + (myThis.getCompileInMPS()));
  String fileName=solutionDescriptorFile.getName();
  SPropertyOperations.set(solutionDescriptor,"name",fileName.substring(0,fileName.length() - 4));
  SNode modelRoot=SConceptOperations.createNewNode("jetbrains.mps.projectLanguage.structure.ModelRoot",null);
  SPropertyOperations.set(modelRoot,"prefix","");
  SPropertyOperations.set(modelRoot,"path",solutionDescriptorFile.getParent().getAbsolutePath());
  SLinkOperations.addChild(solutionDescriptor,"modelRoot",modelRoot);
  DescriptorsPersistence.saveSolutionDescriptor(solutionDescriptorFile,((SolutionDescriptor)SNodeOperations.getAdapter(solutionDescriptor)));
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      ApplicationLevelVcsManager.instance().addFileToVcs(VFileSystem.refreshAndGetFile(solutionDescriptorFile),false);
    }
  }
,ModalityState.NON_MODAL);
  return myThis.getProject().addProjectSolution(solutionDescriptorFile.toFile());
}
