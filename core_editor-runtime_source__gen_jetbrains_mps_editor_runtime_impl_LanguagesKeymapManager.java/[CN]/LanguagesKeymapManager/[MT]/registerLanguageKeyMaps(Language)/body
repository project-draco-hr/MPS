{
  SModelDescriptor editorModelDescriptor=language.getEditorModelDescriptor();
  SModel editorModel=(editorModelDescriptor != null ? editorModelDescriptor.getSModel() : null);
  List<EditorCellKeyMap> keyMaps;
  if (editorModel != null) {
    keyMaps=ListSequence.<EditorCellKeyMap>fromList(new ArrayList<EditorCellKeyMap>());
    for (    SNode keyMapDeclaration : ListSequence.<SNode>fromList(SModelOperations.getRoots(editorModel,"jetbrains.mps.lang.editor.structure.CellKeyMapDeclaration"))) {
      try {
        Class<EditorCellKeyMap> keyMapClass=findKeyMapClassByDeclaration(keyMapDeclaration);
        if (keyMapClass != null) {
          EditorCellKeyMap keyMap=keyMapClass.newInstance();
          if (keyMap.isApplicableToEveryModel()) {
            ListSequence.<EditorCellKeyMap>fromList(keyMaps).addElement(keyMap);
          }
        }
      }
 catch (      Throwable t) {
        LOG.error(t);
      }
    }
  }
 else {
    keyMaps=Collections.emptyList();
  }
  MapSequence.<Language,List<EditorCellKeyMap>>fromMap(myLanguagesToKeyMaps).put(language,keyMaps);
}
