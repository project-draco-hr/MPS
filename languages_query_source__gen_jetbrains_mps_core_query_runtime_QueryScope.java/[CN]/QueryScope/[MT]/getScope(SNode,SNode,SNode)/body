{
  SNode curr=node;
  SNode prev=fromChild;
  while (curr != null) {
    if (SNodeOperations.isInstanceOf(curr,"jetbrains.mps.core.query.structure.MqlScopeProvider")) {
      QueryScope scope=MqlScopeProvider_Behavior.call_getScope_5433095484313879207(SNodeOperations.cast(curr,"jetbrains.mps.core.query.structure.MqlScopeProvider"),kind,prev);
      if (scope != null) {
        return scope;
      }
    }
    prev=curr;
    curr=parent(curr);
  }
  return null;
}
