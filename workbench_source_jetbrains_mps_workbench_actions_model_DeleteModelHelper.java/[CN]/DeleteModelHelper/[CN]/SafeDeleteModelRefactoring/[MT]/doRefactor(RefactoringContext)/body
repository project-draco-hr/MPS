{
  SModelDescriptor modelDescriptor=refactoringContext.getSelectedModel();
  Set<ModelOwner> owners=SModelRepository.getInstance().getOwners(modelDescriptor);
  for (  ModelOwner modelOwner : owners) {
    if (!(modelOwner instanceof IModule)) {
      LOG.warning("Model owner type " + modelOwner.getClass().getSimpleName() + " is not supported by delete refactoring. Changes will not be saved automatically for owners of this type.");
      continue;
    }
    if ((IModule)modelOwner instanceof Language) {
      deleteModelFromLanguage((Language)(IModule)modelOwner,modelDescriptor);
    }
 else     if ((IModule)modelOwner instanceof Solution) {
      deleteModelFromSolution((Solution)(IModule)modelOwner,modelDescriptor);
    }
 else     if ((IModule)modelOwner instanceof Generator) {
      deleteModelFromGenerator((Generator)(IModule)modelOwner,modelDescriptor);
    }
 else {
      LOG.warning("Module type " + ((IModule)modelOwner).getClass().getSimpleName() + " is not supported by delete refactoring. Changes will not be saved automatically for modules of this type.");
    }
  }
  for (  SModelDescriptor md : SModelRepository.getInstance().getModelDescriptors()) {
    if (SModelStereotype.isUserModel(md) && new ModelFindOperations(md).hasImportedModel(modelDescriptor)) {
      md.getSModel().deleteImportedModel(modelDescriptor.getSModelReference());
    }
  }
  if (myDeleteFiles) {
    SModelRepository.getInstance().deleteModel(modelDescriptor);
  }
  for (  ModelOwner modelOwner : owners) {
    if (modelOwner instanceof IModule) {
      ((IModule)modelOwner).save();
    }
  }
}
