{
  File moduleOutput=new File(modelDescriptor.getModule().getOutputFor(modelDescriptor));
  List<File> directoriesToDelete=new ArrayList<File>();
  directoriesToDelete.add(FileGenerationUtil.getDefaultOutputDir(modelDescriptor,FileSystem.getInstance().getFileByPath(moduleOutput.getPath())).toFile());
  directoriesToDelete.add(FileGenerationUtil.getDefaultOutputDir(modelDescriptor,FileSystem.getInstance().getFileByPath(FileGenerationUtil.getCachesPath(moduleOutput.getAbsolutePath()))).toFile());
  for (  File directory : directoriesToDelete) {
    if (directory.exists()) {
      VcsMigrationUtil.deleteFromDiskAndRemoveFromVcs(Arrays.asList(directory.listFiles(new FilenameFilter(){
        @Override public boolean accept(        File dir,        String name){
          return !FileTypeManager.getInstance().isFileIgnored(name);
        }
      }
)),false);
      VcsMigrationUtil.deleteFromDiskAndRemoveFromVcs(Arrays.asList(directory),false);
    }
  }
}
