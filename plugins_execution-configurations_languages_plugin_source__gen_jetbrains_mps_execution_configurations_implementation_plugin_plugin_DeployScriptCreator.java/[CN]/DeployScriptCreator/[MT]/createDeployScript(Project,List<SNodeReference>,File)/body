{
  SNode deployProject=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,"jetbrains.mps.build.structure.BuildProject"));
  SPropertyOperations.set(deployProject,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x110396eaaa4L,0x110396ec041L,"name"),"deploy");
  SPropertyOperations.set(deployProject,MetaAdapterFactory.getProperty(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x4438b4de59410ebcL,"fileName"),"deploy.xml");
  SPropertyOperations.set(deployProject,MetaAdapterFactory.getProperty(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x48387ebae1a07a23L,"internalBaseDirectory"),"" + (createPathFromFullPath(baseDir,ProjectHelper.toIdeaProject(project).getBasePath())));
  SLinkOperations.getChildren(deployProject,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x5c3f3e2c1ce9ac70L,"plugins")).add(SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x5c3f3e2c1ce9ac67L,"jetbrains.mps.build.structure.BuildJavaPlugin")));
  SLinkOperations.getChildren(deployProject,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x5c3f3e2c1ce9ac70L,"plugins")).add(SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0xc0bde9fc71699d9L,"jetbrains.mps.build.mps.structure.BuildMPSPlugin")));
  Iterable<SNode> pluginNodes=ListSequence.fromList(plugins).select(new ISelector<SNodeReference,SNode>(){
    public SNode select(    SNodeReference it){
      return it.resolve(MPSModuleRepository.getInstance());
    }
  }
).ofType(SNode.class);
  Iterable<SNode> projects=Sequence.fromIterable(pluginNodes).select(new ISelector<SNode,SNode>(){
    public SNode select(    SNode it){
      return SNodeOperations.getContainingRoot(it);
    }
  }
).ofType(SNode.class).distinct();
  for (  SNode projectNode : Sequence.fromIterable(projects)) {
    ListSequence.fromList(SLinkOperations.getChildren(deployProject,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x4df58c6f18f84a25L,"dependencies"))).addElement(_quotation_createNode_ppcj9p_a0a0a21a0(projectNode));
  }
  SLinkOperations.setNewChild(deployProject,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x4df58c6f18f84a1cL,"layout"),SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a14L,"jetbrains.mps.build.structure.BuildLayout")));
  for (  SNode plugin : Sequence.fromIterable(pluginNodes)) {
    ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(deployProject,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x4df58c6f18f84a1cL,"layout")),MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4140393b234482c3L,0x668c6cfbafac4c8eL,"children"))).addElement(_quotation_createNode_ppcj9p_a0a0a51a0(plugin));
  }
  return deployProject;
}
