{
  int componentsNum=0;
  for (  Node node : SetSequence.fromSet(MapSequence.fromMap(components).keySet())) {
    componentsNum=Math.max(componentsNum,MapSequence.fromMap(components).get(node) + 1);
  }
  List<List<Node>> componentsList=ListSequence.fromList(new ArrayList<List<Node>>(componentsNum));
  for (int i=0; i < componentsNum; i++) {
    ListSequence.fromList(componentsList).addElement(LinkedListSequence.fromLinkedList(new LinkedList<Node>()));
  }
  for (  Node node : SetSequence.fromSet(MapSequence.fromMap(components).keySet())) {
    ListSequence.fromList(ListSequence.fromList(componentsList).getElement(MapSequence.fromMap(components).get(node))).addElement(node);
  }
  return componentsList;
}
