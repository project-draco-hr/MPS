{
  ModuleRootManager mrm=ModuleRootManager.getInstance(myFacet.getModule());
  VirtualFile[] srs=mrm.getSourceRoots();
  assertTrue(srs.length == 2);
  assertEquals("models",srs[0].getName());
  VirtualFile[] children=srs[0].getChildren();
  assertTrue(children.length == 1);
  assertEquals("main.mps",children[0].getName());
  VirtualFileSystem vfs=VirtualFileManager.getInstance().getFileSystem("file");
  vfs.refresh(false);
  final VirtualFile module=srs[0].getParent();
  assertTrue(module.findChild("source_gen") == null);
  CompilerManager cm=CompilerManager.getInstance(myFacet.getModule().getProject());
  cm.compile(myFacet.getModule(),new CompileStatusNotification(){
    @Override public void finished(    boolean aborted,    int errors,    int warnings,    CompileContext compileContext){
    }
  }
);
  vfs.refresh(false);
  assertFalse(module.findChild("source_gen") == null);
  assertFalse(module.findFileByRelativePath("source_gen/main") == null);
  assertTrue(module.findFileByRelativePath("source_gen/main").getChildren().length == 5);
}
