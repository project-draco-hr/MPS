{
  EditorCell selectedCell=editorContext.getSelectedCell();
  if (selectedCell == null) {
    return false;
  }
  if (keyEvent.getID() != KeyEvent.KEY_PRESSED && keyEvent.getID() != KeyEvent.KEY_TYPED) {
    return false;
  }
  int keyCode=keyEvent.getKeyCode();
  if (keyCode == KeyEvent.VK_CONTROL || keyCode == KeyEvent.VK_ALT || keyCode == KeyEvent.VK_SHIFT || keyCode == KeyEvent.VK_PAGE_UP || keyCode == KeyEvent.VK_PAGE_DOWN) {
    return false;
  }
  Collection<Pair<KeyMapAction,EditorCell>> actionCellPairs=myKeymapHandler.getActions(selectedCell,keyEvent,editorContext);
  if (actionCellPairs.size() == 0) {
    return false;
  }
  Pair<KeyMapAction,EditorCell> first=actionCellPairs.iterator().next();
  if (actionCellPairs.size() == 1 && !first.o1.isMenuAlwaysShown()) {
    myKeymapHandler.executeAction(first.o1,first.o2,editorContext);
  }
 else {
    myKeymapHandler.showActionsMenu(actionCellPairs,editorContext,selectedCell);
  }
  return true;
}
