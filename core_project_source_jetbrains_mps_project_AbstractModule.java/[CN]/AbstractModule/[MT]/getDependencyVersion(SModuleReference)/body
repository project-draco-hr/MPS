{
  Integer res=getModuleDescriptor().getDependencyVersions().get(dependency);
  if (res == null) {
    LOG.error("getDependencyVersion can't find a version for module " + dependency.getModuleName() + " in module "+ getModuleName()+ "."+ " This can either mean that the module is not visible from this module or that "+ "validateDependencyVersions() was not called on this module in appropriate moment.",new Throwable());
    return ((AbstractModule)dependency).getModuleVersion();
  }
  return res;
}
