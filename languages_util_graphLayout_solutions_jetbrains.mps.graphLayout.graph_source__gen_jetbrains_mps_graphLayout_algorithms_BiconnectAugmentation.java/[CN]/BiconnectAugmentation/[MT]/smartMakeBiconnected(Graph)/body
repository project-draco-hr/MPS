{
  Set<Edge> addedEdges=SetSequence.<Edge>fromSet(new LinkedHashSet<Edge>());
  BiconnectedComponent root=BiconnectedComponent.createTree(graph);
  if (SHOW_LOG > 0) {
    System.out.println(root.toString(""));
  }
  if (ListSequence.<BiconnectedComponent>fromList(root.getChildren()).count() > 0) {
    List<Node> toConnect=ListSequence.<Node>fromList(new ArrayList<Node>());
    collectListNodes(root,toConnect,null);
    if (SetSequence.<Node>fromSet(root.getNodes()).count() == 1) {
      ListSequence.<Node>fromList(toConnect).addElement(SetSequence.<Node>fromSet(root.getNodes()).first());
    }
 else {
      final Node cutpoint=root.getCutpoint(ListSequence.<BiconnectedComponent>fromList(root.getChildren()).first());
      ListSequence.<Node>fromList(toConnect).addElement(SetSequence.<Node>fromSet(root.getNodes()).findFirst(new IWhereFilter<Node>(){
        public boolean accept(        Node it){
          return it != cutpoint;
        }
      }
));
    }
    Node prev=null;
    for (    Node node : ListSequence.<Node>fromList(toConnect)) {
      if (prev != null) {
        SetSequence.fromSet(addedEdges).addElement(graph.connect(prev,node));
      }
      prev=node;
    }
  }
  return addedEdges;
}
