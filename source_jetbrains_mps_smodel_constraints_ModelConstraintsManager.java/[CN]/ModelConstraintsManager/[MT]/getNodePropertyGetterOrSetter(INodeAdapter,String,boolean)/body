{
  String namespace=node.getNode().getLanguageNamespace();
  if (namespace.equals("jetbrains.mps.bootstrap.structureLanguage") && propertyName.equals(NamedConcept.NAME)) {
    return null;
  }
  if (namespace.equals("jetbrains.mps.projectLanguage")) {
    return null;
  }
  if (node instanceof RuntimeTypeVariable) {
    return null;
  }
  if (!myAddedLanguageNamespaces.containsKey(namespace)) {
    return null;
  }
  String sourceConceptFqName=node.getNode().getConceptFqName();
  String sourceKey=sourceConceptFqName + "#" + propertyName;
  if (isSetter) {
    INodePropertySetter setter=myNodePropertySettersCache.get(sourceKey);
    if (setter != null || myNodePropertySettersCache.containsKey(sourceKey))     return setter;
  }
 else {
    INodePropertyGetter getter=myNodePropertyGettersCache.get(sourceKey);
    if (getter != null || myNodePropertyGettersCache.containsKey(sourceKey))     return getter;
  }
  AbstractConceptDeclaration abstractConcept=node.getConceptDeclarationAdapter();
  ConceptDeclaration concreteConcept=(abstractConcept instanceof ConceptDeclaration) ? (ConceptDeclaration)abstractConcept : (ConceptDeclaration)null;
  while (concreteConcept != null) {
    String conceptFqName=NameUtil.nodeFQName(concreteConcept);
    IModelConstraints result;
    if (isSetter) {
      result=myNodePropertySettersMap.get(conceptFqName + "#" + propertyName);
    }
 else {
      result=myNodePropertyGettersMap.get(conceptFqName + "#" + propertyName);
    }
    if (result != null) {
      if (isSetter) {
        myNodePropertySettersCache.put(sourceKey,(INodePropertySetter)result);
      }
 else {
        myNodePropertyGettersCache.put(sourceKey,(INodePropertyGetter)result);
      }
      return result;
    }
    concreteConcept=concreteConcept.getExtends();
  }
  if (isSetter) {
    myNodePropertySettersCache.put(sourceKey,null);
  }
 else {
    myNodePropertyGettersCache.put(sourceKey,null);
  }
  return null;
}
