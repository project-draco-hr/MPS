{
  Object searchScopeOrListOfNodes=this.createSearchScopeOrListOfNodes(operationContext,_context);
  if (searchScopeOrListOfNodes == null) {
    return new EmptySearchScope();
  }
  if (searchScopeOrListOfNodes instanceof ISearchScope) {
    return (ISearchScope)searchScopeOrListOfNodes;
  }
  if (searchScopeOrListOfNodes instanceof List) {
    CollectionUtil.checkForNulls((Iterable)searchScopeOrListOfNodes,"" + this);
    return new SimpleSearchScope((List)searchScopeOrListOfNodes);
  }
  if (searchScopeOrListOfNodes instanceof Iterable) {
    CollectionUtil.checkForNulls((Iterable)searchScopeOrListOfNodes,"" + this);
    Collection nodes=IterableUtil.asCollection((Iterable)searchScopeOrListOfNodes);
    return new SimpleSearchScope(nodes);
  }
  throw new RuntimeException("unexpected type in search-scope provider " + searchScopeOrListOfNodes.getClass());
}
