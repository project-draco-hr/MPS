{
  if (overridenMethod == null) {
    return;
  }
  SNode conceptNode=SNodeOperations.getAncestor(conceptLink,"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration",false,false);
  List<SNode> completed=MapSequence.fromMap(completedConceptsByLinkDeclaration).get(SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false));
  if (ListSequence.fromList(completed).contains(conceptNode)) {
    return;
  }
  Set<SNode> allLinks=SetSequence.fromSet(new HashSet<SNode>());
  for (  SNode link : ListSequence.fromList(SLinkOperations.getTargets(conceptNode,"conceptLink",true))) {
    if (SLinkOperations.getTarget(link,"conceptLinkDeclaration",false) == SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false)) {
      SetSequence.fromSet(allLinks).addElement(link);
    }
  }
  SNode method=createMethod(SPropertyOperations.getString(overridenMethod,"name"),false,overridenMethod,SNodeOperations.copyNode(SLinkOperations.getTarget(overridenMethod,"returnType",true)));
  SNode declaration=_quotation_createNode_azpnkk_a0i0ab(SLinkOperations.getTarget(SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false),"targetType",false),SLinkOperations.getTarget(SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false),"targetType",false));
  SNode reference=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null);
  SLinkOperations.setTarget(reference,"variableDeclaration",SLinkOperations.getTarget(declaration,"localVariableDeclaration",true),false);
  ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(method,"body",true),"statement",true)).addElement(declaration);
  SNode ldConcept=SNodeOperations.getAncestor(SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false),"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration",false,false);
  Set<SNode> superNodes=SetSequence.fromSet(new HashSet<SNode>());
  if (SNodeOperations.isInstanceOf(conceptNode,"jetbrains.mps.lang.structure.structure.InterfaceConceptDeclaration")) {
    for (    SNode impl : ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.cast(conceptNode,"jetbrains.mps.lang.structure.structure.InterfaceConceptDeclaration"),"extends",true))) {
      if (SConceptOperations.isSubConceptOf(SLinkOperations.getTarget(impl,"intfc",false),NameUtil.nodeFQName(ldConcept))) {
        SetSequence.fromSet(superNodes).addElement(SLinkOperations.getTarget(impl,"intfc",false));
      }
    }
  }
 else   if (SNodeOperations.isInstanceOf(conceptNode,"jetbrains.mps.lang.structure.structure.ConceptDeclaration")) {
    if ((SLinkOperations.getTarget(SNodeOperations.cast(conceptNode,"jetbrains.mps.lang.structure.structure.ConceptDeclaration"),"extends",false) != null)) {
      if (SConceptOperations.isSubConceptOf(SLinkOperations.getTarget(SNodeOperations.cast(conceptNode,"jetbrains.mps.lang.structure.structure.ConceptDeclaration"),"extends",false),NameUtil.nodeFQName(ldConcept))) {
        SetSequence.fromSet(superNodes).addElement(SLinkOperations.getTarget(SNodeOperations.cast(conceptNode,"jetbrains.mps.lang.structure.structure.ConceptDeclaration"),"extends",false));
      }
    }
    for (    SNode impl : ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.cast(conceptNode,"jetbrains.mps.lang.structure.structure.ConceptDeclaration"),"implements",true))) {
      if (SConceptOperations.isSubConceptOf(SLinkOperations.getTarget(impl,"intfc",false),NameUtil.nodeFQName(ldConcept))) {
        SetSequence.fromSet(superNodes).addElement(SLinkOperations.getTarget(impl,"intfc",false));
      }
    }
  }
  for (  SNode superNode : SetSequence.fromSet(superNodes)) {
    SNode methodCall=SConceptOperations.createNewNode("jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall",null);
    SLinkOperations.setTarget(methodCall,"baseMethodDeclaration",overridenMethod,false);
    SNode superNodeExpression=SConceptOperations.createNewNode("jetbrains.mps.lang.behavior.structure.SuperNodeExpression",null);
    SLinkOperations.setTarget(superNodeExpression,"superConcept",superNode,false);
    ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(method,"body",true),"statement",true)).addElement(_quotation_createNode_azpnkk_a0a4a61a62(superNodeExpression,methodCall,reference));
  }
  for (  SNode link : SetSequence.fromSet(allLinks)) {
    SNode refExpression=SConceptOperations.createNewNode("jetbrains.mps.lang.smodel.structure.NodeRefExpression",null);
    SLinkOperations.setTarget(refExpression,"referentNode",SNodeOperations.cast(SLinkOperations.getTarget(SNodeOperations.cast(link,"jetbrains.mps.lang.structure.structure.ReferenceConceptLink"),"target",false),"jetbrains.mps.lang.core.structure.INamedConcept"),false);
    ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(method,"body",true),"statement",true)).addElement(_quotation_createNode_azpnkk_a0a2a71a62(reference,refExpression));
  }
  ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(method,"body",true),"statement",true)).addElement(_quotation_createNode_azpnkk_a0a91a62(reference));
  if (MapSequence.fromMap(completedConceptsByLinkDeclaration).get(SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false)) == null) {
    MapSequence.fromMap(completedConceptsByLinkDeclaration).put(SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false),ListSequence.fromList(new ArrayList<SNode>()));
  }
  ListSequence.fromList(MapSequence.fromMap(completedConceptsByLinkDeclaration).get(SLinkOperations.getTarget(conceptLink,"conceptLinkDeclaration",false))).addElement(conceptNode);
  addMethodToBehavior(conceptNode,method);
}
