{
  for (  SModelRoot root : myLanguage.getSModelRoots()) {
    root.setPrefix(myNewName);
  }
  EditableSModelDescriptor structure=myLanguage.getStructureModelDescriptor();
  for (  AbstractConceptDeclaration concept : structure.getSModel().allAdapters(AbstractConceptDeclaration.class)) {
    myContext.changeFeatureName(concept.getNode(),myNewName + ".structure." + concept.getName(),concept.getName());
  }
  for (  SModelDescriptor sm : myLanguage.getOwnModelDescriptors()) {
    if (!SModelStereotype.isUserModel(sm))     continue;
    if (sm.getSModelReference().getSModelFqName().toString().startsWith(oldFqName + ".")) {
      String suffix=sm.getSModelReference().getSModelFqName().toString().substring(oldFqName.length());
      sm.rename(SModelFqName.fromString(myNewName + suffix),false);
    }
  }
  LanguageDescriptor descriptor=myLanguage.getModuleDescriptor();
  descriptor.setNamespace(myNewName);
  myLanguage.setLanguageDescriptor(descriptor,false);
  myLanguage.save();
  myContext.getStructureModificationData().addDependencyModel((EditableSModelDescriptor)structure);
  RefactoringProcessor.updateRefactoringHistory(myContext);
  SModelRepository.getInstance().saveAll();
}
