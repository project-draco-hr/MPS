{
  SNode linkDeclaration=SLinkOperations.addNewChild(concept,"linkDeclaration","jetbrains.mps.lang.structure.structure.LinkDeclaration");
  SPropertyOperations.set(linkDeclaration,"metaClass","reference");
  SPropertyOperations.set(linkDeclaration,"role",SPropertyOperations.getString(thisNode,"name"));
  if (SPropertyOperations.getBoolean(thisNode,"optional")) {
    SPropertyOperations.set(linkDeclaration,"sourceCardinality","0..1");
  }
 else {
    SPropertyOperations.set(linkDeclaration,"sourceCardinality","1");
  }
  SLinkOperations.setTarget(linkDeclaration,"target",AbstractConceptReference_Behavior.call_getConcept_1238594571574(SLinkOperations.getTarget(thisNode,"conceptReference",true),conceptsToTargets),false);
  MapSequence.fromMap(partsToLinks).put(thisNode,linkDeclaration);
}
