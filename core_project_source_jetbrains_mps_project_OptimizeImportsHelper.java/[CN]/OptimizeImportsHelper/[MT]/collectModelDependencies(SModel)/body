{
  Result result=new Result();
  result.myUsedLanguages.addAll(((jetbrains.mps.smodel.SModelInternal)model).engagedOnGenerationLanguages());
  ModelDependencyScanner modelScanner=new ModelDependencyScanner().crossModelReferences(true).usedLanguages(true).walk(model);
  result.myUsedLanguages.addAll(findModules(modelScanner.getUsedLanguages()));
  result.myUsedModels.addAll(modelScanner.getCrossModelReferences());
  for (  Language l : ModelsAutoImportsManager.getAutoImportedLanguages(model.getModule(),model)) {
    result.myUsedLanguages.add(l.getModuleReference());
  }
  for (  SModel m : ModelsAutoImportsManager.getAutoImportedModels(model.getModule(),model)) {
    result.addUsedModel(m.getReference());
  }
  return result;
}
