{
  SNode curr=node;
  String currentRole=role;
  while (curr != null) {
    if (SNodeOperations.isInstanceOf(curr,"jetbrains.mps.query.structure.MqlScopeProvider")) {
      QueryScope scope=MqlScopeProvider_Behavior.call_getScope_5433095484313879207(SNodeOperations.cast(curr,"jetbrains.mps.query.structure.MqlScopeProvider"),kind,currentRole);
      if (scope != null) {
        return scope;
      }
    }
    currentRole=(SNodeOperations.isAttribute(curr) ? SNodeOperations.getParent(curr).getRole_() : curr.getRole_());
    curr=parent(curr);
  }
  return null;
}
