{
  Iterable<SNode> linkUsages=FindUtils.executeFinder("jetbrains.mps.lang.structure.findUsages.NodeUsages_Finder",linkDeclaration,GlobalScope.getInstance(),new EmptyProgressMonitor());
  List<SNode> result=ListSequence.fromList(new ArrayList<SNode>());
  for (  SNode nodeUsage : Sequence.fromIterable(linkUsages)) {
    if (isExcluded(nodeUsage)) {
      continue;
    }
    if (SNodeOperations.isInstanceOf(nodeUsage,MetaAdapterFactory.getConcept(0x7866978ea0f04cc7L,0x81bc4d213d9375e1L,0x108f970c119L,"jetbrains.mps.lang.smodel.structure.SLinkListAccess"))) {
      if (isSequenceNeeded(SNodeOperations.cast(nodeUsage,MetaAdapterFactory.getConcept(0x7866978ea0f04cc7L,0x81bc4d213d9375e1L,0x108f970c119L,"jetbrains.mps.lang.smodel.structure.SLinkListAccess")))) {
        continue;
      }
      if (isListNeeded(SNodeOperations.cast(nodeUsage,MetaAdapterFactory.getConcept(0x7866978ea0f04cc7L,0x81bc4d213d9375e1L,0x108f970c119L,"jetbrains.mps.lang.smodel.structure.SLinkListAccess")))) {
        continue;
      }
    }
    ListSequence.fromList(result).addElement(nodeUsage);
  }
  return result;
}
