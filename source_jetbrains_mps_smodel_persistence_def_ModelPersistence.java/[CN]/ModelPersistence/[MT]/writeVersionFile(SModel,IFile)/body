{
  int version=model.getVersion();
  if (version < 0)   return;
  IFile versionFile=getVersionFile(modelFile);
  try {
    if (!versionFile.exists()) {
      versionFile.createNewFile();
      IOperationContext operationContext=model.getModelDescriptor().getOperationContext();
      if (operationContext != null) {
        IProjectHandler projectHandler=operationContext.getProject().getProjectHandler();
        if (projectHandler != null) {
          try {
            projectHandler.addFilesToVCS(CollectionUtil.asList(versionFile.toFile()));
          }
 catch (          RemoteException e) {
            LOG.error(e);
          }
        }
      }
 else {
        LOG.warning("can't find an operation context for a model " + model);
      }
    }
    Document doc=new Document(new Element("version").setText("" + version));
    JDOMUtil.writeDocument(doc,versionFile);
  }
 catch (  IOException ioe) {
    LOG.error(ioe);
  }
}
