{
  if (!(parent instanceof SModelTreeNode) && !parent.isInitialized() && !parent.hasInfiniteSubtree()) {
    parent.init();
  }
  if (parent instanceof SModelTreeNode) {
    SModelTreeNode parentSModelNode=(SModelTreeNode)parent;
    SModelDescriptor parentModelDescriptor=parentSModelNode.getSModelDescriptor();
    SModelReference parentModelRef=parentModelDescriptor.getSModelReference();
    SModelReference modelRef=modelDescriptor.getSModelReference();
    if (parentModelRef.equals(modelRef)) {
      return parentSModelNode;
    }
  }
  for (  MPSTreeNode node : parent) {
    SModelTreeNode foundNode=findSModelTreeNode(node,modelDescriptor);
    if (foundNode != null) {
      return foundNode;
    }
  }
  return null;
}
