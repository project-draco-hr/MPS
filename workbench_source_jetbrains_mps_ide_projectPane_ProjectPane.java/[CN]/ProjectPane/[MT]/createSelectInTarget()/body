{
  return new SelectInTarget(){
    private SNode myNode;
    private IOperationContext myContext;
    public boolean canSelect(    SelectInContext context){
      VirtualFile virtualFile=context.getVirtualFile();
      if (!(virtualFile instanceof MPSNodeVirtualFile))       return false;
      MPSNodeVirtualFile file=(MPSNodeVirtualFile)virtualFile;
      FileEditor[] editors=FileEditorManager.getInstance(myProject).getEditors(file);
      if (editors.length != 0) {
        FileEditor editor=editors[0];
        if (!(editor instanceof MPSFileNodeEditor))         return false;
        EditorComponent editorComponent=((MPSFileNodeEditor)editor).getNodeEditor().getCurrentEditorComponent();
        if (editorComponent == null)         return false;
        myNode=editorComponent.getEditedNode();
        myContext=editorComponent.getOperationContext();
      }
 else {
        myNode=file.getNode();
        myContext=new ProjectOperationContext(myProject.getComponent(MPSProjectHolder.class).getMPSProject());
      }
      return true;
    }
    public void selectIn(    final SelectInContext context,    boolean requestFocus){
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          selectNode(myNode,myContext);
        }
      }
);
      activate(requestFocus);
    }
    public String getToolWindowId(){
      return ID;
    }
    public String getMinorViewId(){
      return null;
    }
    public float getWeight(){
      return 0;
    }
    public String toString(){
      return "Logical View";
    }
  }
;
}
