{
  if (resultCondition.met(root)) {
    return root;
  }
  if (descendCondition.met(root)) {
    if (!root.isInitialized()) {
      root.init();
    }
    for (    MPSTreeNode node : root) {
      if (node instanceof SModelTreeNode) {
        for (        SModelTreeNode subnode : ((SModelTreeNode)node).getSubfolderSModelTreeNodes()) {
          MPSTreeNode result=findTreeNode(subnode,descendCondition,resultCondition);
          if (result != null) {
            return result;
          }
        }
      }
      MPSTreeNode result=findTreeNode(node,descendCondition,resultCondition);
      if (result != null) {
        return result;
      }
    }
  }
  return null;
}
