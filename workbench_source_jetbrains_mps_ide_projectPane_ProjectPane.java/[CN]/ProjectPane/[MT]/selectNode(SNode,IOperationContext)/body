{
  LOG.checkEDT();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      getTree().runWithoutExpansion(new Runnable(){
        public void run(){
          IModule module=context.getModule();
          if (module == null) {
            selectNode(node);
            return;
          }
          MPSTreeNode moduleTreeNode=findModuleTreeNode(module);
          if (moduleTreeNode == null) {
            LOG.error("Couldn't find tree node for module: " + module);
            selectNode(node);
            return;
          }
          SModelDescriptor modelDescriptor=node.getModel().getModelDescriptor();
          SModelTreeNode modelTreeNode=findSModelTreeNode(moduleTreeNode,modelDescriptor);
          if (modelTreeNode == null) {
            selectNode(node);
            return;
          }
          modelTreeNode.flush();
          MPSTreeNodeEx treeNodeToSelect=findTreeNode(modelTreeNode,node);
          if (treeNodeToSelect != null) {
            TreePath treePath=new TreePath(treeNodeToSelect.getPath());
            getTree().setSelectionPath(treePath);
            getTree().scrollPathToVisible(treePath);
          }
 else {
            LOG.warning("Couldn't select node " + node.getDebugText() + " : tree node not found.");
          }
        }
      }
);
    }
  }
);
}
