{
  TreePath selectionPath=getTree().getLeadSelectionPath();
  if (selectionPath == null)   return null;
  MPSTreeNode treeNode=(MPSTreeNode)selectionPath.getLastPathComponent();
  while (treeNode != null && !(treeNode instanceof SModelTreeNode)) {
    treeNode=(MPSTreeNode)treeNode.getParent();
  }
  if (treeNode == null)   return null;
  return ((SModelTreeNode)treeNode).getSModelDescriptor();
}
