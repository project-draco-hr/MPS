{
  String propertyName=AttributeOperations.getPropertyName(propertyMacro);
  SNode function=RuleUtil.getPropertyMacro_ValueFunction(propertyMacro);
  if (propertyName == null || function == null) {
    myGenerator.showErrorMessage(inputNode,templateNode,propertyMacro,"cannot evaluate property macro");
    throw new GenerationFailureException("cannot evaluate property macro");
  }
  String templateValue=SNodeAccessUtil.getProperty(templateNode,propertyName);
  String methodName=TemplateFunctionMethodName.propertyMacro_GetPropertyValue(function);
  try {
    Object macroValue=QueryMethodGenerated.invoke(methodName,myGenerator.getGeneratorSessionContext(),new PropertyMacroContext(inputNode,templateValue,propertyMacro,context,myGenerator),propertyMacro.getModel());
    String propertyValue=macroValue == null ? null : String.valueOf(macroValue);
    SNodeAccessUtil.setProperty(outputNode,propertyName,propertyValue);
  }
 catch (  Throwable t) {
    myGenerator.getLogger().handleException(t);
    myGenerator.showErrorMessage(inputNode,templateNode,propertyMacro,"cannot evaluate property macro, exception was thrown");
    throw new GenerationFailureException(t);
  }
}
