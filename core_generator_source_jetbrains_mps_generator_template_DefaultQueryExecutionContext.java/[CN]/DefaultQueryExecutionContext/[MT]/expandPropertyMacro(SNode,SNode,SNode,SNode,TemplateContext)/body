{
  String attributeRole=propertyMacro.getRole_();
  String propertyName=AttributesRolesUtil.getPropertyNameFromPropertyAttributeRole(attributeRole);
  SNode function=RuleUtil.getPropertyMacro_ValueFunction(propertyMacro);
  if (function == null) {
    throw new GenerationFailureException("cannot evaluate property macro",inputNode,templateNode,propertyMacro);
  }
  String templateValue=templateNode.getProperty(propertyName);
  String methodName=TemplateFunctionMethodName.propertyMacro_GetPropertyValue(function);
  try {
    Object macroValue=QueryMethodGenerated.invoke(methodName,generator.getGeneratorSessionContext(),new PropertyMacroContext(inputNode,templateValue,propertyMacro,context,generator),propertyMacro.getModel());
    String propertyValue=macroValue == null ? null : String.valueOf(macroValue);
    outputNode.setProperty(propertyName,propertyValue);
  }
 catch (  Throwable t) {
    throw new GenerationFailureException("cannot evaluate property macro",inputNode,templateNode,propertyMacro,t);
  }
}
