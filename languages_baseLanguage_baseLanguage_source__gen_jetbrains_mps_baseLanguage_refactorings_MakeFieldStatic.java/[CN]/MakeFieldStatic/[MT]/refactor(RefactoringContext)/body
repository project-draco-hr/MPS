{
  SNode newDeclaration=_quotation_createNode_so6etp_a0a0a(SNodeOperations.copyNode(SLinkOperations.getTarget(((SNode)refactoringContext.getParameter("declaration")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1178549954367l,1178549979242l,"visibility"))),SNodeOperations.copyNode(SLinkOperations.getTarget(((SNode)refactoringContext.getParameter("declaration")),MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),4972933694980447171l,5680397130376446158l,"type"))),SPropertyOperations.getString(((SNode)refactoringContext.getParameter("declaration")),MetaAdapterFactory.getProperty(new UUID(-3554657779850784990l,-7236703803128771572l),1169194658468l,1169194664001l,"name")));
  SNode declarationClassifier=SNodeOperations.getNodeAncestor(((SNode)refactoringContext.getParameter("declaration")),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier"),false,false);
  ListSequence.fromList(SLinkOperations.getChildren(declarationClassifier,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,5375687026011219971l,"member"))).addElement(newDeclaration);
  for (  SearchResult<SNode> result : ListSequence.fromList(((SearchResults<SNode>)refactoringContext.getParameter("usages")).getSearchResults())) {
    SNode usage=result.getObject();
    SNode replacing;
    if (SNodeOperations.isInstanceOf(usage,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1197029447546l,"jetbrains.mps.baseLanguage.structure.FieldReferenceOperation"))) {
      replacing=SNodeOperations.getParent(usage);
    }
 else {
      replacing=usage;
    }
    SNode newReference;
    if (SNodeOperations.getNodeAncestor(usage,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1107461130800l,"jetbrains.mps.baseLanguage.structure.Classifier"),false,false) != declarationClassifier) {
      newReference=_quotation_createNode_so6etp_a0a0e0d0a(declarationClassifier,newDeclaration);
    }
 else {
      newReference=_quotation_createNode_so6etp_a0a0a4a3a0(newDeclaration);
    }
    SNodeOperations.replaceWithAnother(replacing,newReference);
  }
  SNodeOperations.deleteNode(((SNode)refactoringContext.getParameter("declaration")));
}
