{
  TargetRange tr=new TargetRange();
  final ITarget make=Mockups.target(context,"make");
  Mockups.allowing(context,make);
  tr.addTarget(make);
  final ITarget res=Mockups.target(context,"res");
  final ITarget gen=Mockups.target(context,"gen");
  final ITarget text=Mockups.target(context,"text");
  context.checking(new Expectations(){
{
      atLeast(1).of(text).after();
      will(returnValue(Sequence.fromArray(new ITarget.Name[]{new ITarget.Name("gen")})));
      atLeast(1).of(text).before();
      will(returnValue(Sequence.fromArray(new ITarget.Name[]{new ITarget.Name("make")})));
      atLeast(1).of(gen).after();
      will(returnValue(Sequence.fromArray(new ITarget.Name[]{new ITarget.Name("res")})));
      atLeast(1).of(gen).before();
      will(returnValue(Sequence.fromArray(new ITarget.Name[]{new ITarget.Name("make")})));
    }
  }
);
  Mockups.allowing(context,res);
  Mockups.allowing(context,gen);
  Mockups.allowing(context,text);
  tr.addRelated(ListSequence.fromListAndArray(new ArrayList<ITarget>(),res,gen,text));
  Assert.assertTrue(tr.hasTarget(new ITarget.Name("res")));
  Assert.assertTrue(tr.hasTarget(new ITarget.Name("gen")));
  Assert.assertTrue(tr.hasTarget(new ITarget.Name("text")));
  Utils.assertSameSequence(ListSequence.fromListAndArray(new ArrayList<ITarget>(),res,gen,text,make),tr.targetAndSortedPrecursors(new ITarget.Name("make")));
  Utils.assertSameSequence(ListSequence.fromListAndArray(new ArrayList<ITarget>(),res,gen,text),tr.targetAndSortedPrecursors(new ITarget.Name("text")));
  Utils.assertSameSequence(ListSequence.fromListAndArray(new ArrayList<ITarget>(),gen,text),tr.immediatePrecursors(new ITarget.Name("make")));
}
