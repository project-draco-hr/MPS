{
  SNode whileStatement=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.WhileStatement",null);
  SNodeOperations.replaceWithAnother(node,whileStatement);
  SLinkOperations.setTarget(whileStatement,"body",SLinkOperations.getTarget(node,"body",true),true);
  SNode preStatement=SNodeFactoryOperations.insertNewPrevSiblingChild(whileStatement,"jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement");
  SLinkOperations.setTarget(preStatement,"localVariableDeclaration",SLinkOperations.getTarget(node,"variable",true),true);
  for (  SNode iteration : SLinkOperations.getTargets(node,"iteration",true)) {
    SNode iterStatement=SNodeFactoryOperations.createNewNode("jetbrains.mps.baseLanguage.structure.ExpressionStatement",null);
    SLinkOperations.setTarget(iterStatement,"expression",iteration,true);
    ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(whileStatement,"body",true),"statement",true)).addElement(iterStatement);
  }
  SLinkOperations.setTarget(whileStatement,"condition",SLinkOperations.getTarget(node,"condition",true),true);
}
