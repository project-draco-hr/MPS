{
  List<SNode> allVar=SNodeOperations.getDescendants(thisNode,"jetbrains.mps.samples.lambdaCalculus.structure.Variable",false,new String[]{});
  List<SNode> allRef=SNodeOperations.getDescendants(thisNode,"jetbrains.mps.samples.lambdaCalculus.structure.VariableReference",false,new String[]{});
  List<SNode> result=new ArrayList<SNode>();
  for (  SNode ref : allRef) {
    if (!(ListSequence.<SNode>fromList(allVar).contains(SLinkOperations.getTarget(ref,"variable",false))) && !(ListSequence.<SNode>fromList(result).contains(SLinkOperations.getTarget(ref,"variable",false)))) {
      ListSequence.<SNode>fromList(result).addElement(SLinkOperations.getTarget(ref,"variable",false));
    }
  }
  return result;
}
