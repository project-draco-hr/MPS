{
  List<UsagesTreeNode> mergedChildren=new ArrayList<UsagesTreeNode>();
  Map<Object,UsagesTreeNode> childMap=new HashMap<Object,UsagesTreeNode>();
  for (  UsagesTreeNode child : children) {
    Object additionID=child.getUserObject().getData().getIdObject();
    if (additionID == null) {
      mergedChildren.add(child);
    }
 else {
      UsagesTreeNode addToNode=childMap.get(additionID);
      if (addToNode == null) {
        childMap.put(additionID,child);
      }
 else {
        List<UsagesTreeNode> addition=new ArrayList<UsagesTreeNode>(child.internalGetChildren());
        for (        UsagesTreeNode additionChild : addition) {
          addToNode.add(additionChild);
        }
      }
    }
  }
  mergedChildren.addAll(childMap.values());
  for (  UsagesTreeNode child : mergedChildren) {
    mergeChildren(child.internalGetChildren());
  }
  children.clear();
  children.addAll(mergedChildren);
}
