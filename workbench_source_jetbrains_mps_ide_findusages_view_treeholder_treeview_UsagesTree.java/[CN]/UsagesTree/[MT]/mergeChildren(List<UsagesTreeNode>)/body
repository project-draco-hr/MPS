{
  sortChildrenByObject(children);
  List<UsagesTreeNode> gluedChildren=new ArrayList<UsagesTreeNode>();
  for (  UsagesTreeNode child : children) {
    boolean addAsElements=false;
    if (gluedChildren.isEmpty()) {
      gluedChildren.add(child);
    }
 else {
      UsagesTreeNode currentNode=gluedChildren.get(gluedChildren.size() - 1);
      Object additionID=child.getUserObject().getData().getIdObject();
      Object currentID=currentNode.getUserObject().getData().getIdObject();
      if (additionID == null)       addAsElements=false;
 else       if (additionID instanceof String)       addAsElements=additionID.equals(currentID);
 else       addAsElements=(additionID == currentID);
      if (addAsElements) {
        for (        UsagesTreeNode additionChild : child.internalGetChildren())         currentNode.add(additionChild);
      }
 else {
        gluedChildren.add(child);
      }
    }
  }
  children=gluedChildren;
}
