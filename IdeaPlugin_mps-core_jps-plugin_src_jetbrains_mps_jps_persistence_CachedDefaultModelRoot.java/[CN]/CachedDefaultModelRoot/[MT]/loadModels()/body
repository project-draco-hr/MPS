{
  SModule module=getModule();
  if (module instanceof Generator) {
    module=((Generator)module).getSourceLanguage();
  }
  if (module == null) {
    return super.loadModels();
  }
  CachedModuleData moduleData=myCachedRepository.getModuleData(module.getModuleReference());
  if (moduleData == null) {
    return super.loadModels();
  }
  List<CachedModelData> models=moduleData.getModels(this);
  if (models == null) {
    return super.loadModels();
  }
  List<SModel> result=new ArrayList<SModel>();
  Map<String,String> options=new HashMap<String,String>();
  options.put(ModelFactory.OPTION_MODULEREF,module.getModuleReference().toString());
  IFile moduleSourceDir=((AbstractModule)module).getModuleSourceDir();
  final String moduleHome=moduleSourceDir != null ? moduleSourceDir.getPath().replace("\\","/") : null;
  for (  CachedModelData mdata : models) {
    IFile file=FileSystem.getInstance().getFileByPath(mdata.getFile());
    FileDataSource source=new FileDataSource(file,this);
    Object header=mdata.getHeader();
    if (header instanceof SModelHeader) {
      SModelHeader smheader=(SModelHeader)header;
      result.add(new DefaultSModelDescriptor(source,smheader.getModelReference(),smheader));
    }
 else     if (header instanceof BinaryModelHeader) {
      result.add(new BinarySModelDescriptor(source,((BinaryModelHeader)header).createCopy()));
    }
 else {
      String fileName=file.getName();
      String extension=FileUtil.getExtension(fileName);
      if (extension == null)       continue;
      ModelFactory modelFactory=PersistenceFacade.getInstance().getModelFactory(extension);
      if (modelFactory == null)       continue;
      options.put(ModelFactory.OPTION_RELPATH,moduleHome != null ? makeRelative(moduleHome,file.getPath()) : null);
      SModel model=modelFactory.load(source,Collections.unmodifiableMap(options));
      if (model != null) {
        result.add(model);
      }
    }
  }
  return result;
}
