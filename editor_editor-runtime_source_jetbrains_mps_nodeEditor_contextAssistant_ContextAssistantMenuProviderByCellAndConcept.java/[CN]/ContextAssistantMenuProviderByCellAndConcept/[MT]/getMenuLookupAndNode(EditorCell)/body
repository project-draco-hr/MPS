{
  EditorCell cell=selectedCell;
  while (cell != null) {
    TransformationMenuLookup key=cell.getTransformationMenuLookup();
    if (key != null) {
      return new Pair<TransformationMenuLookup,SNode>(key,cell.getSNode());
    }
    if (cell.isBig()) {
      DefaultMenuLookup menuLookup=new DefaultMenuLookup(LanguageRegistry.getInstance(cell.getContext().getRepository()),cell.getSNode().getConcept());
      Collection<TransformationMenu> defaultMenu=menuLookup.lookup();
      boolean hasDefaultMenu=!defaultMenu.isEmpty();
      if (hasDefaultMenu) {
        return new Pair<TransformationMenuLookup,SNode>(menuLookup,cell.getSNode());
      }
    }
    cell=cell.getParent();
  }
  return null;
}
