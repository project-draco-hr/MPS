{
  BasicBlock exit=controlFlowGraph.getExitBlock();
  Set<BasicBlock> lastBlocks=new HashSet<BasicBlock>();
  Set<BasicBlock> newLastBlocks=new HashSet<BasicBlock>();
  Set<BasicBlock> foundBlocks=new HashSet<BasicBlock>();
  Set<BasicBlock> passed=new HashSet<BasicBlock>();
  lastBlocks.add(exit);
  while (!(lastBlocks.isEmpty())) {
    for (    BasicBlock lastBlock : lastBlocks) {
      passed.add(lastBlock);
      if (lastBlock.isFake()) {
        for (        BasicBlock entry : lastBlock.getEntryStar()) {
          if (!(passed.contains(entry))) {
            newLastBlocks.add(entry);
          }
        }
      }
 else {
        foundBlocks.add(lastBlock);
      }
    }
    lastBlocks=newLastBlocks;
    newLastBlocks=new HashSet<BasicBlock>();
  }
  return foundBlocks;
}
