{
  String models=PathUtil.getParentPath(copyFromUserDirToProject("tests/blProject/models/main.mps","models/main.mps"));
  String srcgen=PathUtil.getParentPath(createFile("source_gen/empty.txt",""));
  JpsModule main=addModule("main",models,srcgen);
  MPSConfigurationBean configuration=createConfiguration(srcgen);
  configuration.setUseTransientOutputFolder(true);
  DefaultModelRoot dmr=createModelRoot(models);
  configuration.setModelRoots(Arrays.<ModelRoot>asList(dmr));
  JpsMPSExtensionService.getInstance().setExtension(main,new JpsMPSModuleExtensionImpl(configuration));
  getBuilderParams().put(MPSMakeConstants.MPS_LANGUAGES.toString(),getLanguageLocations());
  rebuildAll();
  assertOutput(main,fs().dir("main").file("ConcoleUtil.class").file("MainClass.class").file("ProjectKind.class").file("SimpleMarker.class"));
}
