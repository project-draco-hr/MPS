{
  String models=PathUtil.getParentPath(copyFromUserDirToProject("tests/blProject/models/main.mps","models/main.mps"));
  JpsModule main=addModule("main",models);
  MPSConfigurationBean configuration=createConfiguration(models);
  configuration.setGeneratorOutputPath(models);
  DefaultModelRoot dmr=createModelRoot(models);
  configuration.setModelRoots(Arrays.<ModelRoot>asList(dmr));
  JpsMPSExtensionService.getInstance().setExtension(main,new JpsMPSModuleExtensionImpl(configuration));
  buildParams.put(MPSMakeConstants.MPS_LANGUAGES.toString(),getLanguageLocations());
  rebuildAll();
  assertGenerated("mps-make/main/source_gen.caches/main/dependencies","mps-make/main/source_gen.caches/main/generated","models/main/ConcoleUtil.java","models/main/MainClass.java","models/main/ProjectKind.java","models/main/SimpleMarker.java","models/main/trace.info");
}
