{
  String models=PathUtil.getParentPath(copyFromUserDirToProject("tests/blProject/models/main.mps","models/main.mps"));
  String srcgen=PathUtil.getParentPath(createFile("source_gen/empty.txt",""));
  JpsModule main=addModule("main",models,srcgen);
  MPSConfigurationBean configuration=new MPSConfigurationBean();
  configuration.setGeneratorOutputPath(srcgen);
  configuration.setUsedLanguages(new String[]{"f3061a53-9226-4cc5-a443-f952ceaf5816(jetbrains.mps.baseLanguage)","f61473f9-130f-42f6-b98d-6c438812c2f6(jetbrains.mps.baseLanguage.unitTest)"});
  DefaultModelRoot dmr=new DefaultModelRoot();
  dmr.setContentRoot(models);
  dmr.addFile(DefaultModelRoot.SOURCE_ROOTS,models);
  configuration.setModelRoots(Arrays.<ModelRoot>asList(dmr));
  JpsMPSExtensionService.getInstance().setExtension(main,new JpsMPSModuleExtensionImpl(configuration));
  buildParams.put(MPSMakeConstants.MPS_LANGUAGES.toString(),getLanguageLocations());
  rebuildAll();
}
