{
  GraphLayout newLayout=new GraphLayout(((Graph)layout.getGraph()));
  Map<INode,Rectangle> nodeLayout=layout.getNodeLayout();
  for (  INode node : SetSequence.fromSet(MapSequence.fromMap(nodeLayout).keySet())) {
    Rectangle rect=MapSequence.fromMap(nodeLayout).get(node);
    int newX=(int)(rect.x * xScale);
    int newY=(int)(rect.y * yScale);
    int newWidth=(int)(rect.width * xScale);
    int newHeight=(int)(rect.height * yScale);
    newLayout.setLayoutFor(node,new Rectangle(newX,newY,newWidth,newHeight));
  }
  Map<IEdge,List<Point>> edgeLayout=layout.getEdgeLayout();
  for (  IEdge edge : SetSequence.fromSet(MapSequence.fromMap(edgeLayout).keySet())) {
    List<Point> newList=ListSequence.fromList(new ArrayList<Point>());
    for (    Point p : ListSequence.fromList(MapSequence.fromMap(edgeLayout).get(edge))) {
      ListSequence.fromList(newList).addElement(new Point((int)(p.x * xScale),(int)(p.y * yScale)));
    }
    newLayout.setLayoutFor(edge,newList);
  }
  Map<IEdge,Rectangle> labelLayout=layout.getLabelLayout();
  for (  IEdge edge : SetSequence.fromSet(MapSequence.fromMap(labelLayout).keySet())) {
    Rectangle rect=MapSequence.fromMap(labelLayout).get(edge);
    int newX=(int)(rect.x * xScale);
    int newY=(int)(rect.y * yScale);
    int newWidth=(int)(rect.width * xScale);
    int newHeight=(int)(rect.height * yScale);
    newLayout.setLabelLayout(edge,new Rectangle(newX,newY,newWidth,newHeight));
  }
  return newLayout;
}
