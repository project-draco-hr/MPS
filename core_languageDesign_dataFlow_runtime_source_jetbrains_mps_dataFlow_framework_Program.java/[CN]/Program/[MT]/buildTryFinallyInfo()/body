{
  Stack<TryFinallyInfo> stack=new Stack<TryFinallyInfo>();
  for (  Instruction i : myInstructions) {
    if (i instanceof TryInstruction) {
      stack.push(new TryFinallyInfo());
      stack.peek().myTry=(TryInstruction)i;
      myTryFinallyInfo.add(stack.peek());
    }
    if (i instanceof FinallyInstruction) {
      if (stack.isEmpty() || stack.peek().myFinally != null) {
        throw new IllegalStateException("unexpected finally");
      }
      stack.peek().myFinally=(FinallyInstruction)i;
    }
    if (i instanceof EndTryInstruction) {
      if (stack.isEmpty() || stack.peek().myEndTry != null) {
        throw new IllegalStateException("unexpected endtry");
      }
      stack.peek().myEndTry=(EndTryInstruction)i;
      stack.pop();
    }
  }
  if (!stack.isEmpty()) {
    throw new IllegalStateException("incomplete try blocks");
  }
}
