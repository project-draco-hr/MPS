{
  ModuleReference mref=descriptor.getModuleReference();
  MPSModuleRepository repo=MPSModuleRepository.getInstance();
  if (repo.existsModule(mref)) {
    IModule module=repo.getSolution(mref);
    IFile file=FileSystem.getInstance().getFileByPath("NO FILE");
    ModuleHandle handle=new ModuleHandle(file,module.getModuleDescriptor());
    repo.registerModule(handle,moduleOwner);
    return (Solution)module;
  }
  Solution solution=new Solution(){
    public String getGeneratorOutputPath(){
      return null;
    }
    public String getTestsGeneratorOutputPath(){
      return null;
    }
    protected SolutionDescriptor loadDescriptor(){
      return getModuleDescriptor();
    }
  }
;
  solution.setSolutionDescriptor(descriptor,false);
  repo.addModule(solution,moduleOwner);
  return solution;
}
