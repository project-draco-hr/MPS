{
  List<SModuleFacet> facets=new ArrayList<SModuleFacet>();
  facets.add(new JavaModuleFacetImpl(this){
    @Override public Collection<String> getOwnClassPath(){
      if (isPackaged()) {
        return Collections.singletonList(FileSystem.getInstance().getBundleHome(getDescriptorFile()).getPath());
      }
      if (!isCompileInMPS()) {
        IFile classes=ProjectPathUtil.getClassesFolder(getDescriptorFile());
        if (classes != null && classes.exists()) {
          return Collections.singletonList(classes.getPath());
        }
        return Collections.emptyList();
      }
      return super.getOwnClassPath();
    }
    @Override public boolean isCompileInMPS(){
      ModuleDescriptor descriptor=getModuleDescriptor();
      return descriptor != null && descriptor.getCompileInMPS();
    }
  }
);
  facets.add(TestsFacetImpl.fromModule(this));
  return facets;
}
