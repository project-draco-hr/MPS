{
  SolutionDescriptor descriptor=new SolutionDescriptor();
  descriptor.setNamespace(namespace);
  descriptor.setUUID(UUID.randomUUID().toString());
  final IFile modelsDir=descriptorFile.getParent().getDescendant(SOLUTION_MODELS);
  if (modelsDir.exists() && modelsDir.getChildren().size() != 0) {
    throw new IllegalStateException("Trying to create a solution in an existing solution's directory");
  }
 else {
    if (ModelAccess.instance().isInEDT()) {
      modelsDir.mkdirs();
    }
 else {
      ModelAccess.instance().writeFilesInEDT(new Runnable(){
        public void run(){
          modelsDir.mkdirs();
        }
      }
);
    }
  }
  ModelRoot modelRoot=new ModelRoot();
  modelRoot.setPath(modelsDir.getPath());
  descriptor.getModelRoots().add(modelRoot);
  return descriptor;
}
