{
  if (mySearchPanel != null && mySearchPanel.isVisible() && mySearchPanel.isTextFieldFocused()) {
    return null;
  }
  if (isDisposed()) {
    return null;
  }
  if (dataId.equals(MPSCommonDataKeys.NODE.getName()))   return getSelectedNode();
  if (dataId.equals(MPSCommonDataKeys.NODES.getName()))   return getSelectedNodes();
  if (dataId.equals(MPSEditorDataKeys.CONTEXT_MODEL.getName())) {
    return runRead(new Computable(){
      @Override public Object compute(){
        SNode node=getRootCell().getSNode();
        if (node == null)         return null;
        SModel model=node.getModel();
        if (model == null)         return null;
        return model;
      }
    }
);
  }
  if (dataId.equals(MPSEditorDataKeys.CONTEXT_MODULE.getName())) {
    return runRead(new Computable(){
      @Override public Object compute(){
        SNode node=getRootCell().getSNode();
        if (node == null)         return null;
        SModel model=node.getModel();
        if (model == null)         return null;
        return model.getModule();
      }
    }
);
  }
  if (dataId.equals(MPSEditorDataKeys.OPERATION_CONTEXT.getName()))   return getOperationContext();
  if (dataId.equals(MPSEditorDataKeys.EDITOR_CONTEXT.getName()))   return createEditorContextForActions();
  if (dataId.equals(MPSEditorDataKeys.EDITOR_CELL.getName()))   return getSelectedCell();
  if (dataId.equals(MPSEditorDataKeys.EDITOR_COMPONENT.getName()))   return this;
  if (dataId.equals(MPSCommonDataKeys.PLACE.getName()))   return ActionPlace.EDITOR;
  if (dataId.equals(PlatformDataKeys.CUT_PROVIDER.getName()))   return new MyCutProvider();
  if (dataId.equals(PlatformDataKeys.COPY_PROVIDER.getName()))   return new MyCopyProvider();
  if (dataId.equals(PlatformDataKeys.PASTE_PROVIDER.getName()) && (isFocusOwner() || mySearchPanel == null || !mySearchPanel.isVisible()))   return new MyPasteProvider();
  if (dataId.equals(PlatformDataKeys.VIRTUAL_FILE_ARRAY.getName())) {
    return getVirtualFile() != null ? new VirtualFile[]{getVirtualFile()} : new VirtualFile[0];
  }
  if (dataId.equals(SelectInContext.DATA_KEY.getName())) {
    ProjectViewSelectInProvider selectInHelper=ApplicationManager.getApplication() == null ? null : ApplicationManager.getApplication().getComponent(ProjectViewSelectInProvider.class);
    if (selectInHelper == null)     return null;
    return selectInHelper.getContext(getCurrentProject(),myNodePointer);
  }
  return null;
}
