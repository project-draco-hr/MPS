{
  if (myDisposed)   throw new IllegalStateException(myDisposedTrace);
  fireEditorWillBeDisposed();
  myDisposed=true;
  myDisposedTrace=new Throwable("Editor was disposed by: ");
  if (!MPSCore.getInstance().isTestMode()) {
    hideMessageToolTip();
  }
  releaseTypeCheckingContext();
  myHighlightManager.dispose();
  removeOurListeners();
  SModelRepository.getInstance().removeModelRepositoryListener(mySimpleModelListener);
  detachListeners();
  KeyboardFocusManager.getCurrentKeyboardFocusManager().removePropertyChangeListener("focusOwner",myFocusListener);
  clearCaches();
  myEventsCollector.dispose();
  myLeftHighlighter.dispose();
  myMessagesGutter.dispose();
  myEditorContext=null;
  if (myNodeSubstituteChooser != null) {
    myNodeSubstituteChooser.dispose();
  }
  if (myRootCell != null) {
    ((EditorCell_Basic)myRootCell).onRemove();
    myRootCell=null;
  }
  mySelectionManager.dispose();
  myLeftMarginPressListeners.clear();
}
