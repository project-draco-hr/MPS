{
  if (myDisposed) {
    throw new IllegalStateException(myDisposedTrace);
  }
  fireEditorWillBeDisposed();
  myDisposed=true;
  myDisposedTrace=new Throwable("Editor was disposed by: ");
  if (!RuntimeFlags.isTestMode()) {
    hideMessageToolTip();
  }
  releaseTypeCheckingContext();
  myHighlightManager.dispose();
  detachListeners();
  myUpdater.dispose();
  if (hasUI()) {
    myLeftHighlighter.dispose();
    myMessagesGutter.dispose();
  }
  if (myNodeSubstituteChooser != null) {
    myNodeSubstituteChooser.dispose();
  }
  if (myRootCell != null) {
    ((EditorCell_Basic)myRootCell).onRemove();
    myRootCell=null;
  }
  mySelectionManager.dispose();
  myLeftMarginPressListeners.clear();
  if (CaretBlinker.getInstance() != null) {
    CaretBlinker.getInstance().unregisterEditor(this);
  }
  myFocusTracker.dispose();
}
