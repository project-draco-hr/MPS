{
  boolean cellSwapInProgress=myCellSwapInProgress;
  try {
    myCellSwapInProgress=true;
    Object memento=getEditorContext().createMemento();
    if (getComponents().length > 0) {
      removeAll();
    }
    ((EditorCell_Basic)myRootCell).onRemove();
    myRootCell=(EditorCell)rootCell;
    ((EditorCell_Basic)myRootCell).onAdd();
    for (    EditorCell_WithComponent component : getCellTracker().getComponentCells()) {
      add(component.getComponent());
    }
    for (    AdditionalPainter painter : getAdditionalPainters()) {
      painter.onUpdate(this);
    }
    getEditorContext().setMemento(memento);
  }
  finally {
    myCellSwapInProgress=cellSwapInProgress;
  }
  revalidate();
}
