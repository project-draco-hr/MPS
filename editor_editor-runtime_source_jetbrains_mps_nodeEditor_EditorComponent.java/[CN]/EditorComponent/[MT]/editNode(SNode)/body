{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      IOperationContext operationContext=getOperationContext();
      disposeTypeCheckingContext();
      clearModelDisposedTrace();
      myNode=node;
      if (myNode != null) {
        myNodePointer=new jetbrains.mps.smodel.SNodePointer(myNode);
        myVirtualFile=!myNoVirtualFile ? MPSNodesVirtualFileSystem.getInstance().getFileFor(node) : null;
      }
 else {
        myNodePointer=null;
        myVirtualFile=null;
      }
      SModel model=node == null ? null : node.getModel();
      setEditorContext(new EditorContext(EditorComponent.this,model,operationContext));
      if (ModelAccess.instance().isInEDT()) {
        rebuildEditorContent();
      }
 else {
        ModelAccess.instance().runReadInEDT(new Runnable(){
          @Override public void run(){
            rebuildEditorContent();
          }
        }
);
      }
      getTypeCheckingContext();
    }
  }
);
}
