{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      IOperationContext operationContext=getOperationContext();
      disposeTypeCheckingContext();
      clearModelDisposedTrace();
      myNode=node;
      if (myNode != null && jetbrains.mps.util.SNodeOperations.isRegistered(myNode)) {
        myNodePointer=myNode != null ? new SNodePointer(myNode) : null;
        myVirtualFile=myNode != null && !myNoVirtualFile ? MPSNodesVirtualFileSystem.getInstance().getFileFor(node) : null;
      }
 else {
        myNodePointer=null;
        myVirtualFile=null;
      }
      SModel model=node == null ? null : node.getModel();
      setEditorContext(new EditorContext(EditorComponent.this,model,operationContext));
      rebuildEditorContent();
      getTypeCheckingContext();
    }
  }
);
}
