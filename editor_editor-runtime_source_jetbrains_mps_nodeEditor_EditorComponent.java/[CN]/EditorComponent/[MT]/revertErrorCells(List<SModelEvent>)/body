{
  final boolean[] wereReverted=new boolean[1];
  for (  SModelEvent e : events) {
    e.accept(new SModelEventVisitorAdapter(){
      @Override public void visitPropertyEvent(      SModelPropertyEvent event){
        EditorCell cell=findNodeCell(event.getNode());
        if (cell != null && isErrorWithinBigCell(cell)) {
          synchronizeWithModelWithinBigCell(cell);
          wereReverted[0]=true;
        }
      }
      @Override public void visitReferenceEvent(      SModelReferenceEvent event){
        EditorCell cell=findNodeCell(event.getReference().getSourceNode());
        if (cell != null && isErrorWithinBigCell(cell)) {
          synchronizeWithModelWithinBigCell(cell);
          wereReverted[0]=true;
        }
      }
      private boolean isErrorWithinBigCell(      jetbrains.mps.openapi.editor.cells.EditorCell cell){
        if (cell.isErrorState())         return true;
        if (cell instanceof jetbrains.mps.openapi.editor.cells.EditorCell_Collection) {
          jetbrains.mps.openapi.editor.cells.EditorCell_Collection collection=(jetbrains.mps.openapi.editor.cells.EditorCell_Collection)cell;
          for (          jetbrains.mps.openapi.editor.cells.EditorCell child : collection) {
            if (child.isBig())             continue;
            if (isErrorWithinBigCell(child))             return true;
          }
        }
        return false;
      }
    }
);
  }
}
