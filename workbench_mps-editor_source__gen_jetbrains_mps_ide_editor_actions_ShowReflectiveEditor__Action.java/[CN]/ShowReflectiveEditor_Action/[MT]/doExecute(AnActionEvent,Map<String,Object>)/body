{
  EditorContext editorContext=((EditorComponent)MapSequence.fromMap(_params).get("editorComponent")).getEditorContext();
  EditorCell selectedCell=editorContext.getSelectedCell();
  if (selectedCell == null) {
    return;
  }
  int x=selectedCell.getX();
  int y=selectedCell.getY();
  int caretX=selectedCell.getCaretX();
  ((EditorComponent)MapSequence.fromMap(_params).get("editorComponent")).getUpdater().addExplicitEditorHintsForNode(((SNode)MapSequence.fromMap(_params).get("node")).getReference(),"jetbrains.mps.lang.core.editor.BaseEditorContextHints.reflectiveEditor");
  ((EditorComponent)MapSequence.fromMap(_params).get("editorComponent")).rebuildEditorContent();
  editorContext.flushEvents();
  EditorCell targetCell=((EditorComponent)MapSequence.fromMap(_params).get("editorComponent")).findCellWeak(x,y);
  if (targetCell != null) {
    targetCell.setCaretX(caretX);
    editorContext.getSelectionManager().setSelection(targetCell);
  }
 else {
    SelectionUtil.selectCell(editorContext,((SNode)((SNode)MapSequence.fromMap(_params).get("node"))),SelectionManager.FIRST_EDITABLE_CELL);
  }
}
