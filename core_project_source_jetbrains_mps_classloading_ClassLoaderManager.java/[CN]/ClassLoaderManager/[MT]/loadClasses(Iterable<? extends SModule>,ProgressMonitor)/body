{
  Set<SModule> modulesToLoad=new HashSet<SModule>();
  for (  SModule module : modules) {
    if (ModuleClassLoaderSupport.canCreate(module)) {
      if (getClassLoader(module) != null) {
        LOG.warning("ModuleClassLoader should be unloaded before load for module " + module,new Throwable());
      }
      modulesToLoad.add(module);
    }
  }
  if (modulesToLoad.isEmpty())   return modulesToLoad;
  for (  SModule module : modulesToLoad) {
    createClassLoader(module);
  }
  monitor.start("Load classes...",1);
  try {
    broadCastLoad(modulesToLoad);
    monitor.advance(1);
  }
  finally {
    monitor.done();
  }
  return modulesToLoad;
}
