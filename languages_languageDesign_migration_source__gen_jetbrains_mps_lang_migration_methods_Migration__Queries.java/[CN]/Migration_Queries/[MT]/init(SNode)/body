{
  SModule module=SNodeOperations.getModel(c).getModule();
  if (module instanceof Language) {
    int currentVersion=((Language)module).getLanguageVersion();
    SPropertyOperations.set(c,"fromVersion","" + (currentVersion));
    ((Language)module).getModuleDescriptor().setVersion(currentVersion + 1);
    if (((Language)module).getModuleDescriptor().getLanguageVersions().containsKey(IdHelper.getLanguageId(module.getModuleId()))) {
      ((Language)module).getModuleDescriptor().getLanguageVersions().put(IdHelper.getLanguageId(module.getModuleId()),currentVersion + 1);
    }
    ((Language)module).setChanged();
  }
  SLanguageAdapter lang=new SLanguageAdapter(IdHelper.getLanguageId((Language)module));
  SModelInternal m=((SModelInternal)(SModel)SNodeOperations.getModel(c));
  AbstractModule mod=((AbstractModule)module);
  m.addLanguage(ModuleRepositoryFacade.getInstance().getModule(PersistenceFacade.getInstance().createModuleReference("28f9e497-3b42-4291-aeba-0a1039153ab1(jetbrains.mps.lang.plugin)"),Language.class));
  mod.addUsedLanguage(ModuleRepositoryFacade.getInstance().getModule(PersistenceFacade.getInstance().createModuleReference("28f9e497-3b42-4291-aeba-0a1039153ab1(jetbrains.mps.lang.plugin)"),Language.class).getModuleReference());
  m.addLanguage(ModuleRepositoryFacade.getInstance().getModule(PersistenceFacade.getInstance().createModuleReference("d4615e3b-d671-4ba9-af01-2b78369b0ba7(jetbrains.mps.lang.pattern)"),Language.class));
  mod.addUsedLanguage(ModuleRepositoryFacade.getInstance().getModule(PersistenceFacade.getInstance().createModuleReference("d4615e3b-d671-4ba9-af01-2b78369b0ba7(jetbrains.mps.lang.pattern)"),Language.class).getModuleReference());
  m.addModelImport(SModelRepository.getInstance().getModelDescriptor("org.jetbrains.mps.openapi.language@java_stub").getReference(),true);
  m.addModelImport(SModelRepository.getInstance().getModelDescriptor("org.jetbrains.mps.openapi.module@java_stub").getReference(),true);
  mod.addDependency(ModuleRepositoryFacade.getInstance().getModule(PersistenceFacade.getInstance().createModuleReference("8865b7a8-5271-43d3-884c-6fd1d9cfdd34(MPS.OpenAPI)")).getModuleReference(),false);
  m.addModelImport(SModelRepository.getInstance().getModelDescriptor("jetbrains.mps.smodel.adapter").getReference(),true);
  mod.addDependency(ModuleRepositoryFacade.getInstance().getModule(PersistenceFacade.getInstance().createModuleReference("2d3c70e9-aab2-4870-8d8d-6036800e4103(jetbrains.mps.kernel)")).getModuleReference(),false);
}
