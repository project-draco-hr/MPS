{
  Iterable<SNodeId> commonRootIds=generateRootChanges();
  for (  SNodeId rootId : Sequence.fromIterable(commonRootIds)) {
    buildNodeChanges(myOldModel.getNodeById(rootId));
  }
  buildMetadataChanges();
  if (withOpposite) {
    myChangeSet.buildOppositeChangeSet();
  }
}
