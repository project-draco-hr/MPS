{
  IFile baseDirFile=FileSystem.getFile(solutionBaseDir);
  if (!(baseDirFile.exists())) {
    baseDirFile.mkdirs();
  }
  String solutionFilePath=solutionBaseDir + File.separator + solutionName+ MPSExtentions.DOT_SOLUTION;
  final IFile solutionFile=FileSystem.getFile(solutionFilePath);
  final Solution solution;
  if (solutionFile.exists()) {
    IModule module=ModelAccess.instance().runReadAction(new Computable<IModule>(){
      public IModule compute(){
        return MPSModuleRepository.getInstance().getModuleByFile(solutionFile.toFile());
      }
    }
);
    if (module instanceof Solution) {
      solution=(Solution)module;
    }
 else     if (module == null) {
      solution=BuildGeneratorUtil.createSolutionFormFile(mpsProject,solutionFile);
    }
 else {
      return null;
    }
  }
 else {
    solution=BuildGeneratorUtil.createSolutionFormFile(mpsProject,solutionFile);
  }
  final ModuleReference packagingLanguageRef=BuildGeneratorUtil.getPackagingLanguageReference();
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      solution.addUsedLangauge(packagingLanguageRef);
    }
  }
);
  return solution;
}
