{
  SolutionDescriptor descriptor=new SolutionDescriptor();
  descriptor.setCompileInMPS(true);
  String fileName=solutionDescriptorFile.getName();
  descriptor.setNamespace(fileName.substring(0,fileName.length() - 4));
  ModelRoot mr=new ModelRoot();
  mr.setPrefix("");
  mr.setPath(solutionDescriptorFile.getParent().getPath());
  descriptor.getModelRoots().add(mr);
  SolutionDescriptorPersistence.saveSolutionDescriptor(solutionDescriptorFile,descriptor);
  return ModelAccess.instance().runWriteAction(new Computable<Solution>(){
    public Solution compute(){
      return MPSModuleRepository.getInstance().registerModule(solutionDescriptorFile,mpsProject,Solution.class);
    }
  }
);
}
