{
  SModelFqName newModelFQName=SModelFqName.fromString(modelName);
  List<SModelDescriptor> ownModelDescriptors=solution.getOwnModelDescriptors();
  SModelDescriptor modelDescriptor=null;
  for (  SModelDescriptor descriptor : ListSequence.fromList(ownModelDescriptors)) {
    if (descriptor.getSModelFqName().equals(newModelFQName)) {
      modelDescriptor=descriptor;
      break;
    }
  }
  if (modelDescriptor == null) {
    modelDescriptor=solution.createModel(newModelFQName,solution.getSModelRoots().get(0));
  }
  final SModelDescriptor descriptor=modelDescriptor;
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      ModelAccess.instance().runWriteActionInCommand(new Runnable(){
        public void run(){
          descriptor.getSModel().addLanguage(getPackagingLanguageReference());
        }
      }
);
    }
  }
,ModalityState.NON_MODAL);
  return modelDescriptor;
}
