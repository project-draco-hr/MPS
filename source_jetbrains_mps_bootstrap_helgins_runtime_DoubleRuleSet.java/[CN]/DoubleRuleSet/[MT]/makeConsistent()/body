{
  for (  Pair<AbstractConceptDeclaration,AbstractConceptDeclaration> pair : myRules.keySet()) {
    if (pair == null) {
      continue;
    }
    Set<T> rules=myRules.get(pair);
    if (rules == null)     continue;
    if (!(pair.o1 instanceof ConceptDeclaration))     continue;
    if (!(pair.o2 instanceof ConceptDeclaration))     continue;
    ConceptDeclaration parent1=((ConceptDeclaration)pair.o1).getExtends();
    ConceptDeclaration parent2=((ConceptDeclaration)pair.o2).getExtends();
    while (parent1 != null) {
      while (parent2 != null) {
        Set<T> parentRules=myRules.get(new Pair<AbstractConceptDeclaration,AbstractConceptDeclaration>(parent1,parent2));
        if (parentRules != null) {
          rules.addAll(parentRules);
        }
        parent2=parent2.getExtends();
      }
      parent1=parent1.getExtends();
    }
  }
}
