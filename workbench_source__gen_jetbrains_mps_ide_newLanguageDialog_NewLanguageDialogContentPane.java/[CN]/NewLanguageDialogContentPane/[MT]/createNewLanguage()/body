{
  String descriptorFileName=NameUtil.shortNameFromLongName(myThis.getLanguageNamespace());
  File descriptorFile=new File(myThis.getLanguagePath(),descriptorFileName + MPSExtentions.DOT_LANGUAGE);
  File dir=descriptorFile.getParentFile();
  if (!(dir.exists())) {
    dir.mkdirs();
  }
  Language language=Language.createLanguage(myThis.getLanguageNamespace(),new FileSystemFile(descriptorFile),myThis.getProject());
  SNode languageDescriptor=(SNode)language.getLanguageDescriptor().getNode();
  SNode devkitRef=SConceptOperations.createNewNode("jetbrains.mps.projectLanguage.structure.DevKitReference",null);
  SPropertyOperations.set(devkitRef,"name","" + LanguageDesign_DevKit.MODULE_REFERENCE.toString());
  SLinkOperations.addChild(languageDescriptor,"usedDevKit",devkitRef);
  SPropertyOperations.set(languageDescriptor,"compileInMPS","" + (myThis.getCompileInMPS()));
  LanguageAspect.STRUCTURE.createNew(language);
  LanguageAspect.EDITOR.createNew(language);
  LanguageAspect.CONSTRAINTS.createNew(language);
  LanguageAspect.TYPESYSTEM.createNew(language);
  language.setLanguageDescriptor((LanguageDescriptor)((LanguageDescriptor)SNodeOperations.getAdapter(languageDescriptor)));
  myThis.getProject().addProjectLanguage(language);
  language.save();
  myThis.setResult(language);
}
