{
  super(project);
  myIndex=index;
  final MPSUnindexedFilesUpdater updater=new MPSUnindexedFilesUpdater(myIndex);
  final StartupManagerEx startupManager=(StartupManagerEx)StartupManager.getInstance(project);
  if (startupManager != null) {
    startupManager.registerPreStartupActivity(new Runnable(){
      public void run(){
        updateRoots();
        startupManager.getFileSystemSynchronizer().registerCacheUpdater(updater);
        myIndex.registerIndexableSet(MPSFileBasedIndexProjectHandler.this);
      }
    }
);
  }
}
