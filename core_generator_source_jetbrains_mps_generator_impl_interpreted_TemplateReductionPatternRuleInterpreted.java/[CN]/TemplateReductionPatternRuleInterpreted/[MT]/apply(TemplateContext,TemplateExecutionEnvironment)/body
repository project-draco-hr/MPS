{
  final SNode inputNode=templateContext.getInput();
  if (myRuleConsequence == null) {
    throw new TemplateProcessingFailureException(myRuleNode,"no rule consequence",GeneratorUtil.describe(inputNode,"input"));
  }
  RuleConsequenceProcessor rcp=new RuleConsequenceProcessor(environment);
  templateContext=templateContext.subContext(myRuleMappingName);
  rcp.prepare(myRuleConsequence,templateContext);
  return rcp.processRuleConsequence();
}
