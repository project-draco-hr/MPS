{
  final SNode inputNode=templateContext.getInput();
  String ruleMappingName=RuleUtil.getPatternReductionRuleLabel(ruleNode);
  SNode ruleConsequence=RuleUtil.getPatternReductionRuleConsequence(ruleNode);
  if (ruleConsequence == null) {
    environment.getGenerator().showErrorMessage(inputNode,null,ruleNode,"error processing reduction rule: no rule consequence");
    return null;
  }
  RuleConsequenceProcessor rcp=new RuleConsequenceProcessor(environment);
  templateContext=templateContext.subContext(pattern).subContext(ruleMappingName);
  rcp.prepare(ruleConsequence,templateContext);
  return rcp.processRuleConsequence();
}
