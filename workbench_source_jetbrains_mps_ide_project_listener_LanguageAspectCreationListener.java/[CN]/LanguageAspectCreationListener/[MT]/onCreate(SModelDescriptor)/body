{
  final EditableSModelDescriptor emd=((EditableSModelDescriptor)model);
  Language language=(Language)model.getModule();
  LanguageAspect aspect=language.getAspectForModel(model);
  for (  ModuleReference impLang : aspect.getAllLanguagesToImport(language)) {
    model.getSModel().addLanguage(impLang);
  }
  if (ThreadUtils.isEventDispatchThread()) {
    emd.save();
  }
 else {
    ModelAccess.instance().runWriteInEDT(new Runnable(){
      public void run(){
        emd.save();
      }
    }
);
  }
  language.setLanguageDescriptor(language.getModuleDescriptor(),false);
  language.save();
}
