{
  subType=myState.getRepresentative(subType);
  superType=myState.getRepresentative(superType);
  if (subType == null || superType == null || subType == superType) {
    return;
  }
  if (!myState.isConcrete(subType) && solveOnlyConcrete || TypesUtil.isVariable(superType)) {
    addSubTyping(subType,superType,isWeak,check,info);
    return;
  }
  TypeChecker typeChecker=myState.getTypeCheckingContext().getTypeChecker();
  for (  Pair<InequationReplacementRule_Runtime,IsApplicable2Status> inequalityReplacementRule : typeChecker.getRulesManager().getReplacementRules(subType,superType)) {
    InequationReplacementRule_Runtime rule=inequalityReplacementRule.o1;
    IsApplicable2Status status=inequalityReplacementRule.o2;
    myState.executeOperation(new AddRemarkOperation(subType + " is subtype of " + superType+ " by replacement rule"));
    ((AbstractInequationReplacementRule_Runtime)rule).processInequation(subType,superType,info,myState.getTypeCheckingContext(),status);
    return;
  }
  subType=myState.getEquations().expandNode(subType);
  superType=myState.getEquations().expandNode(superType);
  final SubTyping subTyping=myState.getTypeCheckingContext().getSubTyping();
  final SNode finalSubType=subType;
  final SNode finalSuperType=superType;
  myState.executeOperation(new jetbrains.mps.newTypesystem.operation.AddRemarkOperation("checking whether " + subType + " is subtype of "+ superType,new Runnable(){
    @Override public void run(){
      if (!subTyping.isSubType(finalSubType,finalSuperType,info,isWeak,false)) {
        myState.getNodeMaps().reportSubTypeError(finalSubType,finalSuperType,info,isWeak);
      }
    }
  }
));
}
