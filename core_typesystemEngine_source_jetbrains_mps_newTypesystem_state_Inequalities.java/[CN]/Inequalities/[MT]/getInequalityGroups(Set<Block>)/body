{
  Map<SNode,Set<SNode>> components=new HashMap<SNode,Set<SNode>>(1);
  Map<Set<SNode>,Set<InequalityBlock>> groupsToInequalities=new HashMap<Set<SNode>,Set<InequalityBlock>>();
  Set<SNode> emptySet=new HashSet<SNode>(1);
  for (  Block block : inequalities) {
    InequalityBlock inequality=(InequalityBlock)block;
    Collection<SNode> variables=TypesUtil.getVariables(myState.expand(inequality.getRightNode()));
    variables.addAll(TypesUtil.getVariables(myState.expand(inequality.getLeftNode())));
    if (variables.size() == 0) {
      Set<InequalityBlock> emptyBlocks=groupsToInequalities.get(emptySet);
      if (emptyBlocks == null) {
        emptyBlocks=new HashSet<InequalityBlock>(1);
        groupsToInequalities.put(emptySet,emptyBlocks);
      }
      emptyBlocks.add(inequality);
      continue;
    }
    Set<SNode> currentResult=new HashSet<SNode>();
    Set<InequalityBlock> currentInequalities=new HashSet<InequalityBlock>();
    currentInequalities.add(inequality);
    for (    SNode var : variables) {
      var=myState.getRepresentative(var);
      currentResult.add(var);
      Set<SNode> varGroup=components.remove(var);
      if (varGroup != null) {
        currentResult.addAll(varGroup);
        for (        SNode var2 : varGroup) {
          if (!variables.contains(var2)) {
            components.put(var2,currentResult);
          }
        }
      }
      components.put(var,currentResult);
      Set<InequalityBlock> remove=groupsToInequalities.remove(varGroup);
      if (remove != null) {
        currentInequalities.addAll(remove);
      }
    }
    groupsToInequalities.put(currentResult,currentInequalities);
  }
  return groupsToInequalities;
}
