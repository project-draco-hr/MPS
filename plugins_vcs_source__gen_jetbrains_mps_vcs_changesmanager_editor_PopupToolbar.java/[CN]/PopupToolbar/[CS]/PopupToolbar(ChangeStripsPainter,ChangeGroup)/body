{
  myChangeGroup=group;
  myPainter=painter;
  final ActionToolbar toolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,((BaseGroup)ActionManager.getInstance().getAction("jetbrains.mps.vcs.plugin.ChangesStrip_ActionGroup")),true);
  toolbar.setTargetComponent(myPainter.getEditorComponent());
  add(toolbar.getComponent());
  setBorder(BorderFactory.createLineBorder(Color.BLACK));
  addPopupMenuListener(new PopupMenuListener(){
    public void popupMenuWillBecomeVisible(    PopupMenuEvent event){
      myPainter.setGroupHighlighted(myChangeGroup,true);
      toolbar.updateActionsImmediately();
    }
    public void popupMenuWillBecomeInvisible(    PopupMenuEvent event){
      myPainter.setGroupHighlighted(myChangeGroup,false);
      myPainter.popupClosed();
    }
    public void popupMenuCanceled(    PopupMenuEvent event){
    }
  }
);
}
