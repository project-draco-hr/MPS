{
  if (generator.getModelRootsCount() == 0)   return null;
  Set<ModelRoot> roots=new HashSet<ModelRoot>();
  Iterator<ModelRoot> iterator=generator.modelRoots();
  while (iterator.hasNext()) {
    ModelRoot modelRoot=iterator.next();
    roots.add(modelRoot);
  }
  Set<SModelDescriptor> models=new HashSet<SModelDescriptor>();
  SModelRepository.getInstance().readModelDescriptors(roots,models,myProject);
  if (generator.getTemplatesModel() == null) {
    return null;
  }
  for (  SModelDescriptor model : models) {
    if (model.getFQName().equals(generator.getTemplatesModel().getName()))     return model;
  }
  System.err.println("Couldn't find templates model " + generator.getTemplatesModel().getName());
  System.err.println("specified roots:");
  for (  ModelRoot root : roots) {
    System.err.println("-- " + root.getPath());
  }
  System.err.println("----------------");
  return null;
}
