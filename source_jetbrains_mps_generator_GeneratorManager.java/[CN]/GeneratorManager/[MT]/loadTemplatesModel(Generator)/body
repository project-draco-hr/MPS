{
  if (generator.getTemplatesModel() == null) {
    return null;
  }
  if (generator.getModelRoots().size() == 0) {
    LOG.error("Couldn't find templates model " + generator.getTemplatesModel() + " model roots aren't specified");
    getMessageView().add(new Message(MessageKind.WARNING,"Couldn't find templates model " + generator.getTemplatesModel() + " model roots aren't specified"));
    return null;
  }
  Set<ModelRoot> roots=new HashSet<ModelRoot>();
  Iterator<ModelRoot> iterator=generator.getModelRoots().iterator();
  while (iterator.hasNext()) {
    ModelRoot modelRoot=iterator.next();
    roots.add(modelRoot);
  }
  Set<SModelDescriptor> models=new HashSet<SModelDescriptor>();
  SModelRepository.getInstance().readModelDescriptors(roots,models,myProject);
  for (  SModelDescriptor model : models) {
    if (model.getFQName().equals(generator.getTemplatesModel()))     return model;
  }
  getMessageView().add(new Message(MessageKind.WARNING,"Couldn't find templates model " + generator.getTemplatesModel()));
  return null;
}
