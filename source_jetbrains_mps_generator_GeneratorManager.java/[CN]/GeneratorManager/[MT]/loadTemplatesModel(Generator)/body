{
  if (generator.getModelRoot() == null)   throw new RuntimeException("Model root is null!");
  Set<ModelRoot> roots=new HashSet<ModelRoot>();
  roots.add(generator.getModelRoot());
  Set<SModelDescriptor> models=new HashSet<SModelDescriptor>();
  SModelRepository.getInstance().readModelDescriptors(roots,models,myProject);
  if (generator.getTemplatesModel() == null) {
    throw new RuntimeException("Templates model is null!");
  }
  for (  SModelDescriptor model : models) {
    if (model.getFQName().equals(generator.getTemplatesModel().getName()))     return model;
  }
  throw new RuntimeException("I can't find templates model " + generator.getTemplatesModel().getName());
}
