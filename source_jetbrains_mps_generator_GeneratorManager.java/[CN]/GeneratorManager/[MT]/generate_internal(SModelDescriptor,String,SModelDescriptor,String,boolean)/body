{
  System.out.println("Generating sourceModel " + sourceModel.getFQName());
  try {
    Class cls=Class.forName(generatorClassFQName);
    IModelGenerator generator=(IModelGenerator)cls.getConstructor(SModel.class,MPSProject.class).newInstance(sourceModel.getSModel(),myProject);
    SModel targetModel=JavaGenUtil.createTargetJavaModel(sourceModel.getSModel(),JavaNameUtil.packageNameForModelFqName(sourceModel.getFQName()),myProject);
    if (generator instanceof ITemplateGenerator) {
      ((ITemplateGenerator)generator).generate(targetModel,templatesModel.getSModel());
    }
 else {
      generator.generate(targetModel);
    }
    System.out.println("Generation done.");
    if (generateText) {
      System.out.println("Generating text...");
      generateText(targetModel);
    }
 else {
      System.out.println("Generation source...");
      generateSource(outputPath,sourceModel.getSModel(),targetModel);
    }
    JavaClassMaps.clearMaps();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
