{
  final AdaptiveProgressMonitor progress=new AdaptiveProgressMonitor(invocationContext.getComponent(IDEProjectFrame.class),closeOnExit);
  final DefaultMessageHandler messages=new DefaultMessageHandler(invocationContext.getProject());
  final boolean saveTransientModels;
  if (isSaveTransientModels()) {
    Object[] options={"Yes","Not this time","No, and cancel saving"};
    int option=JOptionPane.showOptionDialog(invocationContext.getMainFrame(),"Would you like to save transient models?","",JOptionPane.YES_NO_CANCEL_OPTION,JOptionPane.QUESTION_MESSAGE,null,options,options[0]);
    if (option == JOptionPane.YES_OPTION) {
      saveTransientModels=true;
    }
 else {
      saveTransientModels=false;
      if (option == JOptionPane.CANCEL_OPTION) {
        setSaveTransientModels(false);
      }
    }
  }
 else {
    saveTransientModels=false;
  }
  Thread generationThread=new Thread("Generation"){
    public void run(){
      generateModels(sourceModels,targetLanguage,invocationContext,generationType,script,progress,messages,saveTransientModels);
      progress.finishAnyway();
    }
  }
;
  generationThread.setPriority(Thread.MIN_PRIORITY);
  generationThread.start();
  return generationThread;
}
