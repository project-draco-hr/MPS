{
  if (outputRootPath == null)   throw new RuntimeException("Unspecified output path. Please specify one.");
  File outputRootDirectory=new File(outputRootPath);
  for (  SNode outputNode : outputModel.getRoots()) {
    SNode sourceNode=null;
    if (traceMap != null) {
      sourceNode=traceMap.getSourceForOutputNode(outputNode);
    }
    IFileGenerator fileGenerator=chooseFileGenerator(outputNode,sourceNode);
    if (fileGenerator == null) {
      LOG.error("Couldn't find file generator for output node: " + outputNode.getDebugText());
      continue;
    }
    try {
      String content=generateText(outputNode);
      fileGenerator.generateFile(outputNode,sourceNode,sourceModel,content,outputRootDirectory);
    }
 catch (    IOException e) {
      LOG.error("Error while file generation",e);
    }
 finally {
      TextGenManager.reset();
    }
  }
}
