{
  MappingConfig_ExternalRef result=new MappingConfig_ExternalRef();
  MappingSelectTree.GenRefNodeData rootData=(MappingSelectTree.GenRefNodeData)gRoot.getUserObject();
  result.setGenerator(rootData.getObject());
  if (rootData.isSelected()) {
    result.setMappingConfig(new MappingConfig_RefAllLocal());
  }
 else {
    List<DefaultMutableTreeNode> chChildren=this.getChildrenWithChecks(gRoot);
    if (chChildren.size() == 1) {
      result.setMappingConfig(this.getModelMappingRef(chChildren.get(0)));
    }
 else {
      MappingConfig_RefSet modelsResult=new MappingConfig_RefSet();
      for (      DefaultMutableTreeNode child : chChildren) {
        modelsResult.getMappingConfigs().add(this.getModelMappingRef(child));
      }
      result.setMappingConfig(modelsResult);
    }
  }
  return result;
}
