{
  return NodeReadAccessCasterInEditor.runReadTransparentAction(new Computable<PropertySupport>(){
    @Override public PropertySupport compute(){
      SNode dataType=SNodeUtil.getPropertyDeclaration_DataType(propertyDeclaration);
      if (dataType != null) {
        PropertySupport propertySupport=ourPropertySupportCache.get(dataType);
        if (propertySupport != null) {
          return propertySupport;
        }
        if (SNodeUtil.isInstanceOfPrimitiveDataTypeDeclaration(dataType)) {
          String dataTypeName=dataType.getName();
          if (Primitives.STRING_TYPE.equals(dataTypeName)) {
            propertySupport=new DefaultPropertySupport();
          }
 else           if (Primitives.INTEGER_TYPE.equals(dataTypeName)) {
            propertySupport=new IntegerPropertySupport();
          }
 else           if (Primitives.BOOLEAN_TYPE.equals(dataTypeName)) {
            propertySupport=new BooleanPropertySupport();
          }
 else {
            throw new RuntimeException("Unknown primitive type: " + dataTypeName);
          }
        }
 else {
          propertySupport=loadPropertySupport(propertyDeclaration);
        }
        if (propertySupport == null) {
          propertySupport=new DefaultPropertySupport();
        }
        ourPropertySupportCache.put(dataType,propertySupport);
        return propertySupport;
      }
      return new DefaultPropertySupport();
    }
  }
);
}
