{
  DataTypeDeclaration dataType=propertyDeclaration.getDataType();
  if (dataType != null) {
    PropertySupport propertySupport=(PropertySupport)dataType.getNode().getUserObject(PROPERTY_SUPPORT);
    if (propertySupport != null) {
      return propertySupport;
    }
    if (dataType instanceof PrimitiveDataTypeDeclaration) {
      String dataTypeName=dataType.getName();
      if (Primitives.STRING_TYPE.equals(dataTypeName)) {
        propertySupport=new DefaultPropertySupport();
      }
 else       if (Primitives.INTEGER_TYPE.equals(dataTypeName)) {
        propertySupport=new IntegerPropertySupport();
      }
 else       if (Primitives.BOOLEAN_TYPE.equals(dataTypeName)) {
        propertySupport=new BooleanPropertySupport();
      }
 else {
        throw new RuntimeException("Unknown primitive type: " + dataTypeName);
      }
    }
 else {
      propertySupport=loadPropertySupport(propertyDeclaration);
    }
    if (propertySupport == null) {
      propertySupport=new DefaultPropertySupport();
    }
    dataType.getNode().putUserObject(PROPERTY_SUPPORT,propertySupport);
    return propertySupport;
  }
  return new DefaultPropertySupport();
}
