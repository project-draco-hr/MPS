{
  Set<String> conceptNames=new HashSet<String>();
  for (  SNode node : nodes) {
    conceptNames.add(node.getName());
    if (!myExact) {
      conceptNames.addAll(LanguageHierarchyCache.getInstance().getAllDescendantsOfConcept(NameUtil.nodeFQName(node)));
    }
  }
  MultiMap<SModelDescriptor,String> result=new MultiMap<SModelDescriptor,String>();
  MultiMap<FastFindSupport,SModelDescriptor> gm=groupModels(models);
  for (  Entry<FastFindSupport,Collection<SModelDescriptor>> e : gm.entrySet()) {
    if (e.getKey() == null) {
      for (      SModelDescriptor model : e.getValue()) {
        result.putValues(model,conceptNames);
      }
      continue;
    }
    result.putAllValues(e.getKey().findModelsWithPossibleInstances((Set<SModelDescriptor>)e.getValue(),conceptNames));
  }
  return result;
}
