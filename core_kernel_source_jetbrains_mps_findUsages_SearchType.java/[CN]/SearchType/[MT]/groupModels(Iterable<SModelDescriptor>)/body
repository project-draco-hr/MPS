{
  Map<FastFindSupport,Set<SModelDescriptor>> result=new HashMap<FastFindSupport,Set<SModelDescriptor>>();
  result.put(null,new HashSet<SModelDescriptor>());
  for (  SModelDescriptor model : models) {
    if (!(model instanceof BaseSModelDescriptorWithSource)) {
      result.get(null).add(model);
      continue;
    }
    if (model instanceof EditableSModelDescriptor && ((EditableSModelDescriptor)model).isChanged()) {
      result.get(null).add(model);
      continue;
    }
    BaseSModelDescriptorWithSource mws=((BaseSModelDescriptorWithSource)model);
    if (!(mws.getSource() instanceof FastFindSupportProvider)) {
      result.get(null).add(model);
      continue;
    }
    FastFindSupportProvider ffsp=((FastFindSupportProvider)mws.getSource());
    FastFindSupport ffs=FastFindSupportRegistry.getInstance().getFastFindSupport(ffsp.getFastFindSupportId());
    if (ffs == null) {
      result.get(null).add(model);
      continue;
    }
    Set<SModelDescriptor> descs=result.get(ffs);
    if (descs == null) {
      descs=new HashSet<SModelDescriptor>();
      result.put(ffs,descs);
    }
    descs.add(model);
  }
  return result;
}
