{
  if (mySModel == null)   return;
  if (!mySModel.isLoading())   LOG.assertInCommand();
  SModelRepository.getInstance().markUnchanged(mySModel);
  myModelRootManager.saveModel(this);
  IFile modelFile=getModelFile();
  if (modelFile != null) {
    modelFile.toVirtualFile().refresh(false,false);
  }
  myDiskTimestamp=fileTimestamp();
  mySModel.fireModelSaved();
}
