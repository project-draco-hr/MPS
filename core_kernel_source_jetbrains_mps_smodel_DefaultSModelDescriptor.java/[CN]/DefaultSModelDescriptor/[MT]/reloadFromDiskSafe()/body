{
  if (SModelRepository.getInstance().isChanged(this)) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        final boolean needSave=VcsMigrationUtil.getHandler().resolveDiskMemoryConflict(myModelFile,mySModel);
        if (needSave) {
          ModelAccess.instance().runWriteActionInCommand(new Runnable(){
            public void run(){
              updateDiskTimestamp();
              save();
            }
          }
);
        }
 else {
          ModelAccess.instance().runWriteAction(new Runnable(){
            public void run(){
              reloadFromDisk();
            }
          }
);
        }
      }
    }
,ModalityState.NON_MODAL);
  }
 else {
    reloadFromDisk();
  }
}
