{
  SNode project=artifacts.getProject();
  TemplateQueryContext genContext=artifacts.getGenContext();
  Iterable<SNode> originalModules=Sequence.<SNode>singleton(SLinkOperations.getTarget(__thisNode__,MetaAdapterFactory.getReferenceLink(0x427a473d5177432cL,0x9905bcbceb71b996L,0x39ea87a41cc0827eL,0x54b085b5945c6691L,"solution")));
  Iterable<SNode> modules=Sequence.fromIterable(new MPSModulesClosure(originalModules,new MPSModulesClosure.ModuleDependenciesOptions().trackDevkits()).designtimeClosure().getAllModules()).union(Sequence.fromIterable(originalModules));
  for (  SNode m : Sequence.fromIterable(modules)) {
    SNode artifact;
    SNode originalModule=DependenciesHelper.getOriginalNode(m,genContext);
    VisibleArtifacts currentArtifacts=artifacts;
    artifact=SNodeOperations.as(currentArtifacts.findArtifact(originalModule),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x668c6cfbafac4c85L,"jetbrains.mps.build.structure.BuildLayout_Node"));
    if (artifact != null) {
      builder.add(SNodeOperations.as(DependenciesHelper.getOriginalNode(artifact,genContext),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x668c6cfbafac4c85L,"jetbrains.mps.build.structure.BuildLayout_Node")),originalModule);
    }
 else     if (SNodeOperations.isInstanceOf(originalModule,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4780308f5d2060eL,"jetbrains.mps.build.mps.structure.BuildMps_DevKit"))) {
      artifact=SNodeOperations.as(currentArtifacts.findArtifact(SLinkOperations.getTarget(SNodeOperations.cast(originalModule,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4780308f5d2060eL,"jetbrains.mps.build.mps.structure.BuildMps_DevKit")),MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x4780308f5d333ebL,0x4780308f5d47f25L,"path"))),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x668c6cfbafac4c85L,"jetbrains.mps.build.structure.BuildLayout_Node"));
      if (artifact != null) {
        builder.add(SNodeOperations.as(DependenciesHelper.getOriginalNode(artifact,genContext),MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x668c6cfbafac4c85L,"jetbrains.mps.build.structure.BuildLayout_Node")),originalModule);
      }
    }
  }
}
