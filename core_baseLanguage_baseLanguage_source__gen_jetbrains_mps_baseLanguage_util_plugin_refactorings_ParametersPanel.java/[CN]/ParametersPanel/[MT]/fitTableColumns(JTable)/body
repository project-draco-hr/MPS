{
  for (int i=0; i < table.getColumnModel().getColumnCount(); i++) {
    TableColumn column=table.getColumnModel().getColumn(i);
    int max=MINIMUM_TABLE_COLUMN_WIDTH;
    for (int j=0; j < table.getRowCount(); j++) {
      TableCellRenderer r=table.getCellRenderer(j,i);
      Component c=r.getTableCellRendererComponent(table,table.getValueAt(j,i),false,false,j,i);
      int width=c.getPreferredSize().width;
      if (width > max) {
        max=width;
      }
    }
    column.setPreferredWidth(max);
  }
}
