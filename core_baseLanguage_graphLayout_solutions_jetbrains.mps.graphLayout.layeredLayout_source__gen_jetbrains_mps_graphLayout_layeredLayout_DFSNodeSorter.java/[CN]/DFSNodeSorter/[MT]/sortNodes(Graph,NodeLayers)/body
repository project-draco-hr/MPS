{
  myGraph=graph;
  myNodeLayers=nodeLayers;
  myLayeredOrder=new NodeLayeredOrder(graph);
  myDfsState=MapSequence.fromMap(new HashMap<Node,Integer>());
  List<Node> nodes=myGraph.getNodes();
  for (  Node node : ListSequence.fromList(nodes)) {
    MapSequence.fromMap(myDfsState).put(node,0);
  }
  for (  Node node : ListSequence.fromList(nodes)) {
    if (MapSequence.fromMap(myDfsState).get(node) == 0) {
      dfs(node);
    }
  }
  return myLayeredOrder;
}
