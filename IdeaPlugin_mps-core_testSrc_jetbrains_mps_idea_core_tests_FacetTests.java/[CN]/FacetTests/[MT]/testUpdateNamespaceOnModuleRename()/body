{
  final String newModuleName="newModuleName__";
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      ModifiableModuleModel modifiableModel=ModuleManager.getInstance(myModule.getProject()).getModifiableModel();
      try {
        modifiableModel.renameModule(myModule,newModuleName);
      }
 catch (      ModuleWithNameAlreadyExists moduleWithNameAlreadyExists) {
        fail(moduleWithNameAlreadyExists.getMessage());
      }
      modifiableModel.commit();
    }
  }
);
  flushEDT();
  myFacet=(MPSFacet)FacetManager.getInstance(myModule).getFacetByType(myFacet.getTypeId());
  assertEquals(newModuleName,myModule.getName());
  assertEquals(newModuleName,myFacet.getSolution().getModuleDescriptor().getNamespace());
}
