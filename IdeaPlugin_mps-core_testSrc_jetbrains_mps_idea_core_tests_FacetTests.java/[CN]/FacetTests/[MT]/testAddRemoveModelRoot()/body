{
  @NonNls final File modelRootDir=new File(getModuleHome(),"modelRoot");
  assertTrue(modelRootDir.mkdir());
  ModuleReference solutionReference=myFacet.getSolution().getModuleReference();
  String modelRootPath=modelRootDir.getPath();
  MPSConfigurationBean configurationBean=myFacet.getConfiguration().getState();
  DefaultModelRoot root=new DefaultModelRoot();
  root.setPath(modelRootPath);
  configurationBean.setModelRoots(Arrays.<ModelRoot>asList(root));
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  Solution repositorySolution=ModuleRepositoryFacade.getInstance().getModule(solutionReference,Solution.class);
  assertEquals(myFacet.getSolution(),repositorySolution);
  Iterable<ModelRoot> modelRoots=repositorySolution.getModelRoots();
  Iterator<ModelRoot> iterator=modelRoots.iterator();
  assertTrue(iterator.hasNext());
  ModelRoot theModelRoot=iterator.next();
  assertFalse(iterator.hasNext());
  assertEquals(modelRootDir.getPath(),((FolderModelRootBase)theModelRoot).getPath());
  configurationBean=myFacet.getConfiguration().getState();
  configurationBean.setModelRoots(new ArrayList<ModelRoot>());
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  assertFalse(repositorySolution.getModelRoots().iterator().hasNext());
}
