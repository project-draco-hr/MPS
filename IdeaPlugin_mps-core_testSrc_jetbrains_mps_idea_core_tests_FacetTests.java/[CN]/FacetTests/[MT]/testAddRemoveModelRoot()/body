{
  @NonNls final File modelRootDir=new File(getModuleHome(),"modelRoot");
  assertTrue(modelRootDir.mkdir());
  ModuleReference solutionReference=myFacet.getSolution().getModuleReference();
  String modelRootPath=modelRootDir.getPath();
  MPSConfigurationBean configurationBean=myFacet.getConfiguration().getState();
  ArrayList<ModelRoot> roots=new ArrayList<ModelRoot>();
  roots.add(new ModelRoot(modelRootPath));
  configurationBean.setModelRoots(roots);
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  Solution repositorySolution=ModuleRepositoryFacade.getInstance().getModule(solutionReference,Solution.class);
  assertEquals(myFacet.getSolution(),repositorySolution);
  Collection<SModelRoot> modelRoots=repositorySolution.getSModelRoots();
  assertEquals(1,modelRoots.size());
  SModelRoot theModelRoot=modelRoots.iterator().next();
  assertEquals(modelRootDir.getPath(),theModelRoot.getPath());
  configurationBean=myFacet.getConfiguration().getState();
  configurationBean.setModelRoots(new ArrayList<ModelRoot>());
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  assertEmpty(repositorySolution.getSModelRoots());
}
