{
  @NonNls final File modelRootDir=new File(getModuleHome(),"modelRoot");
  assertTrue(modelRootDir.mkdir());
  ModuleReference solutionReference=myFacet.getSolution().getModuleReference();
  String modelRootPath=modelRootDir.getPath();
  MPSConfigurationBean configurationBean=myFacet.getConfiguration().getState();
  ArrayList<ModelRoot> roots=new ArrayList<ModelRoot>();
  roots.add(new ModelRoot(modelRootPath));
  configurationBean.setModelRoots(roots);
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  Solution repositorySolution=ModuleRepositoryFacade.getInstance().getModule(solutionReference,Solution.class);
  assertEquals(myFacet.getSolution(),repositorySolution);
  Iterable<org.jetbrains.mps.openapi.persistence.ModelRoot> modelRoots=repositorySolution.getModelRoots();
  Iterator<org.jetbrains.mps.openapi.persistence.ModelRoot> iterator=modelRoots.iterator();
  assertTrue(iterator.hasNext());
  org.jetbrains.mps.openapi.persistence.ModelRoot theModelRoot=iterator.next();
  assertFalse(iterator.hasNext());
  assertEquals(modelRootDir.getPath(),((FolderModelRootBase)theModelRoot).getPath());
  configurationBean=myFacet.getConfiguration().getState();
  configurationBean.setModelRoots(new ArrayList<ModelRoot>());
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  assertFalse(repositorySolution.getModelRoots().iterator().hasNext());
}
