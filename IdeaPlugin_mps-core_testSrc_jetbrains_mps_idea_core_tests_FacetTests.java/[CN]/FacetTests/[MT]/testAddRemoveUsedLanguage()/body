{
  Language baseLanguage=ModuleRepositoryFacade.getInstance().getModule("jetbrains.mps.baseLanguage",Language.class);
  assertNotNull(baseLanguage);
  Language editorLanguage=ModuleRepositoryFacade.getInstance().getModule("jetbrains.mps.lang.editor",Language.class);
  assertNotNull(editorLanguage);
  String[] usedLanguageStrings=new String[]{baseLanguage.toString(),editorLanguage.toString()};
  Language[] usedLanguages=new Language[]{baseLanguage,editorLanguage};
  MPSConfigurationBean configurationBean=myFacet.getConfiguration().getState();
  configurationBean.setUsedLanguages(usedLanguageStrings);
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  Collection<ModuleReference> solutionUsedLanguageRefs=myFacet.getSolution().getUsedLanguagesReferences();
  Set<Language> solutionUsedLanguages=new HashSet<Language>();
  for (  ModuleReference solutionUsedLanguageRef : solutionUsedLanguageRefs) {
    solutionUsedLanguages.add(ModuleRepositoryFacade.getInstance().getModule(solutionUsedLanguageRef,Language.class));
  }
  assertEquals(usedLanguages.length,solutionUsedLanguages.size());
  for (  Language usedLanguage : usedLanguages) {
    assertTrue(solutionUsedLanguages.contains(usedLanguage));
  }
  configurationBean.setUsedLanguages(new String[0]);
  myFacet.setConfiguration(configurationBean);
  flushEDT();
  assertEmpty(myFacet.getSolution().getUsedLanguagesReferences());
}
