{
  PersistenceRegistry persistenceRegistry=null;
  if (PersistenceRegistry.getInstance() == null) {
    persistenceRegistry=new PersistenceRegistry();
    persistenceRegistry.init();
  }
  try {
    testRef("f:java_stub#6354ebe7-c22a-4a0f-ac54-50b52ab9b065#java.util(JDK/java.util@java_stub)");
    testRef("f:java_stub#6354ebe7-c22a-4a0f-ac54-50b52ab9b065#java.util(java.util@java_stub)");
    testRef("f:java_stub#6ed54515-acc8-4d1e-a16c-9fd6cfe951ea#jetbrains.mps.project(MPS.Core/jetbrains.mps.project@java_stub)");
    testRef("r:00000000-0000-4000-0000-011c89590288(jetbrains.mps.lang.core.structure)");
    testRef("jetbrains.mps.lang.core.structure");
    testRef("9ef82768-a1b1-451e-b136-5a86b2b5fdbb/r:b11ed8aa-3bfd-4e32-9f42-fbe92f0be58c(jetbrains.mps.persistence/jetbrains.mps.smodel.persistence.def.v7)");
    testRef("9ef82768-a1b1-451e-b136-5a86b2b5fdbb/r:b11ed8aa-3bfd-4e32-9f42-fbe92f0be58c(jetbrains.mps.smodel.persistence.def.v7)");
    String ref1="~module1%25/f:models%2Faa.xml(aa.xml)";
    testRef(ref1);
    SModelReference pref1=SModelReference.parseReference(ref1);
    assertEquals("f:models/aa.xml",pref1.getModelId().toString());
    assertEquals("~module1%",pref1.getModuleReference().getModuleId().toString());
  }
  finally {
    if (persistenceRegistry != null) {
      persistenceRegistry.dispose();
    }
  }
}
