{
  final NamespaceTextNode node=((NamespaceTextNode)((TreeNode)MapSequence.fromMap(_params).get("treeNode")));
  final Wrappers._T<String> newFolder=new Wrappers._T<String>(JOptionPane.showInputDialog(((Frame)MapSequence.fromMap(_params).get("frame")),"Enter New Folder",node.getName()));
  if (newFolder.value == null) {
    return;
  }
  if (newFolder.value.equals("")) {
    newFolder.value=null;
  }
  ModelAccess modelAccess=((MPSProject)MapSequence.fromMap(_params).get("project")).getRepository().getModelAccess();
  modelAccess.executeCommandInEDT(new Runnable(){
    public void run(){
      for (      SModule module : ListSequence.fromList(node.getModulesUnder())) {
        ((StandaloneMPSProject)((MPSProject)MapSequence.fromMap(_params).get("project"))).setFolderFor(module,newFolder.value);
      }
      RenameNamespace_Action.this.getProjectPane(_params).rebuild();
    }
  }
);
}
