{
  LogExceptionsRunnable wrap=new LogExceptionsRunnable(LogManager.getLogger(ThreadUtils.class),r);
  if (ApplicationManager.getApplication() != null) {
    ApplicationManager.getApplication().invokeAndWait(wrap,ModalityState.defaultModalityState());
  }
 else {
    if (isInEDT()) {
      wrap.run();
    }
 else {
      try {
        SwingUtilities.invokeAndWait(wrap);
      }
 catch (      InterruptedException e) {
        LogManager.getLogger(ThreadUtils.class).error(e.getMessage(),e);
        return e;
      }
catch (      InvocationTargetException e) {
        LogManager.getLogger(ThreadUtils.class).error(e.getMessage(),e);
        return e;
      }
    }
  }
  return wrap.getException();
}
