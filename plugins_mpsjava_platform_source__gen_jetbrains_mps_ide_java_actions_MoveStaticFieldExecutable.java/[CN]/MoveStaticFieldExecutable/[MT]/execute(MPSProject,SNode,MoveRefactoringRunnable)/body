{
  final SNode whereToMove;
  whereToMove=MoveNodeDialog.getSelectedObject(project.getProject(),target,new MoveNodeDialog.NodeFilter("Select class to move: refactoring can't be applied to selected node"){
    @Override public boolean check(    SNode selectedObject,    SNode nodeToMove,    SModel modelOfSelectedObject){
      return SNodeOperations.isInstanceOf(selectedObject,"jetbrains.mps.baseLanguage.structure.Classifier") && !(ListSequence.fromList(SNodeOperations.getAncestors(nodeToMove,null,false)).contains(selectedObject));
    }
  }
);
  if (whereToMove == null) {
    return;
  }
  ModelAccess.instance().runReadInEDT(new Runnable(){
    @Override public void run(){
      SNode node=((SNode)target);
      if (!(node.getModel() != null) || jetbrains.mps.util.SNodeOperations.isDisposed(((SNode)target))) {
        return;
      }
      jetbrains.mps.smodel.SNode node1=((jetbrains.mps.smodel.SNode)whereToMove);
      if (!(node1.getModel() != null) || jetbrains.mps.util.SNodeOperations.isDisposed(((jetbrains.mps.smodel.SNode)whereToMove))) {
        return;
      }
      runnable.run(whereToMove);
    }
  }
);
}
