{
  ISearchScope searchScope=null;
  if (builder.getSearchScopeProviderAspectId() != null) {
    searchScope=invokeSearchScopeProvider(builder,sourceNode,context);
  }
 else {
    ConceptDeclaration referenceNodeConcept=SModelUtil.getConceptDeclaration(sourceNode,context.getScope());
    IStatus status=ModelConstraintsUtil.getReferentSearchScope(sourceNode.getParent(),sourceNode,referenceNodeConcept,linkDeclaration,context.getScope());
    if (status.isError()) {
      LOG.error("Couldn't create search scope : " + status.getMessage());
      return Collections.emptyList();
    }
    searchScope=(ISearchScope)status.getUserObject();
  }
  if (searchScope == null) {
    return Collections.emptyList();
  }
  return invokeActionFactory(builder,sourceNode,currentReferent,linkDeclaration,searchScope,context);
}
