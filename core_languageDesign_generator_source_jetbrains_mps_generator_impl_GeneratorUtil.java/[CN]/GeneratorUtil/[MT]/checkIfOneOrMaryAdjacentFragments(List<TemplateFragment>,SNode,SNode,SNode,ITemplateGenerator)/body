{
  if (fragments.isEmpty()) {
    generator.showErrorMessage(inputNode,templateContainer,ruleNode,"couldn't process template: no template fragments found");
    return false;
  }
  if (fragments.size() > 1) {
    INodeAdapter templateNode=fragments.get(0).getParent();
    INodeAdapter parent=templateNode.getParent();
    String role=templateNode.getRole_();
    for (    TemplateFragment fragment : fragments) {
      templateNode=fragment.getParent();
      if (!(parent == templateNode.getParent() && role.equals(templateNode.getRole_()))) {
        generator.showErrorMessage(inputNode,templateContainer,ruleNode,"couldn't process template: all template fragments must reside in the same parent node");
        return false;
      }
    }
  }
  return true;
}
