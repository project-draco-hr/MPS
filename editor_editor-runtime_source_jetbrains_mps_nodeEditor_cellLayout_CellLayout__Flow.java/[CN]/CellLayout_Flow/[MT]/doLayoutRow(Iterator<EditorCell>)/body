{
  TextBuilder result=jetbrains.mps.nodeEditor.text.TextBuilder.getEmptyTextBuilder();
  for (; it.hasNext(); ) {
    EditorCell editorCell=it.next();
    if (LayoutConstraints.NOFLOW_LAYOUT_CONSTRAINT.equals(editorCell.getStyle().get(StyleAttributes.LAYOUT_CONSTRAINT))) {
      return result.appendToTheBottom(editorCell.renderText());
    }
    result=result.appendToTheRight(editorCell.renderText(),!APICellAdapter.isPunctuationLayout(editorCell));
  }
  return result;
}
