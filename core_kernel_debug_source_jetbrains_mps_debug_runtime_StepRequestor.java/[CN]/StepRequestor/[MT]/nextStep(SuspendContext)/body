{
  if (myStepType == StepRequest.STEP_OVER || myStepType == StepRequest.STEP_INTO) {
    ThreadReference thread=context.getThread();
    StackFrame frame=context.getFrame();
    if (frame == null || thread == null)     return myStepType;
    int frameCount=-1;
    Location location=frame.location();
    String sourceName="";
    try {
      frameCount=thread.frameCount();
      sourceName=location.sourceName();
    }
 catch (    IncompatibleThreadStateException e) {
      LOG.error(e);
    }
catch (    AbsentInformationException e) {
      LOG.error(e);
    }
    if (!sourceName.isEmpty() && !myFramesSelector.isDebuggablePosition(location.declaringType().name(),sourceName,location.lineNumber())) {
      return myStepType;
    }
    boolean filesEqual=myDeclaringType.equals(location.declaringType().name());
    if (filesEqual && myLineNumber == location.lineNumber() && myFrameCount == frameCount) {
      return myStepType;
    }
  }
  return STOP;
}
