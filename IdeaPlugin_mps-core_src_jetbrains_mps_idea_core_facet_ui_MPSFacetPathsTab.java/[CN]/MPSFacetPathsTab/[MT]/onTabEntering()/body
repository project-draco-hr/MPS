{
  String oldSelection=null;
  if (isUseModuleSourceFolder()) {
    oldSelection=myModuleReferenceCompo.getItemCount() == 0 ? myFieldPanel.getText() : (String)myModuleReferenceCompo.getSelectedItem();
  }
  boolean hasOldItem=false;
  myModuleReferenceCompo.removeAllItems();
  for (  ContentEntry entry : myContext.getRootModel().getContentEntries()) {
    for (    SourceFolder sourceFolder : entry.getSourceFolders()) {
      if (sourceFolder.getFile() == null) {
        continue;
      }
      String path=sourceFolder.getFile().getPath();
      myModuleReferenceCompo.addItem(path);
      if (path.equals(oldSelection)) {
        hasOldItem=true;
      }
    }
  }
  limitWidth(myModuleReferenceCompo);
  if (oldSelection != null) {
    if (hasOldItem) {
      myModuleReferenceCompo.setSelectedItem(oldSelection);
    }
 else {
      myUseCustomFolderRadioButton.doClick();
      myFieldPanel.setText(oldSelection);
    }
  }
}
