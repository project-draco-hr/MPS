{
  SNode targetNode=sourceNode.cloneProperties();
  targetNode.setId(SNode.generateUniqueId());
  sourceNodesToNewNodes.put(sourceNode,targetNode);
  List<SReference> references=sourceNode.getReferences();
  for (  SReference reference : references) {
    allReferences.add(reference);
  }
  List<SNode> children=sourceNode.getChildren();
  for (  SNode sourceChild : children) {
    SNode targetChild=copyNode_internal(sourceChild,sourceNodesToNewNodes,allReferences);
    targetNode.addChild(sourceChild.getRole_(),targetChild);
  }
  return targetNode;
}
