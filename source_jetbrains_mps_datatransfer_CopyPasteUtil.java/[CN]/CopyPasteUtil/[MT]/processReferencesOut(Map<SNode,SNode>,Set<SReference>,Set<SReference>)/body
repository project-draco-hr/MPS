{
  for (  SReference sourceReference : allReferences) {
    SNode oldSourceNode=sourceReference.getSourceNode();
    SNode newSourceNode=sourceNodesToNewNodes.get(oldSourceNode);
    SNode oldTargetNode=sourceReference.getTargetNode();
    SNode newTargetNode=sourceNodesToNewNodes.get(oldTargetNode);
    if (newTargetNode != null) {
      newSourceNode.addSReference(SReference.newInstance(sourceReference.getRole(),newSourceNode,newTargetNode));
    }
 else {
      if (sourceReference.getResolveInfo() != null) {
        SReference unresolvedReference=SReference.create(sourceReference.getRole(),newSourceNode,null,null,sourceReference.getResolveInfo());
        referencesRequireResolve.add(unresolvedReference);
        newSourceNode.addSReference(unresolvedReference);
      }
 else       if (oldTargetNode != null) {
        newSourceNode.addSReference(SReference.create(sourceReference.getRole(),newSourceNode,oldTargetNode));
      }
 else {
        continue;
      }
    }
  }
}
