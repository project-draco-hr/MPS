{
  for (  SReference sourceReference : ourReferences) {
    SNode oldSourceNode=sourceReference.getSourceNode();
    SNode newSourceNode=ourSourceNodesToNewNodes.get(oldSourceNode);
    if (!sourceReference.isExternal()) {
      SNode oldTargetNode=sourceReference.getTargetNode();
      SNode newTargetNode=ourSourceNodesToNewNodes.get(oldTargetNode);
      if (newTargetNode != null) {
        newSourceNode.addSemanticReference(SReference.newInstance(sourceReference.getRole(),newSourceNode,newTargetNode));
      }
 else {
        String oldTargetNodeId=sourceReference.getTargetNodeId();
        SReference newReference=SReference.newInstance(sourceReference.getRole(),newSourceNode,oldTargetNodeId,null,newSourceNode.getModel().getUID(),sourceReference.getResolveInfo(),sourceReference.getTargetClassResolveInfo());
        newSourceNode.addSemanticReference(newReference);
        ourPointingOutReferences.add(newReference);
      }
    }
 else {
      SReference newReference=SReference.newInstance(sourceReference.getRole(),newSourceNode,sourceReference);
      newSourceNode.addSemanticReference(newReference);
    }
  }
}
