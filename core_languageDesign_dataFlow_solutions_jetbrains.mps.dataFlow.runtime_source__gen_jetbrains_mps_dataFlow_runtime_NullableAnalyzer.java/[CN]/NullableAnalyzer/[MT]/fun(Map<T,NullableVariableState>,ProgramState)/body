{
  Map<T,NullableVariableState> result=MapSequence.fromMap(new HashMap<T,NullableVariableState>());
  result.putAll(input);
  if (state.getInstruction() instanceof WriteInstruction) {
    WriteInstruction write=(WriteInstruction)state.getInstruction();
    NullableVariableState value=((NullableVariableState)write.getValue());
    T variable=(T)write.getVariable();
    if (value == null) {
      MapSequence.fromMap(result).put(variable,NullableVariableState.UNKNOWN);
    }
 else {
      MapSequence.fromMap(result).put(variable,value);
    }
  }
  if (state.getInstruction() instanceof VariableValueInstruction) {
    VariableValueInstruction varValue=(VariableValueInstruction)state.getInstruction();
    NullableVariableState value=varValue.getValue();
    T variable=(T)varValue.getVariable();
    if (value == null) {
      MapSequence.fromMap(result).put(variable,NullableVariableState.UNKNOWN);
    }
 else {
      MapSequence.fromMap(result).put(variable,value);
    }
  }
  return result;
}
