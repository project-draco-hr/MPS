{
  if (!myStarted.compareAndSet(false,true))   throw new IllegalStateException("already processing");
  final ArrayList<BaseAction> actionsCopy=new ArrayList<BaseAction>(mySelectedActions);
  for (  final BaseAction action : actionsCopy) {
    runCommand(new Runnable(){
      @Override public void run(){
        fireStartingAction(action);
        AnActionEvent event=new AnActionEvent(null,DataManager.getInstance().getDataContext(component),ActionPlaces.UNKNOWN,action.getTemplatePresentation(),ActionManager.getInstance(),0);
        action.update(event);
        if (action.getTemplatePresentation().isEnabled()) {
          action.actionPerformed(event);
          fireFinishedAction(action);
        }
 else {
          fireFailedAction(action);
        }
      }
    }
);
  }
  runCommand(new Runnable(){
    @Override public void run(){
      myFinished.set(true);
      fireFinishedAll();
    }
  }
);
}
