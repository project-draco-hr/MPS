{
  if (dep.isReexport())   return null;
  if (dep.getModuleRef().equals(current))   return dep;
  SModule module=MPSModuleRepository.getInstance().getModule(dep.getModuleRef());
  if (module == null)   return null;
  boolean used=false;
  for (  SModelReference mr : result.myUsedModels) {
    SModel md=SModelRepository.getInstance().getModelDescriptor(mr);
    if (md == null)     continue;
    if (md.getModule() == module) {
      used=true;
      break;
    }
  }
  return used ? null : dep;
}
