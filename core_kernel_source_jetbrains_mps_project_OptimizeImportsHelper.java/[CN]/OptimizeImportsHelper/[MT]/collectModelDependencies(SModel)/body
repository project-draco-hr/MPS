{
  Result result=new Result();
  for (  ModuleReference ref : ((jetbrains.mps.smodel.SModelInternal)modelDescriptor.getSModel()).engagedOnGenerationLanguages()) {
    result.myUsedLanguages.add(ModuleRepositoryFacade.getInstance().getModule(ref,Language.class));
  }
  for (  SNode node : new NodesIterable(modelDescriptor.getSModel())) {
    result.myUsedLanguages.add(jetbrains.mps.util.SNodeOperations.getLanguage(node));
    for (    SReference ref : node.getReferences()) {
      SModelReference mr=ref.getTargetSModelReference();
      if (!modelDescriptor.getReference().equals(mr)) {
        result.myUsedModels.add(mr);
      }
    }
  }
  result.myUsedLanguages.addAll(ModelsAutoImportsManager.getAutoImportedLanguages(modelDescriptor.getModule(),modelDescriptor));
  for (  org.jetbrains.mps.openapi.model.SModel model : ModelsAutoImportsManager.getAutoImportedModels(modelDescriptor.getModule(),modelDescriptor)) {
    result.myUsedModels.add(model.getReference());
  }
  return result;
}
