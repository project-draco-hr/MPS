{
  myOperationContext=operationContext;
  myTypeCheckingContextNew=tcc;
  myOperation=tcc.getOperation();
  myErrorNodes=new LinkedList<TypeSystemTraceTreeNode>();
  mySelectedNode=node;
  myNodes=new HashSet<SNode>();
  myNodes.addAll(node.getDescendants());
  myNodes.add(node);
  myCurrentContext=tcc;
  myParent=parent;
  myStateCopy=new State(tcc,tcc.getState().getOperation());
  myCurrentState=myStateCopy;
  setGenerationMode(TraceSettings.isGenerationMode());
  myEditorComponent=editorComponent;
  this.myHighlightManager=editorComponent.getHighlightManager();
  this.myMessageOwner=new EditorMessageOwner(){
  }
;
  EditorCell nodeCell=myEditorComponent.findNodeCell(mySelectedNode);
  if (nodeCell != null) {
    myHighlightManager.mark(new TypeSystemTraceTree.SelectedNodeEditorMessage(nodeCell,""));
  }
  this.rebuildNow();
  expandAll();
  this.myDetailsTree=new TypeSystemTraceTree.DetailsTree(null);
  addTreeSelectionListener(new TypeSystemTraceTree.ShowDetailsUpdater());
  getSelectionModel().setSelectionMode(TreeSelectionModel.CONTIGUOUS_TREE_SELECTION);
}
