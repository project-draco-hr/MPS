{
  if (myOperation == null) {
    return null;
  }
  boolean showNode=showNode(operation);
  List<TypeSystemTraceTreeNode> children=new ArrayList<TypeSystemTraceTreeNode>();
  for (  AbstractOperation consequence : operation.getConsequences()) {
    TypeSystemTraceTreeNode node=create(consequence,showNode || showParent);
    if (node != null) {
      children.add(node);
    }
  }
  if (!(filterNodeType(operation))) {
    return null;
  }
  if (!(showParent)) {
    if (!(showNode) && children.isEmpty()) {
      return null;
    }
  }
  TypeSystemTraceTreeNode result=new TypeSystemTraceTreeNode(operation,myOperationContext,myCurrentContext.getState(),myEditorComponent);
  for (  TypeSystemTraceTreeNode node : children) {
    result.add(node);
  }
  return result;
}
