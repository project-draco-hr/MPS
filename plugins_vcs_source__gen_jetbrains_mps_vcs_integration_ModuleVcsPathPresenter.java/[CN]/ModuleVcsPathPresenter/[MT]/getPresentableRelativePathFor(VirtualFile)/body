{
  if (file == null) {
    return "";
  }
  return ApplicationManager.getApplication().runReadAction(new Computable<String>(){
    public String compute(){
      VirtualFile baseDir=myProject.getBaseDir();
      if (baseDir != null) {
        if (VfsUtil.isAncestor(baseDir,file,true)) {
          return "[" + myProject.getName() + "]"+ File.separator+ file.getPath();
        }
      }
      for (      VcsRoot root : myManager.getAllVcsRoots()) {
        if (VfsUtil.isAncestor(root.path,file,true)) {
          return "[" + root.path.getName() + "]"+ File.separator+ file.getPath();
        }
      }
      return "[]" + File.separator + file.getPath();
    }
  }
);
}
