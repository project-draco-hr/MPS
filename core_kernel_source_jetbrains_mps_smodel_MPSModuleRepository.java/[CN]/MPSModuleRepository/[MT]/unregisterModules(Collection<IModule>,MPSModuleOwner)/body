{
  Collection<IModule> modulesToDispose=new ArrayList<IModule>();
  boolean repositoryChanged=false;
  for (  IModule module : modules) {
    if (doUnregisterModule(module,owner)) {
      modulesToDispose.add(module);
    }
 else {
      repositoryChanged=true;
    }
  }
  if (modulesToDispose.isEmpty() && !repositoryChanged) {
    return;
  }
  invalidateCaches();
  for (  IModule module : modulesToDispose) {
    fireModuleRemoved(module);
    ((AbstractModule)module).dispose();
    MPSClassesReloadManager.getInstance().requestReload();
  }
  if (repositoryChanged) {
    fireRepositoryChanged();
  }
}
