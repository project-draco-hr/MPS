{
  Collection<SModule> modulesToDispose=new ArrayList<SModule>();
  boolean repositoryChanged=false;
  for (  SModule module : modules) {
    if (doUnregisterModule(module,owner)) {
      modulesToDispose.add(module);
    }
 else {
      repositoryChanged=true;
    }
  }
  if (modulesToDispose.isEmpty() && !repositoryChanged) {
    return;
  }
  invalidateCaches();
  for (  SModule module : modulesToDispose) {
    fireModuleRemoved(module);
    ((AbstractModule)module).dispose();
  }
  if (repositoryChanged) {
    fireRepositoryChanged();
  }
}
