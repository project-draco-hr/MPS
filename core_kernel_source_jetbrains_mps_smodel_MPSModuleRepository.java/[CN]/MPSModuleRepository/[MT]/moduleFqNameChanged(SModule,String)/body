{
  ModelAccess.assertLegalWrite();
  if (myFqNameToModulesMap.get(oldName) != module || myFqNameToModulesMap.containsKey(module.getModuleName())) {
    throw new IllegalStateException();
  }
  myFqNameToModulesMap.remove(oldName);
  myFqNameToModulesMap.put(module.getModuleName(),module);
}
