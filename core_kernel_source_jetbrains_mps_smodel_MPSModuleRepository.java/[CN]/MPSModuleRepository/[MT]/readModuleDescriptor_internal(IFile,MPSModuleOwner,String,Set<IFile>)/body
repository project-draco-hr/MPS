{
  IModule module=null;
  try {
    Class<? extends IModule> cls=myExtensionsToModuleTypes.get(extension);
    module=registerModule(dir,owner,cls);
    if (module.getClassesGen() != null) {
      excludes.add(module.getClassesGen());
    }
    for (    String sourceDir : module.getSourcePaths()) {
      excludes.add(FileSystem.getFile(sourceDir));
    }
    if (module.getGeneratorOutputPath() != null) {
      excludes.add(BaseModelCache.getCachesDir(module,module.getGeneratorOutputPath()));
    }
    if (module.getTestsGeneratorOutputPath() != null) {
      excludes.add(BaseModelCache.getCachesDir(module,module.getTestsGeneratorOutputPath()));
    }
  }
 catch (  Throwable t) {
    LOG.error("Fail to load module from descriptor " + dir.getAbsolutePath(),t);
  }
  return module;
}
