{
  String dirName=dir.getName();
  if (hasModuleExtension(dirName) && dir.isFile()) {
    readModuleDescriptor_internal(dir,owner,getModuleExtension(dirName));
  }
  List<IFile> files=dir.list(new IFileNameFilter(){
    public boolean accept(    IFile parent,    String name){
      return hasModuleExtension(name) || name.endsWith(MPS_ARCHIVE);
    }
  }
);
  if (files == null) {
    return;
  }
  for (  IFile file : files) {
    if (hasModuleExtension(file.getName())) {
      readModuleDescriptor_internal(file,owner,getModuleExtension(file.getName()));
    }
 else {
      readModuleDescriptors(FileSystem.getJarFileRoot(file.toFile()),owner);
    }
  }
  List<IFile> dirs=dir.list();
  for (  IFile childDir : dirs) {
    if (childDir.getName().endsWith(".svn"))     continue;
    if (childDir.isDirectory()) {
      readModuleDescriptors(childDir,owner);
    }
  }
}
