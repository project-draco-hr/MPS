{
  IFile descriptorFile=l.getDescriptorFile();
  if (descriptorFile != null) {
    myFileToModuleMap.remove(descriptorFile.getCanonicalPath());
  }
  myUIDToModulesMap.remove(l.getNamespace());
  if (myUIDToModulesMap.containsKey(newUID)) {
    throw new IllegalStateException("Can't rename " + l + " to "+ newUID);
  }
  myUIDToModulesMap.put(l.getModuleUID(),l);
  myFileToModuleMap.put(l.newDescriptorFileByNewName(newUID).getCanonicalPath(),l);
}
