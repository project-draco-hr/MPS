{
  ModelAccess.assertLegalWrite();
  boolean moduleRemoved=doUnregisterModule(module,owner);
  invalidateCaches();
  if (moduleRemoved) {
    fireModuleRemoved(module);
    ((AbstractModule)module).dispose();
    module.detach();
  }
 else {
    fireRepositoryChanged();
  }
}
