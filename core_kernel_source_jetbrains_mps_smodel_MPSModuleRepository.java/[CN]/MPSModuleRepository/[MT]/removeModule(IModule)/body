{
  ModelAccess.assertLegalWrite();
  if (!myModules.contains(module)) {
    return;
  }
  IFile descriptorFile=module.getDescriptorFile();
  myModuleToOwners.clearFirst(module);
  myModules.remove(module);
  myFqNameToModulesMap.remove(module.getModuleFqName());
  if (module.getModuleReference().getModuleId() != null) {
    myIdToModuleMap.remove(module.getModuleReference().getModuleId());
  }
  removeModuleFile(descriptorFile);
  removeModuleFile(ModulesMiner.getRealDescriptorFile(module));
  fireModuleRemoved(module);
}
