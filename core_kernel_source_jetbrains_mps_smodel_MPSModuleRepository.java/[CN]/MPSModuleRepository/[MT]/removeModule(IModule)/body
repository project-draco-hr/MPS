{
  assertCanWrite();
  if (!myModules.contains(module)) {
    return;
  }
  IFile descriptorFile=module.getDescriptorFile();
  myModuleToOwners.clearFirst(module);
  myModules.remove(module);
  myFqNameToModulesMap.remove(module.getModuleFqName());
  if (module.getModuleReference().getModuleId() != null) {
    myIdToModuleMap.remove(module.getModuleReference().getModuleId());
  }
  if (descriptorFile != null) {
    myCanonicalFileToModuleMap.remove(IFileUtils.getCanonicalPath(descriptorFile));
  }
  fireModuleRemoved(module);
}
