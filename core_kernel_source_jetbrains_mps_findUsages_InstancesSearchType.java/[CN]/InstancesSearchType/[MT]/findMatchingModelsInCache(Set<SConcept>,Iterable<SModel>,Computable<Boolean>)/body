{
  Set<SConcept> queryConcepts=new HashSet<SConcept>();
  for (  SConcept concept : concepts) {
    queryConcepts.add(concept);
    if (!myExact) {
      Set<String> desc=LanguageHierarchyCache.getInstance().getAllDescendantsOfConcept(concept.getId());
      for (      String cName : desc) {
        queryConcepts.add(SConceptRepository.getInstance().getConcept(cName));
      }
    }
  }
  MultiMap<SModel,SConcept> result=new MultiMap<SModel,SConcept>();
  MultiMap<FastFindSupport,SModel> gm=groupModelByFastFindSupport(models);
  for (  Entry<FastFindSupport,Collection<SModel>> e : gm.entrySet()) {
    if (e.getKey() == null) {
      for (      SModel model : e.getValue()) {
        result.putValues(model,queryConcepts);
      }
      continue;
    }
    result.putAllValues(e.getKey().findModelsWithPossibleInstances(e.getValue(),queryConcepts));
  }
  return result;
}
