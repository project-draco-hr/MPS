{
  if (!(isClosureContextOwner(node))) {
    throw new RuntimeException("node can't be owner of a closure context " + jetbrains.mps.util.SNodeOperations.getDebugText(node));
  }
  if (getClosureContextData(node,generator) == null) {
    MapSequence.fromMap(ClosuresUtil.getClosureContext(generator)).put(node,new ClosuresUtil.ClosureContextData());
    if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.baseLanguage.structure.BaseMethodDeclaration")) {
      processMethodDeclaration(SNodeOperations.cast(node,"jetbrains.mps.baseLanguage.structure.BaseMethodDeclaration"),generator);
    }
 else {
      processConceptFunction(SNodeOperations.cast(node,"jetbrains.mps.baseLanguage.structure.ConceptFunction"),generator);
    }
  }
}
