{
  ActionManager manager=ActionManager.getInstance();
  AnAction actionToRemove=manager.getAction(actionId);
  if (actionToRemove == null)   return;
  if (actionToRemove instanceof ActionGroup) {
    ActionGroup group=(ActionGroup)actionToRemove;
    AnAction[] childrenArr=group.getChildren(null);
    List<AnAction> children=new ArrayList<AnAction>(Arrays.asList(childrenArr));
    for (    AnAction innerAction : children) {
      String id=manager.getId(innerAction);
      if (id != null)       unregisterAction(id);
    }
  }
  actionToRemove=manager.getAction(actionId);
  if (actionToRemove == null)   return;
  for (  String id : manager.getActionIds("")) {
    AnAction action=manager.getAction(id);
    if (action instanceof ActionGroup) {
      unregisterAllActionOccurencesInGroup((ActionGroup)action,actionToRemove);
    }
  }
  manager.unregisterAction(actionId);
}
