{
  for (  Face face : ListSequence.<Face>fromList(myEmbeddedGraph.getFaces())) {
    List<Dart> darts=face.getDarts();
    for (    Dart dart : ListSequence.<Dart>fromList(darts)) {
      Edge edge=dart.getEdge();
      if (dart.getSource() == edge.getSource()) {
        MapSequence.<Edge,Face>fromMap(myRightFaceForEdge).put(edge,face);
      }
 else {
        MapSequence.<Edge,Face>fromMap(myLeftFaceForEdge).put(edge,face);
      }
    }
    for (int i=0; i < ListSequence.<Dart>fromList(darts).count(); i++) {
      Dart cur=ListSequence.<Dart>fromList(darts).getElement(i);
      Dart next;
      if (i + 1 < ListSequence.<Dart>fromList(darts).count()) {
        next=ListSequence.<Dart>fromList(darts).getElement(i + 1);
      }
 else {
        next=ListSequence.<Dart>fromList(darts).getElement(0);
      }
      Node mid=cur.getTarget();
      if (cur.getEdge().getSource() == mid && next.getEdge().getSource() == mid) {
        MapSequence.<Face,Node>fromMap(myOrigNode).put(face,mid);
      }
      if (cur.getEdge().getTarget() == mid && next.getEdge().getTarget() == mid) {
        MapSequence.<Face,Node>fromMap(myDestNode).put(face,mid);
      }
      if (cur.getEdge().getTarget() == mid && next.getEdge().getSource() == mid) {
        MapSequence.<Node,Face>fromMap(myRightFaceForNode).put(mid,face);
      }
      if (cur.getEdge().getSource() == mid && next.getEdge().getTarget() == mid) {
        MapSequence.<Node,Face>fromMap(myLeftFaceForNode).put(mid,face);
      }
    }
  }
  Face outerFace=myEmbeddedGraph.getOuterFace();
  MapSequence.<Node,Face>fromMap(myLeftFaceForNode).put(mySource,outerFace);
  MapSequence.<Node,Face>fromMap(myRightFaceForNode).put(mySource,outerFace);
  MapSequence.<Node,Face>fromMap(myLeftFaceForNode).put(myTarget,outerFace);
  MapSequence.<Node,Face>fromMap(myRightFaceForNode).put(myTarget,outerFace);
}
