{
  for (  Face face : ListSequence.fromList(myEmbeddedGraph.getFaces())) {
    List<Dart> darts=face.getDarts();
    for (    Dart dart : ListSequence.fromList(darts)) {
      Edge edge=dart.getEdge();
      if (dart.getSource() == edge.getSource()) {
        MapSequence.fromMap(myRightFaceForEdge).put(edge,face);
      }
 else {
        MapSequence.fromMap(myLeftFaceForEdge).put(edge,face);
      }
    }
    for (int i=0; i < ListSequence.fromList(darts).count(); i++) {
      Dart cur=ListSequence.fromList(darts).getElement(i);
      Dart next;
      if (i + 1 < ListSequence.fromList(darts).count()) {
        next=ListSequence.fromList(darts).getElement(i + 1);
      }
 else {
        next=ListSequence.fromList(darts).getElement(0);
      }
      Node mid=cur.getTarget();
      if (cur.getEdge().getSource() == mid && next.getEdge().getSource() == mid) {
        MapSequence.fromMap(myOrigNode).put(face,mid);
      }
      if (cur.getEdge().getTarget() == mid && next.getEdge().getTarget() == mid) {
        MapSequence.fromMap(myDestNode).put(face,mid);
      }
      if (cur.getEdge().getTarget() == mid && next.getEdge().getSource() == mid) {
        MapSequence.fromMap(myRightFaceForNode).put(mid,face);
      }
      if (cur.getEdge().getSource() == mid && next.getEdge().getTarget() == mid) {
        MapSequence.fromMap(myLeftFaceForNode).put(mid,face);
      }
    }
  }
  Face outerFace=myEmbeddedGraph.getOuterFace();
  MapSequence.fromMap(myLeftFaceForNode).put(mySource,outerFace);
  MapSequence.fromMap(myRightFaceForNode).put(mySource,outerFace);
  MapSequence.fromMap(myLeftFaceForNode).put(myTarget,outerFace);
  MapSequence.fromMap(myRightFaceForNode).put(myTarget,outerFace);
}
