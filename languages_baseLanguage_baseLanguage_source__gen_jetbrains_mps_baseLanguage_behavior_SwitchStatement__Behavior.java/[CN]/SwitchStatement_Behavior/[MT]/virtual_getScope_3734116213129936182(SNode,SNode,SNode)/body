{
  SNode childStatement=child;
  while (SNodeOperations.getParent(childStatement) != thisNode) {
    childStatement=SNodeOperations.getParent(childStatement);
  }
  if (SConceptOperations.isSubConceptOf(kind,"jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration")) {
    Scope nextScope=Scope.getScope(SNodeOperations.getParent(thisNode),child,kind);
    if (SLinkOperations.getTarget(thisNode,"expression",true) == childStatement) {
      return nextScope;
    }
    List<SNode> variables=new ArrayList<SNode>();
    for (    SNode caseNode : SLinkOperations.getTargets(thisNode,"case",true)) {
      if (caseNode == childStatement) {
        break;
      }
      ListSequence.fromList(variables).addSequence(ListSequence.fromList(StatementList_Behavior.call_getLocalVariableDeclarations_3986960521977638556(SLinkOperations.getTarget(caseNode,"body",true),null)));
    }
    Scope currentScope=new ISearchScope.Adapter(new SimpleSearchScope(variables));
    return (nextScope == null ? currentScope : new CompositeScope(currentScope,nextScope));
  }
  return null;
}
