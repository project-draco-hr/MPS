{
  SNode newNode=doSubstitute(pattern);
  if (context != null) {
    EditorCell selectedCell=context.getNodeEditorComponent().getSelectedCell();
    if (newNode == null) {
      if (selectedCell instanceof EditorCell_Label && ((EditorCell_Label)selectedCell).isEditable()) {
        EditorCell_Label cell=(EditorCell_Label)selectedCell;
        cell.end();
      }
    }
 else {
      context.selectWRTFocusPolicy(newNode,false);
    }
  }
  return newNode;
}
