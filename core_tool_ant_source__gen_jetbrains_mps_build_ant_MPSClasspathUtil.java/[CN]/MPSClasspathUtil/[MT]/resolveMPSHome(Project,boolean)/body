{
  String mpsHomePath=antProject.getProperty("mps.home");
  if ((mpsHomePath == null || mpsHomePath.length() == 0)) {
    mpsHomePath=antProject.getProperty("mps_home");
  }
  if (mpsHomePath == null || !(antProject.resolveFile(mpsHomePath).exists())) {
    if (failOtherwise) {
      throw new BuildException("Path to mps home expected. Specify mps.home property or mpsHome attribute.");
    }
 else {
      return null;
    }
  }
  return antProject.resolveFile(mpsHomePath);
}
