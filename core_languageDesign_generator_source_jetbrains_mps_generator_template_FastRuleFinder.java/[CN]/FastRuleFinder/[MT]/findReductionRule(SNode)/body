{
  AbstractConceptDeclaration concept=(AbstractConceptDeclaration)node.getConceptDeclarationAdapter();
  if (concept == null) {
    myGenerator.showWarningMessage(node,"skip reduction: couldn't find concept declaration adapter for " + node.getDebugText());
    return null;
  }
  List<Reduction_MappingRule> allRules=myRules_all.get(concept);
  if (allRules == null) {
    cacheAllApplicableRules(concept,SModelUtil_new.getBaseConcept());
    allRules=myRules_all.get(concept);
  }
  if (allRules == null) {
    return null;
  }
  for (  Reduction_MappingRule rule : allRules.toArray(new Reduction_MappingRule[allRules.size()])) {
    if (!isDisabledReductionForNode(node,rule)) {
      if (GeneratorUtil.checkCondition(rule.getConditionFunction(),false,node,rule.getNode(),myGenerator)) {
        registerReduction(node,rule);
        return rule;
      }
    }
  }
  return null;
}
