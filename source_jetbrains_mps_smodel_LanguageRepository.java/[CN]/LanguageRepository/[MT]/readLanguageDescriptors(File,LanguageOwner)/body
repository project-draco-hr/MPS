{
  List<Language> result=new LinkedList<Language>();
  if (!dir.isDirectory()) {
    return result;
  }
  File[] files=dir.listFiles(new FilenameFilter(){
    public boolean accept(    File dir,    String name){
      return name.endsWith(".mpl");
    }
  }
);
  for (  File file : files) {
    try {
      Language language=registerLanguage(file,owner);
      result.add(language);
    }
 catch (    Exception e) {
      LOG.error("Fail to load language from descriptor " + file.getAbsolutePath(),e);
    }
  }
  File[] dirs=dir.listFiles();
  for (  File childDir : dirs) {
    if (childDir.isDirectory()) {
      result.addAll(readLanguageDescriptors(childDir,owner));
    }
  }
  return result;
}
