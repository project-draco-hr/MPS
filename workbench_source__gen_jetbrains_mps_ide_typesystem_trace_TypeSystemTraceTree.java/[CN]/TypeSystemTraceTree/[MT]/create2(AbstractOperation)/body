{
  List<TypeSystemTraceTreeNode> children=new ArrayList<TypeSystemTraceTreeNode>();
  for (  AbstractOperation consequence : operation.getConsequences()) {
    TypeSystemTraceTreeNode node=create2(consequence);
    if (node != null) {
      children.add(node);
    }
  }
  if (!(filterNodeType(operation))) {
    return null;
  }
  if (!(showNode(operation)) && children.isEmpty()) {
    return null;
  }
  TypeSystemTraceTreeNode result=new TypeSystemTraceTreeNode(operation,myOperationContext,myCurrentContext.getState(),myEditorComponent);
  for (  TypeSystemTraceTreeNode node : children) {
    result.add(node);
  }
  if (operation instanceof AddErrorOperation || operation instanceof TraceWarningOperation) {
    myErrorNodes.add(result);
  }
  return result;
}
