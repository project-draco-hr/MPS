{
  TreePath path=getPathForLocation(x,y);
  final MPSTreeNode node=getNodeFromPath(path);
  if (node != null) {
    JPopupMenu menu=createPopupMenu(node);
    if (menu != null) {
      if (!getSelectedPaths().contains(pathToString(path))) {
        setSelectionPath(path);
      }
      menu.show(this,x,y);
      return;
    }
  }
  JPopupMenu defaultMenu=createDefaultPopupMenu();
  if (defaultMenu == null)   return;
  defaultMenu.show(this,x,y);
}
