{
  SearchResults<SNode> results=new SearchResults<SNode>();
  for (  SNode node : Sequence.fromIterable(references)) {
    for (    SReference ref : SNodeOperations.getReferences(((SNode)node))) {
      SNode targetNode=jetbrains.mps.util.SNodeOperations.getTargetNodeSilently(ref);
      if (targetNode == null) {
        continue;
      }
      if (from.contains(targetNode)) {
        continue;
      }
      if (!(to.contains(targetNode))) {
        continue;
      }
      results.getSearchResults().add(new SearchResult(node,"references"));
      break;
    }
    if (monitor.isCanceled()) {
      return results;
    }
    monitor.advance(1);
  }
  return results;
}
