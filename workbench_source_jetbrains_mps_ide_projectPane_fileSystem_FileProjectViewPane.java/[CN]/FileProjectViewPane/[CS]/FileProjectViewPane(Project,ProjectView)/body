{
  super(project);
  myProject=project;
  myProjectView=projectView;
  final VirtualFile baseDir=myProject.getBaseDir();
  myMPSTree=new MPSTree(){
    protected MPSTreeNode rebuild(){
      if (myProject != null && !myProject.isDisposed()) {
        final IFile root=VFileSystem.toIFile(baseDir);
        return new FolderTreeNode(new ProjectOperationContext(getProject()),myProject.getComponent(VcsFileStatusProvider.class),root);
      }
 else {
        return new TextTreeNode("No Project");
      }
    }
  }
;
  myTree=myMPSTree;
  myFileStatusListener=new FileStatusListener(){
    public void fileStatusesChanged(){
      rebuildTree();
    }
    public void fileStatusChanged(    @NotNull VirtualFile virtualFile){
      rebuildTree();
    }
  }
;
  myFileListener=new VirtualFileAdapter(){
    @Override public void fileCreated(    VirtualFileEvent event){
      rebuildTree();
    }
    @Override public void fileDeleted(    VirtualFileEvent event){
      rebuildTree();
    }
    @Override public void fileMoved(    VirtualFileMoveEvent event){
      rebuildTree();
    }
    @Override public void fileCopied(    VirtualFileCopyEvent event){
      rebuildTree();
    }
  }
;
}
