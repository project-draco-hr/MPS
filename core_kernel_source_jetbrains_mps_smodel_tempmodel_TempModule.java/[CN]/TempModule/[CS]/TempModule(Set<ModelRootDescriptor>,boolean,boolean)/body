{
  SModuleId id=ModuleId.regular();
  SModuleReference reference=new ModuleReference("TempModule" + id,id);
  setModuleReference(reference);
  myDescriptor=new ModuleDescriptor();
  myDescriptor.getModelRootDescriptors().addAll(modelRoots);
  setModuleDescriptor(myDescriptor,false);
  if (withSourceGen) {
    mySourceGen=createTempDirectory(reference.toString() + "_source_gen");
  }
 else {
    mySourceGen=null;
  }
  if (withJavaFacet) {
    IFile classesGen=createTempDirectory(reference.toString() + "_classes_gen");
    if (classesGen != null) {
      myJavaModuleFacet=new TempModuleJavaFacet(classesGen);
    }
 else {
      myJavaModuleFacet=null;
    }
  }
 else {
    myJavaModuleFacet=null;
  }
}
