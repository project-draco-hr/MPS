{
  executeWriteAction(new Runnable(){
    public void run(){
      ModuleManager manager=ModuleManager.getInstance(myProject);
      final Module module=manager.newModule(path,ModuleType.JAVA);
      ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
      LocalFileSystem localFileSystem=LocalFileSystem.getInstance();
      ProjectRootManager projectRootManager=myProject.getComponent(ProjectRootManager.class);
      rootManager.getModifiableModel().inheritJdk();
      rootManager.getModifiableModel().addContentEntry(localFileSystem.findFileByIoFile(new File(path,"source")));
      rootManager.getModifiableModel().addContentEntry(localFileSystem.findFileByIoFile(new File(path,"source_gen")));
      rootManager.getModifiableModel().commit();
    }
  }
);
}
