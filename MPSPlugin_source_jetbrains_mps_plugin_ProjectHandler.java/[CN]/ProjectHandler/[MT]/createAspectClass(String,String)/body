{
  executeWriteAction(new Runnable(){
    public void run(){
      final PsiManager psiManager=PsiManager.getInstance(myProject);
      VirtualFile sourceDir=null;
      Module module=findModule(path);
      if (module == null) {
        System.err.println("I can't find suitable module");
        return;
      }
      ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
      VirtualFile[] sourceRoots=rootManager.getSourceRoots();
      for (      VirtualFile file : sourceRoots) {
        if (file.getName().equals("source")) {
          sourceDir=file;
          break;
        }
        if (file.getName().equals("src")) {
          sourceDir=file;
          break;
        }
        sourceDir=file;
      }
      if (sourceDir == null) {
        System.out.println("I can't find directory with sources.");
        return;
      }
      PsiDirectory rootDir=psiManager.findDirectory(sourceDir);
      try {
        activateProjectWindow();
        JavaDirectoryService.getInstance().createClass(createPackagesForNamespace(rootDir,namespace),"Queries");
      }
 catch (      IncorrectOperationException e) {
        e.printStackTrace();
      }
    }
  }
);
}
