{
  final byte[][] result=new byte[1][];
  executeWriteAction(new Runnable(){
    public void run(){
      try {
        ProjectLevelVcsManager manager=myProject.getComponent(ProjectLevelVcsManager.class);
        VirtualFile file=LocalFileSystem.getInstance().findFileByIoFile(new File(path));
        if (file == null) {
          return;
        }
        AbstractVcs vcs=manager.getVcsFor(file);
        VcsHistorySession session=vcs.getVcsHistoryProvider().createSessionFor(new FilePathImpl(file));
        List<VcsFileRevision> revisions=session.getRevisionList();
        for (        VcsFileRevision r : revisions) {
          if (r.getRevisionNumber().asString().equals(revision)) {
            r.loadContent();
            result[0]=r.getContent();
          }
        }
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
);
  return result[0];
}
