{
  VirtualFile file=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(new File(path));
  if (file == null)   return null;
  int bestDistance=Integer.MAX_VALUE;
  Module bestModule=null;
  Module[] modules=ApplicationManager.getApplication().runReadAction(new Computable<Module[]>(){
    public Module[] compute(){
      return ModuleManager.getInstance(myProject).getModules();
    }
  }
);
  for (  Module module : modules) {
    ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
    for (    VirtualFile contentRoot : rootManager.getContentRoots()) {
      int distance=getDistance(contentRoot,file);
      if (distance != -1 && distance < bestDistance) {
        bestDistance=distance;
        bestModule=module;
      }
    }
  }
  return bestModule;
}
