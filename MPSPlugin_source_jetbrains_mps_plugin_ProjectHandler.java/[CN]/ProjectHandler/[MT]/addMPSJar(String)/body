{
  executeWriteAction(new Runnable(){
    public void run(){
      Module module=myProject.getComponent(ModuleManager.class).getModules()[0];
      ModifiableRootModel rootModel=module.getComponent(ModuleRootManager.class).getModifiableModel();
      LibraryTable table=LibraryTablesRegistrar.getInstance().getLibraryTable(myProject);
      Library library=table.createLibrary("MPS");
      Library.ModifiableModel libraryModel=library.getModifiableModel();
      try {
        File mpsJar=new File(mpsHome + File.separatorChar + "lib"+ File.separatorChar+ "mps.jar");
        File srcZip=new File(mpsHome + File.separatorChar + "src.zip");
        libraryModel.addRoot("jar://" + mpsJar.getCanonicalPath() + "!/",OrderRootType.CLASSES);
        libraryModel.addRoot("jar://" + srcZip + "!/",OrderRootType.SOURCES);
        libraryModel.commit();
        rootModel.addLibraryEntry(library);
        rootModel.commit();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
);
}
