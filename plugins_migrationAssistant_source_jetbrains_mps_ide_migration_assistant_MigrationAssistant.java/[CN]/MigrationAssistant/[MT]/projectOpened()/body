{
  final MPSProjectMigrationState migrationState=myProject.getComponent(MPSProjectMigrationState.class);
  if (migrationState.isMigrationRequired()) {
    StartupManager.getInstance(myProject).registerPostStartupActivity(new Runnable(){
      public void run(){
        int i=Messages.showOkCancelDialog(myProject,"This project requires migration","Migration Assistant","Proceed","Abort",null);
        if (i == 0) {
          migrationState.migrationStarted();
          migrationState.migrationFinished();
        }
 else {
          migrationState.migrationAborted();
        }
      }
    }
);
  }
}
