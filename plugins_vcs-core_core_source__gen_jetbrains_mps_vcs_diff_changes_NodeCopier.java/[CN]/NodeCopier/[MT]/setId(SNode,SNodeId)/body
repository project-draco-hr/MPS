{
  SModel model=((SModel)SNodeOperations.getModel(node));
  if (SNodeOperations.getParent(node) == null) {
    SNodeOperations.detachNode(node);
    ((jetbrains.mps.smodel.SNode)node).setId(id);
    SModelOperations.addRootNode(model,node);
  }
 else {
    SNode stubNode=new jetbrains.mps.smodel.SNode(InternUtil.intern("jetbrains.mps.lang.core.structure.BaseConcept"));
    SNodeOperations.replaceWithAnother(node,stubNode);
    ((jetbrains.mps.smodel.SNode)node).setId(id);
    SNodeOperations.replaceWithAnother(stubNode,node);
  }
}
