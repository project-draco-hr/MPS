{
  List<Item> items=new ArrayList<Item>();
  Map<IModule,Item> module2Item=new HashMap<IModule,Item>();
  for (  IModule module : plugins.keySet()) {
    Item item=new Item(module,-1);
    items.add(item);
    module2Item.put(module,item);
  }
  int initIndex=0;
  for (  Item item : items) {
    if (item.initIndex == -1) {
      initIndex=init(item,module2Item,initIndex);
    }
  }
  T[] result=(T[])new Object[initIndex];
  for (  Item item : items) {
    result[item.initIndex]=plugins.get(item.module);
  }
  return new ArrayList<T>(Arrays.asList(result));
}
