{
  try {
    super.doUpdate(context);
    if (!(this.fillFieldsIfNecessary(context))) {
      this.setEnabled(false);
      this.setVisible(this.isAlwaysVisible);
      return;
    }
    for (    SNode n : this.nodes) {
      if (!(SNodeOperations.isInstanceOf(n,"jetbrains.mps.baseLanguage.structure.Statement"))) {
        this.setVisible(false);
        return;
      }
    }
    this.setVisible(true);
  }
 catch (  Throwable t) {
    ExtractMethod_Action.LOG.error("User's action doUpdate method failed. Action:" + "ExtractMethod",t);
    this.setEnabled(false);
    this.setVisible(this.isAlwaysVisible);
  }
}
