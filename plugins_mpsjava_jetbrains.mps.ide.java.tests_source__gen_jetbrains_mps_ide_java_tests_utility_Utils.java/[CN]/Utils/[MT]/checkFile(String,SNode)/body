{
  JavaSourceStubModelRoot mr=new JavaSourceStubModelRoot();
  mr.setModule(getModule());
  mr.setContentRoot(path);
  mr.addFile(JavaSourceStubModelRoot.SOURCE_ROOTS,path);
  Iterator<SModel> models=mr.loadModels().iterator();
  Assert.assertTrue("No models returned from model root",models.hasNext());
  Iterator<? extends SNode> roots=models.next().getRootNodes().iterator();
  Assert.assertTrue("The model has no roots",roots.hasNext());
  SNode result=SNodeOperations.cast((roots.next()),"jetbrains.mps.baseLanguage.structure.Classifier");
  result=SNodeOperations.copyNode(result);
  expected=SNodeOperations.copyNode(expected);
  NodePatcher.removeStatements(expected);
  NodePatcher.fixNonStatic(expected);
  NodePatcher.fixNonStatic(result);
  NodePatcher.copyImportAttrs(result,expected);
  Assert.assertEquals(null,NodesMatcher.matchNodes(ListSequence.fromListAndArray(new ArrayList<SNode>(),expected),ListSequence.fromListAndArray(new ArrayList<SNode>(),result)));
}
