{
  Set<ModuleReference> remove=new HashSet<ModuleReference>();
  Set<ModuleReference> add=new LinkedHashSet<ModuleReference>();
  for (  ModuleReference ref : refs) {
    ModuleReference newRef=ref.update();
    if (ref.differs(newRef)) {
      remove.add(ref);
      add.add(newRef);
    }
  }
  refs.removeAll(remove);
  refs.addAll(add);
  return !remove.isEmpty();
}
