{
  Set<ModuleReference> remove=new HashSet<ModuleReference>();
  Set<ModuleReference> add=new LinkedHashSet<ModuleReference>();
  for (  ModuleReference ref : refs) {
    SModuleReference newRef=ModuleReference.update(ref);
    if (ModuleReference.differs(ref,newRef)) {
      remove.add(ref);
      add.add((ModuleReference)newRef);
    }
  }
  refs.removeAll(remove);
  refs.addAll(add);
  return !remove.isEmpty();
}
