{
  Set<String> namespaces=new HashSet<String>();
  for (  jetbrains.mps.project.structure.modules.ModuleReference ref : model.engagedOnGenerationLanguages()) {
    namespaces.add(ref.getModuleFqName());
  }
  for (  SNode root : model.roots()) {
    collectLanguageNamespaces(root,namespaces,excludeTLBase);
  }
  return CollectionUtil.asList(namespaces);
}
