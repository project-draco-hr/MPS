{
  final Set<SModule> toCompile=new LinkedHashSet<SModule>();
  toCompile.add(mySolution);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      ModuleMaker moduleMaker=new ModuleMaker();
      moduleMaker.clean(toCompile,new EmptyProgressMonitor());
      MPSCompilationResult result=moduleMaker.make(toCompile,new EmptyProgressMonitor(),new JavaCompilerOptions(version));
      boolean ok=result.isOk();
      if (needOk) {
        Assert.assertTrue(ok);
      }
 else {
        Assert.assertFalse(ok);
      }
    }
  }
);
}
