{
  List<IChooseComponent> components=ModelAccess.instance().runReadAction(new Computable<List<IChooseComponent>>(){
    public List<IChooseComponent> compute(){
      return getChooseComponents(refactoringContext);
    }
  }
);
  if (components.isEmpty()) {
    return ModelAccess.instance().runReadAction(new Computable<Boolean>(){
      public Boolean compute(){
        return isApplicable(refactoringContext);
      }
    }
);
  }
 else {
    ChooseRefactoringInputDataDialog dialog=new ChooseRefactoringInputDataDialog(this,refactoringContext,components);
    dialog.showDialog();
    return dialog.getResult();
  }
}
