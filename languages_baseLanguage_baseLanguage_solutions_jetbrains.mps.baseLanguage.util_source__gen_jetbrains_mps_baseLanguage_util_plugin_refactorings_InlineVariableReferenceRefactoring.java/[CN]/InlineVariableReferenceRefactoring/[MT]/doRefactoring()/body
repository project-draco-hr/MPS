{
  SNode variable=SLinkOperations.getTarget(this.myReference,"variableDeclaration",false);
  SNode nodeToSelect;
  if (myAssignment == null) {
    nodeToSelect=SNodeOperations.copyNode(SLinkOperations.getTarget(SLinkOperations.getTarget(this.myReference,"variableDeclaration",false),"initializer",true));
    SNodeOperations.replaceWithAnother(this.myReference,nodeToSelect);
  }
 else   if (SNodeOperations.isInstanceOf(myAssignment,"jetbrains.mps.baseLanguage.structure.VariableDeclaration")) {
    nodeToSelect=SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(myAssignment,"jetbrains.mps.baseLanguage.structure.VariableDeclaration"),"initializer",true));
    SNodeOperations.replaceWithAnother(this.myReference,nodeToSelect);
  }
 else {
    nodeToSelect=SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(myAssignment,"jetbrains.mps.baseLanguage.structure.AssignmentExpression"),"rValue",true));
    SNodeOperations.replaceWithAnother(this.myReference,nodeToSelect);
    this.optimizeAssignment(SNodeOperations.cast(myAssignment,"jetbrains.mps.baseLanguage.structure.AssignmentExpression"),variable);
  }
  this.optimizeDeclaration(variable);
  return nodeToSelect;
}
