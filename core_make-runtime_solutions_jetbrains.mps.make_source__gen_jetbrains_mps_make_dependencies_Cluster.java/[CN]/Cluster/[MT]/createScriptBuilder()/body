{
  ScriptBuilder scb=new ScriptBuilder();
  for (  SLanguage ns : allUsedLangNamespaces()) {
    LanguageRuntime lr=myLanguageRegistry.getLanguage(ns);
    MakeAspectDescriptor aspect=(lr == null ? null : lr.getAspect(MakeAspectDescriptor.class));
    Iterable<IFacet> fcts=(aspect == null ? Sequence.fromIterable(Collections.<IFacet>emptyList()) : aspect.getManifest().facets());
    scb.withFacetNames(Sequence.fromIterable(fcts).select(new ISelector<IFacet,IFacet.Name>(){
      public IFacet.Name select(      IFacet fct){
        return fct.getName();
      }
    }
));
    scb.withFacetNames(Sequence.fromIterable(FacetRegistry.getInstance().getFacetsForLanguage(ns.getQualifiedName())).select(new ISelector<IFacet,IFacet.Name>(){
      public IFacet.Name select(      IFacet fct){
        return fct.getName();
      }
    }
));
  }
  return scb.withFinalTarget(new ITarget.Name("jetbrains.mps.make.facets.Make.make"));
}
