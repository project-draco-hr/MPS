{
  Collection<File> dirs=getAllDirs(basedir);
  for (  File dir : dirs) {
    final File[] files=dir.listFiles();
    if (files.length == 0)     continue;
    instWriter.newLine();
    instWriter.newLine();
    if (dir.getAbsolutePath().length() > basedir.getAbsolutePath().length()) {
      instWriter.write("SetOutPath \"$INSTDIR\\" + getRelativePath(dir.getAbsolutePath(),basedir) + "\"");
    }
 else {
      instWriter.write("SetOutPath $INSTDIR");
    }
    for (    File file : files) {
      if (!file.isDirectory()) {
        instWriter.newLine();
        instWriter.write("File \"" + getRelativePath(file.getAbsolutePath(),myCurrentDir.getAbsolutePath()) + "\"");
      }
    }
  }
}
