{
  boolean topPriorityGroup=false;
  List<List<TemplateMappingConfiguration>> mappingSets=new ArrayList<List<TemplateMappingConfiguration>>();
  while (!myPriorityMap.isEmpty()) {
    List<TemplateMappingConfiguration> mappingSet=createMappingSet(topPriorityGroup);
    if (mappingSet.isEmpty()) {
      if (!topPriorityGroup) {
        topPriorityGroup=true;
        continue;
      }
      break;
    }
    mappingSets.add(mappingSet);
  }
  Collections.reverse(mappingSets);
  for (  List<TemplateMappingConfiguration> mappingSet : mappingSets) {
    sort(mappingSet);
  }
  return mappingSets;
}
