{
  if (myState == null) {
    myState=new EditorContextHintsSettings();
    myState.setSettings(new HashMap<String,Map<EditorContextHint,Boolean>>());
  }
  myListener=new LanguageRegistryListener(){
    @Override public void languagesLoaded(    Iterable<LanguageRuntime> languages){
      updateHintsFromLanguages(languages);
    }
    @Override public void languagesUnloaded(    Iterable<LanguageRuntime> languages){
      removeHintsFromUnloadedLanguages(languages);
    }
  }
;
  LanguageRegistry.getInstance().addRegistryListener(myListener);
  updateHintsFromLanguages(LanguageRegistry.getInstance().getAvailableLanguages());
}
