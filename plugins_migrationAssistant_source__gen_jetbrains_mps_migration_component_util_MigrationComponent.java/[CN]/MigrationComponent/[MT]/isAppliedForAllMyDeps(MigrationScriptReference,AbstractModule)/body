{
  Iterable<SDependency> declaredDependencies=module.getDeclaredDependencies();
  return Sequence.fromIterable(declaredDependencies).translate(new ITranslator2<SDependency,SModule>(){
    public Iterable<SModule> translate(    SDependency it){
      return new GlobalModuleDependenciesManager(module).getModules(GlobalModuleDependenciesManager.Deptype.VISIBLE);
    }
  }
).all(new IWhereFilter<SModule>(){
    public boolean accept(    SModule it){
      return isApplied(script,(AbstractModule)it);
    }
  }
);
}
