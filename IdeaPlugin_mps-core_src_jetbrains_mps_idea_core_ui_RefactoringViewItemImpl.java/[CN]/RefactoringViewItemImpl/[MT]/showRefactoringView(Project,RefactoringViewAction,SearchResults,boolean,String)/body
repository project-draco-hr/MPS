{
  UsageViewManager viewManager=UsageViewManager.getInstance(project);
  ArrayList<UsageTarget> usageTargets=new ArrayList<UsageTarget>();
  for (  Object searchedNode : searchResults.getSearchedNodes()) {
    if (searchedNode instanceof SNode) {
      usageTargets.add(new NodeUsageTarget((SNode)searchedNode,project));
    }
  }
  ArrayList<Usage> usages=new ArrayList<Usage>();
  for (  Object searchResult : searchResults.getSearchResults()) {
    Object usage=((SearchResult)searchResult).getObject();
    if (usage instanceof SNode) {
      usages.add(new NodeUsage((SNode)usage,project));
    }
  }
  final UsageViewPresentation presentation=createPresentation(usages.toArray(new Usage[usages.size()]));
  usageView=viewManager.showUsages(usageTargets.toArray(new UsageTarget[usageTargets.size()]),usages.toArray(new Usage[usages.size()]),presentation);
  usageView.addPerformOperationAction(new Runnable(){
    @Override public void run(){
      callback.performAction(RefactoringViewItemImpl.this);
    }
  }
,name,"",RefactoringBundle.message("usageView.doAction"));
}
