{
  myEventsManager.addGlobalModelListener(new SModelAdapter(){
    @Override public void modelReloaded(    SModelDescriptor sm){
      for (      SNode root : sm.getSModel().getRoots()) {
        MPSNodeVirtualFile file=MPSNodesVirtualFileSystem.getInstance().getFileFor(root);
        for (        Project p : myProjectManager.getOpenProjects()) {
          UndoManager.getInstance(p).clearUndoRedoQueue(file);
        }
      }
    }
  }
);
}
