{
  Set<IFile> result=SetSequence.fromSet(new HashSet<IFile>());
  for (  IFile entry : Sequence.fromIterable(onlyLeaves(filesAndDirs))) {
    if (!(entry.isDirectory()) && accept(entry)) {
      SetSequence.fromSet(result).addElement(entry);
      continue;
    }
    for (    IFile file : ListSequence.fromList(IFileUtils.getAllFiles(entry))) {
      if (accept(file)) {
        SetSequence.fromSet(result).addElement(file);
      }
    }
  }
  return result;
}
