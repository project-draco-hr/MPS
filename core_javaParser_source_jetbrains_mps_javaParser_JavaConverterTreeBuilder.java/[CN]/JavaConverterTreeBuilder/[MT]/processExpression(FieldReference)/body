{
  String role;
  SNode sourceNode;
  jetbrains.mps.baseLanguage.structure.Expression result;
  FieldBinding fieldBinding=x.binding;
  if (fieldBinding.isStatic()) {
    role=StaticFieldReference.VARIABLE_DECLARATION;
    StaticFieldReference sfr=StaticFieldReference.newInstance(myCurrentModel);
    sfr.setClassifier((Classifier)myBindingMap.get(fieldBinding));
    sourceNode=sfr.getNode();
    result=sfr;
  }
 else {
    role=FieldReferenceOperation.FIELD_DECLARATION;
    jetbrains.mps.baseLanguage.structure.Expression instance=processExpressionRefl(x.receiver);
    if (fieldBinding.declaringClass == null) {
      return createArrayLengthExpression(instance,fieldBinding);
    }
    FieldReferenceOperation fieldRef=FieldReferenceOperation.newInstance(myCurrentModel);
    DotExpression dotExpression=DotExpression.newInstance(myCurrentModel);
    dotExpression.setOperation(fieldRef);
    dotExpression.setOperand(instance);
    sourceNode=fieldRef.getNode();
    result=dotExpression;
  }
  SReference fieldReference=myTypesProvider.createFieldReference(x.binding,role,sourceNode);
  sourceNode.addReference(fieldReference);
  return result;
}
