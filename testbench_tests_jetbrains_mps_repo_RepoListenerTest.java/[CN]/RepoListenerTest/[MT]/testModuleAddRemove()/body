{
  final Project project=createProject();
  final AttachRepoListener l=new AttachRepoListener();
  final SRepositoryExt repository=(SRepositoryExt)project.getRepository();
  attach(MPSModuleRepository.getInstance(),l);
  l.checkModuleEvents(0,0,0);
  final BaseMPSModuleOwner moduleOwner=new BaseMPSModuleOwner();
  final Solution solution=new CreateSolution(repository,moduleOwner).execute();
  l.checkModuleEvents(1,0,0);
  new RemoveModule(repository,solution,moduleOwner).execute();
  l.checkModuleEvents(1,1,1);
  detach(MPSModuleRepository.getInstance(),l);
  l.checkModuleEvents(1,1,1);
  closeProject();
}
