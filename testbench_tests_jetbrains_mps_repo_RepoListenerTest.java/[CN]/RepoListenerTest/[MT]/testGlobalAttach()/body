{
  final AttachRepoListener l1=new AttachRepoListener();
  SRepositoryRegistry.getInstance().addGlobalListener(l1);
  l1.checkStarted(1);
  l1.checkStopped(0);
  createProject();
  final int distinctRepositories=1;
  l1.checkStarted(distinctRepositories);
  l1.checkStopped(0);
  final AttachRepoListener l2=new AttachRepoListener();
  SRepositoryRegistry.getInstance().addGlobalListener(l2);
  l1.checkStarted(distinctRepositories);
  l1.checkStopped(0);
  l2.checkStarted(distinctRepositories);
  l2.checkStopped(0);
  SRepositoryRegistry.getInstance().removeGlobalListener(l2);
  l1.checkStarted(distinctRepositories);
  l1.checkStopped(0);
  l2.checkStarted(distinctRepositories);
  l2.checkStopped(distinctRepositories);
  closeProject();
  l1.checkStarted(distinctRepositories);
  l1.checkStopped(distinctRepositories - 1);
  l2.checkStarted(distinctRepositories);
  l2.checkStopped(distinctRepositories);
  SRepositoryRegistry.getInstance().removeGlobalListener(l1);
  l1.checkStarted(distinctRepositories);
  l1.checkStopped(distinctRepositories);
  l2.checkStarted(distinctRepositories);
  l2.checkStopped(distinctRepositories);
}
