{
  boolean compiledSuccessfully=true;
  if (module != null && myGenerationType.requiresCompilationAfterGeneration()) {
    if (!isIDEAPresent() && !module.isCompileInMPS()) {
      compiledSuccessfully=false;
    }
 else {
      checkMonitorCanceled();
      CompilationResult compilationResult;
      TaskProgressHelper taskProgressHelper=new TaskProgressHelper(this);
      if (!module.isCompileInMPS()) {
        taskProgressHelper.startLeafTask(ModelsProgressUtil.TASK_NAME_REFRESH_FS,myProgress,totalJob,startJobTime);
        getProjectHandler().refreshFS();
        taskProgressHelper.finishTask();
        String info="compiling in IntelliJ IDEA...";
        setText2(info,totalJob,startJobTime);
        info(info);
        taskProgressHelper.startLeafTask(ModelsProgressUtil.TASK_NAME_COMPILE_IN_IDEA,myProgress,totalJob,startJobTime);
        compilationResult=getProjectHandler().buildModule(module.getGeneratorOutputPath());
        taskProgressHelper.finishTask();
      }
 else {
        taskProgressHelper.startLeafTask(ModelsProgressUtil.TASK_NAME_COMPILE_IN_MPS,myProgress,totalJob,startJobTime);
        String info="compiling in JetBrains MPS...";
        setText2(info,totalJob,startJobTime);
        info(info);
        compilationResult=new ModuleMaker().make(CollectionUtil.asSet(module),new EmptyProgressIndicator());
        taskProgressHelper.finishTask();
      }
      if (compilationResult == null || compilationResult.getErrors() > 0) {
        compiledSuccessfully=false;
      }
      if (compilationResult != null) {
        if (compilationResult.getErrors() > 0) {
          error("" + compilationResult);
        }
 else         if (compilationResult.getWarnings() > 0) {
          warning("" + compilationResult);
        }
 else {
          info("" + compilationResult);
        }
      }
    }
    setText2("",totalJob,startJobTime);
    checkMonitorCanceled();
  }
  return compiledSuccessfully;
}
