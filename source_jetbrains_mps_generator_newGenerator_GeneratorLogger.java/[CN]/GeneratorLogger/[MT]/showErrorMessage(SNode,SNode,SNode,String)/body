{
  myErrorsCount++;
  if (ruleNode != null) {
    if (myFailedRules.contains(ruleNode)) {
      return;
    }
    myFailedRules.add(ruleNode);
  }
  showErrorMessage((templateNode != null ? templateNode : ruleNode),message);
  if (sourceNode != null) {
    addMessage(new Message(MessageKind.ERROR,"-- was source node: " + sourceNode.getDebugText(),new NodeWithContext(sourceNode,myOperationContext)));
  }
  if (ruleNode != null) {
    addMessage(new Message(MessageKind.ERROR,"-- was rule: " + ruleNode.getDebugText(),new NodeWithContext(ruleNode,myOperationContext)));
  }
  if (templateNode != null) {
    addMessage(new Message(MessageKind.ERROR,"-- was template: " + templateNode.getDebugText(),new NodeWithContext(templateNode,myOperationContext)));
  }
}
