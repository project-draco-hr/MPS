{
  monitor.start(getDescription(),0);
  try {
    Set<SNode> nodes=SetSequence.fromSet(new HashSet<SNode>());
    SetSequence.fromSet(nodes).addElement(node);
    for (    SNode child : ListSequence.fromList(SNodeOperations.getDescendants(node,null,false,new String[]{}))) {
      SetSequence.fromSet(nodes).addElement(child);
    }
    Set<SReference> resRefs=FindUsagesManager.getInstance().findUsages(nodes,SearchType.USAGES,scope,monitor);
    for (    SReference reference : resRefs) {
      SNode snode=((SNode)reference.getSourceNode());
      if (!(SetSequence.fromSet(nodes).contains(snode))) {
        ListSequence.fromList(_results).addElement(snode);
      }
    }
  }
  finally {
    monitor.done();
  }
}
