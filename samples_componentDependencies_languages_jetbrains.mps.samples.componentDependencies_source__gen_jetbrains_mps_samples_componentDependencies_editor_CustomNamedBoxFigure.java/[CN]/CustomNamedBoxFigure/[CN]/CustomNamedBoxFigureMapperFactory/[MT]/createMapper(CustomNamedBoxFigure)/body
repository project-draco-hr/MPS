{
  return new NamedBoxFigure.NamedBoxFigureMapper<CustomNamedBoxFigure>(figure){
    @Override protected void registerSynchronizers(    Mapper.SynchronizersConfiguration configuration){
      super.registerSynchronizers(configuration);
      configuration.add(Synchronizers.forProperty(figure.parent(),new WritableProperty<View>(){
        public void set(        View parentView){
          while (parentView != null) {
            if (parentView instanceof DiagramNodeView) {
              ((DiagramNodeView)parentView).setPortsDirection(GridDirection.DOWN);
            }
            parentView=parentView.parent().get();
          }
        }
      }
));
    }
  }
;
}
