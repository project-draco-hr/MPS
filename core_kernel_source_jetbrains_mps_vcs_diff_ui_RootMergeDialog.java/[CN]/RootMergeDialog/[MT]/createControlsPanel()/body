{
  JPanel controlPanel=new JPanel(new FlowLayout(FlowLayout.LEFT));
  controlPanel.add(new JButton(new AbstractAction("Revert all"){
    public void actionPerformed(    ActionEvent e){
      ModelAccess.instance().runWriteActionInCommand(new Runnable(){
        public void run(){
          List<SNodeId> ids=new ArrayList<SNodeId>();
          addNodeIds(ids,myChange1Model);
          addNodeIds(ids,myResultModel);
          addNodeIds(ids,myChange2Model);
          for (          Change change : new ArrayList<Change>(myMerger.getExcludedChanges())) {
            if (ids.contains(change.getAffectedNodeId())) {
              myMerger.includeChange(change);
            }
          }
          for (          Change change : new ArrayList<Change>(myMerger.getApplyedChanges())) {
            if (ids.contains(change.getAffectedNodeId())) {
              myMerger.getApplyedChanges().remove(change);
            }
          }
          rebuildChangeBlocks();
        }
      }
);
    }
  }
));
  return controlPanel;
}
