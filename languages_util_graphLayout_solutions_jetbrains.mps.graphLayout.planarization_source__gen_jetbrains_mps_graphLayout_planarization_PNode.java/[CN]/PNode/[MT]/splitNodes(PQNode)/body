{
  PQNode newFullNode=new PNode(myGraphNode,null);
  newFullNode.setState(PQNode.State.FULL);
  PQNode newEmptyNode=new PNode(myGraphNode,null);
  newEmptyNode.setState(PQNode.State.EMPTY);
  for (  PQNode child : ListSequence.<PQNode>fromList(getChildren())) {
    if (child.getState() == PQNode.State.FULL) {
      newFullNode.addLastChild(child);
    }
    if (child.getState() == PQNode.State.EMPTY) {
      newEmptyNode.addLastChild(child);
    }
  }
  if (ListSequence.<PQNode>fromList(newFullNode.getChildren()).count() > 0) {
    replacement.addLastChild(newFullNode);
  }
  if (ListSequence.<PQNode>fromList(newEmptyNode.getChildren()).count() > 0) {
    replacement.addFirstChild(newEmptyNode);
  }
  replacement.getEdgesOrder().addEdge(myGraphNode,myGraphEdge);
  replacement.setParent(getParent());
}
