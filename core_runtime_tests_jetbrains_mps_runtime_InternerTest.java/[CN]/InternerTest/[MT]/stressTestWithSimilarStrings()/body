{
  final int maxObjects=5000;
  final int maxThreads=Runtime.getRuntime().availableProcessors() * 20;
  final int maxRepetitions=100000;
  long refTime=computeMedian(new LongProducer(){
    @Override public long produce(){
      return computePerformanceBenchmark(maxThreads);
    }
  }
);
  long time=computeMedian(new LongProducer(){
    @Override public long produce(){
      return loadTestWithSimilarStrings(maxObjects,maxThreads,maxRepetitions);
    }
  }
);
  double ratio=time / (double)refTime;
  Assert.assertTrue("Interner perfomance is not within bounds: " + ratio,0.45 < ratio && ratio < 1.95);
}
