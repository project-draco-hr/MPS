{
  FileEditor[] editors=FileEditorManager.getInstance(project).getEditors(file);
  if (editors != null && editors.length > 0) {
    FileEditor editor=editors[0];
    if (editor instanceof MPSFileNodeEditor) {
      IEditor nodeEditor=((MPSFileNodeEditor)editor).getNodeEditor();
      if (nodeEditor instanceof TabbedEditor) {
        TabbedEditor tabbedEditor=(TabbedEditor)nodeEditor;
        EditorComponent tabEditor=tabbedEditor.getTabbedPane().getCurrentTab().getCurrentEditorComponent();
        if (tabEditor instanceof NodeEditorComponent) {
          final SNode node=((NodeEditorComponent)tabEditor).getEditedNode();
          if (node != null) {
            final StringBuilder sb=new StringBuilder();
            ModelAccess.instance().runReadAction(new Runnable(){
              public void run(){
                sb.append(node.getPresentation());
              }
            }
);
            return sb.toString();
          }
        }
      }
    }
  }
  return null;
}
