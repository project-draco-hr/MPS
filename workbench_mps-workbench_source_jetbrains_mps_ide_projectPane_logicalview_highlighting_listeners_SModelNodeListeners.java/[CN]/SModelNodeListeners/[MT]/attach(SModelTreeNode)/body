{
  final SModel model=node.getModel();
  if (model != null) {
    boolean modelSeenFirstTime=true;
synchronized (myTreeNodes) {
      Collection<SModelTreeNode> knownNodes=myTreeNodes.get(model.getReference());
      if (knownNodes == null) {
        myTreeNodes.put(model.getReference(),knownNodes=new ArrayList<SModelTreeNode>(3));
      }
 else {
        modelSeenFirstTime=false;
      }
      knownNodes.add(node);
    }
    if (modelSeenFirstTime) {
      ((SModelInternal)model).addModelListener(myModelChangeListener);
      myEventsListener.add(model);
    }
  }
  refreshTreeNodes(node);
}
