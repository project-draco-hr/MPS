{
  MultiMap<SModel,SModelEvent> byModel=new MultiMap<SModel,SModelEvent>();
  for (  SModelEvent e : events) {
    final SModel model=e.getModel();
    if (model instanceof EditableSModel) {
      byModel.putValue(model,e);
    }
  }
  for (  SModel m : byModel.keySet()) {
    for (    SModelTreeNode treeNode : findTreeNode(m)) {
      TreeStructureUpdate treeUpdater=new TreeStructureUpdate(treeNode.getOperationContext().getProject(),treeNode);
      treeUpdater.setDependencyRecorder(treeNode.getDependencyRecorder());
      treeUpdater.eventsHappenedInCommand(new ArrayList<SModelEvent>(byModel.get(m)));
    }
  }
}
