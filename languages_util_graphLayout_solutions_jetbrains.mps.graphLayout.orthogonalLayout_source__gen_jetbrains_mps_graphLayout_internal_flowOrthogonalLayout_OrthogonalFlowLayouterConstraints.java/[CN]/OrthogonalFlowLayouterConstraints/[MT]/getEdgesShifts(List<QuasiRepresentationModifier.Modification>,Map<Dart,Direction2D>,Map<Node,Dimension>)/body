{
  Map<Edge,Integer> edgeShifts=MapSequence.<Edge,Integer>fromMap(new HashMap<Edge,Integer>());
  for (  QuasiRepresentationModifier.Modification modification : ListSequence.<QuasiRepresentationModifier.Modification>fromList(modifications)) {
    List<Edge> edges=modification.getNewEdges();
    Node node=modification.getSource();
    Direction2D dir=MapSequence.<Dart,Direction2D>fromMap(directions).get(modification.getSourceDart());
    int nodeLength;
    if (dir.isVertical()) {
      nodeLength=MapSequence.<Node,Dimension>fromMap(nodeSizes).get(node).width / 2;
    }
 else {
      nodeLength=MapSequence.<Node,Dimension>fromMap(nodeSizes).get(node).height / 2;
    }
    nodeLength=Math.min(nodeLength,myUnitLength);
    int unitShift=nodeLength / ListSequence.<Edge>fromList(edges).count();
    int curShift=0;
    for (    Edge edge : ListSequence.<Edge>fromList(edges)) {
      MapSequence.<Edge,Integer>fromMap(edgeShifts).put(edge,curShift);
      curShift+=unitShift;
    }
  }
  return edgeShifts;
}
