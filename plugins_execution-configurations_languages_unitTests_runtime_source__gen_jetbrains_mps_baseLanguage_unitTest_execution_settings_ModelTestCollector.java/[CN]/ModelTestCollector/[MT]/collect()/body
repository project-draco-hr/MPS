{
  List<ITestNodeWrapper> result=ListSequence.fromList(new ArrayList<ITestNodeWrapper>());
  Collection<SNode> roots=IterableUtil.asCollection(myModel.getRootNodes());
  myMonitor.start("model " + myModel.getName(),roots.size());
  try {
    for (    SNode root : CollectionSequence.fromCollection(roots)) {
      if (myMonitor.isCanceled()) {
        return ListSequence.fromList(new ArrayList<ITestNodeWrapper>());
      }
      ITestNodeWrapper wrappedNode=TestNodeWrapperFactory.tryToWrap(root);
      if (wrappedNode != null) {
        ListSequence.fromList(result).addElement(wrappedNode);
        if (myBreakOnFirstFound) {
          return result;
        }
      }
      myMonitor.advance(1);
    }
  }
  finally {
    myMonitor.done();
  }
  return result;
}
