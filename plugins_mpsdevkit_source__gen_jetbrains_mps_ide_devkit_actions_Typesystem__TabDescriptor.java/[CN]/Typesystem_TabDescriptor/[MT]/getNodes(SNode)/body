{
  List<SNode> rules=GoToRulesHelper.getRules(node,true);
  return ListSequence.fromList(rules).sort(new Comparator<SNode>(){
    public int compare(    SNode a,    SNode b){
      boolean aConceptRef=SNodeOperations.isInstanceOf(SLinkOperations.getTarget(a,MetaAdapterFactory.getContainmentLink(new UUID(8817443762339858024l,-6091446231697526094l),1174648085619l,1174648101952l,"applicableNode")),"jetbrains.mps.lang.typesystem.structure.ConceptReference");
      boolean bConceptRef=SNodeOperations.isInstanceOf(SLinkOperations.getTarget(b,MetaAdapterFactory.getContainmentLink(new UUID(8817443762339858024l,-6091446231697526094l),1174648085619l,1174648101952l,"applicableNode")),"jetbrains.mps.lang.typesystem.structure.ConceptReference");
      if (aConceptRef && !(bConceptRef)) {
        return 1;
      }
      if (!(aConceptRef) && bConceptRef) {
        return -1;
      }
      if (aConceptRef && bConceptRef) {
        SNode aConcept=SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(a,MetaAdapterFactory.getContainmentLink(new UUID(8817443762339858024l,-6091446231697526094l),1174648085619l,1174648101952l,"applicableNode")),"jetbrains.mps.lang.typesystem.structure.ConceptReference"),MetaAdapterFactory.getReferenceLink(new UUID(8817443762339858024l,-6091446231697526094l),1174642788531l,1174642800329l,"concept"));
        SNode bConcept=SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(b,MetaAdapterFactory.getContainmentLink(new UUID(8817443762339858024l,-6091446231697526094l),1174648085619l,1174648101952l,"applicableNode")),"jetbrains.mps.lang.typesystem.structure.ConceptReference"),MetaAdapterFactory.getReferenceLink(new UUID(8817443762339858024l,-6091446231697526094l),1174642788531l,1174642800329l,"concept"));
        if (SConceptOperations.isSubConceptOf(aConcept,NameUtil.nodeFQName(bConcept))) {
          return 1;
        }
        if (SConceptOperations.isSubConceptOf(bConcept,NameUtil.nodeFQName(aConcept))) {
          return -1;
        }
      }
      return 0;
    }
  }
,false).toListSequence();
}
