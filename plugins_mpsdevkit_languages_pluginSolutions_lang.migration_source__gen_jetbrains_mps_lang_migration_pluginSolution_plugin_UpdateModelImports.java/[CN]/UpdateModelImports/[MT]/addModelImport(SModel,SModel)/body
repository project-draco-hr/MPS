{
  if (!(model instanceof SModelInternal)) {
    return;
  }
  if (!(model.getModule() instanceof AbstractModule)) {
    return;
  }
  if (targetModel == null) {
    return;
  }
  if (targetModel.getModule() == null) {
    return;
  }
  SModelInternal modelInternal=(SModelInternal)model;
  AbstractModule module=(AbstractModule)model.getModule();
  SModule targetModule=targetModel.getModule();
  if (targetModel != model) {
    if (!(modelInternal.importedModels().contains(targetModel.getReference()))) {
      modelInternal.addModelImport(targetModel.getReference(),true);
    }
  }
  if (!(new GlobalModuleDependenciesManager(module).getModules(GlobalModuleDependenciesManager.Deptype.VISIBLE).contains(targetModule))) {
    module.addDependency(targetModule.getModuleReference(),false);
  }
}
