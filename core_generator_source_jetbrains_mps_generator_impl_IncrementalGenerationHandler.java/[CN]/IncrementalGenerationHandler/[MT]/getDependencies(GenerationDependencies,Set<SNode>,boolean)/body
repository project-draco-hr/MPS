{
  Map<String,Set<String>> graph=new HashMap<String,Set<String>>();
  for (  SNode n : selectedRoots) {
    graph.put(n.getSNodeId().toString(),new HashSet<String>());
  }
  if (condUnchanged) {
    graph.put(CONDITIONALS_ID,new HashSet<String>());
  }
  for (  GenerationRootDependencies rd : dependencies.getRootDependencies()) {
    String id=rd.getRootId();
    if (id == null) {
      id=CONDITIONALS_ID;
    }
    Set<String> currentDeps=graph.get(id);
    if (currentDeps != null) {
      currentDeps.addAll(rd.getLocal());
      if (rd.isDependsOnConditionals()) {
        currentDeps.add(CONDITIONALS_ID);
      }
    }
  }
  return graph;
}
