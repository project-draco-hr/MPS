{
  TemplateDeclaration templateDeclaration=rule.getTemplate();
  List<SNode> inputNodes=createInputNodeListForWeavingRule(rule,generator);
  for (  SNode inputNode : inputNodes) {
    SNode outputContextNode=getContextNodeForWeavingingRule(inputNode,rule.getNode(),rule.getContextProviderAspectId(),null,generator);
    if (outputContextNode == null) {
      generator.showErrorMessage(inputNode,rule.getNode(),"couldn't create context node");
      continue;
    }
    generator.setChanged(true);
    weaveTemplateDeclaration(inputNode,templateDeclaration,outputContextNode,rule.getNode(),generator);
  }
}
