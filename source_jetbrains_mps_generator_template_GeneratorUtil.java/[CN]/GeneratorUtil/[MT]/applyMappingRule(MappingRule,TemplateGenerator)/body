{
  BaseConcept templateNode=mappingRule.getTemplateNode();
  if (templateNode == null) {
    generator.showErrorMessage(null,null,mappingRule.getNode(),"mapping rule has no template");
    return;
  }
  List<SNode> inputNodes=createInputNodeListForMappingRule(mappingRule,generator);
  boolean wasChanged=generator.isChanged();
  try {
    if (inputNodes.size() > 0)     generator.setChanged(true);
    for (    SNode inputNode : inputNodes) {
      createRootNodeFromTemplate(mappingRule.getName(),BaseAdapter.fromAdapter(templateNode),inputNode,generator);
      if (inputNode.isRoot()) {
        generator.addRootNotToCopy(inputNode);
      }
    }
  }
 catch (  DismissTopMappingRuleException e) {
    generator.setChanged(wasChanged);
  }
}
