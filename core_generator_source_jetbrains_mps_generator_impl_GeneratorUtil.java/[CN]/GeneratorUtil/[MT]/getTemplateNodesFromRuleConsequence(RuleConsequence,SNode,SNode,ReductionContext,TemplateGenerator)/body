{
  if (ruleConsequence == null) {
    generator.showErrorMessage(inputNode,null,ruleNode,"no rule consequence");
    return null;
  }
  generator.getGenerationTracer().pushRuleConsequence(ruleConsequence.getNode());
  if (ruleConsequence instanceof DismissTopMappingRule) {
    GeneratorMessage message=((DismissTopMappingRule)ruleConsequence).getGeneratorMessage();
    GeneratorMessageType messageType=processGeneratorMessage(message,inputNode,null,ruleNode,generator);
    throw new DismissTopMappingRuleException(messageType);
  }
 else   if (ruleConsequence instanceof AbandonInput_RuleConsequence) {
    throw new AbandonRuleInputException();
  }
 else   if (ruleConsequence instanceof TemplateDeclarationReference || ruleConsequence instanceof InlineTemplateWithContext_RuleConsequence) {
    List<TemplateFragment> fragments;
    SNode templateContainer;
    if (ruleConsequence instanceof TemplateDeclarationReference) {
      final TemplateDeclaration template=((TemplateDeclarationReference)ruleConsequence).getTemplate();
      templateContainer=BaseAdapter.fromAdapter(template);
      fragments=getTemplateFragments(template);
    }
 else {
      templateContainer=BaseAdapter.fromAdapter(ruleConsequence);
      fragments=getTemplateFragments((InlineTemplateWithContext_RuleConsequence)ruleConsequence);
    }
    if (checkIfOneOrMaryAdjacentFragments(fragments,templateContainer,inputNode,ruleNode,generator)) {
      List<Pair<SNode,String>> result=new ArrayList<Pair<SNode,String>>(fragments.size());
      for (      TemplateFragment fragment : fragments) {
        result.add(new Pair<SNode,String>(fragment.getParent().getNode(),getMappingName(fragment,null)));
      }
      return result;
    }
  }
 else   if (ruleConsequence instanceof InlineTemplate_RuleConsequence) {
    BaseConcept templateNode=((InlineTemplate_RuleConsequence)ruleConsequence).getTemplateNode();
    if (templateNode != null) {
      return Collections.singletonList(new Pair<SNode,String>(templateNode.getNode(),null));
    }
 else {
      generator.showErrorMessage(inputNode,null,ruleConsequence.getNode(),"no template node");
    }
  }
 else   if (ruleConsequence instanceof InlineSwitch_RuleConsequence) {
    InlineSwitch_RuleConsequence inlineSwitch=(InlineSwitch_RuleConsequence)ruleConsequence;
    for (    InlineSwitch_Case switchCase : inlineSwitch.getCases()) {
      if (reductionContext.getQueryExecutor().checkCondition(switchCase.getConditionFunction(),true,inputNode,switchCase.getNode())) {
        return getTemplateNodesFromRuleConsequence(switchCase.getCaseConsequence(),inputNode,switchCase.getNode(),reductionContext,generator);
      }
    }
    RuleConsequence defaultConsequence=inlineSwitch.getDefaultConsequence();
    if (defaultConsequence == null) {
      generator.showErrorMessage(inputNode,null,inlineSwitch.getNode(),"no default consequence in switch");
    }
 else {
      return getTemplateNodesFromRuleConsequence(defaultConsequence,inputNode,defaultConsequence.getNode(),reductionContext,generator);
    }
  }
 else {
    generator.showErrorMessage(inputNode,null,ruleConsequence.getNode(),"unsupported rule consequence");
  }
  return null;
}
