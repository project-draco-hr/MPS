{
  if (!(dataSource instanceof FileSystemBasedDataSource)) {
    throw new IllegalArgumentException("MPS Idea plugin does not support the data source root formats other than FileDataSource and FilePerRootDataSource");
  }
  List<String> result=new ArrayList<String>();
  Collection<IFile> affectedFiles=((FileSystemBasedDataSource)dataSource).getAffectedFiles();
  for (  IFile file : affectedFiles) {
    if (!file.isDirectory()) {
      result.add(file.getPath());
    }
 else {
      for (      IFile child : file.getChildren()) {
        if (FileUtil.extensionEquals(child.getName(),MPSExtentions.MODEL_HEADER) || FileUtil.extensionEquals(child.getName(),MPSExtentions.MODEL_ROOT)) {
          result.add(child.getPath());
        }
      }
    }
  }
  return result;
}
