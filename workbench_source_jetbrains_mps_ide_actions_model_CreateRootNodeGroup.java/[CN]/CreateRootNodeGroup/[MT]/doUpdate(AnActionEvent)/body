{
  removeAll();
  ActionEventData data=new ActionEventData(event);
  List<Language> modelLanguages=data.getModelDescriptor() == null ? new ArrayList<Language>() : data.getModelDescriptor().getSModel().getLanguages(data.getOperationContext().getScope());
  if (modelLanguages.size() == 0) {
    add(new BaseAction("<NO LANGUAGES>"){
      protected void doExecute(      AnActionEvent e){
      }
    }
);
  }
  Collections.sort(modelLanguages,new ToStringComparator());
  for (  final Language language : modelLanguages) {
    if (myAllowedLanguages != null) {
      if (!myAllowedLanguages.contains(language.getNamespace()))       continue;
    }
    String name=language.getNamespace();
    Icon icon=IconManager.getIconFor(language.getNamespace());
    BaseGroup langRootsGroup=new BaseGroup(name,name,icon);
    langRootsGroup.setPopup(true);
    for (    ConceptDeclaration conceptDeclaration : language.getConceptDeclarations()) {
      if (conceptDeclaration.getRootable()) {
        langRootsGroup.add(newRootNodeAction(new SNodePointer(conceptDeclaration),data.getModelDescriptor()));
      }
    }
    if (langRootsGroup.getChildren(null).length > 0) {
      this.add(langRootsGroup);
    }
  }
  setVisible(event.getPresentation(),true);
}
