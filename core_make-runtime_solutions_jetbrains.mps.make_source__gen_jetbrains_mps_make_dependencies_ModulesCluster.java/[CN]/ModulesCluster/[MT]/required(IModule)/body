{
  GlobalModuleDependenciesManager depman=new GlobalModuleDependenciesManager(mod);
  Set<IModule> reqmods=SetSequence.fromSetWithValues(new HashSet<IModule>(),Sequence.fromIterable(((Iterable<Language>)depman.getUsedLanguages())).translate(new ITranslator2<Language,Generator>(){
    public Iterable<Generator> translate(    Language lang){
      return lang.getGenerators();
    }
  }
));
  SetSequence.fromSet(reqmods).addSequence(CollectionSequence.fromCollection(depman.getModules(GlobalModuleDependenciesManager.Deptype.COMPILE)));
  SetSequence.fromSet(reqmods).addSequence(CollectionSequence.fromCollection(depman.getModules(GlobalModuleDependenciesManager.Deptype.VISIBLE)));
  Iterable<ModuleReference> reqs=SetSequence.fromSet(reqmods).select(new ISelector<IModule,ModuleReference>(){
    public ModuleReference select(    IModule m){
      return m.getModuleReference();
    }
  }
);
  if (mod instanceof Generator) {
    reqs=Sequence.fromIterable(reqs).concat(Sequence.fromIterable(Sequence.<ModuleReference>singleton(((Generator)mod).getSourceLanguage().getModuleReference())));
  }
 else   if (mod instanceof Language) {
  }
 else   if (mod instanceof DevKit) {
  }
 else {
  }
  return Sequence.fromIterable(reqs).distinct().toListSequence();
}
