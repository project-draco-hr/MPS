{
  List<List<ModuleReference>> order=new ModulesCluster.ModulesGraph().totalOrder();
  Iterable<? extends Iterable<ModuleReference>> compacted=Sequence.fromIterable(this.compact(order)).toListSequence();
  return Sequence.fromIterable(compacted).select(new ISelector<Iterable<ModuleReference>,IListSequence<IModule>>(){
    public IListSequence<IModule> select(    Iterable<ModuleReference> cycle){
      return Sequence.fromIterable(cycle).select(new ISelector<ModuleReference,IModule>(){
        public IModule select(        ModuleReference mr){
          return MapSequence.fromMap(modulesView).get(mr);
        }
      }
).toListSequence();
    }
  }
).toListSequence();
}
