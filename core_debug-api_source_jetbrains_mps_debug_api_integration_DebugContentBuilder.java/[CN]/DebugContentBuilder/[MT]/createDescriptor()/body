{
  RunProfile profile=myEnvironment.getRunProfile();
  ExecutionConsole console=myExecutionResult.getExecutionConsole();
  String runnerType=console instanceof ExecutionConsoleEx ? JAVA_RUNNER + "." + ((ExecutionConsoleEx)console).getExecutionConsoleId() : JAVA_RUNNER;
  RunnerLayoutUi ui=RunnerLayoutUi.Factory.getInstance(myProject).create(runnerType,myExecutor.getId(),profile.getName(),this);
  ui.getOptions().setMoveToGridActionEnabled(false).setMinimizeActionEnabled(false);
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return createDescriptorInternal(ui,profile);
  }
  buildUi(ui,console);
  MyRunContentDescriptor contentDescriptor=createDescriptorInternal(ui,profile);
  ui.getOptions().setLeftToolbar(createActionToolbar(ui,contentDescriptor),ActionPlaces.UNKNOWN);
  return contentDescriptor;
}
