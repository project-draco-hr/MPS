{
  Set<SModelDescriptor> changedModels=getChangedModels();
  Map<SModelDescriptor,HashSet<ModelOwner>> modelToOwnerMap=new HashMap<SModelDescriptor,HashSet<ModelOwner>>();
  for (  SModelDescriptor md : myModelToOwnerMap.keySet()) {
    modelToOwnerMap.put(md,new HashSet<ModelOwner>(myModelToOwnerMap.get(md)));
  }
  Set<SModelDescriptor> releasedModels=collectReleasedModels(changedModels,modelToOwnerMap,owner);
  Set<IModule> releasedModules=MPSModuleRepository.getInstance().getModelsToBeRemoved(CollectionUtil.asSet((MPSModuleOwner)owner));
  for (  IModule module : releasedModules) {
    releasedModels.addAll(collectReleasedModels(changedModels,modelToOwnerMap,module));
  }
  return new ArrayList<SModelDescriptor>(releasedModels);
}
