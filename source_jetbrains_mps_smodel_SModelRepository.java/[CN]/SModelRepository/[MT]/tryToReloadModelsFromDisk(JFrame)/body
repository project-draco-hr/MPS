{
  System.out.println("try to reload from disk");
  if (myInChangedModelsReloading) {
    System.out.println(" return ");
    return;
  }
  Set<SModelDescriptor> toReload=new HashSet<SModelDescriptor>();
  for (  SModelDescriptor sm : getAllModelDescriptors()) {
    if (sm.needsReloading()) {
      System.out.println("model is out of date : " + sm);
      toReload.add(sm);
    }
  }
  if (!toReload.isEmpty()) {
    myInChangedModelsReloading=true;
    try {
      boolean needReloadAll=false;
      for (      SModelDescriptor sm : toReload) {
        if (isChanged(sm)) {
          System.out.println("model " + sm + " changed both in memory and on the disk");
          int result=JOptionPane.showConfirmDialog(frame,"Model " + sm.getModelUID() + " changed on a disk. Do you want to discard memory changes?","Model Changed " + sm.getModelUID(),JOptionPane.YES_NO_OPTION);
          if (result == JOptionPane.YES_OPTION) {
            sm.reloadFromDisk();
            needReloadAll=true;
          }
        }
 else {
          System.out.println("model " + sm + " changed only on disk. reloading");
          sm.reloadFromDisk();
          needReloadAll=true;
        }
      }
      if (needReloadAll) {
        System.out.println("reloading classes");
        ReloadUtils.reloadAll(false);
      }
    }
  finally {
      myInChangedModelsReloading=false;
    }
  }
}
