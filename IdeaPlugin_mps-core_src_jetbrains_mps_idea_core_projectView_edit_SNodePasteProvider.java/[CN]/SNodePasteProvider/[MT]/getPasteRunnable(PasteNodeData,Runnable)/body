{
  return new Runnable(){
    @Override public void run(){
      if (jetbrains.mps.util.SNodeOperations.isModelDisposed(myModel)) {
        return;
      }
      List<SNode> nodesToPaste=nodeData.getNodes();
      if (nodesToPaste == null || nodesToPaste.isEmpty()) {
        return;
      }
      Set<SReference> referencesToResolve=nodeData.getRequireResolveReferences();
      if (addImportsRunnable != null) {
        addImportsRunnable.run();
      }
      NodePaster pasteProcessor=new NodePaster(nodesToPaste);
      if (!(pasteProcessor.canPasteAsRoots())) {
        return;
      }
      pasteProcessor.pasteAsRoots(myModel,"");
      ResolverComponent.getInstance().resolveScopesOnly(referencesToResolve,myProject.getRepository());
      myModelDescriptor.save();
    }
  }
;
}
