{
  List<SNode> rootMarkers=SNodeOperations.getDescendants(SLinkOperations.getTarget(thisNode,"template",true),"jetbrains.mps.core.template.structure.MtlTemplateRoot",false,new String[]{});
  if ((int)ListSequence.fromList(rootMarkers).count() == 1) {
    SNode node=ListSequence.fromList(rootMarkers).first();
    return SNodeOperations.getParent(node);
  }
  return SLinkOperations.getTarget(thisNode,"template",true);
}
