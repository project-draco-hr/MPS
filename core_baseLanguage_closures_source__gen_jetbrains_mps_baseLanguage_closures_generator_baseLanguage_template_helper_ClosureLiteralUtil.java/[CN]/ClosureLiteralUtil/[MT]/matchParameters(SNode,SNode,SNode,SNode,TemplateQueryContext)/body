{
  Map<String,SNode> map=null;
  List<SNode> imds=SLinkOperations.getTargets(SLinkOperations.getTarget(ctNoParams,"classifier",false),"method",true);
  SNode absRetCT=null;
  if (ListSequence.fromList(imds).count() > 0) {
    if (ListSequence.fromList(imds).count() != 1) {
      genContext.showWarningMessage(literal,"The adaptation target interface has more than one method");
    }
    SNode method=ListSequence.fromList(imds).getElement(0);
    if ((SLinkOperations.getTarget(method,"returnType",true) != null) && !(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(method,"returnType",true),"jetbrains.mps.baseLanguage.structure.VoidType"))) {
      map=matchReturnType(SLinkOperations.getTarget(method,"returnType",true),FunctionType_Behavior.call_getNormalizedReturnType_1213877405252(ft),map);
      if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(method,"returnType",true),"jetbrains.mps.baseLanguage.structure.ClassifierType")) {
        absRetCT=SNodeOperations.copyNode(SLinkOperations.getTarget(method,"returnType",true));
      }
    }
    List<SNode> ptypes=FunctionType_Behavior.call_getNormalizedParameterTypes_1213877405276(ft);
    int idx=0;
    for (    SNode pd : SLinkOperations.getTargets(method,"parameter",true)) {
      if (idx >= ListSequence.fromList(ptypes).count()) {
        genContext.showErrorMessage(literal,"Closure parameters count doesn't match method '" + SPropertyOperations.getString(method,"name") + "' in "+ JavaNameUtil.fqClassName(SLinkOperations.getTarget(ctNoParams,"classifier",false),SPropertyOperations.getString(SLinkOperations.getTarget(ctNoParams,"classifier",false),"name")));
        return;
      }
      map=matchType(SLinkOperations.getTarget(pd,"type",true),ListSequence.fromList(ptypes).getElement(idx),map);
      idx++;
    }
  }
  ((SNode)ctNoParams).putUserObject("typeMap",map);
  if ((absRetCT != null)) {
    SNode ftResCT=FunctionTypeUtil.unmeet(FunctionType_Behavior.call_getNormalizedReturnType_1213877405252(ft));
    String adapterName=JavaNameUtil.shortName(SPropertyOperations.getString(SLinkOperations.getTarget(absRetCT,"classifier",false),"name")) + JavaNameUtil.shortName(SPropertyOperations.getString(SLinkOperations.getTarget(ftResCT,"classifier",false),"name")) + "Adapter";
    for (    SNode cls : SModelOperations.getNodes(SNodeOperations.getModel(SLinkOperations.getTarget(absRetCT,"classifier",false)),"jetbrains.mps.baseLanguage.structure.Classifier")) {
      if (adapterName.equals(JavaNameUtil.shortName(SPropertyOperations.getString(cls,"name")))) {
        SNode newRetCT=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.ClassifierType",null);
        SLinkOperations.setTarget(newRetCT,"classifier",cls,false);
        ((SNode)ctNoParams).putUserObject("returnType",newRetCT);
        break;
      }
    }
  }
  List<SNode> varDecls=SLinkOperations.getTargets(SLinkOperations.getTarget(origCT,"classifier",false),"typeVariableDeclaration",true);
  int idx=0;
  for (  SNode p : SLinkOperations.getTargets(origCT,"parameter",true)) {
    if (SNodeOperations.isInstanceOf(p,"jetbrains.mps.baseLanguage.structure.UpperBoundType") || SNodeOperations.isInstanceOf(p,"jetbrains.mps.baseLanguage.structure.LowerBoundType")) {
      p=(SNodeOperations.isInstanceOf(p,"jetbrains.mps.baseLanguage.structure.UpperBoundType") ? SLinkOperations.getTarget(p,"bound",true) : SLinkOperations.getTarget(p,"bound",true));
    }
    if (SNodeOperations.isInstanceOf(p,"jetbrains.mps.baseLanguage.structure.TypeVariableReference")) {
      if (idx < ListSequence.fromList(varDecls).count()) {
        SNode tvd=ListSequence.fromList(varDecls).getElement(idx);
        SLinkOperations.addChild(ctNoParams,"parameter",(map != null ? MapSequence.fromMap(map).get(SPropertyOperations.getString(tvd,"name")) : null));
      }
    }
 else {
      SLinkOperations.addChild(ctNoParams,"parameter",SNodeOperations.copyNode(p));
    }
    idx++;
  }
}
