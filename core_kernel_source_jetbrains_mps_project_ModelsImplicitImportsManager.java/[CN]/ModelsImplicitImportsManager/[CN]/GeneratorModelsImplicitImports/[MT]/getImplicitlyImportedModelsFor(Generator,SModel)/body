{
  Set<SModel> result=new LinkedHashSet<SModel>();
  Language sourceLanguage=((Generator)contextGenerator).getSourceLanguage();
  SModelDescriptor structureModelDescriptor=sourceLanguage.getStructureModelDescriptor();
  if (structureModelDescriptor != null) {
    result.add(structureModelDescriptor);
  }
  SModelDescriptor constraints=LanguageAspect.CONSTRAINTS.get(sourceLanguage);
  if (constraints != null) {
    result.add(constraints);
  }
  for (  Language language : ModuleUtil.refsToLanguages(sourceLanguage.getExtendedLanguageRefs())) {
    SModelDescriptor structure=language.getStructureModelDescriptor();
    if (structure != null) {
      result.add(structure);
    }
    SModelDescriptor constr=LanguageAspect.CONSTRAINTS.get(language);
    if (constr != null) {
      result.add(constr);
    }
  }
  for (  Language language : SModelOperations.getLanguages((jetbrains.mps.smodel.SModel)model,((Generator)contextGenerator).getScope())) {
    SModelDescriptor struc=language.getStructureModelDescriptor();
    if (struc != null) {
      result.add(struc);
    }
  }
  return result;
}
