{
  List<Integer> adjNodesOrder=ListSequence.fromList(new ArrayList<Integer>());
  for (  Edge edge : ListSequence.fromList(node.getEdges(dir))) {
    ListSequence.fromList(adjNodesOrder).addElement(MapSequence.fromMap(nodesOrder).get(edge.getTarget(dir).getIndex()));
  }
  if (ListSequence.fromList(adjNodesOrder).count() == 0) {
    return -1;
  }
  adjNodesOrder=ListSequence.fromList(adjNodesOrder).sort(new ISelector<Integer,Comparable<?>>(){
    public Comparable<?> select(    Integer it){
      return it;
    }
  }
,true).toListSequence();
  if (ListSequence.fromList(adjNodesOrder).count() % 2 == 1) {
    return ListSequence.fromList(adjNodesOrder).getElement(ListSequence.fromList(adjNodesOrder).count() / 2);
  }
 else {
    return (ListSequence.fromList(adjNodesOrder).getElement(ListSequence.fromList(adjNodesOrder).count() / 2) + ListSequence.fromList(adjNodesOrder).getElement(ListSequence.fromList(adjNodesOrder).count() / 2 - 1)) / 2;
  }
}
