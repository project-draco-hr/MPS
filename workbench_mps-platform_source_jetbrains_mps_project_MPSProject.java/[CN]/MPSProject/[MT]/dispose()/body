{
  Exception result=null;
  List<Project> openProjects=jetbrains.mps.project.ProjectManager.getInstance().getOpenProjects();
  if (openProjects.contains(this)) {
    result=ThreadUtils.runInUIThreadAndWait(new Runnable(){
      @Override public void run(){
        ProjectUtil.closeAndDispose(getProject());
      }
    }
);
  }
  super.dispose();
  if (result != null) {
    throw new RuntimeException(result);
  }
}
