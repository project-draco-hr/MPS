{
  if (findVirtualFile()) {
    VirtualFile[] children=myVirtualFile.getChildren();
    ArrayList<IFile> result=new ArrayList<IFile>();
    for (    VirtualFile child : children) {
      if (filter.accept(this,child.getName())) {
        result.add(new IdeaFile(myProvider,child));
      }
    }
    return Collections.unmodifiableList(result);
  }
 else {
    File[] children=new File(myPath).listFiles();
    ArrayList<IFile> result=new ArrayList<IFile>();
    if (children == null) {
      return Arrays.asList();
    }
    for (    File child : children) {
      if (filter.accept(this,child.getName())) {
        result.add(new IdeaFile(myProvider,child.getAbsolutePath()));
      }
    }
    return result;
  }
}
