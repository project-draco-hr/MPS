{
  if (myVirtualFile != null && !myVirtualFile.isValid()) {
    myPath=myVirtualFile.getPath();
    myVirtualFile=null;
  }
  if (myVirtualFile == null) {
    if (myPath.contains("!")) {
      int index=myPath.indexOf("!");
      String jarPath=myPath.substring(0,index);
      String entryPath=StringUtil.replace(myPath.substring(index + 1),"\\","/");
      if (entryPath.startsWith("/")) {
        entryPath=entryPath.substring(1);
      }
      JarFileSystem jarFileSystem=JarFileSystem.getInstance();
      LocalFileSystem localFileSystem=LocalFileSystem.getInstance();
      VirtualFile jarFile=localFileSystem.findFileByPath(jarPath);
      if (jarFile != null) {
        VirtualFile jarRootFile=jarFileSystem.getJarRootForLocalFile(jarFile);
        if (jarRootFile != null) {
          myVirtualFile=jarRootFile.findFileByRelativePath(entryPath);
        }
      }
    }
 else {
      myVirtualFile=LocalFileSystem.getInstance().findFileByPath(myPath);
    }
  }
  if (myVirtualFile != null) {
    myPath=null;
  }
  return myVirtualFile != null;
}
