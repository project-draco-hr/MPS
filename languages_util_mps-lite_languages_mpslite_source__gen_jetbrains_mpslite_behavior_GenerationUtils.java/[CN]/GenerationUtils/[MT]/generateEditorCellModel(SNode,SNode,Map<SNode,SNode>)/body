{
  List<SNode> lines=SLinkOperations.getTargets(lineList,"line",true);
  if ((int)ListSequence.fromList(lines).count() == 0) {
    if (SPropertyOperations.getBoolean(concept,"abstract")) {
      jetbrains.mps.smodel.SNode errorCell=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_Error",null);
      SPropertyOperations.set(errorCell,"text","abstract " + SPropertyOperations.getString(concept,"name"));
      return errorCell;
    }
 else {
      return null;
    }
  }
 else   if ((int)ListSequence.fromList(lines).count() == 1) {
    List<SNode> lineParts=SLinkOperations.getTargets(ListSequence.fromList(lines).first(),"linePart",true);
    if ((int)ListSequence.fromList(lineParts).count() == 1) {
      return BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),ListSequence.fromList(lineParts).first(),"virtual_createCellModel_1238614099938",new Object[]{partsToLinks});
    }
 else {
      jetbrains.mps.smodel.SNode hCollection=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_Collection",null);
      SLinkOperations.setTarget(hCollection,"cellLayout",SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellLayout_Horizontal",null),true);
      for (      SNode linePart : lineParts) {
        ListSequence.fromList(SLinkOperations.getTargets(hCollection,"childCellModel",true)).addElement(BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),linePart,"virtual_createCellModel_1238614099938",new Object[]{partsToLinks}));
      }
      return hCollection;
    }
  }
 else {
    jetbrains.mps.smodel.SNode vCollection=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_Collection",null);
    SLinkOperations.setTarget(vCollection,"cellLayout",SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellLayout_Vertical",null),true);
    for (    SNode line : lines) {
      jetbrains.mps.smodel.SNode hCollection=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_Collection",null);
      SLinkOperations.setTarget(hCollection,"cellLayout",SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellLayout_Horizontal",null),true);
      ListSequence.fromList(SLinkOperations.getTargets(vCollection,"childCellModel",true)).addElement(hCollection);
      for (      SNode linePart : SLinkOperations.getTargets(line,"linePart",true)) {
        ListSequence.fromList(SLinkOperations.getTargets(hCollection,"childCellModel",true)).addElement(BehaviorReflection.invokeVirtual((Class<SNode>)((Class)Object.class),linePart,"virtual_createCellModel_1238614099938",new Object[]{partsToLinks}));
      }
    }
    return vCollection;
  }
}
