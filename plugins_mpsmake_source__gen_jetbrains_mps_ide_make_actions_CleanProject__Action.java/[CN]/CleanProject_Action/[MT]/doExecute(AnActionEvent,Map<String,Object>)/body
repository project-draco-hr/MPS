{
  final Set<SModule> modulesToBuild=SetSequence.fromSet(new LinkedHashSet<SModule>());
  SetSequence.fromSet(modulesToBuild).addSequence(ListSequence.fromList(((MPSProject)MapSequence.fromMap(_params).get("project")).getProjectModules(SModule.class)));
  ProgressManager.getInstance().run(new Task.Modal(((Project)MapSequence.fromMap(_params).get("ideaProject")),"Cleaning",true){
    @Override public void run(    @NotNull final ProgressIndicator indicator){
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          ModuleMaker maker=new ModuleMaker();
          maker.clean(modulesToBuild,new ProgressMonitorAdapter(indicator));
        }
      }
);
    }
  }
);
}
