{
  LOG.debug(String.format("Unloading plugins from %d modules",unloadedModules.size()));
  long beginTime=System.currentTimeMillis();
  Set<ReloadableModuleBase> pluginModules=getPluginModules(unloadedModules);
  if (pluginModules.isEmpty())   return;
  try {
    List<PluginContributor> toUnloadContributors=calcContributorsToUnload(pluginModules);
    unloadPlugins(toUnloadContributors);
    myLoadedContributors.removeAll(toUnloadContributors);
  }
  finally {
    LOG.info(String.format("Unloading of %d plugins took %s s",pluginModules.size(),(System.currentTimeMillis() - beginTime) / 1000.0));
  }
}
