{
  ProgressMonitor root=monitor;
  while (root instanceof SubProgressMonitor) {
    root=((SubProgressMonitor)root).getParent();
  }
  if (root instanceof ProgressMonitorAdapter) {
    return ((ProgressMonitorAdapter)root).getIndicator();
  }
  if (ProgressManager.getGlobalProgressIndicator() != null) {
    return ProgressManager.getGlobalProgressIndicator();
  }
  return null;
}
