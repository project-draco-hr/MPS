{
  if (project == null || myActions.isEmpty()) {
    myActions.clear();
    myUndoContext=null;
    return;
  }
  com.intellij.openapi.project.Project ideaProject=ProjectHelper.toIdeaProject(project);
  if (ideaProject == null) {
    throw new IllegalStateException("Cannot find idea project for the mps project " + project);
  }
  UndoManager undoManager=UndoManager.getInstance(ideaProject);
  undoManager.undoableActionPerformed(new SNodeIdeaUndoableAction(project,myActions,myUndoContext));
  myActions=new LinkedList<SNodeUndoableAction>();
  myUndoContext=null;
}
