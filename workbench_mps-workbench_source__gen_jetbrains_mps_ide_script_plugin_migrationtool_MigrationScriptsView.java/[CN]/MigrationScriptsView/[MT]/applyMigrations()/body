{
  ThreadUtils.assertEDT();
  final Collection<SearchResult<SNode>> aliveIncludedResults=myController.computeAliveIncludedResults(myUsagesView.getIncludedResultNodes());
  if (aliveIncludedResults.size() == 0) {
    JOptionPane.showMessageDialog(myTool.getComponent(),"No job");
    return;
  }
  updateControls(false,myIndicator.getComponent());
  final TaskInfo task=createTaskInfo();
  final Object cmd=((CommandProcessorEx)CommandProcessor.getInstance()).startCommand(myProject,task.getTitle(),null,UndoConfirmationPolicy.REQUEST_CONFIRMATION);
  final Runnable finishCommand=new Runnable(){
    public void run(){
      ((CommandProcessorEx)CommandProcessor.getInstance()).finishCommand(myProject,cmd,null);
    }
  }
;
  Runnable process=new Runnable(){
    public void run(){
      myController.process(new ProgressMonitorAdapter(myIndicator),aliveIncludedResults);
      ModelAccess.instance().runCommandInEDT(finishCommand,getMPSProject());
      checkMigrationResults();
    }
  }
;
  ((ApplicationEx)ApplicationManagerEx.getApplicationEx()).runProcessWithProgressSynchronously(process,task.getTitle(),task.isCancellable(),myProject,getComponent(),task.getCancelText());
}
