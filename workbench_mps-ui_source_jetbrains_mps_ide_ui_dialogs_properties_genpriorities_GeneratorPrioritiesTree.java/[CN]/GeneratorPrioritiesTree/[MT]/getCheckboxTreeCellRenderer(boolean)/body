{
  return new CheckboxTreeCellRenderer(){
    @Override public void customizeRenderer(    JTree tree,    Object value,    boolean selected,    boolean expanded,    boolean leaf,    int row,    boolean hasFocus){
      super.customizeRenderer(tree,value,selected,expanded,leaf,row,hasFocus);
      ColoredTreeCellRenderer renderer=getTextRenderer();
      JCheckBox checkBox=getCheckbox();
      if (value instanceof CheckedTreeNodeEx) {
        CheckedTreeNodeEx checkedTreeNode=(CheckedTreeNodeEx)value;
        renderer.append(checkedTreeNode.getPresentation());
        renderer.setIcon(checkedTreeNode.getIcon());
        checkBox.setSelected(checkedTreeNode.isChecked());
        checkBox.setVisible(withCheckboxes);
        if (checkedTreeNode.equals(tree.getModel().getRoot())) {
          if (!GeneratorPrioritiesTree.setCheckedUnder(checkedTreeNode))           tree.setBorder(new ColoredSideBorder(JBColor.RED,JBColor.RED,JBColor.RED,JBColor.RED,1));
 else           tree.setBorder(BorderFactory.createEmptyBorder());
        }
      }
    }
  }
;
}
