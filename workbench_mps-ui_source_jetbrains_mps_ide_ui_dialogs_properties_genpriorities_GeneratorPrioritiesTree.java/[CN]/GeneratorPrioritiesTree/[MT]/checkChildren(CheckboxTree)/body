{
  if (checkboxTree.getModel().getRoot() instanceof ExtendedCheckedTreeNode) {
    Queue<ExtendedCheckedTreeNode> treeNodes=new LinkedList<ExtendedCheckedTreeNode>();
    treeNodes.add((ExtendedCheckedTreeNode)checkboxTree.getModel().getRoot());
    while (!treeNodes.isEmpty()) {
      ExtendedCheckedTreeNode treeNode=treeNodes.poll();
      treeNodes.addAll(Collections.list(treeNode.children()));
      if (treeNode.getParent() instanceof ExtendedCheckedTreeNode && ((ExtendedCheckedTreeNode)treeNode.getParent()).isChecked()) {
        treeNode.setChecked(true);
      }
    }
  }
}
