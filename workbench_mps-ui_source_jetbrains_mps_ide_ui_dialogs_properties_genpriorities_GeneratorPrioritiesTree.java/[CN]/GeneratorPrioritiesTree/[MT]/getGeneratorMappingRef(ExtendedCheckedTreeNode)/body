{
  MappingConfig_ExternalRef result=new MappingConfig_ExternalRef();
  result.setGenerator(((GeneratorCheckedTreeNode)node).getUserObject());
  if (node.isChecked()) {
    result.setMappingConfig(new MappingConfig_RefAllLocal());
  }
 else {
    List<ExtendedCheckedTreeNode> chChildren=getChildrenWithChecks(node);
    if (chChildren.size() == 1) {
      result.setMappingConfig(getModelMappingRef(chChildren.get(0)));
    }
 else {
      MappingConfig_RefSet modelsResult=new MappingConfig_RefSet();
      for (      ExtendedCheckedTreeNode child : chChildren) {
        modelsResult.getMappingConfigs().add(getModelMappingRef(child));
      }
      result.setMappingConfig(modelsResult);
    }
  }
  return result;
}
