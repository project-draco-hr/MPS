{
  if (!(node.isChecksUnder())) {
    return new MappingConfig_AbstractRef();
  }
  if (node.isChecked()) {
    MappingConfig_SimpleRef result=new MappingConfig_SimpleRef();
    result.setModelUID(node.getUserObject().toString());
    result.setNodeID("*");
    return result;
  }
  List<ExtendedCheckedTreeNode> chChildren=getChildrenWithChecks(node);
  if (chChildren.size() == 1) {
    return getNodeMappingRef(chChildren.get(0));
  }
 else {
    MappingConfig_RefSet result=new MappingConfig_RefSet();
    for (    ExtendedCheckedTreeNode child : chChildren) {
      result.getMappingConfigs().add(getNodeMappingRef(child));
    }
    return result;
  }
}
