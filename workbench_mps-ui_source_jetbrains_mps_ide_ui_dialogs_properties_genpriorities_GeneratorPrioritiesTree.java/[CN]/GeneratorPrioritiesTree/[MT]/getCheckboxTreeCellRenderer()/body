{
  return new CheckboxTreeCellRenderer(){
    @Override public void customizeRenderer(    JTree tree,    Object value,    boolean selected,    boolean expanded,    boolean leaf,    int row,    boolean hasFocus){
      super.customizeRenderer(tree,value,selected,expanded,leaf,row,hasFocus);
      ColoredTreeCellRenderer renderer=getTextRenderer();
      JCheckBox checkBox=getCheckbox();
      if (value instanceof ExtendedCheckedTreeNode) {
        ExtendedCheckedTreeNode checkedTreeNode=(ExtendedCheckedTreeNode)value;
        renderer.append(checkedTreeNode.getPresentation(),checkedTreeNode.isChecked() ? SimpleTextAttributes.REGULAR_ATTRIBUTES : SimpleTextAttributes.GRAYED_ATTRIBUTES);
        renderer.setIcon(checkedTreeNode.getIcon());
        checkBox.setSelected(checkedTreeNode.isChecked());
      }
    }
  }
;
}
