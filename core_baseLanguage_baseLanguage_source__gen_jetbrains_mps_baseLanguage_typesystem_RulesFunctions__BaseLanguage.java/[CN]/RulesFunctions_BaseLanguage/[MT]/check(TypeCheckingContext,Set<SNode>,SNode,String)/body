{
  List<SNode> throwTypes=ListSequence.<SNode>fromListWithValues(new ArrayList<SNode>(),throwables);
  ListSequence.<SNode>fromList(throwTypes).removeWhere(new IWhereFilter<SNode>(){
    public boolean accept(    SNode tt){
      return TypeChecker.getInstance().getSubtypingManager().isSubtype(tt,new RulesFunctions_BaseLanguage.QuotationClass_5ahx9e_a1a0a0a0a0b0q_0().createNode(typeCheckingContext)) || TypeChecker.getInstance().getSubtypingManager().isSubtype(tt,new RulesFunctions_BaseLanguage.QuotationClass_5ahx9e_a1a0a0a0a0b0q().createNode(typeCheckingContext));
    }
  }
);
  if (ListSequence.<SNode>fromList(throwTypes).isEmpty()) {
    return;
  }
  List<SNode> ancSLs=SNodeOperations.getAncestors(mainNode,"jetbrains.mps.baseLanguage.structure.StatementList",false);
  boolean use_quickfix=false;
  for (  SNode anc : SNodeOperations.getAncestorsWhereConceptInList(mainNode,new String[]{"jetbrains.mps.baseLanguage.structure.TryStatement","jetbrains.mps.baseLanguage.structure.TryCatchStatement","jetbrains.mps.baseLanguage.structure.IStatementListContainer"},false)) {
    if (ListSequence.<SNode>fromList(throwTypes).isEmpty()) {
      return;
    }
{
      SNode matchedNode_5ahx9e_b0f0q=anc;
{
        boolean matches_5ahx9e_a1a5a61=false;
{
          SNode matchingNode_5ahx9e_a1a5a61=anc;
          if (matchingNode_5ahx9e_a1a5a61 != null) {
            matches_5ahx9e_a1a5a61=SModelUtil_new.isAssignableConcept(matchingNode_5ahx9e_a1a5a61.getConceptFqName(),"jetbrains.mps.baseLanguage.structure.TryStatement");
          }
        }
        if (matches_5ahx9e_a1a5a61) {
          if (ListSequence.<SNode>fromList(ancSLs).contains(SLinkOperations.getTarget(matchedNode_5ahx9e_b0f0q,"body",true))) {
            for (            final SNode cc : SLinkOperations.getTargets(matchedNode_5ahx9e_b0f0q,"catchClause",true)) {
              ListSequence.<SNode>fromList(throwTypes).removeWhere(new IWhereFilter<SNode>(){
                public boolean accept(                SNode tt){
                  return TypeChecker.getInstance().getSubtypingManager().isSubtype(tt,SLinkOperations.getTarget(SLinkOperations.getTarget(cc,"throwable",true),"type",true));
                }
              }
);
            }
          }
        }
 else {
          boolean matches_5ahx9e_b1a5a61=false;
{
            SNode matchingNode_5ahx9e_b1a5a61=anc;
            if (matchingNode_5ahx9e_b1a5a61 != null) {
              matches_5ahx9e_b1a5a61=SModelUtil_new.isAssignableConcept(matchingNode_5ahx9e_b1a5a61.getConceptFqName(),"jetbrains.mps.baseLanguage.structure.TryCatchStatement");
            }
          }
          if (matches_5ahx9e_b1a5a61) {
            if (ListSequence.<SNode>fromList(ancSLs).contains(SLinkOperations.getTarget(matchedNode_5ahx9e_b0f0q,"body",true))) {
              for (              final SNode cc : SLinkOperations.getTargets(matchedNode_5ahx9e_b0f0q,"catchClause",true)) {
                ListSequence.<SNode>fromList(throwTypes).removeWhere(new IWhereFilter<SNode>(){
                  public boolean accept(                  SNode tt){
                    return TypeChecker.getInstance().getSubtypingManager().isSubtype(tt,SLinkOperations.getTarget(SLinkOperations.getTarget(cc,"throwable",true),"type",true));
                  }
                }
);
              }
            }
          }
 else {
            if (ListSequence.<SNode>fromList(ancSLs).contains(IMethodLike_Behavior.call_getBody_1239354440022(SNodeOperations.as(anc,"jetbrains.mps.baseLanguage.structure.IMethodLike")))) {
              SNode methodLike=SNodeOperations.cast(anc,"jetbrains.mps.baseLanguage.structure.IMethodLike");
              if (IMethodLike_Behavior.call_implicitThrows_4989157187872658723(methodLike)) {
                ListSequence.<SNode>fromList(throwTypes).clear();
              }
 else {
                for (                final SNode thr : IMethodLike_Behavior.call_getThrowableTypes_6204026822016975623(methodLike)) {
                  ListSequence.<SNode>fromList(throwTypes).removeWhere(new IWhereFilter<SNode>(){
                    public boolean accept(                    SNode tt){
                      return TypeChecker.getInstance().getSubtypingManager().isSubtype(tt,thr);
                    }
                  }
);
                }
                use_quickfix=true;
              }
            }
            break;
          }
        }
      }
    }
    if (ListSequence.<SNode>fromList(throwTypes).isEmpty()) {
      return;
    }
  }
  if (!(ListSequence.<SNode>fromList(throwTypes).isEmpty())) {
    String errorString=message;
    for (    SNode exc : throwTypes) {
      errorString=errorString + " " + exc;
    }
    if (use_quickfix) {
{
        MessageTarget errorTarget=new NodeMessageTarget();
        IErrorReporter _reporter_2309309498=typeCheckingContext.reportTypeError(mainNode,errorString,"r:00000000-0000-4000-0000-011c895902c5(jetbrains.mps.baseLanguage.typesystem)","4460871289557453850",null,errorTarget);
{
          BaseQuickFixProvider intentionProvider=new BaseQuickFixProvider("jetbrains.mps.baseLanguage.typesystem.AddExceptionToMethodSignature_QuickFix",false);
          intentionProvider.putArgument("throwableType",SetSequence.<SNode>fromSet(throwables).first());
          _reporter_2309309498.addIntentionProvider(intentionProvider);
        }
      }
    }
 else {
{
        MessageTarget errorTarget=new NodeMessageTarget();
        IErrorReporter _reporter_2309309498=typeCheckingContext.reportTypeError(mainNode,errorString,"r:00000000-0000-4000-0000-011c895902c5(jetbrains.mps.baseLanguage.typesystem)","4460871289557914789",null,errorTarget);
      }
    }
  }
}
