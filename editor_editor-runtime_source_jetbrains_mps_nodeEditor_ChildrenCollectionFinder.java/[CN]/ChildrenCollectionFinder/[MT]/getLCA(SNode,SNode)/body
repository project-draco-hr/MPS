{
  if (left == right || right == null || left == null) {
    return left == null ? right : left;
  }
  Set<SNode> parents=new HashSet<SNode>();
  while (left != null) {
    parents.add(left);
    left=left.getParent();
  }
  while (right != null) {
    if (parents.contains(right))     return right;
    right=right.getParent();
  }
  return null;
}
