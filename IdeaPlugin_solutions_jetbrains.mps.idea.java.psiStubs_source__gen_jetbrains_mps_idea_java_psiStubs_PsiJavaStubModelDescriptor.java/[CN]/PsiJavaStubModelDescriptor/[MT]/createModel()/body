{
  SModel ourModel=new SModel(myModelRef);
  for (  PsiJavaFile jf : Sequence.fromIterable(myDataSource.getJavaFiles())) {
    SNode javaImports=getImports(jf.getImportList().getAllImportStatements());
    ASTConverter converter=new ASTConverter(myMps2PsiMapper);
    Set<SNode> roots=SetSequence.fromSet(new HashSet<SNode>());
    for (    PsiClass cls : jf.getClasses()) {
      SNode node=converter.convertClass(cls);
      if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.baseLanguage.structure.Classifier")) {
        AttributeOperations.setAttribute(SNodeOperations.cast(node,"jetbrains.mps.baseLanguage.structure.Classifier"),new IAttributeDescriptor.NodeAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.structure.JavaImports")),javaImports);
      }
      ourModel.addRootNode(node);
      SetSequence.fromSet(roots).addElement(node);
      MapSequence.fromMap(myRootsById).put(node.getNodeId(),node);
    }
    if (SetSequence.fromSet(roots).isNotEmpty()) {
      MapSequence.fromMap(myRootsPerFile).put(jf.getName(),roots);
    }
  }
  return ourModel;
}
