{
  if (path == null || !containsMacro(path))   return path;
  if (path.indexOf('\\') != -1) {
    Macros.LOG.warn("Using backslashes in macros: " + path);
    path=path.replace('\\',SEPARATOR_CHAR);
  }
  if (!FileSystem.getInstance().isPackaged(anchorFile)) {
    path=path.replace(SEPARATOR_CHAR,File.separatorChar);
  }
  return macros.expand(path,anchorFile);
}
