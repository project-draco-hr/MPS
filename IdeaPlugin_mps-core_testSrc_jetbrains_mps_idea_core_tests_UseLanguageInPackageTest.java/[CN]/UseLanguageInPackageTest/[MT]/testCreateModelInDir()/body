{
  doTest(chooseOnlyBaseLanguageInteraction);
  SRepository repository=ProjectHelper.getProjectRepository(myProjectBuilder.getFixture().getProject());
  repository.getModelAccess().runReadAction(new Runnable(){
    @Override public void run(){
      SModel smodel=SModelFileTracker.getInstance(repository).findModel(VirtualFileUtils.toIFile(packageDir));
      assertNotNull("Model hasn't been created under the directory",smodel);
      Collection<SLanguage> importedLanguages=((SModelInternal)smodel).importedLanguageIds();
      assertTrue("Model is expected to have exactly one used language",importedLanguages.size() == 1);
      assertEquals("jetbrains.mps.baseLanguage",importedLanguages.iterator().next().getQualifiedName());
    }
  }
);
}
