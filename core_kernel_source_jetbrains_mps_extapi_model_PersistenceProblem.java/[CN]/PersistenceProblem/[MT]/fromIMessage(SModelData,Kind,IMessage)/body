{
  if (message == null) {
    return null;
  }
  SNode anchor=message.getHintObject() instanceof SNode ? (SNode)message.getHintObject() : null;
  if (anchor == null && model != null && message.getHintObject() instanceof SNodeReference) {
    SNodeReference ptr=(SNodeReference)message.getHintObject();
    if (model.getReference().equals(ptr.getModelReference())) {
      anchor=model.getNode(ptr.getNodeId());
    }
  }
  return new PersistenceProblem(kind,message.getText(),null,message.getKind() == MessageKind.ERROR,-1,-1,anchor);
}
