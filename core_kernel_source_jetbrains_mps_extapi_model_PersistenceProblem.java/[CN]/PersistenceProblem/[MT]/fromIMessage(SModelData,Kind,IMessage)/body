{
  if (message == null) {
    return null;
  }
  SNode anchor=message.getHintObject() instanceof SNode ? (SNode)message.getHintObject() : null;
  if (anchor == null && model != null && message.getHintObject() instanceof SNodePointer) {
    SNodePointer ptr=(SNodePointer)message.getHintObject();
    if (ptr.getModelReference().equals(model.getReference())) {
      anchor=model.getNode(ptr.getNodeId());
    }
  }
  return new PersistenceProblem(kind,message.getText(),null,message.getKind() == MessageKind.ERROR,-1,-1,anchor);
}
