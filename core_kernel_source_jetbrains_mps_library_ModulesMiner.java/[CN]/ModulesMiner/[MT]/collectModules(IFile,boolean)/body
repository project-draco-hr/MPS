{
  List<ModuleHandle> result=new ArrayList<ModuleHandle>();
  readModuleDescriptors(dir,new HashSet<IFile>(),result,refreshFiles,new DescriptorReader<ModuleHandle>(){
    @Override public ModuleHandle read(    IFile file,    Set<IFile> excludes){
      ModuleDescriptor moduleDescriptor=loadDescriptorOnly_internal(file,excludes);
      if (moduleDescriptor != null) {
        return new ModuleHandle(file,moduleDescriptor);
      }
      return null;
    }
  }
);
  return result;
}
