{
  assertCanWrite();
  List<IModule> result=new ArrayList<IModule>();
  readModuleDescriptors(dir,new HashSet<IFile>(),result,refreshFiles,new DescriptorReader<IModule>(){
    @Override public IModule read(    ModuleHandle handle){
      return MPSModuleRepository.getInstance().registerModule(handle,owner);
    }
  }
);
  return result;
}
