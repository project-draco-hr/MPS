{
  SNode result=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.CastExpression",null);
  SLinkOperations.setTarget(result,"expression",convertExpressionRefl(x.expression),true);
  TypeReference myTypRef;
  if (x.type instanceof SingleNameReference) {
    myTypRef=new SingleTypeReference(((SingleNameReference)x.type).token,-1);
  }
 else   if (x.type instanceof QualifiedNameReference) {
    myTypRef=new QualifiedTypeReference(((QualifiedNameReference)x.type).tokens,new long[]{-1});
  }
 else {
    throw new JavaParseException("Unexpected type expression in type case: " + x.type.getClass().getName());
  }
  SLinkOperations.setTarget(result,"type",convertTypeRef(myTypRef),true);
  return result;
}
