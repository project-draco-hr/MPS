{
  super.update(e);
  Project p=e.getData(PlatformDataKeys.PROJECT);
  if (p == null)   return;
  PsiElement element=PluginUtil.getCurrentElement(e);
  PsiClass cls=getConceptClass(element);
  if (cls != null) {
    JavaPsiFacade psiFacade=JavaPsiFacade.getInstance(p);
    PsiClass snodeClass=psiFacade.findClass("jetbrains.mps.smodel.SNode",GlobalSearchScope.allScope(p));
    if (snodeClass == null)     return;
    if (cls.isInheritor(snodeClass,true)) {
      e.getPresentation().setVisible(true);
      return;
    }
  }
  e.getPresentation().setVisible(false);
}
