{
  if (!myMeasurementsInProgress.contains(monitor)) {
    LOG.error("task measurement is not in progress. Can't add any measurement results",new Throwable());
    return;
  }
  String taskKind=myTasksToTaskKinds.get(taskName);
  long newTime=estimatedTimeMillis;
  Long time=myTasksToEstimatedTime.get(taskName);
  if (time != null)   newTime=(time + newTime) / 2;
  Map<String,Long> transientTasks=myTransientTasksToEstimatedTime.get(monitor);
  if (transientTasks == null) {
    transientTasks=new HashMap<String,Long>();
    myTransientTasksToEstimatedTime.put(monitor,transientTasks);
  }
  transientTasks.put(taskName,newTime);
  if (taskKind != null) {
    long newKindTime=newTime;
    Long kindTime=myTaskKindsToEstimatedTime.get(taskKind);
    if (kindTime != null)     newKindTime=(kindTime + newKindTime) / 2;
    Map<String,Long> transientTaskKinds=myTransientTaskKindsToEstimatedTime.get(monitor);
    if (transientTaskKinds == null) {
      transientTaskKinds=new HashMap<String,Long>();
      myTransientTaskKindsToEstimatedTime.put(monitor,transientTaskKinds);
    }
    transientTaskKinds.put(taskKind,newKindTime);
  }
}
