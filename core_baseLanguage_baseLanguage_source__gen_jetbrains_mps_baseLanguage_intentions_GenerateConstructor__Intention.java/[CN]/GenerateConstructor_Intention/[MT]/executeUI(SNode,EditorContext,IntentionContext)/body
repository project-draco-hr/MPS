{
  final Wrappers._T<SNode> superclass=new Wrappers._T<SNode>(null);
  final Wrappers._T<SNodePointer[]> ctors=new Wrappers._T<SNodePointer[]>(null);
  final Wrappers._boolean needsShowConstructorsDialog=new Wrappers._boolean(false);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      superclass.value=SNodeOperations.as(SLinkOperations.getTarget(SLinkOperations.getTarget(node,"superclass",true),"classifier",false),"jetbrains.mps.baseLanguage.structure.ClassConcept");
      if (superclass.value == null) {
        superclass.value=SNodeOperations.getNode("f:java_stub#6354ebe7-c22a-4a0f-ac54-50b52ab9b065#java.lang(JDK/java.lang@java_stub)","~Object");
      }
      if (ListSequence.fromList(SLinkOperations.getTargets(superclass.value,"constructor",true)).count() > 1) {
        needsShowConstructorsDialog.value=true;
        ctors.value=ListSequence.fromList(SLinkOperations.getTargets(superclass.value,"constructor",true)).select(new ISelector<SNode,SNodePointer>(){
          public SNodePointer select(          SNode it){
            return new SNodePointer(it);
          }
        }
).toGenericArray(SNodePointer.class);
      }
 else {
        intentionContext.getContextParametersMap().put("selectedConstructors",new SNodePointer[]{new SNodePointer(ListSequence.fromList(SLinkOperations.getTargets(superclass.value,"constructor",true)).first())});
      }
    }
  }
);
  if (needsShowConstructorsDialog.value) {
    SelectConstructorsDialog selectConstructorsDialog=new SelectConstructorsDialog(ctors.value,editorContext.getOperationContext().getProject());
    selectConstructorsDialog.setTitle("Choose Super Class Constructor");
    selectConstructorsDialog.show();
    if (!(selectConstructorsDialog.isOK())) {
      return false;
    }
    List<SNodePointer> selectedElements=selectConstructorsDialog.getSelectedElements();
    intentionContext.getContextParametersMap().put("selectedConstructors",(selectedElements != null ? selectedElements.toArray(new SNodePointer[selectedElements.size()]) : new SNodePointer[0]));
  }
  final Wrappers._boolean needsShowFieldsDialog=new Wrappers._boolean(false);
  final Wrappers._T<SNodePointer[]> fields=new Wrappers._T<SNodePointer[]>(null);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      if (ListSequence.fromList(SLinkOperations.getTargets(node,"field",true)).isNotEmpty()) {
        needsShowFieldsDialog.value=true;
        fields.value=ListSequence.fromList(SLinkOperations.getTargets(node,"field",true)).select(new ISelector<SNode,SNodePointer>(){
          public SNodePointer select(          SNode it){
            return new SNodePointer(it);
          }
        }
).toGenericArray(SNodePointer.class);
      }
 else {
        intentionContext.getContextParametersMap().put("selectedFields",new SNodePointer[0]);
      }
    }
  }
);
  if (needsShowFieldsDialog.value) {
    SelectFieldsDialog selectFieldsDialog=new SelectFieldsDialog(fields.value,true,editorContext.getOperationContext().getProject());
    selectFieldsDialog.setTitle("Choose Fields to Initialize by Constructor");
    selectFieldsDialog.show();
    if (!(selectFieldsDialog.isOK())) {
      return false;
    }
    intentionContext.getContextParametersMap().put("selectedFields",Sequence.fromIterable(((Iterable<SNodePointer>)selectFieldsDialog.getSelectedElements())).toGenericArray(SNodePointer.class));
  }
  return true;
}
