{
synchronized (mySessionToContextPainterMap) {
    for (    S session : SetSequence.fromSet(MapSequence.fromMap(mySessionToContextPainterMap).keySet())) {
      CurrentLinePainter painter=MapSequence.fromMap(mySessionToContextPainterMap).get(session);
      if (painter != null) {
        painter.setVisible(newSession != null && newSession == session);
      }
    }
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      for (      EditorComponent editorComponent : EditorComponentUtil.getAllEditorComponents(myFileEditorManager,true)) {
        editorComponent.repaintExternalComponent();
      }
    }
  }
);
}
