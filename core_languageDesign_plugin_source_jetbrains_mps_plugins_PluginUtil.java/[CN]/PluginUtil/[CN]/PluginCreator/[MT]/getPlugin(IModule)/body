{
  if (module instanceof Language) {
    Language language=(Language)module;
    if (LanguageAspect.PLUGIN.get(language) == null)     return null;
    return getPlugin(language);
  }
 else   if (module instanceof Solution) {
    Solution solution=(Solution)module;
    if (!solution.getModuleFqName().equals(IDE_MODULE_ID)) {
      throw new IllegalStateException("Solution having a plugin is not " + IDE_MODULE_ID);
    }
    return getPlugin(solution);
  }
 else   if (module instanceof DevKit) {
    DevKit dk=(DevKit)module;
    if (dk.getDevKitPluginClass() == null)     return null;
    return getPlugin(dk);
  }
 else {
    throw new IllegalStateException("Module type \"" + module.getClass().getSimpleName() + "\" is not supported");
  }
}
