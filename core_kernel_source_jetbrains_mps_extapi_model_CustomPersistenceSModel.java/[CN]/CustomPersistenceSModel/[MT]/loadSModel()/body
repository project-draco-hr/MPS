{
  DataSource source=getSource();
  if (!source.isReadOnly() && source.getTimestamp() == -1) {
    return (SModel)myPersistence.createEmpty(getReference(),getSource());
  }
  try {
    IFile brokenFile=getBackupFile(true);
    if (brokenFile != null) {
      long l=((FileDataSource)getSource()).getFile().lastModified();
      if (l > 0 && brokenFile.lastModified() > l) {
        SModelBase brokenModel=(SModelBase)PersistenceFacade.getInstance().getDefaultModelFactory().load(new FileDataSource(brokenFile,null),Collections.<String,String>emptyMap());
        brokenModel.load();
        setChanged(true);
        return brokenModel.getSModel();
      }
    }
    return (SModel)myPersistence.readModel(getReference(),getSource());
  }
 catch (  IOException e) {
    return new StubModel(getReference(),e);
  }
}
