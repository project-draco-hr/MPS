{
  for (  SNode ancestor : SNodeOperations.getAncestorsWhereConceptInList(thisNode,new String[]{"jetbrains.mps.core.query.structure.MqlQuery","jetbrains.mps.core.query.structure.MqlClosure"},false)) {
    if (SNodeOperations.isInstanceOf(ancestor,"jetbrains.mps.core.query.structure.MqlQuery")) {
      return SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(ancestor,"jetbrains.mps.core.query.structure.MqlQuery"),"contextNode",true));
    }
  }
  return null;
}
