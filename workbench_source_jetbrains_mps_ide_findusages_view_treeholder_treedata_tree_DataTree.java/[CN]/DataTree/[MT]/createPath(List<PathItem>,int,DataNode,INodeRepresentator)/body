{
  DataNode next=null;
  for (  DataNode child : root.getChildren()) {
    if (path.get(index).getIdObject() instanceof String) {
      if (child.getData().getIdObject().equals(path.get(index).getIdObject())) {
        next=child;
      }
    }
 else {
      if (child.getData().getIdObject() == path.get(index).getIdObject()) {
        next=child;
      }
    }
  }
  if (next == null) {
    Object o=path.get(index).getIdObject();
    PathItemRole creator=path.get(index).getRole();
    BaseNodeData data=null;
    boolean isResult=index == path.size() - 1;
    if (o instanceof IModule) {
      data=new ModuleNodeData(creator,((IModule)o).getModuleUID(),isResult);
    }
 else     if (o instanceof SModel) {
      data=new ModelNodeData(creator,(SModel)o,isResult);
    }
 else     if (o instanceof SNode) {
      data=new NodeNodeData(creator,(SNode)o,isResult,nodeRepresentator);
    }
 else {
      String caption=(String)path.get(index).getIdObject();
      data=new CategoryNodeData(creator,caption);
    }
    next=new DataNode(data);
    root.add(next);
  }
  if (index == path.size() - 1) {
    return next;
  }
 else {
    return createPath(path,index + 1,next,nodeRepresentator);
  }
}
