{
  return new NodeChooserDialog(myProject,new BaseNodePointerModel(myProject){
    @Override public NavigationItem doGetNavigationItem(    final SNodeReference nodeReference){
      return new BaseNodePointerItem(nodeReference){
        @Override public void navigate(        boolean requestFocus){
        }
        @Nullable @Override public ItemPresentation getPresentation(){
          return new NodePointerPresentation(nodeReference){
            @NotNull @Override protected String calculatePresentableTextInternal(){
              String text=ModelAccess.instance().runReadAction(new Computable<String>(){
                public String compute(){
                  SNode node=(SNode)nodeReference.resolve(MPSModuleRepository.getInstance());
                  if (node == null) {
                    return "null plugin";
                  }
                  return SPropertyOperations.getString(SLinkOperations.getTarget(node,MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x5b7be37b4de9bb6eL,0x5b7be37b4dee5919L,"plugin")),MetaAdapterFactory.getProperty(0xcf935df46994e9cL,0xa132fa109541cba3L,0x5b7be37b4de9bb74L,0x5b7be37b4de9bb6fL,"id"));
                }
              }
);
              return ((text == null || text.length() == 0) ? super.calculatePresentableTextInternal() : text);
            }
          }
;
        }
      }
;
    }
    @Override public SNodeReference[] find(    boolean checkboxState){
      return ListSequence.fromList(nodesList).toGenericArray(SNodeReference.class);
    }
    @Override public SNodeReference[] find(    SearchScope scope){
      throw new UnsupportedOperationException("must not be used");
    }
    @Override public boolean loadInitialCheckBoxState(){
      return false;
    }
    @Override public boolean willOpenEditor(){
      return false;
    }
  }
);
}
