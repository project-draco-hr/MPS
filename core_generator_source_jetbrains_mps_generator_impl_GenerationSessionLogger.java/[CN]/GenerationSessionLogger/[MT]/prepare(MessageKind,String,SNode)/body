{
  Message message=new Message(kind,text);
  if (node != null) {
    if (myOperationContext != null) {
      if (keepModel(node.getModel(),kind != MessageKind.ERROR)) {
        NodeWithContext context=new NodeWithContext(node,myOperationContext.getInvocationContext());
        message.setHintObject(context);
      }
    }
 else     if (node.getModel() != null && node.getModel() != null && !(node.getModel().getModule() instanceof TransientModelsModule)) {
      message.setHintObject(new jetbrains.mps.smodel.SNodePointer(node));
    }
  }
  return message;
}
