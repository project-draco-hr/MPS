{
  Map<Node,Map<Direction2D,Integer>> nodeDirectionSizes=MapSequence.fromMap(new HashMap<Node,Map<Direction2D,Integer>>());
  for (  Node node : SetSequence.fromSet(MapSequence.fromMap(nodeSizes).keySet())) {
    Map<Direction2D,Integer> directionSizes=MapSequence.fromMap(new HashMap<Direction2D,Integer>());
    Dimension size=MapSequence.fromMap(nodeSizes).get(node);
    int horSize=size.height;
    MapSequence.fromMap(directionSizes).put(Direction2D.UP,horSize / 2);
    MapSequence.fromMap(directionSizes).put(Direction2D.DOWN,horSize - MapSequence.fromMap(directionSizes).get(Direction2D.UP));
    int verSize=size.width;
    MapSequence.fromMap(directionSizes).put(Direction2D.LEFT,verSize / 2);
    MapSequence.fromMap(directionSizes).put(Direction2D.RIGHT,verSize - MapSequence.fromMap(directionSizes).get(Direction2D.LEFT));
    MapSequence.fromMap(nodeDirectionSizes).put(node,directionSizes);
  }
  return nodeDirectionSizes;
}
