{
  if (ProjectHelper.toIdeaProject(getOperationContext().getProject()).getComponent(ProjectPluginManager.class).getTool(DiagramEditorTool_Tool.class).getDiagramCell() != this || ProjectHelper.toIdeaProject(getOperationContext().getProject()).getComponent(ProjectPluginManager.class).getTool(DiagramEditorTool_Tool.class).getSelectedSubstituteAction() == null) {
    hideConnectionDragFeedback();
    return;
  }
  myPatternEditorX=x;
  myPatternEditorY=y;
  if (trySubstituteImmediately()) {
    return;
  }
  getEditor().activateNodeSubstituteChooser(this,false);
}
