{
  ModelAccess.assertLegalWrite();
  Set<org.jetbrains.mps.openapi.model.SModelReference> loaded=new HashSet<org.jetbrains.mps.openapi.model.SModelReference>();
  SModelRepository modelRepository=SModelRepository.getInstance();
  for (  SModel model : getModels()) {
    loaded.add(model.getModelReference());
    register(model);
  }
  Iterator<SModel> it=myModels.iterator();
  while (it.hasNext()) {
    SModel model=it.next();
    if (loaded.contains(model.getModelReference()))     continue;
    modelRepository.unRegisterModelDescriptor((SModelDescriptor)model,getModule());
    it.remove();
  }
}
