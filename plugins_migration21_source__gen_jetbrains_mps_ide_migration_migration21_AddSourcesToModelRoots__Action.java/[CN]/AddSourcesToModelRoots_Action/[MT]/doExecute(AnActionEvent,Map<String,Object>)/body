{
  try {
    List<IModule> allModules=ListSequence.fromListWithValues(new ArrayList<IModule>(),MPSModuleRepository.getInstance().getAllModules());
    for (    IModule module : ListSequence.fromList(allModules)) {
      ModuleDescriptor descriptor=module.getModuleDescriptor();
      if (descriptor == null) {
        continue;
      }
      Collection<String> sp=descriptor.getSourcePaths();
      if (sp == null || sp.isEmpty()) {
        continue;
      }
      ModelRoot mr=new ModelRoot();
      mr.setPath(module.getClassesGen().getPath());
      mr.setManager(new ModelRootManager(MPSModuleRepository.getInstance().getModuleById(ModuleId.fromString("f3061a53-9226-4cc5-a443-f952ceaf5816")).getModuleReference().getModuleId().toString(),"jetbrains.mps.baseLanguage.stubs.JavaStubs"));
      Collection<ModelRoot> mrs=descriptor.getModelRoots();
      if (!(mrs.contains(mr))) {
        mrs.add(mr);
      }
      module.setModuleDescriptor(descriptor,false);
      module.save();
    }
    ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
  }
 catch (  Throwable t) {
    if (log.isErrorEnabled()) {
      log.error("User's action execute method failed. Action:" + "AddSourcesToModelRoots",t);
    }
  }
}
