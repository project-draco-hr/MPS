{
  return new AbstractProjectViewSelectInTarget(myProject,getId(),getWeight(),getTitle()){
    public VirtualFile myFile;
    @Override public boolean canSelect(    SelectInContext context){
      VirtualFile virtualFile=context.getVirtualFile();
      if (!(virtualFile instanceof MPSNodeVirtualFile)) {
        myFile=virtualFile;
        if (isInitialized() && getNode(virtualFile) == null)         return false;
        return true;
      }
      final MPSNodeVirtualFile nodeVirtualFile=(MPSNodeVirtualFile)virtualFile;
      SModel smodel=ModelAccess.instance().runReadAction(new Computable<SModel>(){
        @Override public SModel compute(){
          return nodeVirtualFile.getNode().getModel();
        }
      }
);
      if (smodel == null)       return false;
      DataSource source=smodel.getSource();
      if (!(source instanceof FileSystemBasedDataSource))       return false;
      IFile modelFile=((FileSystemBasedDataSource)source).getAffectedFiles().iterator().next();
      VirtualFile realFile=null;
      if (modelFile != null) {
        realFile=VirtualFileUtils.getProjectVirtualFile(modelFile);
      }
      myFile=realFile;
      if ((realFile == null) || (isInitialized() && getNode(realFile) == null))       return false;
      return true;
    }
    @Override protected void doSelectIn(    SelectInContext context,    boolean requestFocus){
      ModelAccess.instance().runReadAction(new Runnable(){
        @Override public void run(){
          selectNode(myFile,true);
        }
      }
);
    }
  }
;
}
