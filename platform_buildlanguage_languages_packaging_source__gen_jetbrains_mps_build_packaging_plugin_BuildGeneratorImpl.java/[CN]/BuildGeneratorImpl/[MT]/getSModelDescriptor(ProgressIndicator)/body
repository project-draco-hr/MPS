{
  if (this.getCreateModel()) {
    Solution solution;
    if (this.getCreateSolution()) {
      VirtualFile projectBaseDir=this.myProject.getBaseDir();
      String solutionName=this.getNewSolutionName();
      String solutionBaseDir=projectBaseDir.getPath() + File.separator + "solutions"+ File.separator+ solutionName;
      MPSProject mpsProject=this.myProject.getComponent(MPSProjectHolder.class).getMPSProject();
      indicator.setText("Creating Solution...");
      solution=BuildGeneratorUtil.createSolution(mpsProject,solutionName,solutionBaseDir);
    }
 else {
      solution=this.getSolution();
    }
    indicator.setText("Creating Model...");
    return BuildGeneratorUtil.createModel(this.getNewModelName(),solution);
  }
 else {
    return this.getModel();
  }
}
