{
  if (diff == null) {
    return;
  }
  if (diff instanceof EquationAddedOperation) {
    EquationAddedOperation eq=(EquationAddedOperation)diff;
    SNode child=eq.getChild();
    SNode parent=eq.getParent();
    if (myNodes.contains(child) && TypesUtil.isVariable(parent)) {
      myNodes.add(parent);
    }
    if (myNodes.contains(parent) && TypesUtil.isVariable(child)) {
      myNodes.add(child);
    }
  }
  if (diff instanceof TypeAssignedOperation) {
    TypeAssignedOperation typeDifference=(TypeAssignedOperation)diff;
    if (mySelectedNode == typeDifference.getNode() && TypesUtil.isVariable(typeDifference.getType())) {
      myNodes.add(typeDifference.getType());
    }
  }
  if (diff.getConsequences() != null) {
    for (    AbstractOperation childDiff : diff.getConsequences()) {
      getEquivalentVars(childDiff);
    }
  }
}
