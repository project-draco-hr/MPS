{
  if (mySelectedNode == null) {
    return true;
  }
  if (diff.getSource() == mySelectedNode) {
    return true;
  }
  if (diff instanceof jetbrains.mps.newTypesystem.operation.equation.EquationAddedOperation) {
    EquationAddedOperation eq=(EquationAddedOperation)diff;
    if (myNodes.contains(eq.getChild()) || myNodes.contains(eq.getParent())) {
      return true;
    }
  }
  if (diff instanceof AbstractRelationOperation) {
    AbstractRelationOperation d=(AbstractRelationOperation)diff;
    if (myNodes.contains(d.getSubType())) {
      return true;
    }
    if (myNodes.contains(d.getSuperType())) {
      return true;
    }
  }
  return false;
}
