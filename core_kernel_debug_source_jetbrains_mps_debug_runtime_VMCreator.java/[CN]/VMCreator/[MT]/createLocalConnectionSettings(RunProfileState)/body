{
  if (state instanceof RemoteRunProfileState) {
    RemoteRunProfileState remoteState=(RemoteRunProfileState)state;
    return remoteState.getSettings();
  }
 else   if (state instanceof BaseRunProfileState) {
    BaseRunProfileState baseRunProfileState=(BaseRunProfileState)state;
    DebugConnectionSettings connectionSettings=new LocalConnectionSettings(true);
    baseRunProfileState.putUserData(DebuggerKeys.CONNECTION_SETTINGS,connectionSettings.getCommandLine(true));
    return connectionSettings;
  }
 else {
    throw new RuntimeException("Unknown Run Profile State");
  }
}
