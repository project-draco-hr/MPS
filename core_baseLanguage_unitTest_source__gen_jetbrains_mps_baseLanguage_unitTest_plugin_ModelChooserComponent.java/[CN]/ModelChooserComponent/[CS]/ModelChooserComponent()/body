{
  super();
  this.setActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent p0){
      final MPSProject project=ModelChooserComponent.this.getProject();
      StringBuilder result=new StringBuilder();
      final List<SModelDescriptor> models=ListSequence.fromList(new ArrayList<SModelDescriptor>());
      final List<SModelDescriptor> checkedModels=ListSequence.fromList(new ArrayList<SModelDescriptor>());
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          for (          IModule module : GlobalScope.getInstance().getVisibleModules()) {
            ListSequence.fromList(models).addSequence(ListSequence.fromList(module.getOwnModelDescriptors()));
          }
          for (          IModule module : project.getModules()) {
            for (            SModelDescriptor descriptor : module.getOwnModelDescriptors()) {
              if (ListSequence.fromList(SModelOperations.getRoots(((SModel)descriptor.getSModel()),"jetbrains.mps.baseLanguage.unitTest.structure.BTestCase")).isNotEmpty()) {
                ListSequence.fromList(checkedModels).addElement(descriptor);
              }
            }
          }
        }
      }
);
      SModelDescriptor modelDescriptor=CommonChoosers.showDialogModelChooser(ModelChooserComponent.this,models,Collections.EMPTY_LIST);
      if (modelDescriptor != null) {
        result.append(modelDescriptor.getName());
        ModelChooserComponent.this.setText(result.toString());
      }
    }
  }
);
}
