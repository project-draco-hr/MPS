{
  setSourceElement(new MPSPsiElement(source));
  final Wrappers._T<SNode> layout=new Wrappers._T<SNode>();
  final Wrappers._boolean isApplicable=new Wrappers._boolean();
  final Wrappers._T<String> configurationId=new Wrappers._T<String>();
  final Wrappers._T<SNode> configuration=new Wrappers._T<SNode>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      layout.value=SNodeOperations.getAncestor(source,"jetbrains.mps.build.packaging.structure.Layout",false,true);
      isApplicable.value=(layout.value != null);
      configuration.value=ListSequence.fromList(SLinkOperations.getTargets(layout.value,"configuration",true)).findFirst(new IWhereFilter<SNode>(){
        public boolean accept(        SNode it){
          return BehaviorReflection.invokeNonVirtual(Boolean.TYPE,source,"jetbrains.mps.build.packaging.structure.AbstractProjectComponent","call_included_1213877333807",new Object[]{it});
        }
      }
);
      configurationId.value=configuration.value.getSNodeId().toString();
    }
  }
);
  if (!(isApplicable.value)) {
    return null;
  }
  CustomMPSApplication_Configuration runConfiguration=((CustomMPSApplication_Configuration)getConfigurationFactory().createConfiguration(SPropertyOperations.getString(layout.value,"name") + ".mpsbuild." + SPropertyOperations.getString(configuration.value,"name"),(CustomMPSApplication_Configuration)RunManagerImpl.getInstanceImpl(getContext().getProject()).getConfigurationTemplate(getConfigurationFactory()).getConfiguration()));
  runConfiguration.getNode().setNode(source);
  runConfiguration.setConfigurationId(configurationId.value);
  return runConfiguration;
}
