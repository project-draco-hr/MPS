{
  SNode expression=convertExpressionRefl(x.expression);
  SNode result=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.SwitchStatement",null);
  SLinkOperations.setTarget(result,"expression",expression,true);
  SLinkOperations.setTarget(result,"defaultBlock",SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.StatementList",null),true);
  if (x.defaultCase != null) {
    addBlock(SLinkOperations.getTarget(result,"defaultBlock",true),x.defaultCase.sourceStart(),x.defaultCase.sourceEnd());
  }
  if (x.statements != null) {
    SNode currentSwitchCase=null;
    for (    Statement stmt : x.statements) {
      if (stmt instanceof CaseStatement) {
        if ((currentSwitchCase != null)) {
          getBlock(currentSwitchCase).endPos=stmt.sourceStart;
        }
        CaseStatement caseStatement=(CaseStatement)stmt;
        if (caseStatement.constantExpression == null) {
          currentSwitchCase=SLinkOperations.getTarget(result,"defaultBlock",true);
        }
 else {
          SNode switchCase=convertCaseStatement(null,(CaseStatement)stmt);
          if ((switchCase != null)) {
            ListSequence.fromList(SLinkOperations.getTargets(result,"case",true)).addElement(switchCase);
          }
          currentSwitchCase=((switchCase == null) ? null : SLinkOperations.getTarget(switchCase,"body",true));
        }
      }
 else       if ((currentSwitchCase != null)) {
        getBlock(currentSwitchCase).endPos=stmt.sourceEnd;
        ListSequence.fromList(SLinkOperations.getTargets(currentSwitchCase,"statement",true)).addElement(convertStatementRefl(stmt));
      }
    }
    if ((currentSwitchCase != null)) {
      getBlock(currentSwitchCase).endPos=x.sourceEnd;
    }
  }
  return result;
}
