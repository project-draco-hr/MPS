{
  myDependenciesBuilder.setOutputModel(currentOutputModel,myMajorStep,myMinorStep);
  StepArguments args=new StepArguments(ruleManager,currentInputModel,currentOutputModel,myDependenciesBuilder,myNewTrace);
  return myGenerationOptions.isGenerateInParallel() ? new ParallelTemplateGenerator(myTaskPoolProvider,mySessionContext,args) : new TemplateGenerator(mySessionContext,args);
}
