{
  if (myLoggingHandler == null) {
    myLoggingHandler=new MPSAppenderBase(){
      @Override protected void append(      @NotNull Priority level,      @NotNull String categoryName,      @NotNull String message,      @Nullable Throwable t,      @Nullable Object hintObject){
        if (mySessionContext == null)         return;
        if (hintObject instanceof SNode) {
          final SModel m=((SNode)hintObject).getModel();
          mySessionContext.keepTransientModel(m.getReference(),false);
        }
 else         if (hintObject instanceof NodeWithContext) {
          SModelReference mr=((NodeWithContext)hintObject).getNode().getModelReference();
          mySessionContext.keepTransientModel(mr,false);
        }
 else         if (hintObject instanceof SNodeReference) {
          mySessionContext.keepTransientModel(((SNodeReference)hintObject).getModelReference(),false);
        }
      }
    }
;
  }
  return myLoggingHandler;
}
