{
  if (myLoggingHandler == null) {
    myLoggingHandler=new MPSAppenderBase(){
      @Override protected void append(      @NotNull Priority level,      @NotNull String categoryName,      @NotNull String message,      @Nullable Throwable t,      @Nullable Object hintObject){
        if (hintObject instanceof SNode) {
          final SModel m=((SNode)hintObject).getModel();
          myLogRecorder.record(MessageKind.fromPriority(level),m.getReference());
        }
 else         if (hintObject instanceof NodeWithContext) {
          SModelReference mr=((NodeWithContext)hintObject).getNode().getModelReference();
          myLogRecorder.record(MessageKind.fromPriority(level),mr);
        }
 else         if (hintObject instanceof SNodeReference) {
          myLogRecorder.record(MessageKind.fromPriority(level),((SNodeReference)hintObject).getModelReference());
        }
      }
    }
;
  }
  return myLoggingHandler;
}
