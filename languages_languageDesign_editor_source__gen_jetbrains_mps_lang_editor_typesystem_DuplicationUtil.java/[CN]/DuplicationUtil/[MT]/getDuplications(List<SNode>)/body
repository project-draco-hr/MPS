{
  final Set<SAbstractConcept> childConcepts=SetSequence.fromSet(new HashSet<SAbstractConcept>());
  final List<SNode> result=new ArrayList<SNode>();
  ListSequence.fromList(nodes).visitAll(new IVisitor<SNode>(){
    public void visit(    SNode it){
      if (!(SetSequence.fromSet(childConcepts).contains(SNodeOperations.getConcept(it)))) {
        SetSequence.fromSet(childConcepts).addElement(SNodeOperations.getConcept(it));
      }
 else {
        ListSequence.fromList(result).addElement(it);
      }
    }
  }
);
  return result;
}
