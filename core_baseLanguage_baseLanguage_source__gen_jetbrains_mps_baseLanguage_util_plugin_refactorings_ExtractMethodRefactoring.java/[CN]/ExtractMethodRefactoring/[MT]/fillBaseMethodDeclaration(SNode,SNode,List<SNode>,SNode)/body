{
  if (SNodeOperations.isInstanceOf(declaration,"jetbrains.mps.baseLanguage.structure.IVisible")) {
    SNode visibleDeclaration=SNodeOperations.cast(declaration,"jetbrains.mps.baseLanguage.structure.IVisible");
    SLinkOperations.setTarget(visibleDeclaration,"visibility",this.myParameters.getVisibilityLevel().getNode(),true);
  }
  SNode methodDeclaration=declaration;
  SLinkOperations.setTarget(methodDeclaration,"returnType",SNodeOperations.copyNode(returnType),true);
  SPropertyOperations.set(methodDeclaration,"name",this.myParameters.getName());
  ListSequence.<SNode>fromList(SLinkOperations.getTargets(methodDeclaration,"parameter",true)).addSequence(ListSequence.<SNode>fromList(params));
  SLinkOperations.setTarget(methodDeclaration,"body",body,true);
  return methodDeclaration;
}
