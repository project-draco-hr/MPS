{
  SNode root=getNodeTypesComponent().getNode();
  if (root == null)   return;
  doInvalidate();
  getNodeTypesComponent().setNonTypeSystemCheckingInProgress(true);
  try {
    Queue<SNode> frontier=new LinkedList<SNode>();
    frontier.add(root);
    while (!(frontier.isEmpty())) {
      SNode sNode=frontier.remove();
      applyNonTypesystemRulesToNode(sNode,typeCheckingContext);
      frontier.addAll(sNode.getChildren());
    }
  }
  finally {
    getNodeTypesComponent().setNonTypeSystemCheckingInProgress(false);
    myInvalidationWasPerformed=false;
  }
}
