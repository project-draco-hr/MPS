{
  assertLegalRead();
  ConcurrentMap<K,V> cache=(ConcurrentMap<K,V>)myRepositoryStateCaches.get(repositoryKey);
  if (cache != null) {
    return cache;
  }
  cache=new ConcurrentHashMap<K,V>();
  LOG.trace("Creating a new repository state cache");
  ConcurrentHashMap<K,V> existingCache=(ConcurrentHashMap<K,V>)myRepositoryStateCaches.putIfAbsent(repositoryKey,(ConcurrentMap<Object,Object>)cache);
  return existingCache != null ? existingCache : cache;
}
