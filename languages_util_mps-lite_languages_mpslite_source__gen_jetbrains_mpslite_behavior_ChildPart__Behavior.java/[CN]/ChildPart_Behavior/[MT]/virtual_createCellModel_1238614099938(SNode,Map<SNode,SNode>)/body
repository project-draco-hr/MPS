{
  if (SPropertyOperations.getBoolean(thisNode,"multiple")) {
    SNode refNodeList=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_RefNodeList",null);
    if (SPropertyOperations.getBoolean(thisNode,"vertical")) {
      SLinkOperations.setTarget(refNodeList,"cellLayout",SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellLayout_Vertical",null),true);
    }
 else {
      SLinkOperations.setTarget(refNodeList,"cellLayout",SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellLayout_Horizontal",null),true);
    }
    SLinkOperations.setTarget(refNodeList,"relationDeclaration",SNodeOperations.cast(MapSequence.fromMap(partsToLinks).get(thisNode),"jetbrains.mps.lang.structure.structure.LinkDeclaration"),false);
    return refNodeList;
  }
 else {
    SNode refNode=SConceptOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_RefNode",null);
    SLinkOperations.setTarget(refNode,"relationDeclaration",SNodeOperations.cast(MapSequence.fromMap(partsToLinks).get(thisNode),"jetbrains.mps.lang.structure.structure.LinkDeclaration"),false);
    return refNode;
  }
}
