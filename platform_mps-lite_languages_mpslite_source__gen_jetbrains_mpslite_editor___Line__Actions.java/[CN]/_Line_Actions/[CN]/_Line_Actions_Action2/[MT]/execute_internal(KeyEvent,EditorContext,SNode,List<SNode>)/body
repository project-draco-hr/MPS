{
  SNode selectedNode=editorContext.getSelectedNode();
  SNode linePart=SNodeOperations.getAncestor(selectedNode,"jetbrains.mpslite.structure.LinePart",true,false);
  SNode prevLinePart=null;
  while (linePart != null) {
    prevLinePart=linePart;
    linePart=SNodeOperations.getAncestor(linePart,"jetbrains.mpslite.structure.LinePart",false,false);
  }
  if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(prevLinePart),"jetbrains.mpslite.structure.Line")) {
    SNode line=SNodeOperations.cast(SNodeOperations.getParent(prevLinePart),"jetbrains.mpslite.structure.Line");
    SNode nextLine=SNodeOperations.insertNextSiblingChild(line,SNodeFactoryOperations.createNewNode("jetbrains.mpslite.structure.Line",null));
    SNode sibling=SNodeOperations.cast(SNodeOperations.getNextSibling(prevLinePart),"jetbrains.mpslite.structure.LinePart");
    while (sibling != null) {
      SNode currentSibling=sibling;
      sibling=SNodeOperations.cast(SNodeOperations.getNextSibling(sibling),"jetbrains.mpslite.structure.LinePart");
      line.removeChild(currentSibling);
      ListSequence.fromList(SLinkOperations.getTargets(nextLine,"linePart",true)).addElement(currentSibling);
    }
  }
}
