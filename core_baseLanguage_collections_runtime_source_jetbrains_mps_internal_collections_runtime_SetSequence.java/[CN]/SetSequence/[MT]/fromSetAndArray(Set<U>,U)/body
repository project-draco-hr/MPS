{
  if (Sequence.USE_NULL_SEQUENCE) {
    if (set == null && array == null) {
      return NullSetSequence.instance();
    }
  }
  if (set == null) {
    set=new HashSet<U>();
  }
  List<U> input=Arrays.asList(array);
  if (Sequence.IGNORE_NULL_VALUES) {
    for (    U u : input) {
      if (u != null) {
        set.add(u);
      }
    }
  }
 else {
    set.addAll(input);
  }
  if (set instanceof ISetSequence) {
    return (ISetSequence<U>)set;
  }
  return new SetSequence<U>(set);
}
