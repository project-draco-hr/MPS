{
  List<SNode> roots=SModelOperations.roots(_context.getModel(),MetaAdapterFactory.getConcept(new UUID(331587165301851084l,-4784639992745830411l),3265739055509559110l,"jetbrains.mps.samples.Kaja.structure.Script"));
  ListSequence.fromList(roots).translate(new ITranslator2<SNode,SNode>(){
    public Iterable<SNode> translate(    SNode it){
      return ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(it,MetaAdapterFactory.getContainmentLink(new UUID(331587165301851084l,-4784639992745830411l),3265739055509559110l,3265739055509559116l,"body")),MetaAdapterFactory.getContainmentLink(new UUID(331587165301851084l,-4784639992745830411l),3308300503039896127l,3308300503039896128l,"commands"))).where(new IWhereFilter<SNode>(){
        public boolean accept(        SNode it){
          return SNodeOperations.isInstanceOf(it,MetaAdapterFactory.getConcept(new UUID(331587165301851084l,-4784639992745830411l),3308300503039700857l,"jetbrains.mps.samples.Kaja.structure.RoutineDefinition"));
        }
      }
);
    }
  }
).visitAll(new IVisitor<SNode>(){
    public void visit(    SNode it){
      SNode script=SNodeOperations.getNodeAncestor(it,MetaAdapterFactory.getConcept(new UUID(331587165301851084l,-4784639992745830411l),3265739055509559110l,"jetbrains.mps.samples.Kaja.structure.Script"),false,false);
      SNodeOperations.detachNode(it);
      ListSequence.fromList(SLinkOperations.getChildren(script,MetaAdapterFactory.getContainmentLink(new UUID(331587165301851084l,-4784639992745830411l),3265739055509559110l,3308300503039700856l,"definitions"))).addElement(SNodeOperations.cast(it,MetaAdapterFactory.getConcept(new UUID(331587165301851084l,-4784639992745830411l),3308300503039700857l,"jetbrains.mps.samples.Kaja.structure.RoutineDefinition")));
    }
  }
);
}
