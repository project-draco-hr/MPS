{
  List<SNode> result=new ArrayList<SNode>();
  if (node == null) {
    return result;
  }
  if (childConceptFqName == null) {
    result=(List<SNode>)jetbrains.mps.util.SNodeOperations.getDescendants(node,null);
    if (inclusion) {
      result.add(0,node);
    }
    return result;
  }
  if (inclusion) {
    if (SNodeUtil.isInstanceOf(node,jetbrains.mps.util.SNodeOperations.getConcept(childConceptFqName))) {
      result.add(node);
    }
  }
  Condition<SNode> stopCondition=(stopConceptFqNames.length == 0 ? Condition.FALSE_CONDITION : new Condition<SNode>(){
    public boolean met(    SNode node){
      return SNodeOperations._isInstanceOf(node,stopConceptFqNames);
    }
  }
);
  SNodeOperations._populateListOfDescendants(result,node,new Condition<SNode>(){
    public boolean met(    SNode node){
      return SNodeUtil.isInstanceOf(node,jetbrains.mps.util.SNodeOperations.getConcept(childConceptFqName));
    }
  }
,stopCondition);
  return result;
}
