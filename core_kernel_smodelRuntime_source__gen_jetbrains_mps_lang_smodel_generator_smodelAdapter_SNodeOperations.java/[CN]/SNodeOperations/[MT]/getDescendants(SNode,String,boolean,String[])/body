{
  if (node == null) {
    return EMPTY_LIST;
  }
  List<SNode> result=new ArrayList<SNode>();
  if (childConceptFqName == null) {
    result=(List<SNode>)jetbrains.mps.util.SNodeOperations.getDescendants(node,null);
    if (inclusion) {
      result.add(0,node);
    }
    return result;
  }
  if (inclusion) {
    if (SNodeOperations._isInstanceOf(node,childConceptFqName)) {
      result.add(node);
    }
  }
  Condition<SNode> stopCondition=(stopConceptFqNames.length == 0 ? Condition.FALSE_CONDITION : new Condition<SNode>(){
    @Override public boolean met(    SNode node){
      return SNodeOperations._isInstanceOf(node,stopConceptFqNames);
    }
  }
);
  SNodeOperations._populateListOfDescendants(result,node,new Condition<SNode>(){
    @Override public boolean met(    SNode node){
      return SNodeOperations._isInstanceOf(node,childConceptFqName);
    }
  }
,stopCondition);
  return result;
}
