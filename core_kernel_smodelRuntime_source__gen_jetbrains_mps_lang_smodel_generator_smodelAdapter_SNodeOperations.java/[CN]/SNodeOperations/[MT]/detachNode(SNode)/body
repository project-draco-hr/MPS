{
  if (node != null && jetbrains.mps.util.SNodeOperations.isRegistered(node)) {
    SNode parent=node.getParent();
    if (parent != null) {
      parent.removeChild(node);
    }
 else {
      node.getModel().removeRoot(node);
    }
  }
  return node;
}
