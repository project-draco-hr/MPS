{
  if (node == null) {
    return null;
  }
  if (!(MetaAdapterByDeclaration.getConcept(node).isSubConceptOf(castTo))) {
    String message="Can't cast concept: " + node.getNodeId().toString() + ", FQName: "+ NameUtil.nodeFQName(node)+ " to concept: "+ castTo;
    if (ourCastExceptionsEnabled) {
      throw new NodeCastException(message);
    }
 else {
      LOG.warning(message);
    }
  }
  return node;
}
