{
  for (  SNode attribute : AttributeOperations.getAllAttributes(oldChild)) {
    if (SNodeOperations.isInstanceOf(attribute,"jetbrains.mps.lang.core.structure.PropertyAttribute")) {
      String propertyName=AttributeOperations.getPropertyName(SNodeOperations.cast(attribute,"jetbrains.mps.lang.core.structure.PropertyAttribute"));
      if ((BehaviorReflection.invokeNonVirtual((Class<SNode>)((Class)Object.class),SNodeOperations.getConceptDeclaration(newChild),"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration","call_findPropertyDeclaration_1219835742593",new Object[]{propertyName}) == null)) {
        LOG.error("couldn't copy attribute " + attribute.getConcept().getName() + " for property '"+ propertyName+ "' : so such property in concept "+ newChild.getConcept().getName(),newChild);
        continue;
      }
    }
    if (SNodeOperations.isInstanceOf(attribute,"jetbrains.mps.lang.core.structure.LinkAttribute")) {
      String linkRole=AttributeOperations.getLinkRole(SNodeOperations.cast(attribute,"jetbrains.mps.lang.core.structure.LinkAttribute"));
      if ((BehaviorReflection.invokeNonVirtual((Class<SNode>)((Class)Object.class),SNodeOperations.getConceptDeclaration(newChild),"jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration","call_findLinkDeclaration_1213877394467",new Object[]{linkRole}) == null)) {
        LOG.error("couldn't copy attribute " + attribute.getConcept().getName() + " for link '"+ linkRole+ "' : so such link in concept "+ newChild.getConcept().getName(),newChild);
        continue;
      }
    }
    newChild.addChild(SNodeOperations.getContainingLinkRole(attribute),SNodeOperations.copyNode(attribute));
  }
}
