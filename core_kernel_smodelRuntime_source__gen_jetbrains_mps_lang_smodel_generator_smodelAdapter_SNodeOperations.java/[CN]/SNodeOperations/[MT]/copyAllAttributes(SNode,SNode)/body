{
  for (  SNode attribute : AttributeOperations.getAllAttributes(oldChild)) {
    if (SNodeOperations.isInstanceOf(attribute,"jetbrains.mps.lang.core.structure.PropertyAttribute")) {
      String propertyName=AttributeOperations.getPropertyName(SNodeOperations.cast(attribute,"jetbrains.mps.lang.core.structure.PropertyAttribute"));
      if ((((SNode)BehaviorManager.getInstance().invoke(Object.class,SNodeOperations.getConceptDeclaration(newChild),"call_findPropertyDeclaration_1219835742593",new Class[]{SNode.class,String.class},propertyName)) == null)) {
        LOG.error("couldn't copy attribute " + attribute.getConceptShortName() + " for property '"+ propertyName+ "' : so such property in concept "+ newChild.getConceptShortName(),newChild);
        continue;
      }
    }
    if (SNodeOperations.isInstanceOf(attribute,"jetbrains.mps.lang.core.structure.LinkAttribute")) {
      String linkRole=AttributeOperations.getLinkRole(SNodeOperations.cast(attribute,"jetbrains.mps.lang.core.structure.LinkAttribute"));
      if ((((SNode)BehaviorManager.getInstance().invoke(Object.class,SNodeOperations.getConceptDeclaration(newChild),"call_findLinkDeclaration_1213877394467",new Class[]{SNode.class,String.class},linkRole)) == null)) {
        LOG.error("couldn't copy attribute " + attribute.getConceptShortName() + " for link '"+ linkRole+ "' : so such link in concept "+ newChild.getConceptShortName(),newChild);
        continue;
      }
    }
    newChild.addChild(SNodeOperations.getContainingLinkRole(attribute),SNodeOperations.copyNode(attribute));
  }
}
