{
  newOut.flush();
  newErr.flush();
  System.setOut(oldOut);
  System.setErr(oldErr);
  Logger.getRootLogger().removeAppender(app);
  Logger.getRootLogger().setLevel(oldLevel);
  if (!testsToIgnore.containsKey(desc) && newOut.getBytesCount() + newErr.getBytesCount() + app.getEventsCount() > 0) {
    Failure fail=new Failure(desc,new UncleanTestExecutionException(newOut.getBytesCount(),newErr.getBytesCount(),app.getEventsCount()));
    super.fireTestFailure(fail);
  }
}
