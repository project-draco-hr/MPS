{
  Set<SNode> nodes=SetSequence.<SNode>fromSet(new HashSet<SNode>());
  SetSequence.fromSet(nodes).addElement(node);
  for (  SNode child : ListSequence.<SNode>fromList(SNodeOperations.getDescendants(node,null,false,new String[]{}))) {
    SetSequence.fromSet(nodes).addElement(child);
  }
  Set<SReference> resRefs=FindUsagesManager.getInstance().findUsages(nodes,scope,new FindUsagesManager.ProgressAdapter(indicator),false);
  for (  SReference reference : resRefs) {
    if (!(SetSequence.<SNode>fromSet(nodes).contains(reference.getSourceNode()))) {
      ListSequence.<SNode>fromList(_results).addElement(reference.getSourceNode());
    }
  }
}
