{
  if (TextGenManager.instance().canGenerateTextFor(node)) {
    return TextGenManager.instance().generateText(context,node,withDebugInfo,buffers);
  }
 else   if (failIfNoTextgen) {
    String error="Can't generate text from " + node;
    Message m=new Message(MessageKind.ERROR,error);
    if (node != null && jetbrains.mps.util.SNodeOperations.isRegistered(node) && node.getModel() != null && !node.getModel().isTransient()) {
      m.setHintObject(new SNodePointer(node));
    }
    return new TextGenerationResult(NO_TEXTGEN,true,Collections.<IMessage>singleton(m),null,null,null,null);
  }
 else {
    return new TextGenerationResult(NO_TEXTGEN,false,null,null,null,null,null);
  }
}
