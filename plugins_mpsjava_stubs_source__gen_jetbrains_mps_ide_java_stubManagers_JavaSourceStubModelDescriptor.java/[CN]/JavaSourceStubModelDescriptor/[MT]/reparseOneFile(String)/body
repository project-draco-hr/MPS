{
  final JavaSourceStubModelDS ds=getSource();
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      try {
        final SModel myModel=getSModel();
        List<SNode> nodes=ds.parseFile(contents,myModel);
        List<SNode> roots=SModelOperations.getRoots(myModel,null);
        for (        SNode node : ListSequence.fromList(nodes)) {
          SNodeId nodeId=node.getSNodeId();
          final SNode root=myModel.getNodeById(nodeId);
          final SNode theNode=node;
          ModelAccess.instance().runUndoTransparentCommand(new Runnable(){
            public void run(){
              if ((root == null)) {
                SModelOperations.addRootNode(myModel,theNode);
              }
 else {
                SNodeOperations.detachNode(root);
                SNodeOperations.deleteNode(root);
                SModelOperations.addRootNode(myModel,theNode);
              }
            }
          }
,null);
        }
      }
 catch (      JavaParseException e) {
        LOG.error("Error while parsing java file: " + e.getMessage());
      }
    }
  }
);
}
