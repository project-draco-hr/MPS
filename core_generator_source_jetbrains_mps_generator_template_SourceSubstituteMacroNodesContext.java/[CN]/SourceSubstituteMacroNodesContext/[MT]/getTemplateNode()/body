{
  SNode tn=super.getTemplateNode();
  if (tn != null) {
    return tn;
  }
  tn=myMacroPointer != null ? myMacroPointer.resolve(MPSModuleRepository.getInstance()) : null;
  if (tn != null) {
    return tn;
  }
  tn=getRuleNodeForLogging();
  return tn != null ? tn.getParent() : null;
}
