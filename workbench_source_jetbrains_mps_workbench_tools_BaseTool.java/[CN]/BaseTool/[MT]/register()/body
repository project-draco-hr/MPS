{
  if (myProject.isDisposed())   return;
  if (isRegistered())   return;
  setIsRegistered(true);
  myWindowManager=ToolWindowManager.getInstance(myProject);
  if (myNumber != -1) {
    KeymapManager.getInstance().getActiveKeymap().addShortcut(ActivateToolWindowAction.getActionIdForToolWindow(myId),new KeyboardShortcut(KeyStroke.getKeyStroke("alt " + myNumber),null));
  }
  ToolWindow toolWindow=myWindowManager.getToolWindow(myId);
  if (toolWindow == null) {
    toolWindow=myWindowManager.registerToolWindow(myId,myCanCloseContent,myAnchor,mySideTool);
  }
  toolWindow.setIcon(myIcon);
  if (myComponent == null)   myComponent=getComponent();
  if (myComponent != null) {
    addContent(myComponent,null,null,false);
  }
  toolWindow.setToHideOnEmptyContent(true);
  toolWindow.installWatcher(toolWindow.getContentManager());
  if (!isInitiallyAvailable()) {
    setAvailable(false);
  }
  doRegister();
}
