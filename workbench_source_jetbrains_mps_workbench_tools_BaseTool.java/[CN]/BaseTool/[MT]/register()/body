{
  if (myProject.isDisposed())   return;
  if (isRegistered())   return;
  setIsRegistered(true);
  myWindowManager=ToolWindowManager.getInstance(myProject);
  if (myNumber != -1) {
    Keymap keymap=KeymapManager.getInstance().getKeymap(KeymapManager.DEFAULT_IDEA_KEYMAP);
    String actionId=ActivateToolWindowAction.getActionIdForToolWindow(myId);
    if (keymap.getShortcuts(actionId).length == 0) {
      KeyboardShortcut shortcut=new KeyboardShortcut(KeyStroke.getKeyStroke("alt " + myNumber),null);
      keymap.addShortcut(actionId,shortcut);
    }
  }
  ToolWindow toolWindow=myWindowManager.getToolWindow(myId);
  if (toolWindow == null) {
    toolWindow=myWindowManager.registerToolWindow(myId,myCanCloseContent,myAnchor,mySideTool);
  }
  toolWindow.setIcon(myIcon);
  if (myComponent == null)   myComponent=getComponent();
  if (myComponent != null) {
    addContent(myComponent,null,null,false);
  }
  toolWindow.setToHideOnEmptyContent(true);
  toolWindow.installWatcher(toolWindow.getContentManager());
  if (!isInitiallyAvailable()) {
    setAvailable(false);
  }
  doRegister();
}
