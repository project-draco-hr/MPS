{
  Assert.assertFalse("should be false (never used anyway)",allowErrors || allowWarnings);
  ITypeContextOwner owner=new DefaultTypecheckingContextOwner();
  SNode containingRoot=node.getContainingRoot();
  TypeContextManager.getInstance().runTypeCheckingAction(owner,containingRoot,new TypeChecker.CheckingAction(node,allowErrors,allowWarnings){
    public void checkOperation(    TypeCheckingContext context,    SNode operation){
      if (SNodeOperations.isInstanceOf(operation,"jetbrains.mps.lang.test.structure.NodeWarningProperty")) {
        Assert.assertTrue("node <" + TypeChecker.nodeWithIdToString(node) + "> does not have expected warning",context.getTypeMessageDontCheck(node).getMessageStatus() == MessageStatus.WARNING);
      }
    }
  }
);
}
