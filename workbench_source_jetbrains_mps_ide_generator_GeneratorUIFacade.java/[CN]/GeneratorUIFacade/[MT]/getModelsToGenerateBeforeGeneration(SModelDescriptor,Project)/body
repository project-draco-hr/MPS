{
  IModule module=model.getModule();
  if (module == null)   return Collections.emptyList();
  List<SModelDescriptor> result=new ArrayList<SModelDescriptor>();
  ModelGenerationStatusManager statusManager=ModelGenerationStatusManager.getInstance();
  for (  TemplateModule templateModule : GenerationPartitioningUtil.getTemplateModules(model.getSModel())) {
    Generator g=MPSModuleRepository.getInstance().getGenerator(templateModule.getReference());
    if (g == null)     continue;
    for (    SModelDescriptor sm : g.getOwnModelDescriptors()) {
      if (SModelStereotype.isUserModel(sm) && statusManager.generationRequired(sm,ProjectOperationContext.get(project))) {
        result.add(sm);
      }
    }
    for (    SModelDescriptor sm : g.getSourceLanguage().getAspectModelDescriptors()) {
      if (statusManager.generationRequired(sm,ProjectOperationContext.get(project))) {
        result.add(sm);
      }
    }
  }
  return result;
}
