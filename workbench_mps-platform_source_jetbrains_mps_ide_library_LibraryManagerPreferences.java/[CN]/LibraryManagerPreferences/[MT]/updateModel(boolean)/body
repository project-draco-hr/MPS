{
  ModelAccess.instance().runWriteAction(new Runnable(){
    @Override public void run(){
      Library oldSelection=(Library)myLibrariesList.getSelectedValue();
      List<Library> libraries=new ArrayList<Library>(myManager.getUILibraries());
      Collections.sort(libraries,new ToStringComparator());
      myListModel.clear();
      for (      Library l : libraries) {
        myListModel.addElement(l);
      }
      if (oldSelection != null) {
        myLibrariesList.setSelectedValue(oldSelection,true);
      }
      if (updateManager) {
        LibraryInitializer.getInstance().update();
      }
    }
  }
);
}
