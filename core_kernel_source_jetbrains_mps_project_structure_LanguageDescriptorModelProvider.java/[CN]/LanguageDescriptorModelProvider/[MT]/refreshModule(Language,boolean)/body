{
  ModelAccess.assertLegalWrite();
  SModelReference ref=getSModelReference(module);
  if (isDeleted) {
    LanguageModelDescriptor descriptor=myModels.get(ref);
    if (descriptor != null) {
      removeModel(descriptor);
    }
  }
 else   if (!myModels.containsKey(ref)) {
    createModel(module);
  }
 else {
    LanguageModelDescriptor languageModelDescriptor=myModels.get(ref);
    if (languageModelDescriptor != null) {
      languageModelDescriptor.invalidate();
    }
  }
}
