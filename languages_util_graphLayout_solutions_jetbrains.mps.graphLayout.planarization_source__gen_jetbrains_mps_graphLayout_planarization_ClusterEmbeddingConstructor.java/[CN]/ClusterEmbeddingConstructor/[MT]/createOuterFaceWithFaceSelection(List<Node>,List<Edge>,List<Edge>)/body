{
  if (mySubEmbeddedGraph.isEmpty()) {
    Node node=ListSequence.<Node>fromList(mySubclustersGraph.getNodes()).first();
    Edge prev=ListSequence.<Edge>fromList(subOuterEdges).last();
    Edge borderEdge=ListSequence.<Edge>fromList(subClusterBorder).last();
    Iterator<Edge> borderEdgeItr=ListSequence.<Edge>fromList(subClusterBorder).iterator();
    for (    Edge edge : ListSequence.<Edge>fromList(subOuterEdges)) {
      Face face=new Face(mySubclustersGraph);
      face.addLast(new Dart(borderEdge,borderEdge.getSource()));
      face.addLast(new Dart(edge,edge.getOpposite(node)));
      face.addLast(new Dart(prev,node));
      mySubEmbeddedGraph.addFace(face);
      prev=edge;
      borderEdge=borderEdgeItr.next();
    }
    Set<Edge> addedEdges=SetSequence.<Edge>fromSet(new HashSet<Edge>());
    SetSequence.fromSet(addedEdges).addSequence(ListSequence.<Edge>fromList(subOuterEdges));
    return addedEdges;
  }
  Tuples._2<Face,List<Tuples._2<Integer,Integer>>> bestFaceInfo=findBestFace();
  Face bestFace=bestFaceInfo._0();
  mySubEmbeddedGraph.removeFace(bestFace);
  List<Tuples._2<Integer,Integer>> positions=bestFaceInfo._1();
  List<Dart> darts=ListSequence.<Dart>fromList(bestFace.getDarts()).reversedList();
  positions=shiftLists(positions,darts,subBorderNodes,subOuterEdges,subClusterBorder);
  checkPos(positions);
  ClusterEmbeddingConstructor.ListParser<Dart> dartParser=new ClusterEmbeddingConstructor.ListParser(darts);
  ClusterEmbeddingConstructor.ListParser<Edge> edgeParser=new ClusterEmbeddingConstructor.ListParser(subClusterBorder);
  Tuples._2<Integer,Integer> prev=MultiTuple.<Integer,Integer>from(-1,-1);
  Set<Edge> addedEdges=SetSequence.<Edge>fromSet(new HashSet<Edge>());
  for (  Tuples._2<Integer,Integer> pos : ListSequence.<Tuples._2<Integer,Integer>>fromList(positions)) {
    if ((int)prev._0() == -1) {
      prev=pos;
      continue;
    }
    List<Dart> curDarts=dartParser.getNext((int)pos._1());
    List<Edge> curEdges=edgeParser.getNext((int)pos._0());
    this.addFace(subOuterEdges,prev,subBorderNodes,curEdges,pos,curDarts,addedEdges);
    prev=pos;
  }
  List<Dart> curDarts=dartParser.getEnd();
  List<Edge> curEdges=edgeParser.getEnd();
  Tuples._2<Integer,Integer> pos=ListSequence.<Tuples._2<Integer,Integer>>fromList(positions).first();
  addFace(subOuterEdges,prev,subBorderNodes,curEdges,pos,curDarts,addedEdges);
  return addedEdges;
}
