{
  Map<SNodeId,String> result=new HashMap<SNodeId,String>();
  Set<String> usedNames=new HashSet<String>();
  for (  SNode root : model.getRootNodes()) {
    SNodeId key=root.getNodeId();
    String value=asFileName(root.getName());
    if (value.length() == 0) {
      value=key instanceof Regular ? key.toString() : "Root";
    }
    if (!usedNames.add(value)) {
      String baseString=value;
      int index=2;
      value=baseString + index;
      while (!usedNames.add(value)) {
        index++;
        value=baseString + index;
      }
    }
    result.put(key,value + "." + FilePerRootDataSource.ROOT_EXTENSION);
  }
  return result;
}
