{
  boolean foundOptimize=true;
  while (foundOptimize) {
    foundOptimize=false;
    myLayout.refineEdgeLayout();
    for (    IEdge edge : SetSequence.<IEdge>fromSet(MapSequence.fromMap(myLayout.getEdgeLayout()).keySet())) {
      Edge myEdge=((Edge)edge);
      List<Point> path=myLayout.getEdgeLayout(edge);
      for (int i=0; i < ListSequence.<Point>fromList(path).count() - 3; i++) {
        List<Point> chain=ListSequence.<Point>fromList(new ArrayList<Point>());
        ListSequence.<Point>fromList(chain).addElement(ListSequence.<Point>fromList(path).getElement(i));
        ListSequence.<Point>fromList(chain).addElement(ListSequence.<Point>fromList(path).getElement(i + 1));
        ListSequence.<Point>fromList(chain).addElement(ListSequence.<Point>fromList(path).getElement(i + 2));
        ListSequence.<Point>fromList(chain).addElement(ListSequence.<Point>fromList(path).getElement(i + 3));
        List<Point> newChain=tryChain(chain,myEdge);
        if (newChain != null) {
          foundOptimize=true;
          List<Point> temp=ListSequence.<Point>fromList(new ArrayList<Point>());
          ListSequence.<Point>fromList(temp).addSequence(ListSequence.<Point>fromList(path).subListSequence(0,i));
          ListSequence.<Point>fromList(temp).addSequence(ListSequence.<Point>fromList(newChain));
          ListSequence.<Point>fromList(temp).addSequence(ListSequence.<Point>fromList(path).subListSequence(i + 4,ListSequence.<Point>fromList(path).count()));
          myLayout.setLayoutFor(edge,temp);
          break;
        }
      }
    }
  }
}
