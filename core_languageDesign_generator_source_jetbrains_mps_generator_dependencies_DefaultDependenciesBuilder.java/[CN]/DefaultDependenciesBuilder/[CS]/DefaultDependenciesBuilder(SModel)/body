{
  currentModel=inputModel;
  SNode[] roots=getRoots(inputModel);
  conditionalsBuilder=new DependenciesListener(null,this);
  currentToOriginalMap=new HashMap<SNode,SNode>(roots.length * 3 / 2);
  listenersList=new DependenciesListener[roots.length + 1];
  int e=0;
  listenersList[e++]=conditionalsBuilder;
  for (  SNode root : roots) {
    listenersList[e]=new DependenciesListener(root,this);
    listeners.put(root,listenersList[e++]);
    currentToOriginalMap.put(root,root);
  }
}
