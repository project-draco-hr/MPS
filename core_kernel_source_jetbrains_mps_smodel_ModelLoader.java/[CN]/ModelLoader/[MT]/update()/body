{
  UnregisteredNodes.instance().clear();
  for (  SNode root : myModel.roots()) {
    SNode fullRoot=myFullModel.getNodeById(root.getSNodeId());
    if (fullRoot == null) {
      throw new RuntimeException("Can't load the whole model " + myModel.getLongName() + ". Most probably, the model file is broken.");
    }
    for (    SNode child : new ArrayList<SNode>(fullRoot.getChildren(true))) {
      String role=child.getRole_();
      fullRoot.removeChild(child);
      root.addChild(role,child);
    }
  }
}
