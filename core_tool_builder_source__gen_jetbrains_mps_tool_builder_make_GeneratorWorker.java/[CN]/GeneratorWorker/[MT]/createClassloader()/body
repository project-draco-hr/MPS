{
  String pluginsPath=myWhatToDo.getProperty(ScriptProperties.PLUGIN_PATHS);
  Set<File> pluginsClasspath=SetSequence.fromSet(new LinkedHashSet<File>());
  if (pluginsPath != null) {
    for (    String plugin : pluginsPath.split(File.pathSeparator)) {
      File lib=new File(plugin + File.separator + "lib");
      if (lib.exists() && lib.isDirectory()) {
        SetSequence.fromSet(pluginsClasspath).addSequence(Sequence.fromIterable(Sequence.fromArray(lib.listFiles(PathManager.JAR_FILE_FILTER))));
      }
    }
  }
  if ((pluginsPath == null || pluginsPath.length() == 0)) {
    return null;
  }
  return new UrlClassLoader(SetSequence.fromSet(pluginsClasspath).select(new ISelector<File,URL>(){
    public URL select(    File it){
      try {
        return it.toURI().toURL();
      }
 catch (      MalformedURLException e) {
        return null;
      }
    }
  }
).where(new IWhereFilter<URL>(){
    public boolean accept(    URL it){
      return it != null;
    }
  }
).toGenericArray(URL.class),LibraryInitializer.class.getClassLoader());
}
