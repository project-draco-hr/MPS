{
  if (SNodeOperations.getAncestor(_context.getEnclosingNode(),"jetbrains.mps.lang.test.structure.TestNode",false,false) != null) {
    return new EmptySearchScope();
  }
  SNode test=SNodeOperations.getAncestor(_context.getEnclosingNode(),"jetbrains.mps.lang.test.structure.NodesTestCase",true,false);
  List<SNode> result=ListOperations.<SNode>createList();
  if (test != null) {
    for (    SNode node : ListSequence.fromList(SNodeOperations.getDescendants(test,"jetbrains.mps.lang.test.structure.TestNodeAnnotation",true))) {
      ListSequence.fromList(result).addElement(node);
    }
  }
  return new SimpleSearchScope(result);
}
