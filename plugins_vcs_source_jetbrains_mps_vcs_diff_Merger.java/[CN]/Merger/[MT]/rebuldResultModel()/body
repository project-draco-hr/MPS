{
  myResultModel=ModelPersistence.copyModel(getBase(mySourceModels));
  boolean wasLoading=myResultModel.setLoading(true);
  try {
    ModuleReference languageNamespace=ModuleReference.fromString("jetbrains.mps.core");
    SNode tmp=new SNode(myResultModel,NameUtil.conceptFQNameFromNamespaceAndShortName(languageNamespace.getModuleFqName(),"BaseConcept"));
    boolean notRemoveLanguage=false;
    if (myResultModel.importedLanguages().contains(languageNamespace)) {
      notRemoveLanguage=true;
    }
    myResultModel.addRoot(tmp);
    myUnresolvedConflictingChanges=new LinkedHashSet<Change>();
    for (    Conflict conflict : myConflicts) {
      if (!myExcludedChanges.contains(conflict.getChange1()) && !myExcludedChanges.contains(conflict.getChange2())) {
        myUnresolvedConflictingChanges.add(conflict.getChange1());
        myUnresolvedConflictingChanges.add(conflict.getChange2());
      }
    }
    for (    Change change : new ArrayList<Change>(myUnresolvedConflictingChanges)) {
      myUnresolvedConflictingChanges.addAll(getChangeGroupOf(change));
    }
    applyImportLanguages();
    applyImportModels();
    applyLanguageAspectChange();
    applyNewNodes();
    applyProperties();
    applyReferences();
    for (    MoveNodeChange mnc : getChanges(MoveNodeChange.class)) {
      SNode node=myResultModel.getNodeById(mnc.getAffectedNodeId());
      if (node != null) {
        if (node.isRoot()) {
          myResultModel.removeRoot(node);
        }
 else {
          node.getParent().removeChild(node);
        }
        tmp.addChild("tmp",node);
      }
    }
    applyDeletes();
    applyMoves();
    applyConceptChanges();
    myResultModel.removeRoot(tmp);
    if (!notRemoveLanguage)     myResultModel.deleteLanguage(languageNamespace);
  }
  finally {
    myResultModel.setLoading(wasLoading);
  }
}
