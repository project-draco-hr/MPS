{
  super.doInit();
  for (  final SReference ref : myNode.getReferences()) {
    add(new TextTreeNode(ref.getRole() + ": " + ref.getTargetNode(),getOperationContext()){
{
        setIcon(Icons.DEFAULT_ICON);
      }
      public void doubleClick(){
        ModelAccess.instance().runReadAction(new Runnable(){
          public void run(){
            SNode target=ref.getTargetNode();
            if (target == null)             return;
            getOperationContext().getComponent(MPSEditorOpener.class).openNode(target);
          }
        }
);
      }
      @Override public JPopupMenu getPopupMenu(){
        JPopupMenu result=new JPopupMenu();
        result.add(new AbstractActionWithEmptyIcon("Delete"){
          public void actionPerformed(          ActionEvent e){
            ModelAccess.instance().runWriteActionInCommand(new Runnable(){
              public void run(){
                myNode.removeReference(ref);
              }
            }
);
          }
        }
);
        return result;
      }
      public boolean isLeaf(){
        return true;
      }
    }
);
  }
  myInitialized=true;
}
