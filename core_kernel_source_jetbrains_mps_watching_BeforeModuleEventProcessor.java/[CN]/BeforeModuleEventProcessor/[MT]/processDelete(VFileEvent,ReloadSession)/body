{
  IModule module=ModuleFileProcessor.getModuleByEvent(event);
  if (module != null) {
    reloadSession.addDeletedModule(module);
  }
 else {
    VirtualFile vfile=getVFile(event);
    if (vfile == null)     return;
    if (MPSFileTypesManager.instance().isModuleFile(vfile)) {
      Project project=ApplicationLevelVcsManager.instance().getProjectForFile(vfile);
      if (project != null) {
        MPSVCSManager.getInstance(project).deleteVirtualFilesAndRemoveFromVcs(Collections.singleton(vfile),true);
      }
    }
  }
}
