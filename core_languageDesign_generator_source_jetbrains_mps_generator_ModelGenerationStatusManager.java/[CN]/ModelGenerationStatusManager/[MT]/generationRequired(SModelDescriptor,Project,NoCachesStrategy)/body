{
  if (sm.isPackaged())   return false;
  if (SModelStereotype.isStubModelStereotype(sm.getStereotype()))   return false;
  if (sm.getModelFile() == null)   return false;
  if (isDoNotGenerate(sm))   return false;
  if (SModelRepository.getInstance().isChanged(sm))   return true;
  if (isEmpty(sm))   return false;
  String generatedHash=getGenerationHash(sm);
  if (generatedHash == null)   return true;
  if (DumbService.getInstance(project).isDumb()) {
    if (strategy == null)     throw new AssertionError("NoCachesStrategy should be specified in this case");
    return strategy.compute(project,sm,generatedHash);
  }
  return checkGenerationRequired(project,generatedHash);
}
