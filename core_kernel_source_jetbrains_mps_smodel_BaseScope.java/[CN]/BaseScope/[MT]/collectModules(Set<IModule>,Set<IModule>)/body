{
  result.addAll(initial);
  for (  IModule module : initial) {
    for (    Dependency d : module.getDependencies()) {
      IModule dependency=MPSModuleRepository.getInstance().getModuleByUID(d.getModuleUID());
      if (dependency != null) {
        result.add(dependency);
      }
 else {
        LOG.error("Can't find a module " + d.getModuleUID() + " in "+ this);
      }
    }
  }
  boolean changed=true;
  while (changed) {
    changed=false;
    for (    IModule module : new HashSet<IModule>(result)) {
      for (      Dependency dep : module.getDependencies()) {
        if (dep.isREExport()) {
          IModule dependency=MPSModuleRepository.getInstance().getModuleByUID(dep.getModuleUID());
          if (dependency != null) {
            if (!result.contains(dependency)) {
              result.add(dependency);
              changed=true;
            }
          }
 else {
            LOG.error("Can't find a module " + dep.getModuleUID() + " in "+ this);
          }
        }
      }
    }
  }
}
