{
  return (Iterable<SNode>)((SConceptOperations.isSubConceptOf(SNodeOperations.asSConcept(SNodeOperations.getConceptDeclaration(type)),MetaAdapterFactory.getConcept(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,"jetbrains.mps.baseLanguage.collections.structure.MapType")) ? Sequence.fromIterable(containerDeclarations(model,type)).select(new ISelector<SNode,SNode>(){
    public SNode select(    SNode ccd){
      SNode cmc=SConceptOperations.createNewNode(SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(new UUID(-8968771020793164004l,-7182180101671965361l),1576845966386891367l,"jetbrains.mps.baseLanguage.collections.structure.CustomMapCreator")));
      SLinkOperations.setTarget(cmc,MetaAdapterFactory.getReferenceLink(new UUID(-8968771020793164004l,-7182180101671965361l),1576845966386891367l,1576845966386891370l,"containerDeclaration"),ccd);
      List<SNode> tvds=SLinkOperations.getChildren(ccd,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1109279851642l,1109279881614l,"typeVariableDeclaration"));
      List<SNode> ctParams=ListSequence.fromListAndArray(new ArrayList<SNode>(),SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(ccd,MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),6099516049394485216l,6099516049394485311l,"containerType")),MetaAdapterFactory.getConcept(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,"jetbrains.mps.baseLanguage.collections.structure.MapType")),MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,1197683466920l,"keyType")),SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(ccd,MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),6099516049394485216l,6099516049394485311l,"containerType")),MetaAdapterFactory.getConcept(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,"jetbrains.mps.baseLanguage.collections.structure.MapType")),MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,1197683475734l,"valueType")));
      List<SNode> typeParams=ListSequence.fromListAndArray(new ArrayList<SNode>(),SLinkOperations.getTarget(SNodeOperations.as(type,MetaAdapterFactory.getConcept(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,"jetbrains.mps.baseLanguage.collections.structure.MapType")),MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,1197683466920l,"keyType")),SLinkOperations.getTarget(SNodeOperations.cast(type,MetaAdapterFactory.getConcept(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,"jetbrains.mps.baseLanguage.collections.structure.MapType")),MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),1197683403723l,1197683475734l,"valueType")));
      with_ctParams:       for (int idx=0; idx < ListSequence.fromList(ctParams).count(); idx++) {
        SNode c=ListSequence.fromList(ctParams).getElement(idx);
        if (SNodeOperations.isInstanceOf(c,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1109283449304l,"jetbrains.mps.baseLanguage.structure.TypeVariableReference"))) {
          SNode pt=ListSequence.fromList(typeParams).getElement((ListSequence.fromList(tvds).count() > 1 ? ListSequence.fromList(tvds).indexOf(SLinkOperations.getTarget(SNodeOperations.cast(c,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1109283449304l,"jetbrains.mps.baseLanguage.structure.TypeVariableReference")),MetaAdapterFactory.getReferenceLink(new UUID(-935030926396207931l,-6610165693999523818l),1109283449304l,1109283546497l,"typeVariableDeclaration"))) : idx));
switch (idx) {
case 0:
            SLinkOperations.setTarget(cmc,MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),1197686869805l,1197687026896l,"keyType"),SNodeOperations.copyNode(pt));
          break;
case 1:
        SLinkOperations.setTarget(cmc,MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),1197686869805l,1197687035757l,"valueType"),SNodeOperations.copyNode(pt));
      break;
default :
    break with_ctParams;
}
}
}
return cmc;
}
}
) : Sequence.fromIterable(containerDeclarations(model,type)).select(new ISelector<SNode,SNode>(){
public SNode select(SNode ccd){
SNode ccc=SConceptOperations.createNewNode(SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(new UUID(-8968771020793164004l,-7182180101671965361l),1331913329176106419l,"jetbrains.mps.baseLanguage.collections.structure.CustomContainerCreator")));
SLinkOperations.setTarget(ccc,MetaAdapterFactory.getReferenceLink(new UUID(-8968771020793164004l,-7182180101671965361l),1331913329176106419l,1331913329176106420l,"containerDeclaration"),ccd);
if (ListSequence.fromList(SLinkOperations.getChildren(ccd,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1109279851642l,1109279881614l,"typeVariableDeclaration"))).count() == 1) {
SLinkOperations.setTarget(ccc,MetaAdapterFactory.getContainmentLink(new UUID(-8968771020793164004l,-7182180101671965361l),1237721394592l,1237721435807l,"elementType"),SNodeOperations.as(ListSequence.fromList(SNodeOperations.getChildren(type)).first(),MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1068431790189l,"jetbrains.mps.baseLanguage.structure.Type")));
}
return ccc;
}
}
)));
}
