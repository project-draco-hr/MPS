{
  runUpdateTask(new _FunctionTypes._void_P0_E0(){
    public void invoke(){
      final SNodeId rootId=event.getRoot().getSNodeId();
      if (removeChanges(rootId,AddRootChange.class,new _FunctionTypes._return_P1_E0<Boolean,AddRootChange>(){
        public Boolean invoke(        AddRootChange ch){
          return true;
        }
      }
) == 0) {
        removeDescendantChanges(rootId);
        buildAndAddChanges(new _FunctionTypes._void_P1_E0<ChangeSetBuilder>(){
          public void invoke(          ChangeSetBuilder b){
            b.buildNodeChanges(getOldNode(rootId),null);
          }
        }
);
      }
    }
  }
,event.getRoot());
}
