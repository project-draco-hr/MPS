{
  runUpdateTask(new _FunctionTypes._void_P0_E0(){
    public void invoke(){
      final SReference ref=event.getReference();
      SNode refNode=ref.getSourceNode();
      removeChanges(refNode.getSNodeId(),SetReferenceChange.class,new _FunctionTypes._return_P1_E0<Boolean,SetReferenceChange>(){
        public Boolean invoke(        SetReferenceChange src){
          return eq_5iuzi5_a0a0a0a2a2a0a0a0a0b0(ref.getRole(),src.getRole());
        }
      }
);
      ChangeSet cs=myDifference.getChangeSet();
      ChangeSetBuilder builder=ChangeSetBuilder.createBuilder(cs);
      builder.buildReferenceChanges(cs.getOldModel().getNodeById(refNode.getSNodeId()),refNode,ref.getRole());
      ListSequence.fromList(builder.getNewChanges()).visitAll(new IVisitor<ModelChange>(){
        public void visit(        ModelChange ch){
          addChange(ch);
        }
      }
);
    }
  }
,event.getReference().getSourceNode());
}
