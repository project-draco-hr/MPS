{
  if (change instanceof NodeChange) {
    return Arrays.asList(((NodeChange)change).getAffectedNodeId());
  }
 else   if (change instanceof AddRootChange || change instanceof DeleteRootChange) {
    return Arrays.asList(change.getRootId());
  }
 else   if (change instanceof NodeGroupChange) {
    NodeGroupChange ngc=(NodeGroupChange)change;
    List<SNode> children=change.getChangeSet().getNewModel().getNodeById(ngc.getParentNodeId()).getChildren(ngc.getRole());
    return ListSequence.fromList(children).page(ngc.getResultBegin(),ngc.getResultBegin()).select(new ISelector<SNode,SNodeId>(){
      public SNodeId select(      SNode n){
        return n.getSNodeId();
      }
    }
);
  }
  return Sequence.fromIterable(Collections.<SNodeId>emptyList());
}
