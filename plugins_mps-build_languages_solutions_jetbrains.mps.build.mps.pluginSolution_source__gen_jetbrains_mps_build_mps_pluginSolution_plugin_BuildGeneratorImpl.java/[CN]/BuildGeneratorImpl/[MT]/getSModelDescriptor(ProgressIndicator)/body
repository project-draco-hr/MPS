{
  if (getCreateModel()) {
    Solution solution;
    if (getCreateSolution()) {
      VirtualFile projectBaseDir=myProject.getBaseDir();
      String solutionName=getNewSolutionName();
      String solutionBaseDir=projectBaseDir.getPath() + File.separator + "solutions"+ File.separator+ solutionName;
      indicator.setText("Creating Solution...");
      solution=BuildGeneratorUtil.createSolution(myProject.getComponent(MPSProject.class),solutionName,solutionBaseDir);
    }
 else {
      solution=getSolution();
    }
    indicator.setText("Creating Model...");
    return BuildGeneratorUtil.createModel(getNewModelName(),solution);
  }
 else {
    return this.getModel();
  }
}
