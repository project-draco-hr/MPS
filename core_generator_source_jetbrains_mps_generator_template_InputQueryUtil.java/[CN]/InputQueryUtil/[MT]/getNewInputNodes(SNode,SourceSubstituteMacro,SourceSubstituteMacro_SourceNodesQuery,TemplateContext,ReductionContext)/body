{
  if (query != null) {
    List<SNode> list=reductionContext.getQueryExecutor().evaluateSourceNodesQuery(currentInputNode,null,macro.getNode(),query,context);
    return list != null ? list : Collections.<SNode>emptyList();
  }
  throw new GenerationFailureException("couldn't evaluate macro query",currentInputNode,BaseAdapter.fromAdapter(macro),null);
}
