{
  this.removeAllChildren();
  SNode n=getSNode();
  if (n == null || jetbrains.mps.util.SNodeOperations.isDisposed(n))   return;
  NodeChildrenProvider provider=getAncestor(NodeChildrenProvider.class);
  if (provider != null) {
    provider.populate(this);
  }
  if (ourShowStructureCondition == null || ourShowStructureCondition.met(getTree())) {
    for (    SNode childNode : n.getChildren()) {
      if (!myCondition.met(childNode))       continue;
      SNodeTreeNode child=createChildTreeNode(childNode,childNode.getRoleInParent(),getOperationContext());
      child.myCondition=myCondition;
      add(child);
    }
  }
  DefaultTreeModel treeModel=(DefaultTreeModel)getTree().getModel();
  treeModel.nodeStructureChanged(this);
  myInitialized=true;
}
