{
  Node last=null;
  for (  Node node : SetSequence.fromSet(getEdgesOrder().getNodes())) {
    if (ListSequence.fromList(getEdgesOrder().getOutEdgesOrder(node)).count() == 0) {
      last=node;
    }
  }
  for (  PQNode child : ListSequence.fromList(getChildren())) {
    child.collectEdgesOrderInSubtree(order);
    if (child instanceof PNode && ((PNode)child).getGraphNode() == last) {
      order.merge(getEdgesOrder());
    }
  }
}
