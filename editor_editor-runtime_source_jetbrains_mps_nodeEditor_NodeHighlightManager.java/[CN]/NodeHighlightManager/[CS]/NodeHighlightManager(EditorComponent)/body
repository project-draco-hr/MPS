{
  myEditor=editor;
  editor.addRebuildListener(myRebuildListener=new RebuildListener(){
    public void editorRebuilt(    EditorComponent editor){
      boolean needRebuild=getMessagesCache().isEmpty();
      if (!needRebuild) {
        for (        EditorCell cell : getMessagesCache().keySet()) {
          if (!myEditor.isValid(cell)) {
            needRebuild=true;
            break;
          }
        }
      }
      if (needRebuild) {
        invalidateMessagesCaches();
        repaintAndRebuildEditorMessages();
      }
    }
  }
);
  ClassLoaderManager.getInstance().addReloadHandler(myHandler);
}
