{
  Map<Edge,Integer> edgeShifts=MapSequence.fromMap(new HashMap<Edge,Integer>());
  for (  QuasiRepresentationModifier.Modification modification : ListSequence.fromList(modifications)) {
    List<Edge> edges=modification.getNewEdges();
    Node node=modification.getSource();
    Direction2D dir=MapSequence.fromMap(directions).get(modification.getSourceDart());
    Direction2D shiftDir=dir.turnClockwise(3);
    int nodeLength=MapSequence.fromMap(MapSequence.fromMap(nodeSizes).get(node)).get(shiftDir);
    nodeLength=Math.min(nodeLength,myUnitLength);
    int unitShift=nodeLength / ListSequence.fromList(edges).count();
    int curShift=0;
    for (    Edge edge : ListSequence.fromList(edges)) {
      MapSequence.fromMap(edgeShifts).put(edge,curShift);
      curShift+=unitShift;
    }
  }
  return edgeShifts;
}
