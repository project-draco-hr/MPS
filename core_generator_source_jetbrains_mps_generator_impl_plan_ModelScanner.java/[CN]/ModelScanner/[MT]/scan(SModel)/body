{
  FastNodeFinder fnf=FastNodeFinderManager.get(model);
  Translate<SNode,SNode> parentExtractor=new Translate<SNode,SNode>(){
    @Override public SNode translate(    SNode t){
      return t.getParent();
    }
  }
;
  Translate<SNode,SNode> inlineTemplateExtractor=new Translate<SNode,SNode>(){
    @Override public SNode translate(    SNode rc){
      return RuleUtil.getInlineTemplate_templateNode(rc);
    }
  }
;
  processTemplateNode(fnf.getNodes(RuleUtil.concept_TemplateFragment.getQualifiedName(),false),parentExtractor);
  processTemplateNode(fnf.getNodes(RuleUtil.concept_RootTemplateAnnotation.getQualifiedName(),false),parentExtractor);
  processTemplateNode(fnf.getNodes(RuleUtil.concept_InlineTemplate_RuleConsequence.getQualifiedName(),false),inlineTemplateExtractor);
  scanScriptsForChangeOperations(fnf);
  processQueryNodes(fnf.getNodes(RuleUtil.concept_TemplateQueryBase.getQualifiedName(),true));
  return this;
}
