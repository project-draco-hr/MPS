{
  if (newChild != null && !SModelUtil.isAcceptableTarget(myLinkDeclaration,newChild)) {
    LOG.error("couldn't set instance of " + newChild.getConcept().getId() + " as child '"+ SModelUtil.getLinkDeclarationRole(myLinkDeclaration)+ "' to "+ org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(parentNode));
    return newChild;
  }
  if (oldChild == null) {
    parentNode.addChild(SModelUtil.getGenuineLinkRole(myLinkDeclaration),newChild);
  }
 else {
    org.jetbrains.mps.openapi.model.SNodeUtil.replaceWithAnother(oldChild,newChild);
    oldChild.delete();
  }
  return newChild;
}
