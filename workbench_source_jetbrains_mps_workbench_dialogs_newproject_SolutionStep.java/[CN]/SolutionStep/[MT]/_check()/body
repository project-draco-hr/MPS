{
  if (myOptions.getCreateNewSolution()) {
    if (myPath.getPath().length() == 0) {
      throw new CommitStepException("Enter solution directory");
    }
    if (myNamespace.getText().length() == 0) {
      throw new CommitStepException("Enter solution name");
    }
    if (MPSModuleRepository.getInstance().getModuleByUID(myNamespace.getText()) != null) {
      throw new CommitStepException("Duplicate solution name");
    }
    String descriptorPath=myPath.getPath() + File.separator + myNamespace.getText()+ MPSExtentions.DOT_SOLUTION;
    File file=new File(descriptorPath);
    if (file.exists()) {
      throw new CommitStepException("Solution file already exists");
    }
    File dir=file.getParentFile();
    if (!(dir.isAbsolute())) {
      throw new CommitStepException("Path should be absolute");
    }
    if (!(dir.exists())) {
      boolean created=DirectoryUtil.askToCreateNewDirectory(JOptionPane.getFrameForComponent(getComponent()),dir,false);
      if (!created) {
        throw new CommitStepException("Specify another directory");
      }
    }
    final File descriptorFile=prepareToCreateNewSolutionDescriptorFile(descriptorPath);
    if (descriptorFile == null) {
      throw new CommitStepException("Can't create " + descriptorPath);
    }
  }
}
