{
  Graphics2D g2d=(Graphics2D)g;
  EditorComponent.turnOnAliasingIfPossible(g2d);
  Rectangle bounds=g.getClipBounds();
  g.setColor(getBackground());
  g.fillRect(bounds.x,bounds.y,bounds.width,bounds.height);
  EditorCell deepestCell=myEditorComponent.getDeepestSelectedCell();
  if (deepestCell instanceof EditorCell_Label) {
    g.setColor(EditorComponent.CARET_ROW_COLOR);
    g.fillRect(bounds.x,deepestCell.getY(),bounds.width,deepestCell.getHeight() - deepestCell.getTopInset() - deepestCell.getBottomInset());
  }
  g.setColor(Color.gray);
  UIUtil.drawVDottedLine(g2d,myWidth - 1,bounds.y,bounds.y + bounds.height,getBackground(),Color.gray);
  for (  FoldingButton button : myFoldingButtons.values()) {
    if (button.myMouseOver && !button.myIsFolded) {
      g.setColor(button.getBorderColor());
      g.drawLine(button.myX,button.myY1 + FoldingButton.WIDTH,button.myX,button.myY2 - FoldingButton.WIDTH);
    }
  }
  for (  HighlighterBracket bracket : myBrackets.values()) {
    bracket.paint(g);
  }
  for (  FoldingButton button : myFoldingButtons.values()) {
    button.paint(g);
  }
  paintIconRenderers(g);
}
