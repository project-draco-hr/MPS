{
  if (moduleSourceDir == null)   return null;
  if (moduleSourceDir.isReadOnly()) {
    IFile bundleHome=FileSystem.getInstance().getBundleHome(moduleSourceDir);
    if (bundleHome == null)     return null;
    String mainPath=bundleHome.getPath().substring(0,bundleHome.getPath().length() - ".jar".length());
    String jarPath=isGenerator ? (mainPath + "-generator.jar") : (mainPath + ".jar");
    return FileSystem.getInstance().getFileByPath(jarPath);
  }
 else {
    return isGenerator ? moduleSourceDir.getDescendant("generator").getDescendant("classes_gen") : moduleSourceDir.getDescendant("classes_gen");
  }
}
