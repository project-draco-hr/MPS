{
  super.doOKAction();
  final List<Runnable> toRunAfter=ListSequence.fromList(new ArrayList<Runnable>());
  ProgressManager.getInstance().run(new Task.Modal(null,"Generating build script",false){
    public void run(    ProgressIndicator progressIndicator){
      progressIndicator.setIndeterminate(true);
      ListSequence.fromList(toRunAfter).addElement(GenerateBuildWizard.this.myGenerator.generate(progressIndicator));
      ClassLoaderManager.getInstance().reloadAll(new EmptyProgressIndicator());
    }
  }
);
  for (  Runnable runnable : ListSequence.fromList(toRunAfter)) {
    runnable.run();
  }
}
