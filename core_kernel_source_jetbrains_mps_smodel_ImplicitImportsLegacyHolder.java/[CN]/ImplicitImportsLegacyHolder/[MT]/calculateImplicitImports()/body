{
  Set<org.jetbrains.mps.openapi.model.SModelReference> usedModels=collectUsedModels(new HashSet<org.jetbrains.mps.openapi.model.SModelReference>());
  usedModels.remove(myModel.getReference());
  for (  ImportElement elem : myModel.importedModels()) {
    usedModels.remove(elem.getModelReference());
  }
  List<ImportElement> implicitImports=new ArrayList<ImportElement>(usedModels.size());
  for (  ImportElement elem : myImplicitImports) {
    if (usedModels.remove(elem.getModelReference())) {
      implicitImports.add(elem);
    }
  }
  for (  SModelReference ref : usedModels) {
    int version=PersistenceRegistry.getInstance().getModelEnvironmentInfo().getModelVersion(ref);
    implicitImports.add(new ImportElement(ref,-1,version));
  }
  myImplicitImports=implicitImports;
}
