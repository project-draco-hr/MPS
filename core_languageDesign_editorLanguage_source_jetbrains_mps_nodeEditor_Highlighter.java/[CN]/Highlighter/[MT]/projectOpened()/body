{
  myEditorsProvider=new EditorsProvider(myProject);
  if (myThread != null && myThread.isAlive()) {
    LOG.error("trying to initialize a Highlighter being already initialized");
    return;
  }
  myClassLoaderManager.addReloadHandler(myReloadListener);
  myGlobalSModelEventsManager.addGlobalCommandListener(myCommandListener);
  myThread=new Thread("Highlighter"){
{
      setDaemon(true);
    }
    public void run(){
      if (IdeMain.isTestMode())       return;
      CommandProcessor commandProcessor=CommandProcessor.getInstance();
      while (true) {
        try {
          while (commandProcessor.getCurrentCommand() != null) {
            Thread.sleep(200);
          }
          doUpdate();
          if (myStopThread) {
            break;
          }
          Thread.sleep(300);
        }
 catch (        Throwable t) {
          LOG.error(t);
        }
      }
    }
  }
;
  myThread.start();
}
