{
  ModelAccess.assertLegalWrite();
  Set<ModelRoot> toRemove=new HashSet<ModelRoot>(mySModelRoots);
  Set<ModelRoot> toUpdate=new HashSet<ModelRoot>(mySModelRoots);
  for (  ModelRoot root : loadRoots()) {
    try {
      if (mySModelRoots.contains(root)) {
        toRemove.remove(root);
      }
 else {
        ModelRootBase rootBase=(ModelRootBase)root;
        rootBase.setModule(this);
        mySModelRoots.add(root);
        rootBase.attach();
      }
    }
 catch (    Exception e) {
      LOG.error("Error loading models from root `" + root.getPresentation() + "'. Requested by: "+ this,e);
    }
  }
  toUpdate.removeAll(toRemove);
  for (  ModelRoot modelRoot : toRemove) {
    ((ModelRootBase)modelRoot).dispose();
  }
  mySModelRoots.removeAll(toRemove);
  for (  ModelRoot modelRoot : toUpdate) {
    ((ModelRootBase)modelRoot).update();
  }
}
