{
  List<StubPath> notChangedStubPaths=new ArrayList<StubPath>();
  List<StubPath> newStubs=areJavaStubsEnabled() ? getAllStubPaths() : getStubPaths();
  if (USE_INCREMETAL_STUBS_RELOADING) {
    for (    StubPath os : myLoadedStubPaths) {
      for (      StubPath ns : newStubs) {
        if (os.equals(ns)) {
          if (os.isFresh()) {
            notChangedStubPaths.add(ns);
          }
        }
      }
    }
  }
  disposeAllStubManagers();
  releaseOldStubs(notChangedStubPaths);
  CleanupManager.getInstance().cleanup();
  MPSModuleRepository.getInstance().invalidateCaches();
  loadNewStubs(notChangedStubPaths);
}
