{
  if (myRepository == null)   return;
  if (myRepository instanceof DisposedRepository) {
    showDisposedMessage();
    return;
  }
synchronized (REPO_LOCK) {
    if (myRepository == null)     return;
    if (myRepository instanceof DisposedRepository) {
      showDisposedMessage();
      return;
    }
    myRepository.getModelAccess().checkWriteAccess();
    if (!UndoHelper.getInstance().isInsideUndoableCommand()) {
      throw new IllegalModelChangeError("registered model can only be modified inside undoable command");
    }
  }
}
