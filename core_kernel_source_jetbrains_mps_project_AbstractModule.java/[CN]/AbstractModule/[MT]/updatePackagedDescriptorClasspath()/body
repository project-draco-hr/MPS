{
  if (!isPackaged())   return;
  ModuleDescriptor descriptor=getModuleDescriptor();
  if (descriptor == null)   return;
  Set<StubModelsEntry> visited=new HashSet<StubModelsEntry>();
  List<StubModelsEntry> remove=new ArrayList<StubModelsEntry>();
  for (  StubModelsEntry entry : descriptor.getStubModelEntries()) {
    IFile cp=FileSystem.getInstance().getFileByPath(entry.getPath());
    if ((!cp.exists()) || cp.isDirectory() || visited.contains(entry)) {
      remove.add(entry);
    }
    visited.add(entry);
  }
  descriptor.getStubModelEntries().removeAll(remove);
  IFile bundleHomeFile=getBundleHome();
  if (bundleHomeFile == null)   return;
  String bundleHomePath=bundleHomeFile.getAbsolutePath();
  boolean contains=false;
  for (  StubModelsEntry v : visited) {
    if (EqualUtil.equals(v.getPath(),bundleHomePath)) {
      contains=true;
    }
  }
  if (contains)   return;
  ClassPathEntry bundleHome=new ClassPathEntry();
  bundleHome.setPath(bundleHomePath);
  descriptor.getStubModelEntries().add(StubModelsEntry.fromClassPathEntry(bundleHome));
}
