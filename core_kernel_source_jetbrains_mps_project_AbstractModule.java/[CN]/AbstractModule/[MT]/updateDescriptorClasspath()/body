{
  if (!isPackaged())   return;
  ModuleDescriptor descriptor=getModuleDescriptor();
  if (descriptor != null) {
    Set<String> visited=new HashSet<String>();
    for (    ClassPathEntry entry : descriptor.getClassPathEntries()) {
      IFile cp=FileSystem.getFile(entry.getPath());
      if ((!cp.exists()) || cp.isDirectory() || visited.contains(cp.getAbsolutePath())) {
        entry.delete();
      }
      visited.add(entry.getPath());
    }
    String bundleHomePath=getBundleHome().getPath();
    if (!visited.contains(bundleHomePath)) {
      ClassPathEntry bundleHome=ClassPathEntry.newInstance(descriptor.getModel(),true);
      descriptor.addClassPathEntry(bundleHome);
      bundleHome.setPath(bundleHomePath);
    }
  }
}
