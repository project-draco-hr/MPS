{
  ModuleDescriptor descriptor=getModuleDescriptor();
  if (descriptor == null)   return;
  for (  Dependency dep : descriptor.getDependencies()) {
    if (!ObjectUtils.equals(dep.getModuleRef(),moduleRef))     continue;
    if (reexport && !dep.isReexport()) {
      dep.setReexport(true);
      invalidateCaches();
      invalidateDependencies();
      myChanged=true;
    }
    return;
  }
  Dependency dep=new Dependency();
  dep.setModuleRef(moduleRef);
  dep.setReexport(reexport);
  descriptor.getDependencies().add(dep);
  invalidateCaches();
  invalidateDependencies();
  myChanged=true;
}
