{
  try {
    myTracer.push(COMPILING_JAVA_MSG);
    IClassPathItem classPath=computeDependenciesClassPath(myModulesContainer.getModules(),myTracer);
    final CompilationErrorsHandler errorsHandler=new CompilationErrorsHandler(myModulesContainer,mySender,classPath);
    final CollectingResultsListener collectingResultsListener=new CollectingResultsListener(errorsHandler);
    compiler.addCompilationResultListener(collectingResultsListener);
    doCompileJava(compiler,classPath,myCompilerOptions);
    compiler.removeCompilationResultListener(collectingResultsListener);
    CompilationHandler compilationHandler=new CompilationHandler(classPath,errorsHandler);
    Set<SModule> changedModules=compilationHandler.process(collectingResultsListener.getResults());
    if (changedModules.isEmpty()) {
      mySender.error(NO_CHANGES_AFTER_COMPILATION_ERROR);
    }
    return new MPSCompilationResult(errorsHandler.getErrorsCount(),0,false,changedModules);
  }
  finally {
    myTracer.pop();
  }
}
