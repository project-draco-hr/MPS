{
  final List<SNode> nodes=new ArrayList<SNode>();
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    @Override public void run(){
      nodes.addAll(myEditorContext.getSelectedNodes());
      if (nodes.isEmpty()) {
        return;
      }
      doMove();
    }
  }
);
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      if (nodes.size() == 1) {
        myEditorContext.getNodeEditorComponent().selectNode(nodes.get(0));
      }
 else       if (nodes.size() > 1) {
        SelectionManager selectionManager=myEditorContext.getNodeEditorComponent().getSelectionManager();
        selectionManager.setSelection(selectionManager.createRangeSelection(nodes.get(0),nodes.get(nodes.size() - 1)));
      }
    }
  }
);
}
