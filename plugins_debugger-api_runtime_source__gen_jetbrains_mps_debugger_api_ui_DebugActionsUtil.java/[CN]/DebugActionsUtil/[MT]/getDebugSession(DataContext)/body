{
  Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (project == null) {
    return null;
  }
  RunContentDescriptor runContentDescriptor=RunContentManager.RUN_CONTENT_DESCRIPTOR.getData(dataContext);
  if (runContentDescriptor != null) {
    return DebugSessionManagerComponent.getInstance(project).getDebugSession(runContentDescriptor.getProcessHandler());
  }
  RunContentDescriptor selectedContent=ExecutionManager.getInstance(project).getContentManager().getSelectedContent();
  if (selectedContent == null) {
    selectedContent=ExecutionManager.getInstance(project).getContentManager().getSelectedContent(DefaultDebugExecutor.getDebugExecutorInstance());
    if (selectedContent == null) {
      return null;
    }
  }
  return DebugSessionManagerComponent.getInstance(project).getDebugSession(selectedContent.getProcessHandler());
}
