{
  List<ModelHandle> models=new ArrayList<ModelHandle>();
  ModelsMiner.collectModelDescriptors(dir,modelRoot,models);
  for (  ModelHandle handle : models) {
    SModelDescriptor modelDescriptor;
    if (ModelPersistence.needsRecreating(handle.getFile())) {
      modelDescriptor=recreateFileAndGetInstance(this,handle.getFile().getAbsolutePath(),handle.getReference(),owner,modelRoot,handle.getLoadResult());
      LOG.debug("Recreated file and read model descriptor" + modelDescriptor.getSModelReference() + "\n"+ "Model root is "+ modelRoot.getPath()+ " "+ modelRoot.getPrefix());
    }
 else {
      modelDescriptor=getInstance(this,handle.getFile().getAbsolutePath(),handle.getReference(),handle.getLoadResult(),owner,false);
      LOG.debug("Read model descriptor " + modelDescriptor.getSModelReference() + "\n"+ "Model root is "+ modelRoot.getPath()+ " "+ modelRoot.getPrefix());
    }
  }
}
