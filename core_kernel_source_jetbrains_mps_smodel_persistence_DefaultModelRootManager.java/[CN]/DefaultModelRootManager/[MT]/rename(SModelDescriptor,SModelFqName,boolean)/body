{
  if (!changeFile) {
    sm.save();
    return;
  }
  IFile oldFile=sm.getModelFile();
  SModelRoot root=ModelRootUtil.getSModelRoot(sm);
  IFile newFile=createFileForModelUID(root,modelFqName);
  newFile.getParent().mkdirs();
  newFile.createNewFile();
  ((DefaultSModelDescriptor)sm).changeModelFile(newFile);
  sm.save();
  if (oldFile != null) {
    oldFile.delete();
  }
  fileRenamed(oldFile,newFile);
}
