{
  SModel model=loadModel(descriptor);
  try {
    model.setLoading(true);
    if (state == ModelLoadingState.ROOTS_LOADED) {
      for (      SNode root : model.roots()) {
        for (        SNode child : new ArrayList<SNode>(root.getChildren())) {
          root.removeChild(child);
        }
      }
    }
  }
  finally {
    model.setLoading(false);
  }
  return model;
}
