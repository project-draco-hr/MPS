{
  String pathPrefix=root.getPrefix();
  String path=root.getPath();
  if (pathPrefix == null)   pathPrefix="";
  if (pathPrefix.length() > 0 && !fqName.getLongName().startsWith(pathPrefix)) {
    LOG.error("Model fqName \"" + fqName + "\" doesn't match name prefix \""+ pathPrefix+ "\"");
  }
  String filenameSuffix=fqName.getLongName().substring(pathPrefix.length());
  if (fqName.hasStereotype()) {
    filenameSuffix=filenameSuffix + '@' + fqName.getStereotype();
  }
  IFile modelFile=FileSystem.getInstance().getFileByPath(path + File.separator + filenameSuffix.replace('.',File.separatorChar)+ MPSExtentions.DOT_MODEL);
  return modelFile;
}
