{
  SModelRepository modelRepository=SModelRepository.getInstance();
  SModelDescriptor modelDescriptor=modelRepository.getModelDescriptor(modelReference);
  if (modelDescriptor != null) {
    LOG.error("can't recreate file for already loaded descriptor " + modelReference);
    return getInstance(fileName,modelReference,d,false);
  }
  IFile modelFile=FileSystem.getInstance().getFileByPath(fileName);
  SModelReference newModelReference=ModelPersistence.upgradeModelUID(modelReference);
  IFile newFile=RegularModelDataSource.createFileForModelUID(root,newModelReference.getSModelFqName());
  newFile.createNewFile();
  IFileUtils.copyFileContent(modelFile,newFile);
  modelFile.delete();
  return getInstance(newFile.getPath(),newModelReference,d,true);
}
