{
  LOG.debug("Getting model " + modelReference + " from "+ fileName+ " with owner "+ owner);
  SModelRepository modelRepository=SModelRepository.getInstance();
  SModelDescriptor modelDescriptor=modelRepository.getModelDescriptor(modelReference);
  if (modelDescriptor != null) {
    IFile newFile=FileSystem.getFile(fileName);
    DefaultSModelDescriptor dsm=(DefaultSModelDescriptor)modelDescriptor;
    if (!newFile.equals(dsm.getModelFile())) {
      ((DefaultSModelDescriptor)modelDescriptor).changeModelFile(newFile);
    }
    modelRepository.addOwnerForDescriptor(modelDescriptor,owner);
    return modelDescriptor;
  }
 else {
    IFile modelFile=FileSystem.getFile(fileName);
    modelDescriptor=new DefaultSModelDescriptor(manager,modelFile,modelReference);
    if (fireModelCreated) {
      modelRepository.createNewModel(modelDescriptor,owner);
    }
 else {
      modelRepository.registerModelDescriptor(modelDescriptor,owner);
    }
    return modelDescriptor;
  }
}
