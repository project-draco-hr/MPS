{
  List<ModelHandle> models=new ArrayList<ModelHandle>();
  ModelsMiner.collectModelDescriptors(FileSystem.getInstance().getFileByPath(root.getPath()),root,models);
  List<SModelDescriptor> result=new ArrayList<SModelDescriptor>();
  for (  ModelHandle handle : models) {
    SModelDescriptor modelDescriptor;
    if (ModelPersistence.needsRecreating(handle.getFile())) {
      modelDescriptor=recreateFileAndGetInstance(handle.getFile().getPath(),handle.getReference(),root,handle.getLoadResult());
      LOG.debug("Recreated file and read model descriptor" + modelDescriptor.getSModelReference() + "\n"+ "Model root is "+ root.getPath()+ " "+ root.getPrefix());
    }
 else {
      modelDescriptor=getInstance(handle.getFile().getPath(),handle.getReference(),handle.getLoadResult(),false);
      LOG.debug("Read model descriptor " + modelDescriptor.getSModelReference() + "\n"+ "Model root is "+ root.getPath()+ " "+ root.getPrefix());
    }
    result.add(modelDescriptor);
  }
  return result;
}
