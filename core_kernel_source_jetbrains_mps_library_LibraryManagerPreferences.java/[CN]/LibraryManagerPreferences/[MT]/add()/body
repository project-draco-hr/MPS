{
  String name=JOptionPane.showInputDialog(myMainPanel,"Enter a Library name","New Library",JOptionPane.PLAIN_MESSAGE);
  if (name == null) {
    return;
  }
  String path;
  if (UseTreeFileChooser.get()) {
    TreeFileChooser chooser=new TreeFileChooser();
    chooser.setMode(TreeFileChooser.MODE_DIRECTORIES);
    IFile result=chooser.showDialog(null);
    path=result.getAbsolutePath();
  }
 else {
    final JFileChooser chooser=new SmartFileChooser();
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    if (chooser.showDialog(myMainPanel,"Select") != JFileChooser.APPROVE_OPTION) {
      return;
    }
    path=chooser.getSelectedFile().getAbsolutePath();
  }
  myManager.newLibrary(name).setPath(path);
  updateModel();
}
