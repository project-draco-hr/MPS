{
  String name=JOptionPane.showInputDialog(myMainPanel,"Enter a Library name","New Library",JOptionPane.PLAIN_MESSAGE);
  if (name == null) {
    return;
  }
  String path;
  if (UseTreeFileChooser.get()) {
    TreeFileChooser chooser=new TreeFileChooser(TreeFileChooser.MODE_DIRECTORIES,TreeFileChooser.ALL_FILES_FILTER,"",null);
    if (chooser.getResult() == null)     return;
    path=chooser.getResult().getAbsolutePath();
  }
 else {
    final JFileChooser chooser=new SmartFileChooser();
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    if (chooser.showDialog(myMainPanel,"Select") != JFileChooser.APPROVE_OPTION) {
      return;
    }
    path=chooser.getSelectedFile().getAbsolutePath();
  }
  myManager.newLibrary(name).setPath(path);
  updateModel();
}
