{
  mySourceNode=sourceNode;
  myLinkDeclaration=linkDeclaration;
  SNode genuineLinkDeclaration=((SNode)BehaviorManager.getInstance().invoke(Object.class,SNodeOperations.cast(myLinkDeclaration,"jetbrains.mps.lang.structure.structure.LinkDeclaration"),"call_getGenuineLink_1213877254523",new Class[]{SNode.class}));
  if (genuineLinkDeclaration == null) {
    return;
  }
  if (SPropertyOperations.hasValue(genuineLinkDeclaration,"metaClass","aggregation","reference")) {
    DefaultReferenceSubstituteInfoActionsFactory.LOG.error("only reference links are allowed here",myLinkDeclaration);
  }
  if (!(((Boolean)BehaviorManager.getInstance().invoke(Boolean.class,SNodeOperations.cast(genuineLinkDeclaration,"jetbrains.mps.lang.structure.structure.LinkDeclaration"),"call_isSingular_1213877254557",new Class[]{SNode.class})))) {
    DefaultReferenceSubstituteInfoActionsFactory.LOG.error("cardinalities 1 or 0..1 are allowed here",myLinkDeclaration);
  }
  myCurrentReferent=SLinkOperations.getTargetNode(SNodeOperations.getReference(sourceNode,myLinkDeclaration));
  mySubstituteInfo=substituteInfo;
}
