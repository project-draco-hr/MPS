{
  SReference oldRef=getChangeSet().getOldModel().getNode(getAffectedNodeId(false)).getReference(myRole);
  SReference newRef=getChangeSet().getNewModel().getNode(getAffectedNodeId(true)).getReference(myRole);
  if (oldRef == null) {
    return String.format("Added %s reference",myRole);
  }
  if (newRef == null) {
    return String.format("Removed %s reference",myRole);
  }
  String what="target";
  _FunctionTypes._return_P1_E0<? extends String,? super SReference> formatRef=null;
  if (neq_mgdhcs_a0h0s(oldRef.getTargetSModelReference(),newRef.getTargetSModelReference())) {
    formatRef=new _FunctionTypes._return_P1_E0<String,SReference>(){
      public String invoke(      SReference ref){
        return String.format("[model=%s,\n  id=%s, resolveInfo=%s]",ref.getTargetSModelReference(),ref.getTargetNodeId(),((jetbrains.mps.smodel.SReference)ref).getResolveInfo());
      }
    }
;
  }
 else   if (neq_mgdhcs_a0a7a81(oldRef.getTargetNodeId(),newRef.getTargetNodeId())) {
    formatRef=new _FunctionTypes._return_P1_E0<String,SReference>(){
      public String invoke(      SReference ref){
        return String.format("[id=%s, resolveInfo=%s]",ref.getTargetNodeId(),ref.getTargetNodeId());
      }
    }
;
  }
 else   if (neq_mgdhcs_a0b7a81(((jetbrains.mps.smodel.SReference)oldRef).getResolveInfo(),((jetbrains.mps.smodel.SReference)newRef).getResolveInfo())) {
    what="resolve info";
    formatRef=new _FunctionTypes._return_P1_E0<String,SReference>(){
      public String invoke(      SReference ref){
        return String.format("'%s'",((jetbrains.mps.smodel.SReference)ref).getResolveInfo());
      }
    }
;
  }
  if (formatRef == null) {
    return toString();
  }
 else {
    return String.format("Changed %s reference %s from\n  %s\n  to\n  %s",myRole,what,formatRef.invoke(oldRef),formatRef.invoke(newRef));
  }
}
