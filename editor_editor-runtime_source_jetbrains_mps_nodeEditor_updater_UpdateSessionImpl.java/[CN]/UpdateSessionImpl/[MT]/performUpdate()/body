{
  ReferencedNodeContext currentContext=ReferencedNodeContext.createNodeContext(getNode());
  myContextStack.push(currentContext);
  myCurrentUpdateInfo=new UpdateInfoNode(currentContext);
  EditorContext editorContext=getUpdater().getEditorContext();
  editorContext.getCellFactory().pushCellContext();
  Pair<EditorCell,UpdateInfoIndex> result=new Pair<EditorCell,UpdateInfoIndex>(null,null);
  try {
    editorContext.getCellFactory().addCellContextHints(getInitialEditorHints(editorContext));
    String[] explicitHintsForNode=getExplicitHintsForNode(getNode());
    if (explicitHintsForNode != null) {
      editorContext.getCellFactory().addCellContextHints(explicitHintsForNode);
    }
    result.o1=EditorManager.getInstanceFromContext(editorContext).createRootCell(getNode(),getModelModifications(),currentContext,editorContext.isInspector());
  }
  finally {
    editorContext.getCellFactory().popCellContext();
    result.o2=new UpdateInfoIndex(myCurrentUpdateInfo);
    myCurrentUpdateInfo=null;
    myContextStack.pop();
  }
  return result;
}
