{
  ReferencedNodeContext currentContext=myContextStack.peek().sameContextButAnotherNode(node);
  myContextStack.push(currentContext);
  try {
    EditorContext editorContext=getUpdater().getEditorContext();
    String[] explicitHintsForNode=getExplicitHintsForNode(node);
    if (explicitHintsForNode != null) {
      editorContext.getCellFactory().pushCellContext();
      editorContext.getCellFactory().addCellContextHints(explicitHintsForNode);
    }
    EditorCell nodeCell=EditorManager.getInstanceFromContext(editorContext).createEditorCell(getModelModifications(),currentContext);
    if (explicitHintsForNode != null) {
      editorContext.getCellFactory().popCellContext();
    }
    return nodeCell;
  }
  finally {
    myContextStack.pop();
  }
}
