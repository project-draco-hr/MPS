{
  myInvocationContext=invocationContext;
  myGenerationStepController=generationStepController;
  myTemplateModels=generationStepController.getTemplateModels();
  myMappingConfigurations=new LinkedHashSet<MappingConfiguration>(generationStepController.getCurrentMappings());
  getModule().setInvocationContext(invocationContext.getModule());
  if (prevContext != null) {
    myOriginalInputModel=prevContext.myOriginalInputModel;
    mySessionObjects=prevContext.mySessionObjects;
    myUsedNames=prevContext.myUsedNames;
  }
  if (!inputModel.getModelDescriptor().isTransient()) {
    myOriginalInputModel=inputModel;
    mySessionObjects.clear();
    myUsedNames.clear();
  }
}
