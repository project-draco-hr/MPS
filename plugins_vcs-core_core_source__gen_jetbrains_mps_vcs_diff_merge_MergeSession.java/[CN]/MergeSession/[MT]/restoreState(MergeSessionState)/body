{
  MergeSessionState stateCopy=new MergeSessionState(state);
  ListSequence.fromList(SModelOperations.roots(myResultModel,null)).visitAll(new IVisitor<SNode>(){
    public void visit(    SNode r){
      SNodeOperations.deleteNode(r);
    }
  }
);
  CopyUtil.clearModelProperties(myResultModel);
  UnregisteredNodes.instance().clear();
  CopyUtil.copyModelProperties(((SModelBase)stateCopy.myResultModel).getSModel(),((SModelBase)myResultModel).getSModel());
  ListSequence.fromList(SModelOperations.roots(stateCopy.myResultModel,null)).visitAll(new IVisitor<SNode>(){
    public void visit(    SNode r){
      SModelOperations.addRootNode(myResultModel,r);
    }
  }
);
  myResolvedChanges=stateCopy.myResolvedChanges;
  myNodeCopier.setState(stateCopy.myIdReplacementCache,myResultModel);
}
