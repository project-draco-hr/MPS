{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      MergeConflictsBuilder conflictsBuilder=new MergeConflictsBuilder(base,mine,repository);
      myMineChangeSet=conflictsBuilder.myMineChangeSet;
      myRepositoryChangeSet=conflictsBuilder.myRepositoryChangeSet;
      myConflictingChanges=conflictsBuilder.myConflictingChanges;
      mySymmetricChanges=conflictsBuilder.mySymmetricChanges;
      fillRootToChangesMap();
      fillNodeToChangesMap();
      myResultModel=CopyUtil.copyModel(base);
      int pv=Math.max(base.getPersistenceVersion(),Math.max(mine.getPersistenceVersion(),repository.getPersistenceVersion()));
      myResultModel.setPersistenceVersion(pv);
      myNodeCopier=new NodeCopier(myResultModel);
    }
  }
);
}
