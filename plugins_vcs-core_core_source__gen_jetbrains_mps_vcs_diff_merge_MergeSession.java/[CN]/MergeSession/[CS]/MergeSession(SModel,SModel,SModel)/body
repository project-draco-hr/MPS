{
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      MergeConflictsBuilder conflictsBuilder=new MergeConflictsBuilder(base,mine,repository);
      myMineChangeSet=conflictsBuilder.myMineChangeSet;
      myRepositoryChangeSet=conflictsBuilder.myRepositoryChangeSet;
      myConflictingChanges=conflictsBuilder.myConflictingChanges;
      mySymmetricChanges=conflictsBuilder.mySymmetricChanges;
      fillRootToChangesMap();
      fillNodeToChangesMap();
      myResultModel=copyModel(base);
      int pv=Math.max(getPersistenceVersion(base),Math.max(getPersistenceVersion(mine),getPersistenceVersion(repository)));
      if (myResultModel instanceof DefaultSModel) {
        ((DefaultSModel)myResultModel).setPersistenceVersion(pv);
      }
      myNodeCopier=new NodeCopier(myResultModel);
    }
  }
);
}
