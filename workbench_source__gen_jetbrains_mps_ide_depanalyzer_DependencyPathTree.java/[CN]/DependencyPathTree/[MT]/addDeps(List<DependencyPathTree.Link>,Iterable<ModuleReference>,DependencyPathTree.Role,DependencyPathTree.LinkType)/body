{
  if (modules == null) {
    return;
  }
  ListSequence.fromList(result).addSequence(Sequence.fromIterable(modules).select(new ISelector<ModuleReference,IModule>(){
    public IModule select(    ModuleReference ref){
      return MPSModuleRepository.getInstance().getModule(ref);
    }
  }
).where(new IWhereFilter<IModule>(){
    public boolean accept(    IModule module){
      return module != null;
    }
  }
).select(new ISelector<IModule,DependencyPathTree.Link>(){
    public DependencyPathTree.Link select(    IModule module){
      return new DependencyPathTree.Link(module,role,linktype);
    }
  }
));
}
