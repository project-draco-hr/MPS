{
  if (myText != null) {
    return myText;
  }
  if (myTargetNode == null) {
    if (myKind != null) {
      return '<' + String.valueOf(myKind) + '>';
    }
    return "<unknown>";
  }
  SNode n=myTargetNode.resolve(repo);
  if (n == null) {
    if (myTargetNode.getNodeId() == null) {
      if (myKind == Kind.INPUT) {
        return "<no input>";
      }
 else       if (myKind == Kind.OUTPUT) {
        return "<no output>";
      }
    }
    return myTargetNode.toString();
  }
  String text=String.format("[%s] %s (%s)",n.getConcept().getName(),n.getPresentation(),n.getNodeId());
  if (myKind == Kind.APPROXIMATE_OUTPUT || myKind == Kind.APPROXIMATE_INPUT) {
    return "[approximate location] " + text;
  }
 else {
    return text;
  }
}
