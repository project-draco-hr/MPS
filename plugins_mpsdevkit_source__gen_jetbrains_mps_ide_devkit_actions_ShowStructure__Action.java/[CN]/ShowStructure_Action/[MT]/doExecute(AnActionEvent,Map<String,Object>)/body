{
  final StructureViewBuilder structureViewBuilder=event.getData(PlatformDataKeys.FILE_EDITOR).getStructureViewBuilder();
  if (structureViewBuilder == null) {
    return;
  }
  StructureView structureView=structureViewBuilder.createStructureView(event.getData(PlatformDataKeys.FILE_EDITOR),event.getData(CommonDataKeys.PROJECT));
  FileStructurePopup popup=new FileStructurePopup(structureView.getTreeModel(),event.getData(CommonDataKeys.PROJECT),structureView,true);
  if (event.getData(CommonDataKeys.VIRTUAL_FILE) != null) {
    popup.setTitle(event.getData(CommonDataKeys.VIRTUAL_FILE).getName());
  }
  popup.show();
}
