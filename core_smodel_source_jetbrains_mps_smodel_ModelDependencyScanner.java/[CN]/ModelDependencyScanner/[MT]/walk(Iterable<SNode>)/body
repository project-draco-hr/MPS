{
  HashSet<SModelReference> allRefTargets=new HashSet<SModelReference>();
  HashSet<SModelReference> sourceModels=new HashSet<SModelReference>();
  for (  SNode n : nodes) {
    if (myNeedConcepts) {
      myConcepts.add(n.getConcept());
    }
    if (myNeedLanguages) {
      myUsedLanguages.add(n.getConcept().getLanguage());
    }
    if (myNeedCrossModel) {
      final SModel sourceModel=n.getModel();
      if (sourceModel != null) {
        sourceModels.add(sourceModel.getReference());
      }
      for (      SReference ref : n.getReferences()) {
        final SModelReference targetModel=ref.getTargetSModelReference();
        if (targetModel != null) {
          allRefTargets.add(targetModel);
        }
      }
    }
  }
  if (myNeedCrossModel) {
    allRefTargets.removeAll(sourceModels);
    myCrossModelReferences.addAll(allRefTargets);
  }
  return this;
}
