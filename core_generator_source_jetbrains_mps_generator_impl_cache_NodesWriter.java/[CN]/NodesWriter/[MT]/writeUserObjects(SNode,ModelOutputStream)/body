{
  Map<Object,Object> userObjects=node.getUserObjects();
  ArrayList<Object> knownUserObject=new ArrayList<Object>();
  for (  Object key : userObjects.keySet()) {
    Object value=userObjects.get(key);
    if (isKnownUserObject(key) && isKnownUserObject(value)) {
      knownUserObject.add(key);
      knownUserObject.add(value);
    }
  }
  os.writeInt(knownUserObject.size());
  for (int i=0; i < knownUserObject.size(); i+=2) {
    writeUserObject(os,knownUserObject.get(i));
    writeUserObject(os,knownUserObject.get(i + 1));
  }
}
