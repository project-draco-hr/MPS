{
  final ArrayList<Object> knownUserObject=new ArrayList<Object>();
  node.visitUserObjects(new UserObjectVisitor(){
    public boolean visitObject(    Object key,    Object value){
      if (isKnownUserObject(key) && isKnownUserObject(value)) {
        knownUserObject.add(key);
        knownUserObject.add(value);
      }
      return true;
    }
  }
);
  os.writeInt(knownUserObject.size());
  for (int i=0; i < knownUserObject.size(); i+=2) {
    writeUserObject(os,knownUserObject.get(i));
    writeUserObject(os,knownUserObject.get(i + 1));
  }
}
