{
  return new TemplateFiller(){
    @Override public void fillProjectWithModules(    final MPSProject project){
      StartupManager.getInstance(project.getProject()).registerPostStartupActivity(new Runnable(){
        @Override public void run(){
          ModelAccess.instance().runWriteActionInCommand(new Runnable(){
            @Override public void run(){
              Language language=NewModuleUtil.createLanguage(myLanguageSettings.getLanguageName(),myLanguageSettings.getLanguageLocation(),project);
              project.addModule(language);
              try {
                if (myLanguageSettings.isRuntimeSolutionNeeded()) {
                  Solution runtimeSolution=NewModuleUtil.createRuntimeSolution(language,myLanguageSettings.getLanguageLocation(),project);
                  language.getModuleDescriptor().getRuntimeModules().add(runtimeSolution.getModuleReference());
                }
                if (myLanguageSettings.isSandboxSolutionNeeded()) {
                  NewModuleUtil.createSandboxSolution(language,myLanguageSettings.getLanguageLocation(),project);
                }
              }
 catch (              IOException e) {
              }
            }
          }
);
        }
      }
);
    }
  }
;
}
