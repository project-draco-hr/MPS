{
  if (node == null) {
    buffer.append("???");
    if (contextNode != null) {
      buffer.foundError("possible broken reference in " + org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(contextNode),contextNode,null);
    }
    return;
  }
  SNodeTextGen nodeTextGen=getTextGenForNode(node);
  nodeTextGen.setBuffer(buffer);
  try {
    nodeTextGen.setSNode(node);
    nodeTextGen.doGenerateText(node);
    nodeTextGen.setSNode(null);
  }
 catch (  Exception e) {
    buffer.foundError("failed to generate text for " + org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(node),node,e);
  }
}
