{
  IWrapper representator=getRepresentatorWrapper(wrapper);
  final WhenConcreteEntity oldEntity=myWhenConcreteEntities.remove(representator);
  WhenConcreteEntity entityToPut=entity;
  if (oldEntity != null) {
    entityToPut=new WhenConcreteEntity(new Runnable(){
      public void run(){
        oldEntity.run();
        entity.run();
      }
    }
,oldEntity.getNodeModel(),oldEntity.getNodeId()){
      public boolean skipsError(){
        return entity.skipsError() && oldEntity.skipsError();
      }
      public String getNodeModel(){
        if (oldEntity.skipsError()) {
          return entity.getNodeModel();
        }
 else {
          return oldEntity.getNodeModel();
        }
      }
      public String getNodeId(){
        if (oldEntity.skipsError()) {
          return entity.getNodeId();
        }
 else {
          return oldEntity.getNodeId();
        }
      }
    }
;
  }
  myWhenConcreteEntities.put(representator,entityToPut);
}
