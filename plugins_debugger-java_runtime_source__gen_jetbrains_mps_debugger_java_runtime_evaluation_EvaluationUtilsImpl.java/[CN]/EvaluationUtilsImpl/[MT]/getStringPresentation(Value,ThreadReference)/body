{
  assertEvaluating();
  try {
    return MirrorUtil.getInstance().getJavaValue(value).toString();
  }
 catch (  UnsupportedOperationException e) {
    if (value instanceof ArrayReference) {
      ArrayReference array=(ArrayReference)value;
      StringBuffer buffer=new StringBuffer();
      buffer.append("[");
      int length=array.length();
      int i=0;
      for (      Value item : ListSequence.fromList(array.getValues())) {
        buffer.append(getStringPresentation(item,threadReference));
        if (i < length - 1) {
          buffer.append(", ");
        }
        i++;
      }
      buffer.append("]");
      return buffer.toString();
    }
 else {
      return EvaluationUtils.consumeEvaluationException(new EvaluationUtils.EvaluationInvocatable<String>(){
        @Override public String invoke() throws EvaluationException {
          ObjectReference object=(ObjectReference)value;
          IObjectValueProxy valueProxy=(IObjectValueProxy)MirrorUtil.getInstance().getValueProxy(object);
          IValueProxy result=valueProxy.invokeMethod("toString","()Ljava/lang/String;",threadReference);
          return getStringPresentation(result.getJDIValue(),threadReference);
        }
      }
,null);
    }
  }
}
