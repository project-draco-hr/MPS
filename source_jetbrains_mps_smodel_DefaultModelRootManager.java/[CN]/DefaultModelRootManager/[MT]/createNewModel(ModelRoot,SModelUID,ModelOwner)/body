{
  String pathPrefix=root.getPrefix();
  String path=root.getPath();
  if (pathPrefix == null)   pathPrefix="";
  if (pathPrefix.length() > 0 && !uid.getLongName().startsWith(pathPrefix)) {
    LOG.error("Model uid \"" + uid + "\" doesn't match name prefix \""+ pathPrefix+ "\"");
  }
  String filenameSuffix=uid.getLongName().substring(pathPrefix.length());
  if (uid.hasStereotype()) {
    filenameSuffix=filenameSuffix + '@' + uid.getStereotype();
  }
  File modelFile=new File(path,filenameSuffix.replace('.',File.separatorChar) + ".mps");
  try {
    return DefaultModelRootManager.createModel(this,root,modelFile.getCanonicalPath(),uid,owner);
  }
 catch (  IOException e) {
    throw new RuntimeException("Couldn't create new model \"" + uid + "\"",e);
  }
}
