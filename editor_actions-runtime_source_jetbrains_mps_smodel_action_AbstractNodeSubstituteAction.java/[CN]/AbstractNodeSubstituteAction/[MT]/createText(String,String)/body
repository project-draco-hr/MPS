{
  String matchingText=getVisibleMatchingText(pattern);
  List<Integer> indexes=getIndexes(pattern);
  if (indexes.size() == 0) {
    return matchingText;
  }
  StringBuilder builder=new StringBuilder("<html>");
  int next=0;
  int curIndex=indexes.get(next);
  boolean isColored=false;
  for (int i=0; i < matchingText.length(); i++) {
    if (i == curIndex && !isColored) {
      builder.append("<font color='");
      builder.append(color);
      builder.append("'>");
      isColored=true;
    }
    if (isColored) {
      next++;
    }
    char c=matchingText.charAt(i);
    if (c == '<') {
      builder.append("&lt;");
    }
    if (c == '>') {
      builder.append("&gt;");
    }
 else {
      builder.append(c);
    }
    if (next < indexes.size()) {
      curIndex=indexes.get(next);
    }
    if (next >= indexes.size() || curIndex > i + 1) {
      builder.append("</font>");
      isColored=false;
    }
  }
  return builder.toString();
}
