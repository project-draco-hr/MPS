{
  final boolean[] result=new boolean[1];
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      myProject.getComponent(TransientModelsModule.class).clearAll();
      if (!saveTransientModels) {
        myProject.getComponent(GenerationTracer.class).discardTracing();
      }
      IGenerationTracer tracer=saveTransientModels ? myProject.getComponent(GenerationTracer.class) : new NullGenerationTracer();
      tracer.startTracing();
      fireBeforeGeneration(inputModels);
      GenerationSettings settings=GenerationSettings.getInstance();
      GenerationProcessContext parameters=new GenerationProcessContext(settings.isStrictMode(),saveTransientModels,rebuildAll,settings.isGenerateDependencies(),!settings.isShowWarnings() && !settings.isShowInfo(),settings.isParallelGenerator(),settings.getNumberOfParallelThreads(),settings.getPerformanceTracingLevel(),progress,tracer);
      GeneratorLoggerAdapter logger=new GeneratorLoggerAdapter(messages,settings.isShowInfo(),settings.isShowWarnings(),settings.isKeepModelsWithWarnings());
      GenerationController gc=new GenerationController(parameters,new GeneratorNotifierHelper(),inputModels,project,logger,generationHandler);
      result[0]=gc.generate();
      tracer.finishTracing();
      fireAfterGeneration(inputModels);
      myProject.getComponent(TransientModelsModule.class).publishAll();
      CleanupManager.getInstance().cleanup();
    }
  }
);
  FileProcessor.invoke();
  return result[0];
}
