{
  if (node.getAdapter() instanceof TemplateDeclaration) {
    return node.getSubnodes(new Condition<SNode>(){
      public boolean met(      SNode object){
        BaseAdapter adapter=object.getAdapter();
        return adapter instanceof NodeMacro || adapter instanceof PropertyMacro || adapter instanceof ReferenceMacro;
      }
    }
);
  }
  return node.getChildren();
}
