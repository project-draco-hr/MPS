{
  if (!ThreadUtils.isEventDispatchThread()) {
    throw new RuntimeException("Rebuild now can be only called from UI thread");
  }
  runRebuildAction(new Runnable(){
    public void run(){
      if (getModel().getRoot() instanceof MPSTreeNode) {
        (getRootNode()).disposeThisAndChildren();
      }
      MPSTreeNode root=rebuild();
      root.setTree(MPSTree.this);
      DefaultTreeModel model=new DefaultTreeModel(root);
      setModel(model);
      updateUI();
    }
  }
,true);
}
