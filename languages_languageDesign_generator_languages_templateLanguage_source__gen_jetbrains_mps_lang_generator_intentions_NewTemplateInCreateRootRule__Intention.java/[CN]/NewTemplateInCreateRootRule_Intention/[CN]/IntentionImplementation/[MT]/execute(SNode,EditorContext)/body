{
  final Wrappers._T<String> name=new Wrappers._T<String>(CreateFromUsageUtil.getText(editorContext));
  if (name.value == null || name.value.length() == 0) {
    name.value="_name_";
  }
  final SNode rule=node;
  CreateFromUsageUtil.showCreateNewRootMenu(editorContext,new Condition<SNode>(){
    public boolean met(    SNode n){
      SNode c=(SNode)n;
      if (SConceptOperations.isExactly(SNodeOperations.asSConcept(c),MetaAdapterFactory.getConcept(new UUID(-5475912601019530992l,-8082971551085732881l),1112730859144l,"jetbrains.mps.lang.generator.structure.TemplateSwitch"))) {
        return false;
      }
      if (SConceptOperations.isExactly(SNodeOperations.asSConcept(c),MetaAdapterFactory.getConcept(new UUID(-5475912601019530992l,-8082971551085732881l),1095416546421l,"jetbrains.mps.lang.generator.structure.MappingConfiguration"))) {
        return false;
      }
      if (SConceptOperations.isExactly(SNodeOperations.asSConcept(c),MetaAdapterFactory.getConcept(new UUID(-5475912601019530992l,-8082971551085732881l),1092059087312l,"jetbrains.mps.lang.generator.structure.TemplateDeclaration"))) {
        return false;
      }
      if (SConceptOperations.isExactly(SNodeOperations.asSConcept(c),MetaAdapterFactory.getConcept(new UUID(-5475912601019530992l,-8082971551085732881l),1195499912406l,"jetbrains.mps.lang.generator.structure.MappingScript"))) {
        return false;
      }
      return true;
    }
  }
,new Setter<SNode>(){
    public void set(    SNode root){
      if (!(SNodeOperations.isInstanceOf(root,MetaAdapterFactory.getConcept(new UUID(-3554657779850784990l,-7236703803128771572l),1169194658468l,"jetbrains.mps.lang.core.structure.INamedConcept")))) {
        return;
      }
      SPropertyOperations.set(SNodeOperations.cast(root,MetaAdapterFactory.getConcept(new UUID(-3554657779850784990l,-7236703803128771572l),1169194658468l,"jetbrains.mps.lang.core.structure.INamedConcept")),MetaAdapterFactory.getProperty(new UUID(-3554657779850784990l,-7236703803128771572l),1169194658468l,1169194664001l,"name"),name.value);
      MacroIntentionsUtil.copyVirtualPackage(root,node);
      SLinkOperations.setTarget(rule,MetaAdapterFactory.getReferenceLink(new UUID(-5475912601019530992l,-8082971551085732881l),1167087469898l,1167087469901l,"templateNode"),SNodeOperations.cast(root,MetaAdapterFactory.getConcept(new UUID(-3554657779850784990l,-7236703803128771572l),1169194658468l,"jetbrains.mps.lang.core.structure.INamedConcept")));
      SelectionUtil.selectCell(editorContext,rule,"templateName");
    }
  }
);
}
