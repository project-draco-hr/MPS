{
  jetbrains.mps.smodel.SNode statement=SConceptOperations.createNewNode("org.jetbrains.mps.samples.IfAndUnless.structure.MyIfStatement",null);
  SLinkOperations.setTarget(statement,"condition",SLinkOperations.getTarget(node,"condition",true),true);
  jetbrains.mps.smodel.SNode ifBody=SConceptOperations.createNewNode("org.jetbrains.mps.samples.IfAndUnless.structure.TrueFlow",null);
  ListSequence.fromList(SLinkOperations.getTargets(ifBody,"statement",true)).addSequence(ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(node,"ifTrue",true),"statement",true)));
  SLinkOperations.setTarget(statement,"body",ifBody,true);
  SLinkOperations.setTarget(statement,"alternative",SConceptOperations.createNewNode("org.jetbrains.mps.samples.IfAndUnless.structure.FalseFlow",null),true);
  if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(node,"ifFalseStatement",true),"jetbrains.mps.baseLanguage.structure.BlockStatement")) {
    ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(statement,"alternative",true),"statement",true)).addSequence(ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(node,"ifFalseStatement",true),"jetbrains.mps.baseLanguage.structure.BlockStatement"),"statements",true),"statement",true)));
  }
 else {
    ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(statement,"alternative",true),"statement",true)).addElement(SLinkOperations.getTarget(node,"ifFalseStatement",true));
  }
  SNodeOperations.replaceWithAnother(node,statement);
  editorContext.select(SLinkOperations.getTarget(statement,"condition",true));
}
