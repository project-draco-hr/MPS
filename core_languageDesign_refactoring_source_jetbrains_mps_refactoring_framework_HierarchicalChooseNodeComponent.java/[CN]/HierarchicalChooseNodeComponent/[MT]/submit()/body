{
  TreePath selectionPath=myHierarchyTree.getSelectionPath();
  if (selectionPath == null)   throw new InvalidInputValueException("nothing is selected");
  Object lastComponent=selectionPath.getLastPathComponent();
  if (!(lastComponent instanceof HierarchyTreeNode)) {
    throw new InvalidInputValueException("no node is selected");
  }
  final HierarchyTreeNode selectedTreeNode=(HierarchyTreeNode)lastComponent;
  SNode node=ModelAccess.instance().runReadAction(new Computable<SNode>(){
    public SNode compute(){
      return selectedTreeNode.getNode().getNode();
    }
  }
);
  return node;
}
