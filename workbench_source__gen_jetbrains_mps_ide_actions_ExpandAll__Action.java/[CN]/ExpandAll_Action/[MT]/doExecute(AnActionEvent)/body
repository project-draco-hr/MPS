{
  try {
    EditorCell_Collection foldedCollectionToSelect=ExpandAll_Action.this.getFoldedCollectionToSelect();
    Queue<EditorCell_Collection> cellsToProcess=QueueSequence.fromQueueAndArray(new LinkedList<EditorCell_Collection>(),(EditorCell_Collection)ExpandAll_Action.this.editorComponent.getRootCell());
    while (QueueSequence.fromQueue(cellsToProcess).isNotEmpty()) {
      EditorCell_Collection collectionCell=QueueSequence.fromQueue(cellsToProcess).removeFirstElement();
      if (collectionCell.isFolded()) {
        collectionCell.unfold();
      }
      for (      EditorCell childCell : Sequence.fromIterable(collectionCell)) {
        if (childCell instanceof EditorCell_Collection) {
          QueueSequence.fromQueue(cellsToProcess).addLastElement((EditorCell_Collection)childCell);
        }
      }
    }
    if (foldedCollectionToSelect != null) {
      ExpandAll_Action.this.editorContext.getNodeEditorComponent().clearSelectionStack();
      EditorCell editorCellToSelect=foldedCollectionToSelect.getFirstDescendant(CellConditions.SELECTABLE);
      if (editorCellToSelect != null) {
        ExpandAll_Action.this.editorContext.getNodeEditorComponent().changeSelection(editorCellToSelect);
        editorCellToSelect.home();
      }
    }
  }
 catch (  Throwable t) {
    if (log.isErrorEnabled()) {
      log.error("User's action execute method failed. Action:" + "ExpandAll",t);
    }
  }
}
