{
  makeChangeAndWait(change);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      ChangeSet cs=myDiff.getChangeSet();
      ChangeSet rebuiltChangeSet=ChangeSetBuilder.buildChangeSet(cs.getOldModel(),cs.getNewModel());
      Assert.assertEquals(getChangeSetString(rebuiltChangeSet),getChangeSetString(cs));
    }
  }
);
}
