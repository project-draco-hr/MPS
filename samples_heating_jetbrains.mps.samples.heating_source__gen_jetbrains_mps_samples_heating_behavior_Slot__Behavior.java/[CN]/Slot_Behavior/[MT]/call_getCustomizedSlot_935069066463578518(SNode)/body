{
  SNode dailyPlan=SNodeOperations.cast(SNodeOperations.getParent(thisNode),"jetbrains.mps.samples.heating.structure.DailyPlan");
  SNode found=null;
  List<SNode> visitedPlans=new ArrayList<SNode>();
  while (found == null && (SLinkOperations.getTarget(dailyPlan,"customizes",true) != null)) {
    ListSequence.fromList(visitedPlans).addElement(dailyPlan);
    dailyPlan=SLinkOperations.getTarget(SLinkOperations.getTarget(dailyPlan,"customizes",true),"target",false);
    if (ListSequence.fromList(visitedPlans).contains(dailyPlan)) {
      return null;
    }
    found=ListSequence.fromList(SLinkOperations.getTargets(dailyPlan,"items",true)).findFirst(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return SPropertyOperations.getInteger(it,"start") == SPropertyOperations.getInteger(thisNode,"start");
      }
    }
);
  }
  return found;
}
