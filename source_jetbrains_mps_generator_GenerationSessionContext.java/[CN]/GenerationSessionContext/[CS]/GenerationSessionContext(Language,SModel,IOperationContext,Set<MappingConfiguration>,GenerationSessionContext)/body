{
  myTargetLanguage=targetLanguage;
  myInvocationContext=invocationContext;
  myCustomMappingConfigurations=null;
  if (targetLanguage == null) {
    myAutoPlanData=new GenerationSessionData(inputModel);
    myGeneratorModules=myAutoPlanData.getGenerators();
    myTemplateModels=myAutoPlanData.getTemplateModels();
    myCustomMappingConfigurations=CollectionUtil.lisAsSet(myAutoPlanData.getMappings());
    myMappingConfigurations=CollectionUtil.lisAsSet(myAutoPlanData.getMappings());
  }
 else {
    myGeneratorModules=getUsedGenerators(inputModel);
    if (configs != null) {
      myCustomMappingConfigurations=new HashSet<MappingConfiguration>(configs);
    }
    initTemplateModels();
  }
  myTransientModule=new TransientModule(invocationContext.getModule(),myGeneratorModules);
  if (prevContext != null) {
    myTransientModule.addDependency(prevContext.getModule());
  }
}
