{
  myTargetLanguage=targetLanguage;
  myInvocationContext=invocationContext;
  myCustomMappingConfigurations=null;
  if (targetLanguage == null) {
    myGenerationStepController=new GenerationStepController(inputModel);
    myGeneratorModules=myGenerationStepController.getGenerators();
    myTemplateModels=myGenerationStepController.getTemplateModels();
    myMappingConfigurations=CollectionUtil.lisAsSet(myGenerationStepController.getMappings());
  }
 else {
    myGeneratorModules=getUsedGenerators(inputModel);
    if (configs != null) {
      myCustomMappingConfigurations=new HashSet<MappingConfiguration>(configs);
    }
    initTemplateModels();
  }
  myTransientModule=new TransientModule(invocationContext.getModule(),myGeneratorModules);
  if (prevContext != null) {
    myTransientModule.addDependency(prevContext.getModule());
  }
}
