{
  if (myTargetLanguage == null) {
    List<Generator> generators=GenerationPlanUtil.getUsedGenerators(inputModel.getModelDescriptor(),GlobalScope.getInstance());
    myTemplateModels=new ArrayList<SModelDescriptor>();
    for (    Generator generatorModule : generators) {
      List<SModelDescriptor> templateModels=generatorModule.getOwnTemplateModels();
      CollectionUtil.addAllNotPresent(templateModels,myTemplateModels);
    }
    myMappingConfigurations=new HashSet<MappingConfiguration>();
    for (    MappingConfiguration mappingConfig : myCustomMappingConfigurations) {
      if (myTemplateModels.contains(mappingConfig.getModel().getModelDescriptor())) {
        myMappingConfigurations.add(mappingConfig);
      }
    }
  }
 else {
    myTemplateModels=new ArrayList<SModelDescriptor>();
    for (    Generator generatorModule : myGeneratorModules) {
      List<SModelDescriptor> templateModels=generatorModule.getOwnTemplateModels();
      CollectionUtil.addAllNotPresent(templateModels,myTemplateModels);
    }
    if (myCustomMappingConfigurations != null) {
      myMappingConfigurations=new HashSet<MappingConfiguration>(myCustomMappingConfigurations);
    }
 else {
      myMappingConfigurations=new HashSet<MappingConfiguration>();
      for (      SModelDescriptor templateModel : myTemplateModels) {
        myMappingConfigurations.addAll(templateModel.getSModel().allAdapters(MappingConfiguration.class));
      }
    }
  }
}
