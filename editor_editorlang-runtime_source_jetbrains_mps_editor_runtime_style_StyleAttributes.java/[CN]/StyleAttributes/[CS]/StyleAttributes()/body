{
  LanguageRegistry.getInstance().addRegistryListener(new LanguageRegistryListener(){
    @Override public void afterLanguagesLoaded(    Iterable<LanguageRuntime> languages){
      for (      LanguageRuntime language : languages) {
        EditorAspectDescriptor descriptor=language.getAspectDescriptor(EditorAspectDescriptor.class);
        if (descriptor != null) {
          try {
            for (            StyleAttribute attribute : descriptor.getStyleAttributes().values()) {
              attribute.register();
            }
          }
 catch (          AbstractMethodError e) {
            LOG.error("Error when loading style attributes for language " + language + ". Try to rebuild language.",e);
          }
catch (          Throwable e) {
            LOG.error("Error when loading style attributes for language " + language,e);
          }
        }
      }
    }
    @Override public void beforeLanguagesUnloaded(    Iterable<LanguageRuntime> languages){
      for (      LanguageRuntime language : languages) {
        EditorAspectDescriptor descriptor=language.getAspectDescriptor(EditorAspectDescriptor.class);
        if (descriptor != null) {
          try {
            for (            StyleAttribute attribute : descriptor.getStyleAttributes().values()) {
              attribute.unregister();
            }
          }
 catch (          AbstractMethodError e) {
            LOG.error("Error when unloading style attributes for language " + language + ". Try to rebuild language.",e);
          }
catch (          Throwable e) {
            LOG.error("Error when unloading style attributes for language " + language,e);
          }
        }
      }
    }
  }
);
}
