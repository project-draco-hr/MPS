{
  if (files.isEmpty())   return Collections.emptyList();
  MergeProvider providerDecorator=new MergeProviderDecorator(myProject,provider);
  List<VirtualFile> toMerge=new ArrayList<VirtualFile>();
  List<VirtualFile> alreadyResolved=new ArrayList<VirtualFile>();
  for (  VirtualFile f : files) {
    if (VcsMigrationUtil.getHandler().isInConflict(VirtualFileUtils.toIFile(f),true)) {
      toMerge.add(f);
    }
 else {
      alreadyResolved.add(f);
    }
  }
  if (toMerge.isEmpty())   return alreadyResolved;
  List<VirtualFile> userResolved=super.showMergeDialog(files,providerDecorator);
  return CollectionUtil.union(userResolved,alreadyResolved);
}
