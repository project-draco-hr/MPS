{
  final PropertyMacro delegate=wrapped.getPropertyMacro(propertyMacro);
  return new PropertyMacro(){
    @Override public void expand(    @NotNull TemplateContext context,    @NotNull SNode outputNode) throws GenerationFailureException {
      try {
        NodeReadEventsCaster.setNodesReadListener(listener);
        delegate.expand(context,outputNode);
      }
  finally {
        NodeReadEventsCaster.removeNodesReadListener();
      }
    }
  }
;
}
