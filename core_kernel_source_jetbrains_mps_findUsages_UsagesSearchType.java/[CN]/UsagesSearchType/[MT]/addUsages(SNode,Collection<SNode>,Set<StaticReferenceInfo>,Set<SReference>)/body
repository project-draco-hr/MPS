{
  for (  SReference ref : current.getReferences()) {
    if (ref instanceof StaticReference) {
      SModelReference mr=ref.getTargetSModelReference();
      if (srefs.contains(new StaticReferenceInfo(SModelRepository.getInstance().getModelDescriptor(mr),ref.getTargetNodeId()))) {
        result.add(ref);
      }
    }
 else {
      if (nodes.contains(ref.getTargetNode())) {
        result.add(ref);
      }
    }
  }
  for (  SNode child : current.getChildren()) {
    addUsages(child,nodes,srefs,result);
  }
}
