{
  for (  SReference ref : current.getReferences()) {
    if (ref instanceof StaticReference) {
      SModelReference mr=((StaticReference)ref).getTargetSModelReference();
      if (srefs.contains(new StaticReferenceInfo(SModelRepository.getInstance().getModelDescriptor(mr),((StaticReference)ref).getTargetNodeId()))) {
        result.add(ref);
      }
    }
 else {
      if (nodes.contains(ref.getTargetNode())) {
        result.add(ref);
      }
    }
  }
  for (  SNode child : current.getChildren()) {
    addUsages(child,nodes,srefs,result);
  }
}
