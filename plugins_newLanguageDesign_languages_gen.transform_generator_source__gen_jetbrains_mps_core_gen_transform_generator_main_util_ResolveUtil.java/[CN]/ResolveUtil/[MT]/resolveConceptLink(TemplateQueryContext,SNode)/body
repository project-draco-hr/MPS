{
  if ((link == null)) {
    return null;
  }
  SNode local=genContext.getOutputNodeByInputNodeAndMappingLabel(link,"conceptLink");
  if (local != null) {
    return local;
  }
  final String name=SPropertyOperations.getString(link,"name");
  if (name == null) {
    return null;
  }
  SNode concept=SNodeOperations.cast(SNodeOperations.getParent(link),"jetbrains.mps.core.structure.structure.SAbstractConcept");
  SNode cd=resolveConcept(genContext,concept);
  if (cd == null) {
    return null;
  }
  return ListSequence.fromList(SLinkOperations.getTargets(cd,"linkDeclaration",true)).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return name.equals(SPropertyOperations.getString(it,"role"));
    }
  }
).first();
}
