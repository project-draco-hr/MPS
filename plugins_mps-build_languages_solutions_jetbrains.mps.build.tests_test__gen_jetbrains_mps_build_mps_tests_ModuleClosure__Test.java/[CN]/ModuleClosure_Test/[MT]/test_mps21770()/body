{
  myProject.getModelAccess().runReadAction(new Runnable(){
    public void run(){
      SModel m=null;
      SNode project1=SModelOperations.createNewNode(m,null,MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,"jetbrains.mps.build.structure.BuildProject"));
      SNode s=SModelOperations.createNewNode(m,null,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f7L,"jetbrains.mps.build.mps.structure.BuildMps_Solution"));
      SNode rt=SModelOperations.createNewNode(m,null,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f7L,"jetbrains.mps.build.mps.structure.BuildMps_Solution"));
      SNode l=SModelOperations.createNewNode(m,null,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,"jetbrains.mps.build.mps.structure.BuildMps_Language"));
      ListSequence.fromList(SLinkOperations.getChildren(project1,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x668c6cfbafacf6f2L,"parts"))).addElement(s);
      ListSequence.fromList(SLinkOperations.getChildren(project1,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x668c6cfbafacf6f2L,"parts"))).addElement(rt);
      ListSequence.fromList(SLinkOperations.getChildren(project1,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x668c6cfbafacf6f2L,"parts"))).addElement(l);
      SNode d=SLinkOperations.setNewChild(SLinkOperations.addNewChild(rt,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508331930cL,0x48e82d5083341cb8L,"dependencies"),SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,"jetbrains.mps.build.mps.structure.BuildMps_ExtractedModuleDependency"))),MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x64bd442e1cf7aaeeL,0x64bd442e1cf7aaefL,"dependency"),SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyOnModule")));
      SLinkOperations.setTarget(d,MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508334b11aL,0x48e82d5083341cb9L,"module"),s);
      SLinkOperations.setTarget(SLinkOperations.addNewChild(l,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f8L,0x2c4467914643be24L,"runtime"),SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c4467914644b6e3L,"jetbrains.mps.build.mps.structure.BuildMps_ModuleSolutionRuntime"))),MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c4467914644b6e3L,0x2c4467914644b6e4L,"solution"),rt);
      SNode project2=SModelOperations.createNewNode(m,null,MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,"jetbrains.mps.build.structure.BuildProject"));
      SNode s2=SModelOperations.createNewNode(m,null,MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c446791464290f7L,"jetbrains.mps.build.mps.structure.BuildMps_Solution"));
      ListSequence.fromList(SLinkOperations.getChildren(project2,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x668c6cfbafacf6f2L,"parts"))).addElement(s2);
      SLinkOperations.setTarget(SLinkOperations.addNewChild(project2,MetaAdapterFactory.getContainmentLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x4df58c6f18f84a13L,0x4df58c6f18f84a25L,"dependencies"),SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x454b730dd908c220L,"jetbrains.mps.build.structure.BuildProjectDependency"))),MetaAdapterFactory.getReferenceLink(0x798100da4f0a421aL,0xb99171f8c50ce5d2L,0x454b730dd908c220L,0x4df58c6f18f84a24L,"script"),project1);
      SLinkOperations.setTarget(SLinkOperations.addNewChild(s2,MetaAdapterFactory.getContainmentLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x48e82d508331930cL,0x48e82d5083341cb8L,"dependencies"),SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c4467914643d2d2L,"jetbrains.mps.build.mps.structure.BuildMps_ModuleDependencyUseLanguage"))),MetaAdapterFactory.getReferenceLink(0xcf935df46994e9cL,0xa132fa109541cba3L,0x2c4467914643d2d2L,0x2c4467914643d2d3L,"language"),l);
      Set<SNode> clAsSet=SetSequence.fromSet(new HashSet<SNode>());
      MPSModulesPartitioner p=new MPSModulesPartitioner(project2);
      p.buildChunks();
      p.buildExternalDependencies();
      SetSequence.fromSet(clAsSet).addSequence(Sequence.fromIterable(p.getExternal()));
      Assert.assertTrue(SetSequence.fromSet(clAsSet).contains(s));
      Assert.assertTrue(SetSequence.fromSet(clAsSet).contains(rt));
      Assert.assertTrue(SetSequence.fromSet(clAsSet).contains(l));
    }
  }
);
}
