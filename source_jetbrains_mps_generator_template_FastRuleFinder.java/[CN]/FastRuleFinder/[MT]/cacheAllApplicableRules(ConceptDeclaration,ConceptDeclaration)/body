{
  if (myRules_all.containsKey(inputConcept))   return;
  List<AbstractConceptDeclaration> hierarchy=new ArrayList<AbstractConceptDeclaration>(5);
  while (inputConcept != null) {
    hierarchy.add(inputConcept);
    if (myRules_all.containsKey(inputConcept)) {
      break;
    }
    myRules_applicableInheritor.put(inputConcept,new ArrayList<Reduction_MappingRule>(5));
    inputConcept=getExtendedConcept(inputConcept,baseConcept);
  }
  List<AbstractConceptDeclaration> interfacesHierarchy=new ArrayList<AbstractConceptDeclaration>(5);
  for (  AbstractConceptDeclaration hrrConcept : hierarchy) {
    addInterfacesToHierarchy(((ConceptDeclaration)hrrConcept).getImplementses(),interfacesHierarchy);
  }
  hierarchy.addAll(interfacesHierarchy);
  Collections.reverse(hierarchy);
  if (!interfacesHierarchy.isEmpty()) {
    System.out.println("---------");
    for (    AbstractConceptDeclaration cd : hierarchy) {
      System.out.println(cd.getName());
    }
    System.out.println("---------");
  }
  List<Reduction_MappingRule> rulesForInheritor=null;
  for (  AbstractConceptDeclaration hrrConcept : hierarchy) {
    rulesForInheritor=updateRulesForInheritor(hrrConcept,rulesForInheritor);
    List<Reduction_MappingRule> list=myRules_applicableExactly.get(hrrConcept);
    if (list != null) {
      for (      Reduction_MappingRule rule : list) {
        if (rule.getApplyToConceptInheritors()) {
          rulesForInheritor.add(rule);
        }
      }
    }
  }
  for (  AbstractConceptDeclaration hrrConcept : hierarchy) {
    if (myRules_all.containsKey(hrrConcept)) {
      continue;
    }
    myRules_all.put(hrrConcept,new ArrayList<Reduction_MappingRule>(5));
    List<Reduction_MappingRule> rulesExectly=myRules_applicableExactly.get(hrrConcept);
    if (rulesExectly != null) {
      myRules_all.get(hrrConcept).addAll(rulesExectly);
    }
    myRules_all.get(hrrConcept).addAll(myRules_applicableInheritor.get(hrrConcept));
  }
}
