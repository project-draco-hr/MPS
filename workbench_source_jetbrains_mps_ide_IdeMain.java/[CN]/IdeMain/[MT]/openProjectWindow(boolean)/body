{
  installFocusKiller();
  ThreadUtils.runInUIThreadAndWait(new Runnable(){
    public void run(){
      System.setProperty("alloy.licenseCode","4#JetBrains_s.r.o.#nvxvi9#2i0t28");
      System.setProperty("swing.aatext","true");
      long start=System.currentTimeMillis();
      SplashScreen.getInstance().showSplashScreen();
      MPSPlugin.getInstance();
      if (expirationDate().compareTo(new Date()) == -1) {
        JOptionPane.showMessageDialog(SplashScreen.getInstance(),"Program is expired. You can download latest version from www.jetbrains.com");
        System.exit(0);
      }
      LoggerUtil.configureLogger();
      ApplicationComponents.getInstance();
      IdeSettings.getInstance();
      IdeAppearanceSettings.instance().applySettings();
      final IDEProjectFrame projectWindow=new IDEProjectFrame();
      if (loadOldProject) {
        projectWindow.loadLastProjectIfAny();
      }
      SplashScreen.getInstance().hideSplashScreen();
      projectWindow.show();
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          if (ModuleMaker.isMakeTurnedOff())           return;
          MakeAllModulesAction action=new MakeAllModulesAction();
          action.setCloseOnExit(true);
          ActionContext context=new ActionContext();
          context.put(IDEProjectFrame.class,projectWindow);
          action.execute(context);
        }
      }
);
      long end=System.currentTimeMillis();
      System.out.println("MPS Started in " + (end - start) + " ms");
    }
  }
);
}
