{
  SNode result=SNodeFactoryOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellModel_Collection",null);
  SLinkOperations.setTarget(result,"cellLayout",SNodeFactoryOperations.createNewNode("jetbrains.mps.lang.editor.structure.CellLayout_Horizontal",null),true);
  List<SNode> nodes=editorContext.getSelectedNodes();
  SNodeOperations.insertNextSiblingChild(ListSequence.<SNode>fromList(nodes).last(),result);
  for (  SNode sn : nodes) {
    ListSequence.<SNode>fromList(SLinkOperations.getTargets(result,"childCellModel",true)).addElement(SNodeOperations.cast(sn,"jetbrains.mps.lang.editor.structure.EditorCellModel"));
  }
}
