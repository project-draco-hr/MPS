{
  super.customizeCellRenderer(tree,value,selected,expanded,leaf,row,hasFocus);
  ModelRootEntry entry=myModelRootEditor.getFileBasedModelRootEntry();
  if (entry != null) {
    final Object userObject=((DefaultMutableTreeNode)value).getUserObject();
    if (userObject instanceof NodeDescriptor) {
      final Object element=((NodeDescriptor)userObject).getElement();
      if (element instanceof FileElement) {
        final VirtualFile file=((FileElement)element).getFile();
        if (file != null && file.isDirectory()) {
          final FileBasedModelRoot modelRoot=(FileBasedModelRoot)entry.getModelRoot();
          if (modelRoot != null) {
            setIcon(updateIcon(modelRoot,file,getIcon()));
          }
        }
      }
    }
  }
}
