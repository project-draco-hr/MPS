{
  Iterable<SDependency> declaredDependencies=module.getDeclaredDependencies();
  Set<SModule> dependencies=SetSequence.fromSetWithValues(new HashSet<SModule>(),Sequence.fromIterable(declaredDependencies).translate(new ITranslator2<SDependency,SModule>(){
    public Iterable<SModule> translate(    SDependency it){
      return new GlobalModuleDependenciesManager(module).getModules(GlobalModuleDependenciesManager.Deptype.VISIBLE);
    }
  }
));
  SetSequence.fromSet(dependencies).addElement(module);
  return SetSequence.fromSet(dependencies).all(new IWhereFilter<SModule>(){
    public boolean accept(    SModule it){
      return isApplied(script,(AbstractModule)it);
    }
  }
);
}
