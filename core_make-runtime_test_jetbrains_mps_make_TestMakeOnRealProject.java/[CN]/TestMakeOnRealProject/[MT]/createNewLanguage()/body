{
  String languageNamespace="TestLanguage";
  IFile descriptorFile=myTmpDir.getDescendant(languageNamespace + File.separator + languageNamespace+ MPSExtentions.DOT_LANGUAGE);
  LanguageDescriptor d=new LanguageDescriptor();
  d.setId(ModuleId.regular());
  d.setNamespace(languageNamespace);
  d.getRuntimeModules().add(myCreatedRuntimeSolution.getModuleReference());
  DefaultModelRoot modelRoot=new DefaultModelRoot();
  IFile languageModels=descriptorFile.getParent().getDescendant(Language.LANGUAGE_MODELS);
  modelRoot.setContentRoot(languageModels.getParent().getPath());
  modelRoot.addFile(DefaultModelRoot.SOURCE_ROOTS,languageModels.getPath());
  d.getModelRootDescriptors().add(modelRoot.toDescriptor());
  LanguageDescriptorPersistence.saveLanguageDescriptor(descriptorFile,d,MacrosFactory.forModuleFile(descriptorFile));
  ModuleHandle handle=ModulesMiner.getInstance().loadModuleHandle(descriptorFile);
  return (Language)ModuleRepositoryFacade.createModule(handle,myModuleOwner);
}
