{
  final ModuleDescriptor descriptor=from.getModuleDescriptor();
  Set<Dependency> dependencies=descriptor.getDependencies();
  List<Dependency> badDeps=SetSequence.fromSet(dependencies).where(new IWhereFilter<Dependency>(){
    public boolean accept(    Dependency it){
      return it.getModuleRef().equals(to.getModuleReference());
    }
  }
).toListSequence();
  SetSequence.fromSet(dependencies).removeSequence(ListSequence.fromList(badDeps));
  ModelAccess.instance().runWriteAction(new Runnable(){
    public void run(){
      from.save();
    }
  }
);
  ((Project)MapSequence.fromMap(_params).get("project")).getComponent(ProjectPluginManager.class).getTool(ModuleDependenies_Tool.class).resetAll();
}
