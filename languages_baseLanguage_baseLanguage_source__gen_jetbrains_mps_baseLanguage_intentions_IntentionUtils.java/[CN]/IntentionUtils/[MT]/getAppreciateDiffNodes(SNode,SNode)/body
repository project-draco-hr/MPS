{
  Tuples._2<SNode,SNode> currentDiff=getDiffNodes(node1,node2);
  if (currentDiff == null) {
    return null;
  }
  while (currentDiff._0() != node1) {
    if (isDiffCanBeConvertedToTernary(currentDiff)) {
      return currentDiff;
    }
    currentDiff=MultiTuple.<SNode,SNode>from(SNodeOperations.getParent(currentDiff._0()),SNodeOperations.getParent(currentDiff._1()));
  }
  return (isDiffCanBeConvertedToTernary(currentDiff) ? currentDiff : null);
}
