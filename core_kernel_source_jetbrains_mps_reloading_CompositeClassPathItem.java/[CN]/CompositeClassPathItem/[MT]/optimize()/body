{
  List<IClassPathItem> flattenedItems=flatten();
  Iterator<IClassPathItem> it=flattenedItems.iterator();
  Set<String> alreadyVisited=new HashSet<String>();
  while (it.hasNext()) {
    IClassPathItem item=it.next();
    if (item instanceof FileClassPathItem) {
      FileClassPathItem fcp=(FileClassPathItem)item;
      if (alreadyVisited.contains(fcp.getClassPath())) {
        it.remove();
      }
 else {
        alreadyVisited.add(fcp.getClassPath());
      }
    }
    if (item instanceof JarFileClassPathItem) {
      JarFileClassPathItem jfcp=(JarFileClassPathItem)item;
      if (alreadyVisited.contains(jfcp.getFile().getAbsolutePath())) {
        it.remove();
      }
 else {
        alreadyVisited.add(jfcp.getFile().getAbsolutePath());
      }
    }
  }
  CompositeClassPathItem result=new CompositeClassPathItem();
  for (  IClassPathItem item : flattenedItems) {
    result.add(item);
  }
  return result;
}
