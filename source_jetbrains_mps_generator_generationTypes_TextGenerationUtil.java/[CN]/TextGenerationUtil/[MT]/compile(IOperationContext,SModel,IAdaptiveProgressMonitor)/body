{
  JavaCompiler compiler=new JavaCompiler();
  for (  SNode root : targetModel.getRoots()) {
    INodeAdapter outputNode=BaseAdapter.fromNode(root);
    if (outputNode instanceof ClassConcept || outputNode instanceof Interface) {
      compiler.addSource(generateText(context,root).getText(),JavaNameUtil.packageNameForModelUID(targetModel.getUID()) + "." + root.getName());
    }
  }
  progress.addText("Compiling...");
  compiler.compile();
  progress.addText("Compilation finished.");
  return compiler;
}
