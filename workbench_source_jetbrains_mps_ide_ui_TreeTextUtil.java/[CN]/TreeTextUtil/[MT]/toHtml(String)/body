{
  if (str == null)   return "";
  if (StringUtils.indexOfAny(str,_entitiesChars) < 0) {
    return str;
  }
  final int capacity=str.length();
  final StringBuilder builder=new StringBuilder(capacity + 100);
  for (int i=0; i < capacity; i++) {
    final char c=str.charAt(i);
    final String entity=(c >= 0 && c < _charsToEntities.length) ? _charsToEntities[c] : null;
    if (entity == null) {
      builder.append(c);
    }
 else {
      builder.append(entity);
    }
  }
  return builder.toString();
}
