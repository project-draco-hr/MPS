{
  myMoveNodeItems=ListSequence.fromList(new ArrayList<SNode>(ListSequence.fromList(nodes).count()));
  if (ListSequence.fromList(nodes).isNotEmpty()) {
    Iterable<SModule> seq=ListSequence.fromList(nodes).select(new ISelector<SNode,SModule>(){
      public SModule select(      SNode it){
        return SNodeOperations.getModel(it).getModule();
      }
    }
);
    mySourceModule=Sequence.fromIterable(seq).first();
    if (!(Sequence.fromIterable(seq).all(new IWhereFilter<SModule>(){
      public boolean accept(      SModule it){
        return eq_t528rj_a0a0a0a0a0a2a2a8(it,mySourceModule);
      }
    }
))) {
      throw new IllegalArgumentException("All nodes should be from the same module.");
    }
  }
  for (  SNode from : ListSequence.fromList(nodes)) {
    final SNode moveNodeItem=createMoveNode_t528rj_a0a0d0i(SNodeOperations.cast(HUtil.copyIfNecessary(NodeReferenceUtil.makeReflection(from)),MetaAdapterFactory.getConcept(0x9074634404fd4286L,0x97d5b46ae6a81709L,0x2b3f57492c1648ccL,"jetbrains.mps.lang.migration.structure.AbstractNodeReference")),SNodeOperations.cast(HUtil.copyIfNecessary(null),MetaAdapterFactory.getConcept(0x9074634404fd4286L,0x97d5b46ae6a81709L,0x2b3f57492c1648ccL,"jetbrains.mps.lang.migration.structure.AbstractNodeReference")));
    Sequence.fromIterable(new ExtensionPoint<MoveNodesContributor>("jetbrains.mps.lang.migration.pluginSolution.MoveNodesContributor").getObjects()).visitAll(new IVisitor<MoveNodesContributor>(){
      public void visit(      MoveNodesContributor it){
        ListSequence.fromList(SLinkOperations.getChildren(moveNodeItem,MetaAdapterFactory.getContainmentLink(0x9074634404fd4286L,0x97d5b46ae6a81709L,0x67236d4a5830221eL,0x2b3f57492c165c59L,"specialization"))).addSequence(Sequence.fromIterable(it.getMigrationSpecializations(AbstractNodeReference__BehaviorDescriptor.tryToFindNode_id6szrkDoc2K7.invoke(SLinkOperations.getTarget(moveNodeItem,MetaAdapterFactory.getContainmentLink(0x9074634404fd4286L,0x97d5b46ae6a81709L,0x67236d4a5830221eL,0x67236d4a58343d15L,"fromNode")),mySourceModule.getRepository()))));
      }
    }
);
    ListSequence.fromList(myMoveNodeItems).addElement(moveNodeItem);
  }
}
