{
  IdeMain.setTestMode(TestMode.CORE_TEST);
  TestMain.configureMPS();
  final MPSProject project=loadProject(new File(projectDirectory,REFACTORING_PROJECT));
  final boolean[] b=new boolean[]{true};
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      b[0]=getModel(project,REFACTORING_SANDBOX[0]) != null && getModel(project,REFACTORING_SANDBOX[1]) != null && getLanguage(project,REFACTORING_LANGUAGE[0]) != null && getLanguage(project,REFACTORING_LANGUAGE[1]) != null;
    }
  }
);
  ThreadUtils.runInUIThreadNoWait(new Runnable(){
    public void run(){
      project.dispose();
    }
  }
);
  return b[0];
}
