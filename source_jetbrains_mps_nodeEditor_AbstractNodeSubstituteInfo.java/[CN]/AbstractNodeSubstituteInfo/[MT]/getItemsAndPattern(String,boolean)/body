{
  String smallPattern=pattern;
  List<INodeSubstituteItem> result=null;
  if (!strictMatching) {
    while (smallPattern.length() > 0) {
      if (myPatternsToItemListsCache.containsKey(smallPattern)) {
        result=new ArrayList<INodeSubstituteItem>();
        result.addAll(myPatternsToItemListsCache.get(smallPattern));
        break;
      }
 else {
        smallPattern=smallPattern.substring(0,smallPattern.length() - 1);
      }
    }
  }
 else {
    if (myStrictPatternsToItemListsCache.containsKey(smallPattern)) {
      result=new ArrayList<INodeSubstituteItem>();
      result.addAll(myStrictPatternsToItemListsCache.get(smallPattern));
    }
 else     if (myPatternsToItemListsCache.containsKey(smallPattern)) {
      result=new ArrayList<INodeSubstituteItem>();
      result.addAll(myPatternsToItemListsCache.get(smallPattern));
    }
  }
  if (result == null) {
    result=new ArrayList<INodeSubstituteItem>(items());
  }
  return new Pair<String,List<INodeSubstituteItem>>(smallPattern,result);
}
