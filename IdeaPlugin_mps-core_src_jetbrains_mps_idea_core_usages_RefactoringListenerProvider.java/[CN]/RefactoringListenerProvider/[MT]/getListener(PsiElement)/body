{
  final NodePtr oldNode=MPS2PsiMapperUtil.getNodePtr(element);
  return new RefactoringElementListener(){
    @Override public void elementMoved(    @NotNull PsiElement newElement){
      handleMoveOrRename(newElement);
    }
    @Override public void elementRenamed(    @NotNull PsiElement newElement){
      handleMoveOrRename(newElement);
    }
    private void handleMoveOrRename(    @NotNull final PsiElement newElement){
      NodePtr newNode=MPS2PsiMapperUtil.getNodePtr(newElement);
      newElement.getProject().getComponent(MoveRenameBatch.class).recordMoveRename(oldNode,newNode);
    }
  }
;
}
