{
  List<PaletteElement> groups=ListSequence.fromList(new ArrayList<PaletteElement>());
  ModelPlusImportedScope scope=new ModelPlusImportedScope(myDiagramCell.getSNode().getModel(),false,NameUtil.nodeFQName(MetaAdapterFactory.getConcept(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec40c2c8L,"jetbrains.mps.testHybridEditor.structure.MetaBlock").getDeclarationNode()));
  for (  SNode node : Sequence.fromIterable(scope.getAvailableElements(null)).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return SNodeOperations.isInstanceOf(it,MetaAdapterFactory.getConcept(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec40c2c8L,"jetbrains.mps.testHybridEditor.structure.MetaBlock"));
    }
  }
)) {
    String key=SPropertyOperations.getString(SNodeOperations.cast(node,MetaAdapterFactory.getConcept(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec40c2c8L,"jetbrains.mps.testHybridEditor.structure.MetaBlock")),MetaAdapterFactory.getProperty(0x913a1d639e1948faL,0xad03e33ecccd3814L,0x20a804e2ec40c2c8L,0x206c20835c7e9707L,"path"));
    if (!(MapSequence.fromMap(tagToGroupMap).containsKey(key))) {
      MapSequence.fromMap(tagToGroupMap).put(key,ListSequence.fromList(new ArrayList<SNode>()));
    }
    ListSequence.fromList(MapSequence.fromMap(tagToGroupMap).get(key)).addElement(node);
  }
  for (  String tag : MapSequence.fromMap(tagToGroupMap).keySet()) {
    ListSequence.fromList(groups).addElement(new MyActionGroup(MapSequence.fromMap(tagToGroupMap).get(tag),myDiagramCell,myDiagramCell.getSNode(),SLinkOperations.findLinkDeclaration(MetaAdapterFactory.getContainmentLink(0x913a1d639e1948faL,0xad03e33ecccd3814L,0xa10615a65702ec1L,0x20a804e2ec43f4b6L,"newBlocks")),tag));
  }
  ListSequence.fromList(groups).addElement(new MyConnectorCreationAction(myDiagramCell));
  return ListSequence.fromList(groups).toGenericArray(PaletteElement.class);
}
