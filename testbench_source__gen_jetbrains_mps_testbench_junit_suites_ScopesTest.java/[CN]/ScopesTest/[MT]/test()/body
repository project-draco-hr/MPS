{
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      SReference reference=null;
      for (      SReference ref : SNodeOperations.getReferences(SNodeOperations.getParent(ScopesTest.this.myNode))) {
        if (SLinkOperations.getTargetNode(ref) == SLinkOperations.getTarget(ScopesTest.this.myNode,MetaAdapterFactory.getReferenceLink(0x8585453e6bfb4d80L,0x98deb16074f1d86cL,0x7181d929c720809L,0x4b9f88d62c795596L,"checkingReference"))) {
          reference=ref;
          break;
        }
      }
      Scope scope=ModelConstraints.getScope(reference);
      List<SNode> expected=ScopesTest.this.getExpectedNodes(myNode);
      List<SNode> scopeSet=ScopesTest.this.getScopeNodes(scope);
      List<SNode> unExpected=CollectionUtil.subtract(expected,scopeSet);
      List<SNode> notFounded=CollectionUtil.subtract(scopeSet,expected);
      Assert.assertTrue(ScopesTest.this.getFailMessage(unExpected,notFounded).toString(),unExpected.isEmpty() && notFounded.isEmpty());
    }
  }
);
}
