{
  final Project project=initTestEnvironmentAndLoadContextProject();
  return ModelAccess.instance().runReadAction(new Computable<List<SNode[]>>(){
    public List<SNode[]> compute(){
      List<SNode[]> nodesToCheck=ListSequence.fromList(new ArrayList<SNode[]>());
      for (      SModel model : project.getProjectModels()) {
        for (        SNode root : model.getRootNodes()) {
          ListSequence.fromList(nodesToCheck).addSequence(ListSequence.fromList(SNodeOperations.getDescendants(root,"jetbrains.mps.lang.test.structure.ScopesTest",true,new String[]{})).select(new ISelector<SNode,SNode[]>(){
            public SNode[] select(            SNode it){
              return new SNode[]{it};
            }
          }
));
        }
      }
      return nodesToCheck;
    }
  }
);
}
