{
  List<INodeSubstituteAction> result=new ArrayList<INodeSubstituteAction>();
{
    Calculable calc=new Calculable(){
      public Object calculate(){
        boolean yieldAllowed=false;
        boolean stopAllowed=false;
        boolean skipAllowed=false;
        SNode parentClosure=SNodeOperations.getAncestor(_context.getParentNode(),"jetbrains.mps.baseLanguage.structure.Closure",false,false);
        if (SNodeOperations.isInstanceOf(parentClosure,"jetbrains.mps.baseLanguage.ext.collections.lang.structure.ValueSupplierBlock")) {
          yieldAllowed=true;
          stopAllowed=true;
        }
        if (SNodeOperations.isInstanceOf(parentClosure,"jetbrains.mps.baseLanguage.ext.collections.lang.structure.MapperBlock")) {
          yieldAllowed=true;
          stopAllowed=true;
          skipAllowed=true;
        }
        if (SNodeOperations.isInstanceOf(parentClosure,"jetbrains.mps.baseLanguage.ext.collections.lang.structure.ForEachBlock")) {
          stopAllowed=true;
          skipAllowed=true;
        }
        List<SNode> concepts=new ArrayList<SNode>();
        if (yieldAllowed) {
          ListSequence.fromList(concepts).addElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.ext.collections.lang.structure.TraversalYieldStatement"));
        }
        if (stopAllowed) {
          ListSequence.fromList(concepts).addElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.ext.collections.lang.structure.TraversalStopStatement"));
        }
        if (skipAllowed) {
          ListSequence.fromList(concepts).addElement(SConceptOperations.findConceptDeclaration("jetbrains.mps.baseLanguage.ext.collections.lang.structure.TraversalSkipStatement"));
        }
        return concepts;
      }
    }
;
    Iterable queryResult=(Iterable)calc.calculate();
    if (queryResult != null) {
      for (      Object item : queryResult) {
        List<INodeSubstituteAction> defaultActions=ChildSubstituteActionsHelper.createDefaultActions((SNode)item,_context.getParentNode(),_context.getCurrentTargetNode(),_context.getChildSetter(),operationContext);
        result.addAll(defaultActions);
      }
    }
  }
  return result;
}
