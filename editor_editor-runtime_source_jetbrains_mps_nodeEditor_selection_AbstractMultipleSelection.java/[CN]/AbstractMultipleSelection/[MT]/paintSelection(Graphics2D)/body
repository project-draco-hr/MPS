{
  jetbrains.mps.nodeEditor.EditorComponent.turnOnAliasingIfPossible(g);
  for (  EditorCell cell : getSelectedCells()) {
    if (!g.hitClip(cell.getX(),cell.getY(),cell.getWidth(),cell.getHeight())) {
      continue;
    }
    boolean wasSelected=cell.isSelected();
    cell.setSelected(true);
    boolean wasCaretEnabled=false;
    if (cell instanceof EditorCell_Label && !wasSelected) {
      EditorCell_Label label=(EditorCell_Label)cell;
      wasCaretEnabled=label.isCaretEnabled();
      label.setCaretEnabled(false);
    }
    ((jetbrains.mps.nodeEditor.cells.EditorCell)cell).paint(g);
    if (cell instanceof EditorCell_Label && !wasSelected) {
      EditorCell_Label label=(EditorCell_Label)cell;
      label.setCaretEnabled(wasCaretEnabled);
    }
    cell.setSelected(wasSelected);
  }
}
