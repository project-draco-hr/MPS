{
  boolean finished=true;
  for (  SNode cast : ListSequence.fromList(SNodeOperations.getNodeDescendants(myWhatToEvaluate,MetaAdapterFactory.getConcept(new UUID(-935030926396207931l,-6610165693999523818l),1070534934090l,"jetbrains.mps.baseLanguage.structure.CastExpression"),false,new SConcept[]{})).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return TransformationUtil.isUnprocessed(it);
    }
  }
)) {
    SNode expression=SLinkOperations.getTarget(cast,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1070534934090l,1070534934092l,"expression"));
    SNode expressionType=TypeChecker.getInstance().getTypeOf(expression);
    SNode castType=SLinkOperations.getTarget(cast,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1070534934090l,1070534934091l,"type"));
    if (TypeChecker.getInstance().getSubtypingManager().isSubtype(expressionType,_quotation_createNode_s72qk1_b0a0d0b0ib_0()) && TypeChecker.getInstance().getSubtypingManager().isSubtype(castType,_quotation_createNode_s72qk1_b0a0d0b0ib())) {
      SNodeOperations.replaceWithAnother(cast,expression);
      TransformationUtil.replaceExpressionWithBox(expression);
      finished=false;
    }
 else     if (TypeChecker.getInstance().getSubtypingManager().isSubtype(expressionType,_quotation_createNode_s72qk1_b0a0a3a1a43()) && TypeChecker.getInstance().getSubtypingManager().isSubtype(castType,TransformationUtil.getPrimitiveType(),false)) {
      SNodeOperations.replaceWithAnother(cast,expression);
      TransformationUtil.replaceExpressionWithUnbox(expression);
      finished=false;
    }
 else     if (TypeChecker.getInstance().getSubtypingManager().isSubtype(expressionType,_quotation_createNode_s72qk1_b0a0b3a1a43()) && !(TypeChecker.getInstance().getSubtypingManager().isSubtype(castType,_quotation_createNode_s72qk1_b0a0a1d0b0ib()))) {
      SNode classifierType=TransformationUtil.getValueProxyTypeFromType(castType);
      SLinkOperations.setTarget(cast,MetaAdapterFactory.getContainmentLink(new UUID(-935030926396207931l,-6610165693999523818l),1070534934090l,1070534934091l,"type"),classifierType);
      finished=false;
    }
  }
  return finished;
}
