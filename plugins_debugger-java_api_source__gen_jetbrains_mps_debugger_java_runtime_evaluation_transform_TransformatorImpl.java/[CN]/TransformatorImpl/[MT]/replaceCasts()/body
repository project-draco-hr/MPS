{
  boolean finished=true;
  for (  SNode cast : ListSequence.fromList(SNodeOperations.getDescendants(myWhatToEvaluate,"jetbrains.mps.baseLanguage.structure.CastExpression",false,new String[]{})).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return TransformationUtil.isUnprocessed(it);
    }
  }
)) {
    SNode expression=SLinkOperations.getTarget(cast,"expression",true);
    SNode expressionType=TypeChecker.getInstance().getTypeOf(expression);
    SNode castType=SLinkOperations.getTarget(cast,"type",true);
    if (TypeChecker.getInstance().getSubtypingManager().isSubtype(expressionType,_quotation_createNode_s72qk1_b0a0d0b0cb_0()) && TypeChecker.getInstance().getSubtypingManager().isSubtype(castType,_quotation_createNode_s72qk1_b0a0d0b0cb())) {
      SNodeOperations.replaceWithAnother(cast,expression);
      TransformationUtil.replaceExpressionWithBox(expression);
      finished=false;
    }
 else     if (TypeChecker.getInstance().getSubtypingManager().isSubtype(expressionType,_quotation_createNode_s72qk1_b0a0a3a1a82()) && TypeChecker.getInstance().getSubtypingManager().isSubtype(castType,TransformationUtil.getPrimitiveType(),false)) {
      SNodeOperations.replaceWithAnother(cast,expression);
      TransformationUtil.replaceExpressionWithUnbox(expression);
      finished=false;
    }
 else     if (TypeChecker.getInstance().getSubtypingManager().isSubtype(expressionType,_quotation_createNode_s72qk1_b0a0b3a1a82()) && !(TypeChecker.getInstance().getSubtypingManager().isSubtype(castType,_quotation_createNode_s72qk1_b0a0a1d0b0cb()))) {
      SNode classifierType=TransformationUtil.getValueProxyTypeFromType(castType);
      SLinkOperations.setTarget(cast,"type",classifierType,true);
      finished=false;
    }
  }
  return finished;
}
