{
  String java=Java_Command.getJavaCommand(myJrePath);
  String classPathString=IterableUtils.join(ListSequence.fromList(myClassPath),Java_Command.ps());
  if (myProgramParameter.length() >= Java_Command.getMaxCommandLine()) {
    File tmpFile=FileUtil.createTmpFile();
    tmpFile.deleteOnExit();
    try {
      PrintWriter writer=new PrintWriter(tmpFile);
      writer.append(myProgramParameter);
      writer.flush();
      writer.close();
      return new ProcessHandlerBuilder().append(java).append(myVirtualMachineParameter).appendKey("classpath",classPathString).append(ClassRunner.class.getName()).appendKey(ClassRunner.CLASS_PREFIX,myClassPath).appendKey(ClassRunner.FILE_PREFIX,tmpFile.getAbsolutePath()).build(myWorkingDirectory);
    }
 catch (    FileNotFoundException e) {
      throw new ExecutionException("Could not create temporal file for program parameters.",e);
    }
  }
 else {
    return new ProcessHandlerBuilder().append(java).append(myVirtualMachineParameter).appendKey("classpath",classPathString).append(myClassName).append(myProgramParameter).build(myWorkingDirectory);
  }
}
