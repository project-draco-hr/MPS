{
  myMessageBusConnection=project.getMessageBus().connect();
  myMessageBusConnection.subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,new FileEditorManagerAdapter(){
    public void fileOpened(    FileEditorManager source,    VirtualFile file){
      FileEditor selectedEditor=source.getSelectedEditor(file);
      if (selectedEditor instanceof MPSFileNodeEditor) {
        MPSFileNodeEditor editor=(MPSFileNodeEditor)selectedEditor;
        fireEditorOpened(editor);
      }
    }
  }
);
  myMessageBusConnection.subscribe(FileEditorManagerListener.Before.FILE_EDITOR_MANAGER,new Before(){
    public void beforeFileOpened(    FileEditorManager source,    VirtualFile file){
    }
    public void beforeFileClosed(    FileEditorManager source,    VirtualFile file){
      FileEditor selectedEditor=source.getSelectedEditor(file);
      if (selectedEditor instanceof MPSFileNodeEditor) {
        MPSFileNodeEditor editor=(MPSFileNodeEditor)selectedEditor;
        fireEditorClosed(editor);
      }
    }
  }
);
}
