{
  List<SNode> result=new ArrayList<SNode>();
  if (dir == null || !(dir.exists()) || !(dir.isDirectory())) {
    throw new IllegalArgumentException("Bad directory");
  }
  for (  IFile file : ListSequence.fromList(dir.getChildren())) {
    if (file.isDirectory() || !(file.getName().endsWith(".java"))) {
      continue;
    }
    String code=IFileUtils.getTextContents(file);
    List<SNode> oneFileRoots=parser.parse(code,"",FeatureKind.CLASS,true).getNodes();
    ListSequence.fromList(result).addSequence(ListSequence.fromList(oneFileRoots));
  }
  return result;
}
