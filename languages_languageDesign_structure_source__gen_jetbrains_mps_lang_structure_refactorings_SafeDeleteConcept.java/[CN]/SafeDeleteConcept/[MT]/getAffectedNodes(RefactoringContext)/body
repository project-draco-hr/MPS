{
  refactoringContext.setParameter("nodeAspects",AbstractConceptDeclaration_Behavior.call_findAllAspects_7754459869734028917(refactoringContext.getSelectedNode()));
  SearchResults searchResults=new SearchResults();
  searchResults.addAll(FindUtils.getSearchResults(new EmptyProgressMonitor(),refactoringContext.getSelectedNode(),GlobalScope.getInstance(),"jetbrains.mps.lang.structure.findUsages.ConceptInstances_Finder","jetbrains.mps.lang.structure.findUsages.NodeAndDescendantsUsages_Finder"));
  for (  SNode aspect : ListSequence.fromList((((List<SNode>)refactoringContext.getParameter("nodeAspects"))))) {
    searchResults.addAll(FindUtils.getSearchResults(new EmptyProgressMonitor(),aspect,GlobalScope.getInstance(),"jetbrains.mps.lang.structure.findUsages.NodeAndDescendantsUsages_Finder"));
  }
  List<SearchResult<SNode>> searchResultsList=(List<SearchResult<SNode>>)searchResults.getSearchResults();
  List<SearchResult<SNode>> searchResultsCopy=ListSequence.fromListWithValues(new ArrayList<SearchResult<SNode>>(),searchResultsList);
  for (  SearchResult<SNode> searchResult : searchResultsCopy) {
    SNode containingRoot=searchResult.getObject().getContainingRoot();
    if (ListSequence.fromList(((List<SNode>)refactoringContext.getParameter("nodeAspects"))).contains(containingRoot)) {
      searchResults.remove(searchResult);
    }
  }
  return searchResults;
}
