{
  try {
    String fileContents=FileUtil.read(file);
    String str="package ";
    int packageIndex=fileContents.indexOf(str) + str.length();
    int i=packageIndex;
    StringBuilder classFQName=new StringBuilder();
    while (i < fileContents.length()) {
      char c=fileContents.charAt(i);
      i++;
      if (Character.isWhitespace(c) || c == ';') {
        break;
      }
      classFQName.append(c);
    }
    String fileName;
    String nameAndExtension=file.getName();
    int offset=nameAndExtension.lastIndexOf('.');
    if (offset < 0) {
      fileName=nameAndExtension;
    }
 else {
      fileName=nameAndExtension.substring(0,offset);
    }
    classFQName.append(".");
    classFQName.append(fileName);
    addSource(classFQName.toString(),fileContents);
  }
 catch (  Throwable t) {
    LOG.error(t);
  }
}
