{
  if (!(myReloadSessionBroker.hasUnemployed())) {
    return;
  }
  myQueue.queue(new Update(myUpdateId){
    public void run(){
      for (      Project project : myProjectManager.getOpenProjects()) {
        if (project.getComponent(ProjectLevelVcsManager.class).isBackgroundVcsOperationRunning()) {
          queueReloadSession();
          return;
        }
      }
      final ReloadSession rs=myReloadSessionBroker.getUnemployed();
      if (rs == null) {
        queueReloadSession();
        return;
      }
      if (rs.isEmpty()) {
        return;
      }
      ProgressManager.getInstance().run(new Task.Modal(null,"Reloading",false){
        @Override public void run(        @NotNull final ProgressIndicator progressIndicator){
          rs.doReload(new ProgressMonitorAdapter(progressIndicator));
        }
      }
);
    }
  }
);
}
