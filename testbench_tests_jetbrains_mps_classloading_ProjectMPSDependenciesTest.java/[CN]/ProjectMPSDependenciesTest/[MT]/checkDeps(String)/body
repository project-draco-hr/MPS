{
  final ModulesWatcher modulesWatcher=getModulesWatcher();
  final SRepository repository=getRepository();
  repository.getModelAccess().runWriteAction(new Runnable(){
    @Override public void run(){
      Collection<SModuleReference> invalidModules=modulesWatcher.findInvalidModulesAndReport();
      for (      SModuleReference mRef : invalidModules) {
        final String msg=String.format("Invalid dependencies (%s) for module %s",levelIndicator,mRef.getModuleName());
        myErrors.addError(new AssertionError(msg));
      }
    }
  }
);
}
