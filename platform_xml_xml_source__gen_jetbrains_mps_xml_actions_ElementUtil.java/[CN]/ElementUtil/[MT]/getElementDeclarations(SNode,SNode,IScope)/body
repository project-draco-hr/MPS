{
  SNode schema=findSchema(node,scope);
  Set<SNode> elementDeclarationSet=SetSequence.fromSet(new HashSet<SNode>());
  if ((elementDeclaration == null)) {
    if ((schema != null) && SPropertyOperations.getBoolean(schema,"alwaysUseRoot")) {
      SetSequence.fromSet(elementDeclarationSet).addElement(SLinkOperations.getTarget(SLinkOperations.getTarget(schema,"rootElementReference",true),"elementDeclaration",false));
    }
 else {
      List<SNode> elementDeclarations=SModelOperations.getNodesIncludingImported(SNodeOperations.getModel(node),scope,"jetbrains.mps.xmlSchema.structure.ElementDeclaration");
      SetSequence.fromSet(elementDeclarationSet).addSequence(ListSequence.fromList(elementDeclarations));
    }
  }
 else {
    ElementDeclaration_Behavior.call_checkElements_ed_1213877429846(elementDeclaration,elementDeclarationSet);
  }
  List<SNode> elementDeclarations=ListOperations.<SNode>createList();
  ListSequence.fromList(elementDeclarations).addSequence(SetSequence.fromSet(elementDeclarationSet));
  return elementDeclarations;
}
