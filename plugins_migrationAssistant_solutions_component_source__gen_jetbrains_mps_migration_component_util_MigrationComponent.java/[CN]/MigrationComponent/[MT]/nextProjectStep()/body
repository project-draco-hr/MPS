{
  ProjectMigration current=next(lastProjectMigration);
  while (current != null && !(current.shouldBeExecuted(mpsProject))) {
    current=next(current);
  }
  if (current == null) {
    return new MigrationManager.Finished(){
    }
;
  }
  lastProjectMigration=current;
  final ProjectMigration cc=current;
  return new MigrationManager.Step(){
    public String getDescription(){
      return cc.getDescription();
    }
    public boolean execute(){
      try {
        cc.execute(mpsProject);
      }
 catch (      Throwable e) {
        if (LOG.isEnabledFor(Level.ERROR)) {
          LOG.error("Could not execute script",e);
        }
        return false;
      }
      return true;
    }
  }
;
}
