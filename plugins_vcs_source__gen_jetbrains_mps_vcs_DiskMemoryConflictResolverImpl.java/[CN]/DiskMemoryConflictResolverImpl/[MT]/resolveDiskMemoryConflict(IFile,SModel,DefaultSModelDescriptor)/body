{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      boolean needSave=ModelChangesWatcher.instance().executeUnderBlockedReload(new Computable<Boolean>(){
        public Boolean compute(){
          try {
            File backupFile=doBackup(file,model);
            if (file.exists()) {
              return showDiskMemoryQuestion(file,model,backupFile);
            }
 else {
              return showDeletedFromDiskQuestion(model,backupFile);
            }
          }
 catch (          IOException e) {
            if (log.isErrorEnabled()) {
              log.error("",e);
            }
            throw new RuntimeException(e);
          }
        }
      }
);
      if (needSave) {
        ModelAccess.instance().runWriteActionInCommand(new Runnable(){
          public void run(){
            modelDescriptor.updateDiskTimestamp();
            modelDescriptor.save();
          }
        }
);
      }
 else {
        ModelAccess.instance().runWriteAction(new Runnable(){
          public void run(){
            modelDescriptor.reloadFromDisk();
          }
        }
);
      }
    }
  }
);
}
