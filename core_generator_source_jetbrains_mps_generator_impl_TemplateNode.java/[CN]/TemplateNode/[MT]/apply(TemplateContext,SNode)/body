{
  final TemplateExecutionEnvironment env=context.getEnvironment();
  final TemplateGenerator generator=env.getGenerator();
  if (myMold == null) {
synchronized (this) {
      if (myMold == null) {
        myMold=new Mold(myNode,generator,generator.getLogger());
      }
    }
  }
  myMold.moldPropertyValues(outputNode);
  for (  PropertyMacro pm : myMold.myMacroProperties) {
    pm.expand(context,outputNode);
  }
  for (  ReferenceMacro rm : myMold.myMacroRefs) {
    rm.newPostponedReference(outputNode,context).registerWith(generator);
  }
  for (  RefInfo r : myMold.myStaticRefs) {
    SReference newReference=new StaticReference(r.role,outputNode,r.targetModel,r.targetId,r.resolveInfo);
    outputNode.setReference(r.role,newReference);
  }
  for (  RefInfo r : myMold.myInnerRefs) {
    ReferenceInfo_Template refInfo=new ReferenceInfo_Template(getTemplateNodeReference(),GeneratorUtil.getTemplateNodeId(r.targetNode),r.resolveInfo,context);
    new PostponedReference(r.role,outputNode,refInfo).registerWith(generator);
  }
  for (  RefInfo r : myMold.myOtherRefs) {
    outputNode.setReferenceTarget(r.role,r.targetNode);
  }
}
