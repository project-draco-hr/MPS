{
  Collection<SNode> newInputNodes=getNewInputNodes(templateContext);
  if (newInputNodes.isEmpty()) {
    return Collections.emptyList();
  }
  ArrayList<SNode> outputNodes=new ArrayList<SNode>();
  for (  SNode newInputNode : newInputNodes) {
    List<SNode> _outputNodes=nextMacro(templateContext.subContext(newInputNode));
    outputNodes.addAll(_outputNodes);
  }
  return outputNodes;
}
