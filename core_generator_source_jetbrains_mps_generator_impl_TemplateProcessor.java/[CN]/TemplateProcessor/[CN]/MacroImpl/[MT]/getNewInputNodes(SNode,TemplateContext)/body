{
  SNode nodesQuery=RuleUtil.getSourceNodesQuery(nodeMacro);
  if (nodesQuery != null) {
    return getQueryExecutor().getSourceNodes(nodeMacro,nodesQuery,context);
  }
  if (InputQueryUtil.doesMacroRequireInput(nodeMacro)) {
    getLogger().error(nodeMacro.getReference(),"couldn't get input nodes",GeneratorUtil.describeInput(context));
    throw new GenerationFailureException("couldn't get input nodes");
  }
  return InputQueryUtil.wrapAsList(context.getInput());
}
