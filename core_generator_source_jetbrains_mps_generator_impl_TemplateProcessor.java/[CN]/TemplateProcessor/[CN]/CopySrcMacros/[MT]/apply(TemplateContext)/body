{
  final Collection<SNode> newInputNodes;
  if (myIsSoleInput) {
    newInputNodes=InputQueryUtil.wrapAsList(getNewInputNode(templateContext));
  }
 else {
    newInputNodes=getNewInputNodes(templateContext);
  }
  SNodeReference templateNodeRef=templateNode.getTemplateNodeReference();
  String tempNodeId=templateNode.getTemplateNodeId();
  return templateContext.getEnvironment().copyNodes(newInputNodes,templateNodeRef,tempNodeId,templateContext);
}
