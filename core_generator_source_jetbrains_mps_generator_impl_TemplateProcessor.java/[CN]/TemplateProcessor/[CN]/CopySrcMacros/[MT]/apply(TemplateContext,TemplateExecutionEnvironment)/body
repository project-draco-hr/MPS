{
  final Collection<SNode> newInputNodes;
  if (myIsSoleInput) {
    newInputNodes=InputQueryUtil.wrapAsList(getNewInputNode(env.getQueryExecutor(),templateContext));
  }
 else {
    newInputNodes=getNewInputNodes(env.getQueryExecutor(),templateContext);
  }
  SNodeReference templateNodeRef=templateNode.getTemplateNodeReference();
  String tempNodeId=templateNode.getTemplateNodeId();
  return env.copyNodes(newInputNodes,templateNodeRef,tempNodeId,templateContext);
}
