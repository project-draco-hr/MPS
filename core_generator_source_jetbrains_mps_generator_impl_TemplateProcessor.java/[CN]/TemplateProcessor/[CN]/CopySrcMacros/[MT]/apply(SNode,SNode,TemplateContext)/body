{
  List<SNode> newInputNodes=getNewInputNodes(macro,templateContext);
  SNodeReference templateNodeRef=templateNode == null ? null : new jetbrains.mps.smodel.SNodePointer(templateNode);
  final Collection<SNode> _outputNodes=myTemplateProcessor.myEnv.copyNodes(newInputNodes,templateNodeRef,null,templateContext.getInputName(),templateContext);
  return new ArrayList<SNode>(_outputNodes);
}
