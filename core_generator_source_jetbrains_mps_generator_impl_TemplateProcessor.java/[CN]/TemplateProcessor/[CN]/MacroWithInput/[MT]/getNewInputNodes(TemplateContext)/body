{
  SourceNodesQuery q=mySourceNodesQuery;
  if (q == null) {
synchronized (this) {
      if ((q=mySourceNodesQuery) == null) {
        q=mySourceNodesQuery=createNodesQuery();
      }
    }
  }
  if (q == null) {
    getLogger().error(getMacroNodeRef(),"couldn't get input nodes",GeneratorUtil.describeInput(context));
    throw new GenerationFailureException("couldn't get input nodes");
  }
  final QueryExecutor qe=context.getEnvironment().getQueryExecutor();
  return qe.evaluate(q,new SourceSubstituteMacroNodesContext(context,getMacroNodeRef()));
}
