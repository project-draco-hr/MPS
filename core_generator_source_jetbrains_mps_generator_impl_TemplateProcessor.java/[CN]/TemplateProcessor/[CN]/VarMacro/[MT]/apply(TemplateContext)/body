{
  String varName=RuleUtil.getVarMacro_Name(macro);
  Object varValue=templateContext.getEnvironment().getQueryExecutor().evaluateVariableQuery(templateContext.getInput(),RuleUtil.getVarMacro_Query(macro),templateContext);
  TemplateContext newContext=templateContext.subContext(Collections.singletonMap(varName,varValue));
  return nextMacro(newContext.subContext(templateContext.getInputName()));
}
