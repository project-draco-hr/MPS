{
  String varName=RuleUtil.getVarMacro_Name(macro);
  Object varValue=getQueryExecutor().evaluateVariableQuery(templateContext.getInput(),RuleUtil.getVarMacro_Query(macro),templateContext);
  TemplateContext newContext=templateContext.subContext(Collections.singletonMap(varName,varValue));
  List<SNode> _outputNodes=myTemplateProcessor.applyTemplate(templateNode,newContext.subContext(mappingName),macro);
  return _outputNodes;
}
