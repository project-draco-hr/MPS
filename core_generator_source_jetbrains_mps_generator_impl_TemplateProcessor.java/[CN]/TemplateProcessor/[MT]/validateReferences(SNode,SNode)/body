{
  node.visitReferences(new ReferenceVisitor(){
    public boolean visitReference(    String role,    org.jetbrains.mps.openapi.model.SReference ref){
      SReference reference=(SReference)ref;
      if (myGenerator.getInputModel().getSModelReference().equals(reference.getTargetSModelReference())) {
        ReferenceInfo_CopiedInputNode refInfo=new ReferenceInfo_CopiedInputNode(reference.getRole(),reference.getSourceNode(),inputNode,reference.getTargetNode());
        PostponedReference postponedReference=new PostponedReference(refInfo,myGenerator);
        reference.getSourceNode().replaceReference(reference,postponedReference);
      }
      return true;
    }
  }
);
  for (  org.jetbrains.mps.openapi.model.SNode child : jetbrains.mps.util.SNodeOperations.getChildren(node)) {
    validateReferences(((SNode)child),inputNode);
  }
}
