{
  mySplittedEdges=MapSequence.<Edge,List<Edge>>fromMap(new HashMap<Edge,List<Edge>>());
  EmbeddedGraph embeddedGraph=new EmbeddedGraph(graph);
  List<Edge> removed=ListSequence.<Edge>fromList(new ArrayList<Edge>());
  Face outerFace=getOuterTreeFace(graph,removed);
  for (  Edge edge : ListSequence.<Edge>fromList(removed)) {
    graph.removeEdge(edge);
  }
  embeddedGraph.addFace(outerFace);
  embeddedGraph.setOuterFace(outerFace);
  for (  Edge removedEdge : ListSequence.<Edge>fromList(removed)) {
    this.restoreEdge(embeddedGraph,removedEdge);
    CheckEmbeddedGraph.checkEmbeddedGraph(embeddedGraph,false);
  }
  mergeEdges();
  return embeddedGraph;
}
