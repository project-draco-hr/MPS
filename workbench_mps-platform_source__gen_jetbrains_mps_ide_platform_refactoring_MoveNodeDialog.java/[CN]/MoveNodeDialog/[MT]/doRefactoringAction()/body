{
  final NodeLocation selectedObject=myChooser.getSelectedObject();
  if (!(selectedObject instanceof NodeLocation.NodeLocationChild)) {
    JOptionPane.showMessageDialog(myChooser.getComponent(),"Choose node","Node can't be moved",JOptionPane.INFORMATION_MESSAGE);
    return;
  }
  final Wrappers._boolean doRefactoring=new Wrappers._boolean(false);
  ProjectHelper.toMPSProject(getProject()).getModelAccess().runReadAction(new Runnable(){
    public void run(){
      SNode node=((NodeLocation.NodeLocationChild)selectedObject).getNode().resolve(ProjectHelper.toMPSProject(getProject()).getRepository());
      if (myNodeFilter == null || myNodeFilter.checkForObject(node,myNodeToMove,myNodeToMove.getModel(),myChooser.getComponent())) {
        mySelectedObject=node;
        doRefactoring.value=true;
      }
    }
  }
);
  if (doRefactoring.value) {
    super.doRefactoringAction();
  }
}
