{
  init();
  myRootManager.save(myProjectFile);
  try {
    if (!myWorkspaceFile.exists()) {
      myWorkspaceFile.createNewFile();
    }
    Element root=new Element(COMPONENTS);
    for (    Class cls : myComponents.keySet()) {
      Object component=myComponents.get(cls);
      if (component instanceof ExternalizableComponent) {
        Element componentElement=new Element(COMPONENT);
        componentElement.setAttribute(CLASS,cls.getName());
        ((ExternalizableComponent)component).write(componentElement);
        root.addContent(componentElement);
      }
    }
    Document document=new Document(root);
    JDOMUtil.writeDocument(document,myWorkspaceFile);
  }
 catch (  Exception e) {
    LOG.error(e);
  }
}
