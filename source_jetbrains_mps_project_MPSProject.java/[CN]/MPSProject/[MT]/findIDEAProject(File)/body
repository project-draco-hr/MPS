{
  for (  File file : directory.listFiles()) {
    if (file.isFile() && file.getName().endsWith(".ipr")) {
      return file;
    }
  }
  if (directory.getParent() != null) {
    return findIDEAProject(directory.getParentFile());
  }
  return null;
}
