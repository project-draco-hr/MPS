{
  if (directory.listFiles() != null)   return null;
  for (  File file : directory.listFiles()) {
    if (file.isFile() && file.getName().endsWith(".ipr")) {
      if (MPSPlugin.getInstance().getProjectHandler(file.getAbsolutePath()) != null) {
        return file;
      }
    }
  }
  if (directory.getParent() != null) {
    return findIDEAProject(directory.getParentFile());
  }
  return null;
}
