{
  final ClasspathStringCollector visitor=new ClasspathStringCollector();
  module.getClassPathItem().accept(visitor);
  if (withDependencies) {
    ModelAccess.instance().runReadAction(new Runnable(){
      public void run(){
        for (        IModule m : CollectionSequence.fromCollection(new GlobalModuleDependenciesManager(module).getModules(GlobalModuleDependenciesManager.Deptype.EXECUTE))) {
          m.getClassPathItem().accept(visitor);
        }
      }
    }
);
  }
  Set<String> visited=visitor.getClasspath();
  visited.removeAll(CommonPaths.getJDKPath());
  return ListSequence.fromListWithValues(new ArrayList<String>(),visited);
}
