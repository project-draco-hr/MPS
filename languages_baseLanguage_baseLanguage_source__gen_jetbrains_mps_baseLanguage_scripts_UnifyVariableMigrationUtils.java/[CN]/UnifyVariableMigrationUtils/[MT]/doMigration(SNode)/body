{
  SNode result=SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VariableReference",null);
  SLinkOperations.setTarget(result,"variableDeclaration",SLinkOperations.getTarget(node,"variableDeclaration",false),false);
  for (  SNode attribute : SLinkOperations.getTargets(node,"smodelAttribute",true)) {
    SNode copy=CopyUtil.copyAndPreserveId(attribute);
    ListSequence.fromList(SNodeOperations.getChildren(result,SLinkOperations.findLinkDeclaration("jetbrains.mps.lang.core.structure.BaseConcept","smodelAttribute"))).addElement(copy);
  }
  result.setId(node.getSNodeId());
  SNodeOperations.replaceWithAnother(node,result);
}
