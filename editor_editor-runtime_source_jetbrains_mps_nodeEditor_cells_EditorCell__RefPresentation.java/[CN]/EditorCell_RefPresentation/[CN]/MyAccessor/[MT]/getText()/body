{
  if (myRefNode != null) {
    SReference ref=myRefNode.getReference(SModelUtil.getLinkDeclarationRole(myLinkDeclaration));
    if (ref == null) {
      return myNode.getPresentation();
    }
    IReferencePresentation presentation=ModelConstraintsUtil.getReferenceDescriptor(ref,myContext.getOperationContext()).getReferencePresentation();
    if (presentation == null) {
      return myNode.getPresentation();
    }
    return presentation.getText(myNode,true,false,true);
  }
  if (myContextCell == null || myContextCell.getParent() == null)   return null;
  EditorCell refNodeCell=findCellWithLinkDeclaration();
  SNode referenceTarget=refNodeCell.getSNodeWRTReference();
  SNode node=refNodeCell.getSNode();
  SReference ref=node.getReference(SModelUtil.getGenuineLinkRole(refNodeCell.getLinkDeclaration()));
  if (ref == null) {
    return referenceTarget.getPresentation();
  }
  IReferencePresentation presentation=ModelConstraintsUtil.getReferenceDescriptor(ref,myContext.getOperationContext()).getReferencePresentation();
  if (presentation == null) {
    return referenceTarget.getPresentation();
  }
  return presentation.getText(referenceTarget,true,false,true);
}
