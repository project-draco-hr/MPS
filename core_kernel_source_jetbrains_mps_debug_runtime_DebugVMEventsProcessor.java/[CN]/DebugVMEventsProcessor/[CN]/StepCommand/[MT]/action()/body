{
  SuspendContext suspendContext=getSuspendContext();
  ThreadReference stepThread=suspendContext.getThread();
  if (stepThread == null) {
    return;
  }
  LOG.debug("DO_STEP: creating step request for " + stepThread);
  EventRequestManager requestManager=getVirtualMachine().eventRequestManager();
  deleteStepRequests(requestManager);
  StepRequest stepRequest=requestManager.createStepRequest(stepThread,StepRequest.STEP_LINE,getStepType());
  stepRequest.setSuspendPolicy(suspendContext.getSuspendPolicy() == EventRequest.SUSPEND_EVENT_THREAD ? EventRequest.SUSPEND_EVENT_THREAD : EventRequest.SUSPEND_ALL);
  stepRequest.enable();
  super.action();
}
