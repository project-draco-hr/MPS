{
  preprocessEvent(suspendContext,event.thread());
  myRequestManager.deleteStepRequests();
  boolean shouldResume=false;
  EventRequest request=event.request();
  if (request instanceof StepRequest) {
    StepRequest stepRequest=(StepRequest)request;
    StepRequestor requestor=(StepRequestor)myRequestManager.findRequestor(stepRequest);
    int nextStepType=requestor.nextStep(suspendContext);
    shouldResume=nextStepType != StepRequestor.STOP;
    if (shouldResume) {
      addNewStepRequest(suspendContext,suspendContext.getThread(),requestor,nextStepType);
    }
  }
  if (shouldResume) {
    getSuspendManager().voteResume(suspendContext);
  }
 else {
    getSuspendManager().voteSuspend(suspendContext);
  }
}
