{
  DualGraph dualGraph=new DualGraph(embeddedGraph);
  List<Node> newNodes=ListSequence.fromList(new ArrayList<Node>());
  for (  Node node : ListSequence.fromList(removedEdge.getAdjacentNodes())) {
    ListSequence.fromList(newNodes).addElement(dualGraph.addRealNode(node));
  }
  List<Edge> path=ShortestPath.getPath(dualGraph,ListSequence.fromList(newNodes).getElement(0),ListSequence.fromList(newNodes).getElement(1),Edge.Direction.BOTH);
  List<Node> nodePath=ListSequence.fromList(new ArrayList<Node>());
  List<Face> facePath=ListSequence.fromList(new ArrayList<Face>());
  ListSequence.fromList(nodePath).addElement(ListSequence.fromList(removedEdge.getAdjacentNodes()).getElement(0));
  Node cur=ListSequence.fromList(newNodes).getElement(0);
  for (  Edge edge : ListSequence.fromList(path)) {
    Edge realEdge=MapSequence.fromMap(dualGraph.getEdgesMap()).get(edge);
    if (embeddedGraph.getAdjacentFaces(realEdge) != null) {
      ListSequence.fromList(nodePath).addElement(embeddedGraph.splitEdge(MapSequence.fromMap(dualGraph.getEdgesMap()).get(edge)));
    }
    cur=edge.getOpposite(cur);
    Face curFace=MapSequence.fromMap(dualGraph.getFacesMap()).get(cur);
    if (curFace != null) {
      ListSequence.fromList(facePath).addElement(curFace);
    }
  }
  List<Edge> newEdges=ListSequence.fromList(new ArrayList<Edge>(ListSequence.fromList(nodePath).count() - 1));
  ListSequence.fromList(nodePath).addElement(ListSequence.fromList(removedEdge.getAdjacentNodes()).getElement(1));
  if (SHOW_LOG > 0) {
    System.out.println("path: ");
    System.out.println(nodePath);
  }
  for (int i=0; i < ListSequence.fromList(nodePath).count() - 1; i++) {
    Node start=ListSequence.fromList(nodePath).getElement(i);
    Node end=ListSequence.fromList(nodePath).getElement(i + 1);
    Edge newEdge=embeddedGraph.getGraph().connect(start,end);
    ListSequence.fromList(newEdges).addElement(newEdge);
    List<Edge> tempPath=ListSequence.fromListAndArray(new ArrayList<Edge>(),newEdge);
    embeddedGraph.splitFace(ListSequence.fromList(facePath).getElement(i),tempPath,start,end);
  }
  GraphModificationEvent splitEvent=new GraphModificationEvent(GraphModificationEvent.Type.EDGE_SPLITTED,removedEdge,newEdges);
  embeddedGraph.getGraph().getModificationProcessor().fire(splitEvent);
  return newEdges;
}
