{
  myIndex=new HashMap<ReferencedNodeContext,List<UpdateInfoNode>>();
  Queue<UpdateInfoNode> nodesToProcess=new LinkedList<UpdateInfoNode>();
  nodesToProcess.add(node);
  while (!nodesToProcess.isEmpty()) {
    UpdateInfoNode nextNode=nodesToProcess.remove();
    List<UpdateInfoNode> nodesInContext=myIndex.get(nextNode.getContext());
    if (nodesInContext == null) {
      nodesInContext=new LinkedList<UpdateInfoNode>();
      myIndex.put(nextNode.getContext(),nodesInContext);
    }
    nodesInContext.add(nextNode);
    nodesToProcess.addAll(nextNode.getChildren());
  }
}
