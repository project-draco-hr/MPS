{
  this.myInnerFields=MapSequence.fromMap(new LinkedHashMap<SNode,SNode>(16,(float)0.75,false));
  for (  SNode varReference : ListSequence.fromList(SNodeOperations.getDescendants(this.myClassToRefactor,"jetbrains.mps.baseLanguage.structure.LocalVariableReference",false,new String[]{})).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return !(ListSequence.fromList(SNodeOperations.getAncestors(SLinkOperations.getTarget(it,"variableDeclaration",false),null,false)).contains(ConvertAnonymousRefactoring.this.myClassToRefactor));
    }
  }
)) {
    SNode varDeclaration=SLinkOperations.getTarget(varReference,"variableDeclaration",false);
    if (!(MapSequence.fromMap(this.myInnerFields).containsKey(varDeclaration))) {
      MapSequence.fromMap(this.myInnerFields).put(varDeclaration,this.makeField(varDeclaration));
    }
  }
}
