{
  if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.build.structure.BuildLayout_Folder")) {
    return getBSName(SLinkOperations.getTarget(SNodeOperations.cast(node,"jetbrains.mps.build.structure.BuildLayout_Folder"),"containerName",true));
  }
 else   if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.build.structure.BuildLayout_Copy") && isLast) {
    SNode fileset=SLinkOperations.getTarget(SNodeOperations.cast(node,"jetbrains.mps.build.structure.BuildLayout_Copy"),"fileset",true);
    if (SNodeOperations.isInstanceOf(fileset,"jetbrains.mps.build.structure.BuildInputSingleFile")) {
      return BehaviorReflection.invokeVirtual(String.class,SLinkOperations.getTarget(SNodeOperations.cast(fileset,"jetbrains.mps.build.structure.BuildInputSingleFile"),"path",true),"virtual_getLastSegment_1368030936106771141",new Object[]{null});
    }
 else {
      throw new ArtifactsRelativePathHelper.RelativePathException("cannot build relative path for copy, fileset is " + SPropertyOperations.getString(SNodeOperations.getConceptDeclaration(node),"name"));
    }
  }
 else   if (SNodeOperations.isInstanceOf(node,"jetbrains.mps.build.structure.BuildLayout_File") && isLast) {
    return BehaviorReflection.invokeVirtual(String.class,SLinkOperations.getTarget(SNodeOperations.cast(node,"jetbrains.mps.build.structure.BuildLayout_File"),"path",true),"virtual_getLastSegment_1368030936106771141",new Object[]{null});
  }
  throw new ArtifactsRelativePathHelper.RelativePathException("cannot build relative path for " + SPropertyOperations.getString(SNodeOperations.getConceptDeclaration(node),"name"));
}
