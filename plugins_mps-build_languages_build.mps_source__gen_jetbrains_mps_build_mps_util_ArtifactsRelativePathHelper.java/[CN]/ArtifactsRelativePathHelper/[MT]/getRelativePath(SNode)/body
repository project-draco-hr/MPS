{
  Stack<SNode> names=new Stack<SNode>();
  names.push(node);
  SNode parent=artifacts.parent(node);
  while (parent != null) {
    if (MapSequence.fromMap(prefixes).containsKey(parent)) {
      break;
    }
    names.push(parent);
    parent=artifacts.parent(parent);
  }
  if (parent == null) {
    throw new ArtifactsRelativePathHelper.RelativePathException("no common folder");
  }
  StringBuilder result=new StringBuilder(MapSequence.fromMap(prefixes).get(parent));
  while (!(names.isEmpty())) {
    SNode elem=names.pop();
    boolean lastElement=names.isEmpty();
    if (SNodeOperations.isInstanceOf(elem,MetaAdapterFactory.getConcept(new UUID(8755280088213897754l,-5075149991798053422l),2913098736709313156l,"jetbrains.mps.build.structure.BuildLayout_TransparentContainer"))) {
      continue;
    }
    result.append(getNodeName(elem,lastElement));
    if (!(lastElement)) {
      result.append("/");
    }
  }
  return result.toString();
}
