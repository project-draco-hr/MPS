{
  Collection<U> tmp=coll;
  if (USE_NULL_SEQUENCE) {
    if (coll == null && it == null) {
      return NullCollectionSequence.instance();
    }
 else     if (coll == null) {
      tmp=new ArrayList<U>();
    }
 else     if (it == null) {
      return CollectionSequence.fromCollection(coll);
    }
  }
  if (IGNORE_NULL_VALUES) {
    for (    U u : it) {
      if (u != null) {
        tmp.add(u);
      }
    }
  }
 else   if (it instanceof Collection<?>) {
    tmp.addAll((Collection<? extends U>)it);
  }
 else {
    for (    U u : it) {
      tmp.add(u);
    }
  }
  if (tmp instanceof ICollectionSequence<?>) {
    return (ICollectionSequence<U>)tmp;
  }
  final Collection<U> myColl=tmp;
  return new CollectionSequence<U>(){
    @Override protected Collection<U> getCollection(){
      return myColl;
    }
  }
;
}
