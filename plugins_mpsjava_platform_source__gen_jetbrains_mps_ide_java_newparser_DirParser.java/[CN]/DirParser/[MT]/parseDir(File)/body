{
  List<SNode> result=new ArrayList<SNode>();
  JavaParser parser=new JavaParser();
  if (dir == null || !(dir.exists()) || !(dir.isDirectory())) {
    throw new IllegalArgumentException("Bad directory");
  }
  for (  File file : dir.listFiles()) {
    if (!(file.isDirectory()) && file.getName().endsWith(".java")) {
      String code=FileUtil.read(file);
      List<SNode> oneFileRoots=parser.parse(code,"",FeatureKind.CLASS,true).getNodes();
      ListSequence.fromList(result).addSequence(ListSequence.fromList(oneFileRoots));
    }
  }
  parser.tryResolveRoots(result);
  return result;
}
