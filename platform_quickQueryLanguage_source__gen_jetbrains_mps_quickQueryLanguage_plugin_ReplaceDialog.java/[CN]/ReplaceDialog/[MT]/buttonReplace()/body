{
  GenerateResult result=this.myEditor.generate();
  final QueryExecutor executor=new QueryExecutor(result);
  final IScope scope=this.myScope.getOptions().getScope(this.myContext,result.getModelDescriptor());
  ProgressManager.getInstance().run(new Task.Modal(ReplaceDialog.this.myContext.getProject(),"Executing query",false){
    public void run(    @NotNull() ProgressIndicator indicator){
      executor.run(indicator,scope);
    }
  }
);
  final Query query=executor.getQuery();
  final List<SNode> replaceNodes=executor.getSearchResult();
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      for (      SNode node : replaceNodes) {
        query.doReplace(node);
      }
    }
  }
);
}
