{
  try {
    final GenerateResult result=this.myEditor.generate();
    String fqName=result.getModelDescriptor().getLongName() + "." + QueryConstants.GENERATED_QUERY_NAME;
    ClassLoader loader=result.getLoader(ReplacementExecutor.class.getClassLoader());
    Query query=(Query)Class.forName(fqName,true,loader).newInstance();
    final ReplacementExecutor executor=new ReplacementExecutor(this.myContext,query);
    final IScope scope=this.myScope.getOptions().getScope(this.myContext,result.getModelDescriptor());
    ProgressManager.getInstance().run(new Task.Modal(ReplaceDialog.this.myContext.getProject(),"Executing query",false){
      public void run(      @NotNull() ProgressIndicator indicator){
        ModelAccess.instance().runReadAction(new Runnable(){
          public void run(){
            executor.setSNode(result.getSNode());
          }
        }
);
        executor.execute(indicator,scope);
      }
    }
);
    executor.showResults();
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
