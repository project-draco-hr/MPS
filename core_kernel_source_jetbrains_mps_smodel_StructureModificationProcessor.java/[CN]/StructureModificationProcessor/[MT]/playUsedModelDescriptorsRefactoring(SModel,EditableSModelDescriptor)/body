{
  int currentVersion=usedModelDescriptor.getVersion();
  int usedVersion=model.getUsedVersion(usedModelDescriptor.getSModelReference());
  if (currentVersion > usedVersion) {
    boolean played=false;
    RefactoringHistory refactoringHistory=usedModelDescriptor.getRefactoringHistory();
    for (    StructureModificationData data : refactoringHistory.getDataList()) {
      if (data.getModelVersion() <= usedVersion)       continue;
      if (playRefactoring(model,data)) {
        played=true;
      }
    }
    model.updateImportedModelUsedVersion(usedModelDescriptor.getSModelReference(),currentVersion);
    return played;
  }
  if (currentVersion < usedVersion) {
    LOG.error("Model version mismatch for import " + usedModelDescriptor.getSModelReference().getSModelFqName() + " in model "+ model.getSModelFqName());
    LOG.error("Used version = " + usedVersion + ", current version = "+ currentVersion);
    model.updateImportedModelUsedVersion(usedModelDescriptor.getSModelReference(),currentVersion);
    LOG.error("Mismatch fixed");
    return true;
  }
  return false;
}
