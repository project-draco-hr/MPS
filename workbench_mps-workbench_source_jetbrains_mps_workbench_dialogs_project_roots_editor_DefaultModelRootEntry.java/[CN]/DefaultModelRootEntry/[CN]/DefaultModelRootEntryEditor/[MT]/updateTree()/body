{
  FileSystemTreeImpl fileSystemTree=new FileSystemTreeImpl(null,myEntry.getType() == PersistenceRegistry.DEFAULT_MODEL_ROOT ? FileChooserDescriptorFactory.createSingleFolderDescriptor() : FileChooserDescriptorFactory.createSingleFileDescriptor(FileTypeManager.getInstance().getFileTypeByExtension("jar")));
  AbstractTreeUi ui=fileSystemTree.getTreeBuilder().getUi();
  VirtualFile virtualFile=VirtualFileManager.getInstance().findFileByUrl(VirtualFileManager.constructUrl("file",myEntry.getMemento().getPath("path")));
  if (virtualFile == null || myEntry.getMemento().getPath("path").equals(""))   virtualFile=VirtualFileManager.getInstance().findFileByUrl(VirtualFileManager.constructUrl("file",MPSModuleRepository.getInstance().getModuleById(myModuleDescriptor.getModuleReference().getModuleId()).getBundleHome().getPath()));
  if (virtualFile != null)   fileSystemTree.select(virtualFile,null);
  fileSystemTree.addListener(new Listener(){
    @Override public void selectionChanged(    List<VirtualFile> selection){
      if (selection.size() > 0) {
        DefaultModelRootEntry.this.myEntry.getMemento().putPath("path",selection.get(0).getPath());
        DefaultModelRootEntry.this.reset();
      }
    }
  }
,new Disposable(){
    @Override public void dispose(){
    }
  }
);
  myTreePanel.removeAll();
  myTreePanel.add(ui.getTree(),BorderLayout.CENTER);
  ui.scrollSelectionToVisible(null,true);
}
