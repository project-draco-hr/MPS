{
  Element element=new Element(DebugInfo.DEBUG_INFO);
  if (myRoots != null) {
    Iterable<SNodeReference> sorted=SetSequence.fromSet(MapSequence.fromMap(myRoots).keySet()).sort(new ISelector<SNodeReference,String>(){
      public String select(      SNodeReference it){
        return jetbrains.mps.smodel.SNodePointer.serialize(((SNodeReference)it));
      }
    }
,true);
    for (    SNodeReference id : sorted) {
      DebugInfoRoot dir=MapSequence.fromMap(myRoots).get(id);
      if (id == null) {
        dir.toXml(element);
      }
 else {
        Element e=new Element(DebugInfo.ROOT);
        e.setAttribute(DebugInfo.NODE_REF_ATTR,jetbrains.mps.smodel.SNodePointer.serialize(((SNodeReference)id)));
        dir.toXml(e);
        element.addContent(e);
      }
    }
  }
  return element;
}
