{
  SNode linkDeclaration=null;
  if (childSetter instanceof DefaultChildNodeSetter) {
    linkDeclaration=((DefaultChildNodeSetter)childSetter).getLinkDeclaration();
  }
  SearchScopeStatus status=ModelConstraintsUtil.getSearchScope(parentNode,null,referenceNodeConcept,smartReference,linkDeclaration,context);
  if (status.isError())   return null;
  List<INodeSubstituteAction> actions=new ArrayList<INodeSubstituteAction>();
  final SNode referenceLink_final=smartReference;
  ISearchScope searchScope=status.getSearchScope();
  IReferencePresentation presentation=status.getPresentation();
  final SNode targetConcept=SModelUtil.getLinkDeclarationTarget(smartReference);
  List<SNode> referentNodes=searchScope.getNodes(new IsInstanceCondition(targetConcept));
  for (  SNode referentNode : referentNodes) {
    actions.add(new SmartRefChildNodeSubstituteAction(referentNode,parentNode,currentChild,childSetter,context.getScope(),referenceNodeConcept,referenceLink_final,presentation));
  }
  return actions;
}
