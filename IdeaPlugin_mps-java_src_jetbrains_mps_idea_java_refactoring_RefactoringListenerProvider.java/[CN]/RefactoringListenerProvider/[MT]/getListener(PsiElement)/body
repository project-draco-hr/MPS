{
  final NodePtr oldNode=JavaForeignIdBuilder.computeNodePtr(element);
  if (oldNode == null) {
    return null;
  }
  return new RefactoringElementListener(){
    @Override public void elementMoved(    @NotNull PsiElement newElement){
      handleMoveOrRename(newElement);
    }
    @Override public void elementRenamed(    @NotNull PsiElement newElement){
      handleMoveOrRename(newElement);
    }
    private void handleMoveOrRename(    @NotNull final PsiElement newElement){
      NodePtr newNode=JavaForeignIdBuilder.computeNodePtr(newElement);
      newElement.getProject().getComponent(MoveRenameBatch.class).recordMoveRename(oldNode,newNode);
    }
  }
;
}
