{
  List<CachedModelData> result=new ArrayList<CachedModelData>();
  for (  SModel model : root.getModels()) {
    String modelPath=((FileDataSource)model.getSource()).getFile().getPath();
    Object header=null;
    CachedModelData.Kind cacheKind=CachedModelData.Kind.Unknown;
    if (model instanceof PersistenceVersionAware) {
      ModelFactory mf=((PersistenceVersionAware)model).getModelFactory();
      String persistenceIdentifier=mf == null ? null : mf.getFileExtension();
      if (MPSExtentions.MODEL.equals(persistenceIdentifier)) {
        cacheKind=CachedModelData.Kind.Regular;
      }
 else       if (MPSExtentions.MODEL_BINARY.equals(persistenceIdentifier)) {
        cacheKind=CachedModelData.Kind.Binary;
      }
    }
    if (model instanceof DefaultSModelDescriptor) {
      header=((DefaultSModelDescriptor)model).getHeaderCopy();
    }
    result.add(new CachedModelData(modelPath,header,cacheKind));
  }
  return result;
}
