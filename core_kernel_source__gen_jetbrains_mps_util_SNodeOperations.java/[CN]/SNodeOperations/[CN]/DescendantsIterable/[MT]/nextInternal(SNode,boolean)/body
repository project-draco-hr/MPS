{
  if (curr == null) {
    return null;
  }
  if (!(skipChildren)) {
    Iterator<? extends SNode> iterator=curr.getChildren().iterator();
    if (iterator.hasNext()) {
      return iterator.next();
    }
  }
  if (curr == original) {
    return null;
  }
  SNode parent;
  do {
    parent=curr.getParent();
    if (parent.getNextChild(curr) != null) {
      return parent.getNextChild(curr);
    }
    curr=parent;
  }
 while (curr != original);
  return null;
}
