{
  final DropBox<String> box=new DropBox<String>();
  Thread thread=new Thread(new Runnable(){
    public void run(){
      try {
        while (true) {
          System.out.println("Received: " + box.retrieve());
        }
      }
 catch (      InterruptedException e) {
        System.out.println("Interrupted");
      }
    }
  }
);
  thread.start();
  final List<String> names=ListSequence.fromListAndArray(new ArrayList<String>(),"Joe","Dave","Alice");
{
    final CountDownLatch latch=new CountDownLatch(ListSequence.fromList(names).count());
    final List<Exception> exceptions=new CopyOnWriteArrayList<Exception>();
    for (    final String name : Collections.unmodifiableList(ListSequence.fromListWithValues(new ArrayList<String>(),names))) {
      final String localA=name;
      Runnable runnable=new Runnable(){
        public void run(){
          try {
            try {
              box.store(localA);
            }
 catch (            InterruptedException e) {
              throw new RuntimeException(e);
            }
          }
 catch (          RuntimeException e) {
            ListSequence.fromList(exceptions).addElement(e);
          }
 finally {
            latch.countDown();
          }
        }
      }
;
      new Thread(runnable).start();
    }
    try {
      latch.await();
    }
 catch (    InterruptedException e) {
      ListSequence.fromList(exceptions).addElement(e);
    }
    if (ListSequence.fromList(exceptions).isNotEmpty()) {
      throw new ParallelLoopException("Some parallel calculations failed",exceptions);
    }
  }
  thread.interrupt();
}
