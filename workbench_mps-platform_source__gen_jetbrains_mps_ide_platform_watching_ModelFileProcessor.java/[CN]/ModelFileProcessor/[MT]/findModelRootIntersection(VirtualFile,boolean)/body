{
  List<SModule> res=ListSequence.fromList(new ArrayList<SModule>());
  String path=file.getPath();
  Iterable<IModule> modules=MPSModuleRepository.getInstance().getAllModules();
  for (  IModule module : Sequence.fromIterable(modules)) {
    for (    SModelRoot smr : CollectionSequence.fromCollection(module.getSModelRoots())) {
      if (!(intersects(path,smr.getPath()))) {
        continue;
      }
      ListSequence.fromList(res).addElement(module);
      if (onlyFirst) {
        return res;
      }
 else {
        break;
      }
    }
  }
  return res;
}
