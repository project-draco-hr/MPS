{
  Iterator<? extends SNode> aRoots=a.getRootNodes().iterator();
  Iterator<? extends SNode> bRoots=b.getRootNodes().iterator();
  while (aRoots.hasNext() || bRoots.hasNext()) {
    if (!aRoots.hasNext() || !bRoots.hasNext()) {
      return false;
    }
    if (!nodesEquals(aRoots.next(),bRoots.next())) {
      return false;
    }
  }
  return true;
}
