{
synchronized (myBreakpoints) {
    for (    FutureBreakpoint futureBreakpoint : new HashSet<FutureBreakpoint>(myFutureBreakpoints)) {
      AbstractMPSBreakpoint breakpoint=futureBreakpoint.createBreakpoint(myProject);
      if (breakpoint != null) {
        SNodePointer rootPointer=futureBreakpoint.getRootPointer();
        Set<AbstractMPSBreakpoint> mpsBreakpointSet=myRootsToBreakpointsMap.get(rootPointer);
        if (mpsBreakpointSet == null) {
          mpsBreakpointSet=new HashSet<AbstractMPSBreakpoint>();
          myRootsToBreakpointsMap.put(rootPointer,mpsBreakpointSet);
        }
        mpsBreakpointSet.add(breakpoint);
        myBreakpoints.add(breakpoint);
        myFutureBreakpoints.remove(futureBreakpoint);
      }
    }
  }
}
