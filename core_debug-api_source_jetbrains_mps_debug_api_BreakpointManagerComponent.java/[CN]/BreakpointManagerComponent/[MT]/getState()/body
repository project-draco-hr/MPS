{
synchronized (myBreakpoints) {
    Element rootElement=new Element(BREAKPOINTS_LIST_ELEMENT);
    for (    IBreakpoint breakpoint : myBreakpoints) {
      IBreakpointKind kind=breakpoint.getKind();
      ILanguageBreakpointsProvider provider=BreakpointProvidersManager.getInstance().getProvider(kind);
      if (provider == null) {
        continue;
      }
      Element element=provider.saveToState(breakpoint);
      if (element != null) {
        Element breakpointElement=new Element(BREAKPOINT_ELEMENT);
        breakpointElement.setAttribute(new Attribute(KIND_TAG,kind.getName()));
        breakpointElement.addContent(element);
        rootElement.addContent(breakpointElement);
      }
    }
    return rootElement;
  }
}
