{
synchronized (myBreakpoints) {
    List<BreakpointState> states=new ArrayList<BreakpointState>();
    for (    IBreakpoint breakpoint : myBreakpoints) {
      ILanguageBreakpointsProvider provider=BreakpointProvidersManager.getInstance().getProvider(breakpoint.getKind());
      if (provider == null) {
        continue;
      }
      BreakpointState state=provider.saveToState(breakpoint);
      if (state != null) {
        states.add(state);
      }
    }
    MyState state=new MyState();
    state.myBreakpointStates=new BreakpointState[states.size()];
    int i=0;
    for (    BreakpointState s : states) {
      state.myBreakpointStates[i]=s;
      i++;
    }
    return state;
  }
}
