{
  myProject.getModelAccess().runWriteInEDT(new Runnable(){
    @Override public void run(){
      if (treeNode.getUserObject() == null) {
        return;
      }
      BaseNodeData data=treeNode.getUserObject().getData();
      if (data instanceof NodeNodeData) {
        SNode node=((NodeNodeData)data).getNode();
        if (node != null) {
          if (inProjectIfPossible) {
            NavigationSupport.getInstance().selectInTree(myProject,node,focus);
          }
 else {
            NavigationSupport.getInstance().openNode(myProject,node,focus,!(node.getModel() != null && node.getParent() == null));
          }
        }
 else {
          LOG.info("clicked node was deleted");
        }
      }
 else       if (data instanceof ModelNodeData) {
        SModel model=((ModelNodeData)data).getModel();
        if (model != null) {
          NavigationSupport.getInstance().selectInTree(myProject,model,focus);
        }
      }
 else       if (data instanceof ModuleNodeData) {
        SModule module=((ModuleNodeData)data).getModule();
        if (module != null) {
          NavigationSupport.getInstance().selectInTree(myProject,module,focus);
        }
      }
    }
  }
);
}
