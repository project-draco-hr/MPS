{
  TextBufferImpl tb=new TextBufferImpl();
  tb.area().append("ABC");
  tb.pushMark();
  tb.area().append("DEF");
  tb.pushMark();
  tb.area().newLine();
  tb.area().append("GHI").newLine();
  final TextMark innerMark=tb.popMark();
  tb.area().append("JKL");
  final TextMark outerMark=tb.popMark();
  BufferSnapshot t=tb.snapshot(tb.newLayout());
  final String expectedInner=myLineSep + "GHI" + myLineSep;
  check(t,innerMark,expectedInner,0,6,2,0);
  String expectedOuter="DEF" + expectedInner + "JKL";
  check(t,outerMark,expectedOuter,0,3,2,3);
}
