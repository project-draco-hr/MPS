{
  ModelCheckerViewer viewer=ModelCheckerTool_Tool.this.checkModels(modelDescriptors,operationContext,false);
  SearchResults<ModelCheckerIssue> issues=viewer.getSearchResults();
  int warnings=ModelCheckerUtils.getIssueCountForSeverity(issues,ModelChecker.SEVERITY_WARNING);
  int errors=ModelCheckerUtils.getIssueCountForSeverity(issues,ModelChecker.SEVERITY_ERROR);
  if (errors != 0) {
    String dialogMessage="Model checker found " + errors + " errors and "+ warnings+ " warnings. Would you like to review them?";
    int dialogAnswer=Messages.showDialog(ProjectHelper.toIdeaProject(operationContext.getProject()),dialogMessage,"Model Checking",new String[]{"Review","Commit","Cancel"},0,null);
    if (dialogAnswer == 0) {
      ModelCheckerTool_Tool.this.showTabWithResults(viewer);
      return CheckinHandler.ReturnResult.CLOSE_WINDOW;
    }
 else     if (dialogAnswer == 1) {
      return CheckinHandler.ReturnResult.COMMIT;
    }
 else     if (dialogAnswer == 2 || dialogAnswer == -1) {
      return CheckinHandler.ReturnResult.CANCEL;
    }
  }
  return CheckinHandler.ReturnResult.COMMIT;
}
