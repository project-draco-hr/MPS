{
  super(ProjectHelper.toIdeaProject(context.getProject()));
  this.setTitle("Find Instances by condition");
  this.myContext=context;
  this.myModelAccess=context.getProject().getRepository().getModelAccess();
  this.setModal(false);
  this.setOKButtonText("&Find");
  this.setCancelButtonText("&Cancel");
  myProject=context.getProject();
  myModelAccess.executeCommand(new Runnable(){
    public void run(){
      myTempModel=TemporaryModels.getInstance().create(false,TempModuleOptions.forDefaultModuleWithSourceAndClassesGen());
      myNode=_quotation_createNode_vfh0rq_a0b0a0a9a11((concept == null ? SNodeOperations.getNode("r:00000000-0000-4000-0000-011c89590288(jetbrains.mps.lang.core.structure)","1133920641626") : concept));
      myTempModel.addRootNode(myNode);
      ((SModelInternal)myTempModel).addDevKit(MPSModuleRepository.getInstance().getModuleById(ModuleId.fromString("fbc25dd2-5da4-483a-8b19-70928e1b62d7")).getModuleReference());
      Set<Language> languagesForImport=SetSequence.fromSet(new HashSet<Language>());
      SetSequence.fromSet(languagesForImport).addElement(BootstrapLanguages.collectionsLanguage());
      SetSequence.fromSet(languagesForImport).addElement((Language)module);
      SetSequence.fromSet(languagesForImport).addElement((Language)MPSModuleRepository.getInstance().getModuleById(ModuleId.fromString("d745e97c-8235-4470-b086-ba3da1f4c03c")));
      for (      Language language : SetSequence.fromSet(languagesForImport)) {
        ((AbstractModule)myTempModel.getModule()).addDependency(language.getModuleReference(),false);
        ((AbstractModule)myTempModel.getModule()).addUsedLanguage(language.getModuleReference());
        ((SModelInternal)myTempModel).addLanguage(language.getModuleReference());
      }
      TemporaryModels.getInstance().addMissingModuleImports(myTempModel);
      myEditor=new SimpleEmbeddableEditor(myProject,true);
      myEditor.editNode(myNode);
    }
  }
);
  this.myPanel.add(this.myEditor,BorderLayout.CENTER);
  myModelAccess.runReadAction(new Runnable(){
    public void run(){
      FindInstancesDialog.this.myScope=new ScopeEditor(new ScopeOptions());
      FindInstancesDialog.this.myPanel.add(FindInstancesDialog.this.myScope.getComponent(),BorderLayout.SOUTH);
    }
  }
);
  myPanel.setPreferredSize(new Dimension(500,500));
  init();
}
