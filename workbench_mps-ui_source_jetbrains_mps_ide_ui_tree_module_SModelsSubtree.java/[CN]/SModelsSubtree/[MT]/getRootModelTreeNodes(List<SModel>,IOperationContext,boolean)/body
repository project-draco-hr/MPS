{
  List<SModelTreeNode> result=new ArrayList<SModelTreeNode>();
  List<SModel> sortedModels=SortUtil.sortModels(models);
  if (!sortedModels.isEmpty()) {
    int rootIndex=0;
    while (rootIndex < sortedModels.size()) {
      SModel rootModelDescriptor=sortedModels.get(rootIndex);
      int countNamePart=getCountNamePart(rootModelDescriptor,NameUtil.namespaceFromLongName(SModelStereotype.withoutStereotype(rootModelDescriptor.getReference().getModelName())));
      SModelTreeNode treeNode=new SModelTreeNode(sortedModels.get(rootIndex),null,context,countNamePart);
      result.add(treeNode);
      rootIndex=(isNeedBuildChildModels) ? buildChildModels(treeNode,sortedModels,rootIndex) : rootIndex + 1;
    }
  }
  return result;
}
