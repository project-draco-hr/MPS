{
  String longName=myFullText.calculateText(treeNode);
  if (treeNode.getModel() instanceof TransientSModel) {
    return longName;
  }
  String namespace;
  if (treeNode.getParent() instanceof NamespaceTextNode) {
    NamespaceTextNode parent=(NamespaceTextNode)treeNode.getParent();
    namespace=parent.getNamespace();
  }
 else   if (treeNode.getParent() instanceof SModelTreeNode) {
    SModelTreeNode parent=(SModelTreeNode)treeNode.getParent();
    namespace=NameUtil.getModelLongName(parent.getModel());
  }
 else {
    return longName;
  }
  if (longName.length() > namespace.length() + 1 && longName.startsWith(namespace) && longName.charAt(namespace.length()) == '.') {
    return longName.substring(namespace.length() + 1);
  }
  return longName;
}
