{
  final SnapshotModelData modelData=new SnapshotModelData(new SModelReference(null,SModelId.generate(),"textgen"));
  modelData.addRootNode(CopyUtil.copyAndPreserveId(node));
  TrivialModelDescriptor model=new TrivialModelDescriptor(modelData);
  final List<TextUnit> textUnits=breakdownToUnits(model);
  final TextUnit textUnit;
  if (textUnits.size() == 1) {
    textUnit=textUnits.get(0);
  }
 else {
    textUnit=new RegularTextUnit2(node,"dummy.txt",null);
  }
  textUnit.generate();
  if (textUnit.getState() == Status.Empty) {
    return "";
  }
  if (textUnit.getState() == Status.Generated) {
    return new String(textUnit.getBytes(),textUnit.getEncoding());
  }
  return "Failed to generate text for node " + node;
}
