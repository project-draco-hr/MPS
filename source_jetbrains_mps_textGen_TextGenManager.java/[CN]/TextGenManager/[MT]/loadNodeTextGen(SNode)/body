{
  Class<? extends SNode> aClass=node.getClass();
  while (aClass != null) {
    String className=aClass.getName();
    className=className.substring(className.lastIndexOf('.') + 1);
    String packageName=node.getClass().getPackage().getName();
    String textgenClassname=packageName + ".textGen." + className+ "_TextGen";
    try {
      Class textgenClass=Class.forName(textgenClassname,true,ClassLoaderManager.getInstance().getClassLoader());
      SNodeTextGen textGenerator=(SNodeTextGen)textgenClass.newInstance();
      return textGenerator;
    }
 catch (    ClassNotFoundException e) {
    }
catch (    InstantiationException e) {
      LOG.error(e);
    }
catch (    IllegalAccessException e) {
      LOG.error(e);
    }
    aClass=(Class<? extends SNode>)aClass.getSuperclass();
  }
  return new DefaultTextGen();
}
