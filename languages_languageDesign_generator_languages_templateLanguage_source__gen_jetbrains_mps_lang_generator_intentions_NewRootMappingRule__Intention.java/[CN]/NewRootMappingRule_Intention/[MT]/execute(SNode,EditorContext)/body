{
  List<SNode> configs=SModelOperations.getRoots(SNodeOperations.getModel(node),"jetbrains.mps.lang.generator.structure.MappingConfiguration");
  if (ListSequence.fromList(configs).count() > 1) {
    Iterable<SNode> sameVPackConfigs=ListSequence.fromList(configs).where(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return Comparing.equal(SPropertyOperations.getString(it,"virtualPackage"),SPropertyOperations.getString(node,"virtualPackage"));
      }
    }
);
    if (Sequence.fromIterable(sameVPackConfigs).isNotEmpty()) {
      configs=Sequence.fromIterable(sameVPackConfigs).toListSequence();
    }
  }
  if (ListSequence.fromList(configs).count() > 1) {
  }
  SNode rule=SNodeFactoryOperations.addNewChild(ListSequence.fromList(configs).first(),"rootMappingRule","jetbrains.mps.lang.generator.structure.Root_MappingRule");
  SLinkOperations.setTarget(rule,"applicableConcept",SLinkOperations.getTarget(AttributeOperations.getAttribute(node,new IAttributeDescriptor.NodeAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.RootTemplateAnnotation"))),"applicableConcept",false),false);
  SLinkOperations.setTarget(rule,"template",node,false);
  NavigationSupport.getInstance().openNode(editorContext.getOperationContext(),rule,true,true);
}
