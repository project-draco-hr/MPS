{
  List<SNode> configs=SModelOperations.roots(SNodeOperations.getModel(node),MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,"jetbrains.mps.lang.generator.structure.MappingConfiguration"));
  if (ListSequence.fromList(configs).count() > 1) {
    Iterable<SNode> sameVPackConfigs=ListSequence.fromList(configs).where(new IWhereFilter<SNode>(){
      public boolean accept(      SNode it){
        return Comparing.equal(SPropertyOperations.getString(it,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x10802efe25aL,0x115eca8579fL,"virtualPackage")),SPropertyOperations.getString(node,MetaAdapterFactory.getProperty(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x10802efe25aL,0x115eca8579fL,"virtualPackage")));
      }
    }
);
    if (Sequence.fromIterable(sameVPackConfigs).isNotEmpty()) {
      configs=Sequence.fromIterable(sameVPackConfigs).toListSequence();
    }
  }
  if (ListSequence.fromList(configs).count() > 1) {
  }
  SNode rule=SNodeFactoryOperations.addNewChild(ListSequence.fromList(configs).first(),MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0xff0bea0475L,0x10fd54c33e7L,"rootMappingRule"),SNodeFactoryOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x10fd54746dbL,"jetbrains.mps.lang.generator.structure.Root_MappingRule")));
  SLinkOperations.setTarget(rule,MetaAdapterFactory.getReferenceLink(0xb401a68083254110L,0x8fd384331ff25befL,0x10fc0b64647L,0x10fc0b6e730L,"applicableConcept"),SLinkOperations.getTarget(AttributeOperations.getAttribute(node,new IAttributeDescriptor.NodeAttribute(MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x11017244494L,"jetbrains.mps.lang.generator.structure.RootTemplateAnnotation"))),MetaAdapterFactory.getReferenceLink(0xb401a68083254110L,0x8fd384331ff25befL,0x11017244494L,0x11017255ccfL,"applicableConcept")));
  SLinkOperations.setTarget(rule,MetaAdapterFactory.getReferenceLink(0xb401a68083254110L,0x8fd384331ff25befL,0x10fd54746dbL,0x10fd54746ddL,"template"),node);
  NavigationSupport.getInstance().openNode(editorContext.getOperationContext(),rule,true,true);
}
