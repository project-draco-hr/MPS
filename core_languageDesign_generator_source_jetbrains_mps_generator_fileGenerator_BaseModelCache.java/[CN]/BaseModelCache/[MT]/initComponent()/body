{
  myAllCaches.registerCache(this);
  myFileGeneratorManager.addCachesGenerator(new CacheGenerator(){
    public Set<File> generateCaches(    CacheGenerationContext context){
      Set<File> result=new HashSet<File>();
      T cache=generateCache(context);
      SModelDescriptor model=context.getStatus().getOriginalInputModel();
      myCache.put(model,cache);
      IFile cacheFile=getCacheFile(model);
      if (cacheFile == null)       return Collections.EMPTY_SET;
      OutputStream os=null;
      try {
        os=cacheFile.openOutputStream();
        save(cache,os);
      }
 catch (      IOException e) {
        LOG.error(e);
      }
 finally {
        if (os != null) {
          try {
            os.close();
          }
 catch (          IOException e) {
            LOG.error(e);
          }
        }
      }
      result.add(cacheFile.toFile());
      return result;
    }
  }
);
}
