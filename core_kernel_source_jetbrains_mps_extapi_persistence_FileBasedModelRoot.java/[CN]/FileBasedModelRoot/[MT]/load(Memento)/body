{
  checkNotRegistered();
  if (memento instanceof MementoWithFS) {
    myFileSystem=((MementoWithFS)memento).getFileSystem();
  }
  myContentRoot=FileUtil.stripLastSlashes(memento.get(CONTENT_PATH));
  for (  String kind : getSupportedFileKinds()) {
    List<String> files=myFilesForKind.get(kind);
    files.clear();
    for (    Memento root : memento.getChildren(kind)) {
      String relPath=root.get(LOCATION);
      if (relPath != null) {
        if (relPath.equals(".")) {
          files.add(myContentRoot);
        }
 else {
          files.add(myContentRoot + "/" + relPath);
        }
      }
 else {
        files.add(root.get("path"));
      }
    }
  }
}
