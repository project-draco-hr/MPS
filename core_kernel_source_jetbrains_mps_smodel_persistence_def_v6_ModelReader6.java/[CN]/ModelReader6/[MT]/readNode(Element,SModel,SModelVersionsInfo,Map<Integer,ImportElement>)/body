{
  String rawFqName=nodeElement.getAttributeValue(ModelPersistence.TYPE);
  String conceptFqName=VersionUtil.getConceptFQName(rawFqName);
  SNode node=new SNode(model,conceptFqName);
  VersionUtil.fetchConceptVersion(rawFqName,node,versionsInfo);
  String idValue=nodeElement.getAttributeValue(ModelPersistence.ID);
  if (idValue != null) {
    SNodeId id=SNodeId.fromString(idValue);
    if (id == null) {
      LOG.error("invalid id string");
      return null;
    }
    node.setId(id);
  }
  List properties=nodeElement.getChildren(ModelPersistence.PROPERTY);
  for (  Object property : properties) {
    Element propertyElement=(Element)property;
    String raw=propertyElement.getAttributeValue(ModelPersistence.NAME);
    String propertyName=VersionUtil.getPropertyName(raw,node,versionsInfo);
    String propertyValue=propertyElement.getAttributeValue(ModelPersistence.VALUE);
    if (propertyValue != null) {
      node.setProperty(propertyName,propertyValue);
    }
  }
  List links=nodeElement.getChildren(ModelPersistence.LINK);
  for (  Object link : links) {
    Element linkElement=(Element)link;
    SReference reference=readReference(linkElement,model,node,imports);
    if (reference != null)     node.addReference(reference);
  }
  List childNodes=nodeElement.getChildren(ModelPersistence.NODE);
  for (  Object childNode1 : childNodes) {
    Element childNodeElement=(Element)childNode1;
    String rawRole=childNodeElement.getAttributeValue(ModelPersistence.ROLE);
    String role=VersionUtil.getRole(rawRole);
    SNode childNode=readNode(childNodeElement,model,versionsInfo,imports);
    if (role == null || childNode == null) {
      LOG.errorWithTrace("Error reading child node in node " + node.getDebugText());
    }
 else {
      node.addChild(role,childNode);
      VersionUtil.fetchChildNodeRoleVersion(rawRole,childNode,versionsInfo);
    }
  }
  return node;
}
