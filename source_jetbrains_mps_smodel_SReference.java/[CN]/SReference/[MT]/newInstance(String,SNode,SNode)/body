{
  SModel sourceModel=sourceNode.getModel();
  SModel targetModel=targetNode == null ? null : targetNode.getModel();
  if (sourceModel == targetModel || targetModel == null) {
    return new InternalReference(role,sourceNode,targetNode);
  }
 else {
    SModel.ImportElement importElement=sourceModel.addImportElement(targetModel.getUID());
    return new ExternalReference(role,sourceNode,targetNode.getId(),importElement,null);
  }
}
