{
  String resolveInfo=targetNode == null ? null : targetNode.getName();
  SModel sourceModel=sourceNode.getModel();
  SModel targetModel=targetNode == null ? null : targetNode.getModel();
  if (sourceModel == targetModel || targetModel == null) {
    String id=targetNode == null ? null : targetNode.getId();
    SReference sReference=new SReference(role,sourceNode,id,null,null,sourceModel.getUID());
    sReference.setResolveInfo(resolveInfo);
    return sReference;
  }
 else {
    SModelUID targetModelUID=targetModel.getUID();
    sourceModel.addImportElement(targetModelUID);
    String extResolveInfo=null;
    if (targetModel.isExternallyResolvable()) {
      extResolveInfo=ExternalResolver.getExternalResolveInfoFromTarget(targetNode);
    }
    SReference sReference=new SReference(role,sourceNode,targetNode.getId(),null,extResolveInfo,targetModel.getUID());
    sReference.setResolveInfo(resolveInfo);
    return sReference;
  }
}
