{
  SModel sourceModel=sourceNode.getModel();
  SModel targetModel=targetNode == null ? null : targetNode.getModel();
  if (sourceModel == targetModel || targetModel == null) {
    String id=targetNode == null ? null : targetNode.getId();
    return new SReference(role,sourceNode,id,null,sourceModel.getUID(),false);
  }
 else {
    SModelUID targetModelUID=targetModel.getUID();
    sourceModel.addImportElement(targetModelUID);
    String extResolveInfo=null;
    if (targetModel.isExternallyResolvable()) {
      extResolveInfo=ExternalResolver.getExternalResolveInfoFromTarget(targetNode);
    }
    return new SReference(role,sourceNode,targetNode.getId(),extResolveInfo,targetModel.getUID(),false);
  }
}
