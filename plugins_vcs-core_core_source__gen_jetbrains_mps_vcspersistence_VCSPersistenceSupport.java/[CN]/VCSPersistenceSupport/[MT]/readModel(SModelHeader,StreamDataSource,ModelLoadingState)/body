{
  final Wrappers._T<ModelLoadResult> result=new Wrappers._T<ModelLoadResult>();
  final Wrappers._T<ModelReadException> ex=new Wrappers._T<ModelReadException>(null);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      InputStream in=null;
      try {
        in=dataSource.openInputStream();
        InputSource source=new InputSource(new InputStreamReader(in,FileUtil.DEFAULT_CHARSET));
        result.value=readModel(header,source,state);
      }
 catch (      IOException e) {
        ex.value=new ModelReadException("Couldn't read model: " + e.getMessage(),e,header);
      }
catch (      ModelReadException e) {
        ex.value=e;
      }
 finally {
        FileUtil.closeFileSafe(in);
      }
    }
  }
);
  if (ex.value != null) {
    throw ex.value;
  }
  return result.value;
}
