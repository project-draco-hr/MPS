{
  SNode referenceNodeConcept=((jetbrains.mps.smodel.SNode)referenceNode).getConceptDeclarationNode();
  Language primaryLanguage=SModelUtil.getDeclaringLanguage(referenceNodeConcept);
  if (primaryLanguage == null) {
    LOG.error("Couldn't build actions : couldn't get declaring language for concept " + SNodeOperations.getDebugText(referenceNodeConcept));
    return Collections.emptyList();
  }
  ReferenceDescriptor refDescriptor=ModelConstraints.getReferenceDescriptor(referenceNode,SModelUtil.getLinkDeclarationRole(linkDeclaration));
  Scope searchScope=refDescriptor.getScope();
  if (searchScope instanceof ErrorScope) {
    LOG.error("Couldn't create referent search scope : " + ((ErrorScope)searchScope).getMessage());
    return Collections.emptyList();
  }
  return createActions(referenceNode,currentReferent,linkDeclaration,refDescriptor);
}
