{
  if (!myChangesMap.containsKey(nodeId)) {
    myChangesMap.put(nodeId,new ArrayList<Change>());
  }
  myChangesMap.get(nodeId).add(change);
  SNode node=myNewModel.getNodeById(nodeId);
  if (node == null) {
    node=oldModel.getNodeById(nodeId);
  }
  if (node != null) {
    myChangedSubtree.add(nodeId);
    if (node.getParent() != null) {
      addToChangeSubtree(change,node.getParent().getSNodeId(),newModel,oldModel);
    }
  }
}
