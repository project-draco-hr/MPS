{
  SubstituteAction action=(SubstituteAction)value;
  String pattern=myPatternEditor.getPattern();
  if (!myLightweightMode) {
    try {
      Icon icon=getIcon(action,pattern);
      myLeft.setIcon(icon);
    }
 catch (    Throwable t) {
      LOG.error(null,t);
    }
  }
  try {
    int style;
    if (action.getParameterObject() instanceof SNode) {
      style=NodePresentationUtil.getFontStyle(action.getSourceNode(),(SNode)action.getParameterObject());
    }
 else {
      style=Font.PLAIN;
    }
    int oldStyle=myLeft.getFont().getStyle();
    if (oldStyle != style) {
      myLeft.setFont(myLeft.getFont().deriveFont(style));
      myRight.setFont(myRight.getFont().deriveFont(style));
    }
  }
 catch (  Throwable t) {
    LOG.error(null,t);
  }
  try {
    if (!isSelected) {
      myLeft.setText(SubstituteActionUtil.createText(action,pattern,STRING_HIGHLIGHT_COLOR));
    }
 else {
      myLeft.setText(SubstituteActionUtil.createText(action,pattern,STRING_SELECTION_HIGHLIGHT_COLOR));
    }
  }
 catch (  Throwable t) {
    myLeft.setText(EXCEPTION_WAS_THROWN_TEXT);
    LOG.error(null,t);
  }
  try {
    myRight.setText(action.getDescriptionText(pattern));
  }
 catch (  Throwable t) {
    myRight.setText(EXCEPTION_WAS_THROWN_TEXT);
    LOG.error(null,t);
  }
  if (isSelected) {
    setBackground(list.getSelectionBackground());
    setForeground(list.getSelectionForeground());
    myLeft.setForeground(list.getSelectionForeground());
    myRight.setForeground(list.getSelectionForeground());
  }
 else {
    setBackground(list.getBackground());
    setForeground(list.getForeground());
    myLeft.setForeground(list.getForeground());
    myRight.setForeground(list.getForeground());
  }
  myLeft.setPreferredSize(null);
  Dimension oldPreferredSize=myLeft.getPreferredSize();
  myLeft.setPreferredSize(new Dimension(oldPreferredSize.width + 1,oldPreferredSize.height));
}
