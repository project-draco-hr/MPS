{
  SModel model=myReferentsCreator.myCurrentModel;
  if (binding instanceof BaseTypeBinding) {
    if (binding == TypeBinding.BOOLEAN) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.BooleanType");
    }
    if (binding == TypeBinding.BYTE) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ByteType");
    }
    if (binding == TypeBinding.CHAR) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.CharType");
    }
    if (binding == TypeBinding.DOUBLE) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.DoubleType");
    }
    if (binding == TypeBinding.FLOAT) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.FloatType");
    }
    if (binding == TypeBinding.INT) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.IntegerType");
    }
    if (binding == TypeBinding.LONG) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.LongType");
    }
    if (binding == TypeBinding.SHORT) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ShortType");
    }
    if (binding == TypeBinding.VOID) {
      return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.VoidType");
    }
    throw new JavaConverterException("Unknown base type : " + binding);
  }
  if (binding instanceof ArrayBinding) {
    ArrayBinding arrayBinding=(ArrayBinding)binding;
    TypeBinding componentTypeBinding=arrayBinding.leafComponentType;
    int dimensions=arrayBinding.dimensions;
    SNode outerType=(varArg ? SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.VariableArityType") : SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ArrayType"));
    SNode smallestVectorType=outerType;
    while (dimensions > 1) {
      SNode newArrayType=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ArrayType");
      setComponentType(smallestVectorType,newArrayType);
      smallestVectorType=newArrayType;
      dimensions--;
    }
    setComponentType(smallestVectorType,createType(componentTypeBinding));
    return outerType;
  }
  if (binding instanceof ReferenceBinding) {
    if (binding instanceof WildcardBinding) {
      WildcardBinding wildcardBinding=(WildcardBinding)binding;
      if (wildcardBinding.isUnboundWildcard()) {
        return SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.WildCardType");
      }
 else {
        if (wildcardBinding.boundKind == Wildcard.EXTENDS) {
          SNode upperBoundType=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.UpperBoundType");
          SLinkOperations.setTarget(upperBoundType,"bound",createType(wildcardBinding.bound),true);
          return upperBoundType;
        }
 else {
          SNode lowerBoundType=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.LowerBoundType");
          SLinkOperations.setTarget(lowerBoundType,"bound",createType(wildcardBinding.bound),true);
          return lowerBoundType;
        }
      }
    }
    if (binding instanceof ParameterizedTypeBinding) {
      ParameterizedTypeBinding parameterizedTypeBinding=(ParameterizedTypeBinding)binding;
      ReferenceBinding originalType=parameterizedTypeBinding.genericType();
      SNode result=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ClassifierType");
      result.setReference(createClassifierReference(originalType,"classifier",result).getRole(),createClassifierReference(originalType,"classifier",result));
      if (!((parameterizedTypeBinding instanceof RawTypeBinding))) {
        TypeBinding[] typeBindings=parameterizedTypeBinding.arguments;
        if (typeBindings != null) {
          for (          TypeBinding typeBinding : typeBindings) {
            ListSequence.fromList(SLinkOperations.getTargets(result,"parameter",true)).addElement(createType(typeBinding));
          }
        }
      }
      return result;
    }
    if (binding instanceof SourceTypeBinding) {
      SNode classifierType=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ClassifierType");
      SLinkOperations.setTarget(classifierType,"classifier",SNodeOperations.cast(myReferentsCreator.myBindingMap.get(binding),"jetbrains.mps.baseLanguage.structure.Classifier"),false);
      ((SReference)SNodeOperations.getReference(classifierType,SLinkOperations.findLinkDeclaration("jetbrains.mps.baseLanguage.structure.ClassifierType","classifier"))).setResolveInfo(new String(binding.sourceName()));
      return classifierType;
    }
    if (binding instanceof MissingTypeBinding || binding instanceof ProblemReferenceBinding) {
      SNode classifierType=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ClassifierType");
      org.jetbrains.mps.openapi.model.SReference reference=createErrorClassifierReference("classifier",(ReferenceBinding)binding,classifierType);
      classifierType.setReference(reference.getRole(),reference);
      return classifierType;
    }
    if (binding instanceof BinaryTypeBinding) {
      SNode classifierType=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.ClassifierType");
      BinaryTypeBinding binaryTypeBinding=(BinaryTypeBinding)binding;
      org.jetbrains.mps.openapi.model.SReference reference=createClassifierReference(binaryTypeBinding,"classifier",classifierType);
      classifierType.setReference(reference.getRole(),reference);
      return classifierType;
    }
  }
  if (binding instanceof TypeVariableBinding) {
    TypeVariableBinding typeVariableBinding=(TypeVariableBinding)binding;
    SNode tvr=SModelOperations.createNewNode(model,null,"jetbrains.mps.baseLanguage.structure.TypeVariableReference");
    SNode declaringGeneric=myReferentsCreator.myBindingMap.get(typeVariableBinding.declaringElement);
    if (SNodeOperations.isInstanceOf(declaringGeneric,"jetbrains.mps.baseLanguage.structure.GenericDeclaration")) {
      SLinkOperations.setTarget(tvr,"typeVariableDeclaration",ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.cast(declaringGeneric,"jetbrains.mps.baseLanguage.structure.GenericDeclaration"),"typeVariableDeclaration",true)).getElement(typeVariableBinding.rank),false);
    }
 else {
      throw new JavaConverterException("Declaring element for a type var is not a GenericDeclaration");
    }
    return tvr;
  }
  return null;
}
