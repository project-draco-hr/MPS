{
  if (type instanceof ParameterizedTypeBinding) {
    StringBuilder sb=new StringBuilder();
    sb.append(TypesProvider.asString(((ParameterizedTypeBinding)type).genericType()));
    return sb.toString();
  }
  if (type instanceof BinaryTypeBinding) {
    return TypesProvider.getClassifierIdPrefix(((BinaryTypeBinding)type));
  }
  if (type instanceof SourceTypeBinding) {
    return TypesProvider.classFqNameFromCompoundName(((SourceTypeBinding)type).compoundName);
  }
  if (type instanceof ArrayBinding) {
    if (context != null && context.isVarargs() && context.parameters[context.parameters.length - 1] == type) {
      return TypesProvider.asString(((ArrayBinding)type).elementsType()) + "...";
    }
 else {
      return TypesProvider.asString(((ArrayBinding)type).elementsType()) + "[]";
    }
  }
  if (type instanceof BaseTypeBinding) {
    return new String(((BaseTypeBinding)type).simpleName);
  }
  if (type instanceof TypeVariableBinding) {
    TypeVariableBinding typeVariableBinding=(TypeVariableBinding)type;
    ReferenceBinding superclass=typeVariableBinding.superclass;
    if (JavaCompiler.classNameFromCompoundName(superclass.compoundName).equals("java.lang.Object") && typeVariableBinding.superInterfaces != null && typeVariableBinding.superInterfaces.length > 0) {
      return TypesProvider.asString(typeVariableBinding.superInterfaces[0]);
    }
    return TypesProvider.asString(superclass);
  }
  if (type instanceof WildcardBinding && ((WildcardBinding)type).boundKind == Wildcard.EXTENDS) {
    return TypesProvider.asString(((WildcardBinding)type).bound);
  }
  if (type instanceof WildcardBinding && ((WildcardBinding)type).boundKind == Wildcard.SUPER) {
    return TypesProvider.asString(((WildcardBinding)type).bound);
  }
  if (type.isUnboundWildcard()) {
    return "java.lang.Object";
  }
  throw new RuntimeException("unexpected type: " + type);
}
