{
  super.doUpdate(event,map);
  SModel newModel=myModelDifferenceDialog.getChangeSet().getNewModel();
  boolean enabled=getRoots().length != 0 && newModel.getModelDescriptor() instanceof EditableSModelDescriptor && SModelRepository.getInstance().getModelDescriptor(newModel.getSModelReference()).getSModel() == newModel;
  event.getPresentation().setEnabled(enabled);
  event.getPresentation().setVisible(enabled);
  String what="Roots";
  if (getRoots().length == 1) {
    what=(getRoots()[0] == null ? "Properties" : "Root");
  }
 else {
    if (Sequence.fromIterable(Sequence.fromArray(getRoots())).any(new IWhereFilter<SNodeId>(){
      public boolean accept(      SNodeId r){
        return r == null;
      }
    }
)) {
      what="Roots and Properties";
    }
  }
  event.getPresentation().setText("Revert " + what);
}
