{
  if (scriptNode == null) {
    return null;
  }
  String fqClassName=ScriptNameUtil.getMigrationScriptFqClassName(scriptNode);
  Class<BaseMigrationScript> aClass;
  String languageNamespace=NameUtil.namespaceFromLongName(fqClassName);
  languageNamespace=languageNamespace.substring(0,languageNamespace.length() - ".scripts".length());
  Language l=ModuleRepositoryFacade.getInstance().getModule(languageNamespace,Language.class);
  if (l == null) {
    LOG.error("can't find a language " + languageNamespace);
    return null;
  }
  aClass=l.getClass(fqClassName);
  if (aClass == null) {
    return null;
  }
  try {
    Constructor<BaseMigrationScript> constructor=aClass.getConstructor(IOperationContext.class);
    return constructor.newInstance(context);
  }
 catch (  InstantiationException e) {
    throw new RuntimeException(e);
  }
catch (  IllegalAccessException e) {
    throw new RuntimeException(e);
  }
catch (  NoSuchMethodException e) {
    throw new RuntimeException(e);
  }
catch (  InvocationTargetException e) {
    throw new RuntimeException(e);
  }
}
