{
  LanguageDescriptor descriptor;
  try {
    Document document=JDOMUtil.loadDocument(file);
    final Element languageElement=document.getRootElement();
    descriptor=new _FunctionTypes._return_P0_E0<LanguageDescriptor>(){
      public LanguageDescriptor invoke(){
        final LanguageDescriptor result_v3r4p8_a0a0d0c0a=new LanguageDescriptor();
        final String result_v3r4p8_a0a0a0d0c0a=languageElement.getAttributeValue("namespace");
        result_v3r4p8_a0a0d0c0a.setNamespace(result_v3r4p8_a0a0a0d0c0a);
        String uuidValue=languageElement.getAttributeValue("uuid");
        if (uuidValue != null) {
          final String result_v3r4p8_a0a2a0a0d0c0a=uuidValue;
          result_v3r4p8_a0a0d0c0a.setUUID(result_v3r4p8_a0a2a0a0d0c0a);
        }
        String genOutput=languageElement.getAttributeValue("generatorOutputPath");
        if (genOutput != null) {
          final String result_v3r4p8_a0a5a0a0d0c0a=macroHelper.expandPath(genOutput);
          result_v3r4p8_a0a0d0c0a.setGenPath(result_v3r4p8_a0a5a0a0d0c0a);
        }
        Element modelsTag=jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"models");
        if (modelsTag != null) {
          result_v3r4p8_a0a0d0c0a.getModelRoots().addAll(ModuleDescriptorPersistence.loadModelRoots(jetbrains.mps.project.persistence.JDOMUtil.children(modelsTag,"modelRoot"),macroHelper));
        }
 else {
          result_v3r4p8_a0a0d0c0a.getModelRoots().addAll(ModuleDescriptorPersistence.loadModelRoots(jetbrains.mps.project.persistence.JDOMUtil.children(languageElement,"modelRoot"),macroHelper));
        }
        ModuleDescriptorPersistence.loadDependencies(result_v3r4p8_a0a0d0c0a,languageElement);
        for (        Element extendedLanguage : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"extendedLanguages"),"extendedLanguage"))) {
          result_v3r4p8_a0a0d0c0a.getExtendedLanguages().add(ModuleReference.fromString(extendedLanguage.getText()));
        }
        Element autoImports=jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"accessoryModels");
        if (autoImports == null) {
          autoImports=jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"library");
        }
        for (        Element modelElement : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(autoImports,"model"))) {
          result_v3r4p8_a0a0d0c0a.getAccessoryModels().add(SModelReference.fromString(modelElement.getAttributeValue("modelUID")));
        }
        for (        Element generatorElement : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"generators"),"generator"))) {
          result_v3r4p8_a0a0d0c0a.getGenerators().add(GeneratorDescriptorPersistence.loadGeneratorDescriptor(generatorElement,file,macroHelper));
        }
        for (        Element entryElement : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"classPath"),"entry")).concat(Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"runtimeClassPath"),"entry")))) {
          ModelRoot entry=new ModelRoot();
          entry.setPath(macroHelper.expandPath(entryElement.getAttributeValue("path")));
          entry.setManager(LanguageID.JAVA_MANAGER);
          result_v3r4p8_a0a0d0c0a.getStubModelEntries().add(entry);
        }
        Element stubModelEntries=jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"stubModelEntries");
        if (stubModelEntries != null) {
          List<ModelRoot> roots=ModuleDescriptorPersistence.loadStubModelEntries(stubModelEntries,macroHelper);
          result_v3r4p8_a0a0d0c0a.getStubModelEntries().addAll(roots);
        }
        for (        Element entryElement : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"languageRuntimeClassPath"),"entry"))) {
          ModelRoot entry=new ModelRoot();
          entry.setPath(macroHelper.expandPath(entryElement.getAttributeValue("path")));
          entry.setManager(LanguageID.JAVA_MANAGER);
          result_v3r4p8_a0a0d0c0a.getRuntimeStubModels().add(entry);
        }
        Element runtimeStubModels=jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"runtimeStubModels");
        if (runtimeStubModels != null) {
          for (          Element entryElement : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(runtimeStubModels,"stubModelEntry"))) {
            final ModelRoot result_v3r4p8_a0a0a72a0a0d0c0a=new ModelRoot();
            final String result_v3r4p8_a0a0a0a72a0a0d0c0a=macroHelper.expandPath(entryElement.getAttributeValue("path"));
            result_v3r4p8_a0a0a72a0a0d0c0a.setPath(result_v3r4p8_a0a0a0a72a0a0d0c0a);
            final ModelRootManager result_v3r4p8_a1a0a0a72a0a0d0c0a=new ModelRootManager();
            Element manager=jetbrains.mps.project.persistence.JDOMUtil.first(entryElement,"manager");
            final String result_v3r4p8_a1a1a0a0a72a0a0d0c0a=jetbrains.mps.project.persistence.JDOMUtil.stringWithDefault(manager,"moduleId","");
            result_v3r4p8_a1a0a0a72a0a0d0c0a.setModuleId(result_v3r4p8_a1a1a0a0a72a0a0d0c0a);
            final String result_v3r4p8_a2a1a0a0a72a0a0d0c0a=jetbrains.mps.project.persistence.JDOMUtil.stringWithDefault(manager,"className","");
            result_v3r4p8_a1a0a0a72a0a0d0c0a.setClassName(result_v3r4p8_a2a1a0a0a72a0a0d0c0a);
            result_v3r4p8_a0a0a72a0a0d0c0a.setManager(result_v3r4p8_a1a0a0a72a0a0d0c0a);
            result_v3r4p8_a0a0d0c0a.getRuntimeStubModels().add(result_v3r4p8_a0a0a72a0a0d0c0a);
          }
          for (          GeneratorDescriptor gd : ListSequence.fromList(result_v3r4p8_a0a0d0c0a.getGenerators())) {
            gd.getModelRoots().addAll(result_v3r4p8_a0a0d0c0a.getRuntimeStubModels());
          }
        }
        Element stubSolutions=jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"stubSolutions");
        if (stubSolutions != null) {
          for (          Element solutionElement : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(stubSolutions,"stubSolution"))) {
            final StubSolution result_v3r4p8_a0a0a03a0a0d0c0a=new StubSolution();
            final String result_v3r4p8_a0a0a0a03a0a0d0c0a=jetbrains.mps.project.persistence.JDOMUtil.stringWithDefault(solutionElement,"moduleName","");
            result_v3r4p8_a0a0a03a0a0d0c0a.setName(result_v3r4p8_a0a0a0a03a0a0d0c0a);
            final ModuleId result_v3r4p8_a1a0a0a03a0a0d0c0a=ModuleId.fromString(jetbrains.mps.project.persistence.JDOMUtil.stringWithDefault(solutionElement,"moduleId",""));
            result_v3r4p8_a0a0a03a0a0d0c0a.setId(result_v3r4p8_a1a0a0a03a0a0d0c0a);
            result_v3r4p8_a0a0d0c0a.getStubSolutions().add(result_v3r4p8_a0a0a03a0a0d0c0a);
          }
        }
        for (        Element entryElement : Sequence.fromIterable(jetbrains.mps.project.persistence.JDOMUtil.children(jetbrains.mps.project.persistence.JDOMUtil.first(languageElement,"sourcePath"),"source"))) {
          result_v3r4p8_a0a0d0c0a.getSourcePaths().add(macroHelper.expandPath(entryElement.getAttributeValue("path")));
        }
        return result_v3r4p8_a0a0d0c0a;
      }
    }
.invoke();
  }
 catch (  Exception e) {
    throw new ModuleReadException(e);
  }
  ModuleDescriptorPersistence.setTimestamp(descriptor,file);
  return descriptor;
}
