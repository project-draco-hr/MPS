{
  VirtualFile modelFile=ModelAccess.instance().runReadAction(new Computable<VirtualFile>(){
    public VirtualFile compute(){
      if (node == null)       return null;
      SNode n=node.getNode();
      return n == null ? null : ModelUtil.getFileByModel(n.getModel());
    }
  }
);
  if (modelFile == null) {
    return null;
  }
  return new VirtualFileSelectInContext(ProjectHelper.toIdeaProject(p),modelFile);
}
