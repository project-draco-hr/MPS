{
  super.setModuleDescriptor(newDescriptor,reloadClasses);
  myLanguageDescriptor=newDescriptor;
  ModuleReference reference=new ModuleReference(myLanguageDescriptor.getNamespace(),myLanguageDescriptor.getId());
  setModuleReference(reference);
  reloadAfterDescriptorChange();
  MPSModuleRepository.getInstance().fireModuleChanged(this);
  if (reloadClasses) {
    ClassLoaderManager.getInstance().reloadAll(new EmptyProgressMonitor());
  }
  MPSModuleRepository.getInstance().invalidateCaches();
  if (getStructureModelDescriptor() != null && myCachesInvalidator == null) {
    SModelListener listener=myCachesInvalidator=new CachesInvalidator();
    ((SModelInternal)getStructureModelDescriptor()).addModelListener(listener);
  }
  invalidateDependencies();
  setChanged();
}
