{
  final SNode wasChild=myChildren.get(index);
  final String wasId=myChildren.get(index).getId();
  final String wasRole=wasChild.getRole_();
  myChildren.remove(wasChild);
  wasChild.myParent=null;
  wasChild.myRoleInParent=null;
  wasChild.unRegisterFromModel();
  decrementChildInRoleCount(wasRole);
  if (!getModel().isLoading()) {
    UndoManager.instance().undoableActionPerformed(new IUndoableAction(){
      public void undo(){
        insertChildAt(index,wasRole,wasChild);
        wasChild.setId(wasId);
      }
    }
);
  }
  getModel().fireChildRemovedEvent(this,wasRole,wasChild,index);
}
