{
  jetbrains.mps.bootstrap.structureLanguage.structure.ConceptDeclaration conceptDeclaration;
  if (getAdapter() instanceof jetbrains.mps.bootstrap.structureLanguage.structure.ConceptDeclaration) {
    conceptDeclaration=(jetbrains.mps.bootstrap.structureLanguage.structure.ConceptDeclaration)getAdapter();
  }
 else {
    conceptDeclaration=getConceptDeclarationAdapter(scope);
  }
  if (lookupHierarchy) {
    return (List)SModelSearchUtil_new.createConceptHierarchyScope(conceptDeclaration).getAdapters(new Condition<BaseAdapter>(){
      public boolean met(      BaseAdapter n){
        if (n instanceof ConceptLink) {
          ConceptLinkDeclaration conceptLinkDeclaration=((ConceptLink)n).getConceptLinkDeclaration();
          return (conceptLinkDeclaration != null && linkName.equals(conceptLinkDeclaration.getName()));
        }
        return false;
      }
    }
);
  }
  List<ConceptLink> result=new LinkedList<ConceptLink>();
  Iterator<ConceptLink> conceptLinks=conceptDeclaration.conceptLinks();
  while (conceptLinks.hasNext()) {
    ConceptLink conceptLink=conceptLinks.next();
    ConceptLinkDeclaration conceptLinkDeclaration=conceptLink.getConceptLinkDeclaration();
    if (conceptLinkDeclaration != null && linkName.equals(conceptLinkDeclaration.getName())) {
      result.add(conceptLink);
    }
  }
  return result;
}
