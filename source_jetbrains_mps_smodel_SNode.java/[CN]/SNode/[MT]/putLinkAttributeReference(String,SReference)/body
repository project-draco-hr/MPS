{
  final SReference oldLinkAttribute=myLinkAttributes.get(role);
  if (reference != null) {
    myLinkAttributes.put(role,reference);
  }
 else {
    myLinkAttributes.remove(role);
  }
  if (!getModel().isLoading()) {
    UndoManager.instance().undoableActionPerformed(new IUndoableAction(){
      public void undo() throws UnexpectedUndoException {
        putLinkAttributeReference(role,oldLinkAttribute);
      }
    }
);
  }
}
