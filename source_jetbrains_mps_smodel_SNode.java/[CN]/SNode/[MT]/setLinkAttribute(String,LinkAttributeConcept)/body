{
  SReference oldLinkAttributeRef=myLinkAttributes.get(role);
  if (oldLinkAttributeRef != null) {
    SNode oldNode=oldLinkAttributeRef.getTargetNode();
    if (oldNode instanceof LinkAttributeConcept) {
      LinkAttributeConcept oldLinkAttributeConcept=(LinkAttributeConcept)oldNode;
      oldLinkAttributeConcept.setAttributedNode(null);
      oldLinkAttributeConcept.delete();
      putLinkAttributeReference(role,null);
      getModel().fireAttributeRemovedEvent(this);
    }
  }
  if (linkAttribute != null) {
    checkAttributeIsReachable(linkAttribute);
    linkAttribute.setReferent(AttributeConcept.ATTRIBUTED_NODE,this);
    linkAttribute.setLinkRole(role);
    SReference reference=SReference.newInstance(ATTRIBUTE,this,linkAttribute);
    putLinkAttributeReference(role,reference);
    getModel().fireAttributeAddedEvent(this,linkAttribute);
  }
}
