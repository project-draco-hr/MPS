{
  myReferences.add(i,reference);
  if (reference instanceof InternalReference && !getModel().getUID().getStereotype().equals("remote")) {
    SNode targetNode=reference.getTargetNode();
    if (targetNode != null)     targetNode.myBackReferences.add(reference);
  }
  if (!getModel().isLoading()) {
    UndoManager.instance().undoableActionPerformed(new IUndoableAction(){
      public void undo() throws UnexpectedUndoException {
        removeReferenceAt(i);
      }
    }
);
  }
  getModel().fireReferenceAddedEvent(reference);
}
