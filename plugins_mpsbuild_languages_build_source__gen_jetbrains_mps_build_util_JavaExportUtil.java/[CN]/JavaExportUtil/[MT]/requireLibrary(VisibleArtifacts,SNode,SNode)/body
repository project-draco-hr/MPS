{
  if (SNodeOperations.getContainingRoot(library) == SNodeOperations.getContainingRoot(contextNode)) {
    return null;
  }
  SNode target=SNodeOperations.as(artifacts.toOriginalNode(library),"jetbrains.mps.build.structure.BuildSource_JavaLibrary");
  SNode artifact=SNodeOperations.as(artifacts.findArtifact(target),"jetbrains.mps.build.structure.BuildLayout_Node");
  if (artifact != null) {
    artifacts.needsFetch(contextNode);
    if (SNodeOperations.isInstanceOf(artifact,"jetbrains.mps.build.structure.BuildLayout_ExportAsJavaLibrary")) {
      return SLinkOperations.getTargets(SNodeOperations.cast(artifact,"jetbrains.mps.build.structure.BuildLayout_ExportAsJavaLibrary"),"children",true);
    }
 else {
      return Sequence.<SNode>singleton(artifact);
    }
  }
  return null;
}
