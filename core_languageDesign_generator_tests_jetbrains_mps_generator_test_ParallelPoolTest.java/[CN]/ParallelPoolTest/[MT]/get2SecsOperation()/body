{
  int measureTime=500;
  long count2secs=0;
  long startTime=System.currentTimeMillis();
  long endTime=startTime + measureTime;
  while (System.currentTimeMillis() < endTime) {
    long localCounter=0;
    while (localCounter < 10000000l) {
      localCounter++;
    }
    count2secs+=localCounter;
  }
  endTime=System.currentTimeMillis();
  long amountOfWork=count2secs * measureTime / (endTime - startTime);
  long localCounter=amountOfWork;
  startTime=System.currentTimeMillis();
  while (localCounter > 0) {
    localCounter--;
  }
  endTime=System.currentTimeMillis();
  amountOfWork=amountOfWork * 2000 / (endTime - startTime);
  return amountOfWork;
}
