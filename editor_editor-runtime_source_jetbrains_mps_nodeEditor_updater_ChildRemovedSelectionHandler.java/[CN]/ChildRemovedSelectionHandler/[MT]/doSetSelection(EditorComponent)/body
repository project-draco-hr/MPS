{
  Iterator<? extends SNode> siblingsIterator=myParent.getChildren(myChildRole).iterator();
  if (!siblingsIterator.hasNext()) {
    selectNullCell(editorComponent);
    return;
  }
  SNode nodeToSelect=null;
  int index=0;
  for (  SNode nextChild : myParent.getChildren()) {
    if (index >= myChildIndex) {
      break;
    }
    if (myChildRole.equals(nextChild.getRoleInParent())) {
      nodeToSelect=nextChild;
    }
    index++;
  }
  boolean isLastPosition=true;
  if (nodeToSelect == null) {
    isLastPosition=false;
    nodeToSelect=siblingsIterator.next();
  }
  if (nodeToSelect != null) {
    EditorCell cell=editorComponent.findNodeCell(nodeToSelect);
    if (cell != null) {
      EditorCell selectableLeaf=isLastPosition ? CellFinderUtil.findLastSelectableLeaf(cell,true) : CellFinderUtil.findFirstSelectableLeaf(cell,true);
      if (selectableLeaf != null) {
        editorComponent.changeSelection(selectableLeaf);
        if (isLastPosition) {
          selectableLeaf.end();
        }
 else {
          selectableLeaf.home();
        }
        return;
      }
    }
  }
}
