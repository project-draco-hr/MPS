{
  if (!myGenerationOptions.isIncremental()) {
    return new NullDependenciesBuilder();
  }
  DefaultDependenciesBuilder result=new DefaultDependenciesBuilder(myModel.getSModel(),myGenerationHashes);
  if (myUnchangedRoots.isEmpty() && myConditionalsUnchanged == false) {
    return result;
  }
  for (  SNode root : myUnchangedRoots) {
    propagateDependencies(result.getRootBuilder(root),mySavedDependencies.getDependenciesFor(root.getId()),false);
  }
  for (  SNode root : myRequiredRoots) {
    propagateDependencies(result.getRootBuilder(root),mySavedDependencies.getDependenciesFor(root.getId()),true);
  }
  if (myConditionalsUnchanged || myConditionalsRequired) {
    propagateDependencies(result.getRootBuilder(null),mySavedDependencies.getDependenciesFor(ModelDigestHelper.HEADER),myConditionalsRequired);
  }
  return result;
}
