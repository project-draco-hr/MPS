{
  boolean result=false;
  boolean changed=true;
  while (changed) {
    changed=false;
    Iterator<SNode> it=myUnchangedRoots.iterator();
    while (it.hasNext()) {
      SNode root=it.next();
      Set<String> rootDeps=dep.get(root.getId());
      boolean dirty=false;
      for (      String localRootId : rootDeps) {
        if (!dep.containsKey(localRootId)) {
          dirty=true;
          break;
        }
      }
      if (dirty) {
        it.remove();
        dep.remove(root.getId());
        changed=true;
      }
    }
    if (myConditionalsUnchanged) {
      Set<String> conditionalsDeps=dep.get(CONDITIONALS_ID);
      for (      String localRootId : conditionalsDeps) {
        if (!dep.containsKey(localRootId)) {
          dep.remove(CONDITIONALS_ID);
          myConditionalsUnchanged=false;
          changed=true;
          break;
        }
      }
    }
    result|=changed;
  }
  return result;
}
