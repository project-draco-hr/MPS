{
  Selection selection=event.getData(MPSEditorDataKeys.EDITOR_COMPONENT).getSelectionManager().getSelection();
  boolean uncomment=true;
  if (selection instanceof MultipleSelection || selection instanceof EditorCellSelection || (selection instanceof EditorCellLabelSelection && ((EditorCellLabelSelection)selection).hasNonTrivialSelection())) {
    uncomment=false;
  }
  uncomment=uncomment && SNodeOperations.getNodeAncestor(event.getData(MPSCommonDataKeys.NODE),MetaAdapterFactory.getConcept(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x3dcc194340c24debL,"jetbrains.mps.lang.core.structure.BaseCommentAttribute"),false,false) != null && !(SNodeOperations.isInstanceOf(SNodeOperations.getParent(event.getData(MPSCommonDataKeys.NODE)),MetaAdapterFactory.getConcept(0xceab519525ea4f22L,0x9b92103b95ca8c0cL,0x3dcc194340c24debL,"jetbrains.mps.lang.core.structure.BaseCommentAttribute")));
  if (uncomment) {
    selection.executeAction(CellActionType.UNCOMMENT);
  }
 else {
    selection.executeAction(CellActionType.COMMENT);
  }
}
