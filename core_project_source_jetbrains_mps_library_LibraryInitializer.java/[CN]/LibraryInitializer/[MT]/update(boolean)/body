{
  myModelAccess.runWriteAction(new Runnable(){
    @Override public void run(){
      final Set<SLibrary> currentLibs=new HashSet<SLibrary>();
      List<LibraryContributor> contributors=myContributors;
      for (      LibraryContributor contributor : contributors) {
        boolean hidden=contributor.hiddenLanguages();
        for (        LibDescriptor pathDescriptor : contributor.getPaths()) {
          SLibrary lib=new SLibrary(pathDescriptor,hidden);
          currentLibs.add(lib);
        }
      }
      final Delta<SLibrary> libraryDelta=Delta.construct(myLibraries,currentLibs);
      if (libraryDelta.isEmpty())       return;
      updateState(refreshFiles,libraryDelta);
      libraryDelta.apply(myLibraries);
    }
  }
);
}
