{
synchronized (LOADING_LOCK) {
    if (!myModule.canLoad())     throw new ClassNotFoundException(name);
    if (myClasses.containsKey(name)) {
      Class cl=myClasses.get(name);
      if (cl == null)       throw new ClassNotFoundException(name);
      return cl;
    }
    Class<?> clazz=null;
    try {
      clazz=findInSelfAndDependencies(name,true,true);
      if (resolve) {
        resolveClass(clazz);
      }
      return clazz;
    }
  finally {
      myClasses.put(name,clazz);
    }
  }
}
