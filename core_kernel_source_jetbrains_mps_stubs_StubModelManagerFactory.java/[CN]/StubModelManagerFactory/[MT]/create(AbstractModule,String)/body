{
  if (!(MPSModuleRepository.getInstance().isKnownModule(mod))) {
    return null;
  }
  Class managerClass=mod.getClass(className);
  if (managerClass == null) {
    throw new ManagerNotFoundException("Manager class " + className + " not found in module "+ mod.getModuleFqName());
  }
  try {
    return (IModelRootManager)managerClass.newInstance();
  }
 catch (  Throwable t) {
    if (className.equals("jetbrains.mps.baseLanguage.stubs.JavaStubs"))     return new JavaStubs();
    if (className.equals("jetbrains.mps.baseLanguage.stubs.JavaStubs_MPS"))     return new JavaStubs_MPS();
    if (className.equals("jetbrains.mps.baseLanguage.stubs.JavaStubs_JDK"))     return new JavaStubs_JDK();
    throw new ManagerNotFoundException("Problems during instantiating manager " + className,t);
  }
}
