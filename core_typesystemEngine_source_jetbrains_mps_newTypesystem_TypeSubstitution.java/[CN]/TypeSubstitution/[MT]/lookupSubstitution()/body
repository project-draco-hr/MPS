{
  SNode resultSubs=origNode;
  for (  SNode ruleNode : nodesToTest(origNode)) {
    for (    Pair<SubstituteType_Runtime,IsApplicableStatus> rule_status : substituteTypeRules(ruleNode)) {
      if (rule_status.o2.isApplicable()) {
        SNode subs=rule_status.o1.substitution(ruleNode,resultSubs,typeCheckingContext,rule_status.o2);
        if (subs != null) {
          resultSubs=subs;
        }
      }
    }
  }
  return resultSubs;
}
