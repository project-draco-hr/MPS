{
  QueryScope outer=CompositeScope.createComposite(ListSequence.fromList(SLinkOperations.getTargets(thisNode,"imports",true)).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return (SLinkOperations.getTarget(it,"target",false) != null);
    }
  }
).select(new ISelector<SNode,SNode>(){
    public SNode select(    SNode it){
      return SLinkOperations.getTarget(it,"target",false);
    }
  }
).select(new ISelector<SNode,QueryScope>(){
    public QueryScope select(    SNode it){
      return MqlScopeExporter_Behavior.call_getExportedScope_5109194352282852190(it);
    }
  }
).toGenericArray(QueryScope.class));
  if (kind == SConceptOperations.findConceptDeclaration("jetbrains.mps.core.query.structure.MqlQuery")) {
    return CompositeScope.createComposite(outer,new SimpleRoleScope(thisNode,SLinkOperations.findLinkDeclaration("jetbrains.mps.core.query.structure.MqlPackage","queries"),new _FunctionTypes._return_P1_E0<String,SNode>(){
      public String invoke(      SNode n){
        return SPropertyOperations.getString(SNodeOperations.cast(n,"jetbrains.mps.lang.core.structure.INamedConcept"),"name");
      }
    }
));
  }
  return outer;
}
