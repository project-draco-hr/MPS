{
  TraceNodeUI phaseNode=new TraceNodeUI(String.format("Phase %s->%s",ph.input.getModelName(),ph.output.getModelName()),Icons.COLLECTION,null);
  MultiMap<Pair<SNodeId,SNodeId>,TraceNodeUI> grouped=new MultiMap<Pair<SNodeId,SNodeId>,TraceNodeUI>();
  for (  Element e : changes) {
    grouped.putValue(new Pair<SNodeId,SNodeId>(e.input,e.output),new TraceNodeUI(Kind.TEMPLATE,e.template));
  }
  for (  Pair<SNodeId,SNodeId> p : grouped.keySet()) {
    TraceNodeUI in=new TraceNodeUI(Kind.INPUT,new SNodePointer(ph.input,p.o1));
    TraceNodeUI out=new TraceNodeUI(Kind.OUTPUT,new SNodePointer(ph.output,p.o2));
    for (    TraceNodeUI n : grouped.get(p)) {
      out.addChild(n);
    }
    in.addChild(out);
    phaseNode.addChild(in);
  }
  return phaseNode;
}
