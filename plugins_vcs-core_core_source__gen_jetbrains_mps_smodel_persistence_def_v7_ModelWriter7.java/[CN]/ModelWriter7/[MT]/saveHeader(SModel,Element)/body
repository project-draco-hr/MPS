{
  if (myModelHeader != null) {
    if (myModelHeader.isDoNotGenerate()) {
      rootElement.setAttribute(SModelHeader.DO_NOT_GENERATE,Boolean.TRUE.toString());
    }
    for (    Map.Entry<String,String> en : myModelHeader.getOptionalProperties().entrySet()) {
      rootElement.setAttribute(en.getKey(),StringUtil.escapeXml(en.getValue()));
    }
  }
  Element persistenceElement=new Element(VCSPersistenceSupport.PERSISTENCE);
  persistenceElement.setAttribute(VCSPersistenceSupport.PERSISTENCE_VERSION,Integer.toString(getModelPersistenceVersion()));
  rootElement.addContent(persistenceElement);
  for (  SModuleReference languageNamespace : new SModelLegacy(sourceModel).importedLanguages()) {
    Element languageElem=new Element(VCSPersistenceSupport.LANGUAGE);
    languageElem.setAttribute(VCSPersistenceSupport.NAMESPACE,languageNamespace.toString());
    rootElement.addContent(languageElem);
  }
  for (  SModuleReference languageNamespace : sourceModel.engagedOnGenerationLanguages()) {
    Element languageElem=new Element(VCSPersistenceSupport.LANGUAGE_ENGAGED_ON_GENERATION);
    languageElem.setAttribute(VCSPersistenceSupport.NAMESPACE,languageNamespace.toString());
    rootElement.addContent(languageElem);
  }
  for (  SModuleReference devkitNamespace : sourceModel.importedDevkits()) {
    Element devkitElem=new Element(VCSPersistenceSupport.DEVKIT);
    devkitElem.setAttribute(VCSPersistenceSupport.NAMESPACE,devkitNamespace.toString());
    rootElement.addContent(devkitElem);
  }
  for (  SModel.ImportElement importElement : sourceModel.importedModels()) {
    SModelReference modelRef=importElement.getModelReference();
    myHelper.addModelReference(modelRef);
    Element elem=new Element(VCSPersistenceSupport.IMPORT_ELEMENT);
    elem.setAttribute(VCSPersistenceSupport.MODEL_IMPORT_INDEX,myHelper.getImportIndex(modelRef));
    elem.setAttribute(VCSPersistenceSupport.MODEL_UID,modelRef.toString());
    elem.setAttribute(VCSPersistenceSupport.VERSION,Integer.toString(importElement.getUsedVersion()));
    rootElement.addContent(elem);
  }
  for (  SModel.ImportElement importElement : sourceModel.getImplicitImportsSupport().getAdditionalModelVersions()) {
    SModelReference modelRef=importElement.getModelReference();
    myHelper.addModelReference(modelRef);
    Element elem=new Element(VCSPersistenceSupport.IMPORT_ELEMENT);
    elem.setAttribute(VCSPersistenceSupport.MODEL_IMPORT_INDEX,myHelper.getImportIndex(modelRef));
    elem.setAttribute(VCSPersistenceSupport.MODEL_UID,modelRef.toString());
    elem.setAttribute(VCSPersistenceSupport.VERSION,Integer.toString(importElement.getUsedVersion()));
    elem.setAttribute(VCSPersistenceSupport.IMPLICIT,"yes");
    rootElement.addContent(elem);
  }
}
