{
  if (ref.equals(myModelRef)) {
    return encode(text);
  }
  String index=MapSequence.fromMap(myModelIndex).get(ref);
  if (index == null) {
    if (log.isErrorEnabled()) {
      log.error("model " + ref + " not found in index");
    }
    return encode(text);
  }
  return new StringBuilder().append(index).append(MODEL_SEPARATOR_CHAR).append(encode(text)).toString();
}
