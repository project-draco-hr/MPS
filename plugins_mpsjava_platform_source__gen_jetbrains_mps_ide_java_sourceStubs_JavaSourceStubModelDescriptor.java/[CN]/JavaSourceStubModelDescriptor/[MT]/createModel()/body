{
  JavaParser parser=new JavaParser();
  myModel=new SModel(myModelRef);
  for (  String fileName : Sequence.fromIterable(myDataSource.getAvailableStreams())) {
    try {
      String code=readInputStream(myDataSource.openInputStream(fileName));
      JavaParser.JavaParseResult parseResult=parser.parse(code,myJavaPackage,FeatureKind.CLASS_STUB,true);
      if (ListSequence.fromList(parseResult.getNodes()).isNotEmpty()) {
        for (        SNode node : ListSequence.fromList(parseResult.getNodes())) {
          SModelOperations.addRootNode(myModel,node);
          MapSequence.fromMap(myRootsById).put(node.getSNodeId(),node);
        }
        MapSequence.fromMap(myRootsPerFile).put(fileName,SetSequence.fromSetWithValues(new HashSet<SNode>(),parseResult.getNodes()));
      }
    }
 catch (    IOException e) {
      LOG.error("Failed to read java file. " + e.getMessage(),e);
    }
catch (    JavaParseException e) {
      LOG.error("Failed to parse java file. " + e.getMessage());
    }
  }
  return myModel;
}
