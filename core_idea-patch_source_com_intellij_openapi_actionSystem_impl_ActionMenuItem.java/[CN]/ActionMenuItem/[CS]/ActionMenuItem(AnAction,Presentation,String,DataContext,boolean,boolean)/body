{
  if (action instanceof GeneratedAction) {
    myActionId=ActionManager.getInstance().getId(action);
    if (myActionId == null) {
      LOG.warning("Using ancestor of GeneratedAction in menu without action id. This can be a memleak. Class: " + action.getClass().getName());
      myAction=action;
    }
 else {
      myAction=null;
    }
  }
 else {
    myAction=action;
    myActionId=null;
  }
  myPresentation=presentation;
  myPlace=place;
  myContext=context;
  myEnableMnemonics=enableMnemonics;
  myEvent=new AnActionEvent(null,context,place,myPresentation,ActionManager.getInstance(),0);
  addActionListener(new ActionTransmitter());
  setBorderPainted(false);
  if (prepareNow) {
    init();
  }
 else {
    setText("loading...");
  }
}
