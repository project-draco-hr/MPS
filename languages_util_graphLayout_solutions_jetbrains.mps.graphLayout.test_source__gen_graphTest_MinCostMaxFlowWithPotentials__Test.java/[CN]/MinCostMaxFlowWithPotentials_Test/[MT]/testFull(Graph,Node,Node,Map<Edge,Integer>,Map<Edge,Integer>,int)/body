{
  Map<Edge,Integer> flow=MinCostMaxFlowWithPotentials.getFlow(graph,source,target,capacity,cost);
  FlowChecker.checkFlow(graph,source,target,capacity,flow,true);
  int totalCost=0;
  for (  Edge edge : ListSequence.<Edge>fromList(graph.getEdges())) {
    totalCost+=MapSequence.<Edge,Integer>fromMap(flow).get(edge) * MapSequence.<Edge,Integer>fromMap(cost).get(edge);
  }
  Assert.assertTrue(expectedCost == totalCost);
}
