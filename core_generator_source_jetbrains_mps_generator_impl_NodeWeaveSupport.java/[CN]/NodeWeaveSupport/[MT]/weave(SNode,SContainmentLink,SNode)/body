{
  TracingUtil.fillOriginalNode(myTemplateContext.getInput(),outputNodeToWeave,false);
  RoleValidator v=myGenerator.getChildRoleValidator(contextParentNode,childRole);
  Status status=v.validate(outputNodeToWeave);
  if (status != null) {
    myGenerator.getLogger().warning(myTemplateNode,status.getMessage("weave node"),status.describe(GeneratorUtil.describeInput(myTemplateContext),GeneratorUtil.describe(contextParentNode,"context parent node")));
    contextParentNode.addChild(childRole,outputNodeToWeave);
  }
 else {
    if (childRole.isMultiple()) {
      contextParentNode.addChild(childRole,outputNodeToWeave);
    }
 else {
      final Iterator<? extends SNode> children=contextParentNode.getChildren(childRole).iterator();
      if (children.hasNext()) {
        contextParentNode.removeChild(children.next());
      }
      contextParentNode.addChild(childRole,outputNodeToWeave);
    }
  }
}
