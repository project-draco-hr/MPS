{
  RoleValidationStatus status=myGenerator.validateReferent(outputNode,role,outputTargetNode);
  if (status != null) {
    status.reportProblem(true,"bad reference: ",myReferenceInfo.getErrorDescriptions());
    return false;
  }
  SModel referentNodeModel=outputTargetNode.getModel();
  if (referentNodeModel != outputNode.getModel()) {
    if (SModelStereotype.isGeneratorModel(referentNodeModel)) {
      myGenerator.getLogger().error(outputNode,"bad reference, cannot refer to a generator model: " + org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(outputTargetNode) + " for role '"+ role+ "' in "+ org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(outputNode),myReferenceInfo.getErrorDescriptions());
      return false;
    }
    if (referentNodeModel instanceof TransientSModel) {
      myGenerator.getLogger().error(outputNode,"bad reference, cannot refer to a transient model: " + org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(outputTargetNode) + " for role '"+ role+ "' in "+ org.jetbrains.mps.openapi.model.SNodeUtil.getDebugText(outputNode),myReferenceInfo.getErrorDescriptions());
      return false;
    }
  }
  return true;
}
