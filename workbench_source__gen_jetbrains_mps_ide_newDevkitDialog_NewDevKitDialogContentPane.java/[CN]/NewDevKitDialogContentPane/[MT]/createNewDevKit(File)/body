{
  File dir=new File(myThis.getDevkitDir());
  if (!(dir.exists())) {
    dir.mkdirs();
  }
  DevkitDescriptor descriptor=new DevkitDescriptor();
  descriptor.setNamespace(myThis.getDevkitName());
  FileSystemFile devkitFile=new FileSystemFile(devkitPath);
  DevkitDescriptorPersistence.saveDevKitDescriptor(descriptor,devkitFile);
  DevKit devkit=myThis.getProject().addProjectDevKit(devkitFile);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      File file=VFileSystem.toFile(VFileSystem.refreshAndGetFile(devkitPath));
      VcsMigrationUtil.addFilesToVcs(Collections.singletonList(file),false,true);
    }
  }
,ModalityState.NON_MODAL);
  return devkit;
}
