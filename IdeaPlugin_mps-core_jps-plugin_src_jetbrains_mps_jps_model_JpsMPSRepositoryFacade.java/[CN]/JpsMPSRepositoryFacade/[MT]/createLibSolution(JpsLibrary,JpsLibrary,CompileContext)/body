{
  String name=lib.getName();
  SolutionDescriptor desc=new SolutionDescriptor();
  desc.setNamespace(name);
  if (JpsJavaSdkType.INSTANCE.equals(lib.getType()) && jdk == null) {
    ModuleId jdkId=ModuleId.regular(JDK_UUID);
    MPSModuleRepository repo=MPSModuleRepository.getInstance();
    SModule existingModule=repo.getModule(jdkId);
    if (existingModule != null) {
      desc.setNamespace(existingModule.getModuleName());
      Set<MPSModuleOwner> owners=new HashSet<MPSModuleOwner>(repo.getOwners(existingModule));
      for (      MPSModuleOwner owner : owners) {
        repo.unregisterModule(existingModule,owner);
      }
    }
    desc.setId(jdkId);
  }
 else {
    desc.setId(ModuleId.foreign(name));
  }
  return new JpsLibSolution(desc,lib,jdk,ctx);
}
