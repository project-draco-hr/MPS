{
  if (repoFile != null) {
    File f=new File(repoFile);
    ModelInputStream mos=null;
    try {
      long start=System.nanoTime();
      mos=new ModelInputStream(new FileInputStream(f));
      myRepo=CachedRepositoryData.load(mos);
      if (JpsBuilderUtil.isTracingMode()) {
        context.processMessage(new CompilerMessage(MPSCompilerUtil.BUILDER_ID,Kind.INFO,"loaded " + myRepo.getModules().size() + " modules in "+ (System.nanoTime() - start) / 1000000 + " ms"));
      }
      PersistenceRegistry.getInstance().setModelRootFactory(PersistenceRegistry.DEFAULT_MODEL_ROOT,new ModelRootFactory(){
        @Override public ModelRoot create(){
          return new CachedDefaultModelRoot(myRepo);
        }
      }
);
      PersistenceRegistry.getInstance().setModelRootFactory(PersistenceRegistry.JAVA_CLASSES_ROOT,new ModelRootFactory(){
        @Override public ModelRoot create(){
          return new CachedJavaClassStubsModelRoot(myRepo);
        }
      }
);
      start=System.nanoTime();
      for (      CachedModuleData data : myRepo.getModules()) {
        ModuleRepositoryFacade.createModule(data.getHandle(),this);
      }
      if (JpsBuilderUtil.isTracingMode()) {
        context.processMessage(new CompilerMessage(MPSCompilerUtil.BUILDER_ID,Kind.INFO,"instantiated " + myRepo.getModules().size() + " modules in "+ (System.nanoTime() - start) / 1000000 + " ms"));
      }
      return;
    }
 catch (    IOException e) {
      context.processMessage(new CompilerMessage(MPSCompilerUtil.BUILDER_ID,e));
      context.processMessage(new CompilerMessage(MPSCompilerUtil.BUILDER_ID,Kind.WARNING,"cannot load cache, generation may be slow"));
    }
 finally {
      jetbrains.mps.util.FileUtil.closeFileSafe(mos);
    }
  }
 else   if (languages != null) {
  }
  context.processMessage(new CompilerMessage(MPSCompilerUtil.BUILDER_ID,Kind.WARNING,"cannot start MPS, no repository provided"));
}
