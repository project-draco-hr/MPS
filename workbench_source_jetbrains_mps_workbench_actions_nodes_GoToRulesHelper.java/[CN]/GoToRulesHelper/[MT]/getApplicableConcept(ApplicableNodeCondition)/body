{
  if (applicableNode instanceof jetbrains.mps.lang.typesystem.structure.ConceptReference) {
    jetbrains.mps.lang.typesystem.structure.ConceptReference conceptReference=(jetbrains.mps.lang.typesystem.structure.ConceptReference)applicableNode;
    return BaseAdapter.fromAdapter(conceptReference.getConcept());
  }
 else   if (applicableNode instanceof PatternCondition) {
    BaseConcept baseConcept=((PatternCondition)applicableNode).getPattern().getPatternNode();
    if (baseConcept == null)     return null;
    return baseConcept.getNode().getConceptDeclarationNode();
  }
 else {
    return null;
  }
}
