{
  editorComponent.relayout();
  final NodeHighlightManager highlightManager=editorComponent.getHighlightManager();
  highlightManager.rebuildMessages();
  for (Iterator<ChangeEditorMessage> iterator=changes.iterator(); iterator.hasNext(); ) {
    ChangeEditorMessage change=iterator.next();
    if (highlightManager.getCell(change) == null) {
      iterator.remove();
    }
  }
  Collections.sort(changes,new Comparator<ChangeEditorMessage>(){
    public int compare(    ChangeEditorMessage o1,    ChangeEditorMessage o2){
      return highlightManager.getCell(o1).getY() - highlightManager.getCell(o2).getY();
    }
  }
);
  ChangesBlock block=null;
  for (  ChangeEditorMessage m : changes) {
    System.out.println(m.getChange());
    EditorCell cell=highlightManager.getCell(m);
    if (block == null) {
      block=createChangeBlock(editorComponent,changes);
    }
 else {
      if (block.getY2() < cell.getY()) {
        editorComponent.addChanges(block);
        block=createChangeBlock(editorComponent,changes);
        System.out.println("------");
      }
    }
    block.addChange(m,cell);
  }
  if (block != null) {
    System.out.println("------");
    editorComponent.addChanges(block);
  }
}
