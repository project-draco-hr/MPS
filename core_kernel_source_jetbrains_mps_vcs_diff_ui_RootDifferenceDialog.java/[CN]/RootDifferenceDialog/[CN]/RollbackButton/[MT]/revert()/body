{
  ModelAccess.instance().runWriteActionInCommand(new Runnable(){
    public void run(){
      HashSet<SNodeId> notAppliedNodes=new HashSet<SNodeId>();
      for (      Change change : myChanges) {
        notAppliedNodes.add(change.getAffectedNodeId());
      }
      HashSet<Change> appliedChanges=new HashSet<Change>();
      MultiMap<SNodeId,Change> dependenciesMap=getChangeDependencies(myChanges);
      for (      ChangeEditorMessage m : myChangeMessages) {
        applyChange(dependenciesMap,appliedChanges,notAppliedNodes,m.getChange());
      }
    }
  }
);
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      rebuildChangeBlocks();
    }
  }
);
}
