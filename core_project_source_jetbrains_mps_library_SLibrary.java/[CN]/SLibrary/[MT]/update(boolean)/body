{
  ModelAccess.assertLegalWrite();
  List<ModuleHandle> moduleHandles=Collections.unmodifiableList(ModulesMiner.getInstance().collectModules(file,refreshFiles));
  myHandles.set(moduleHandles);
  List<SModule> loaded=new ArrayList<SModule>();
  for (  ModuleHandle moduleHandle : moduleHandles) {
    SModule module=ModuleRepositoryFacade.createModule(moduleHandle,this);
    if (module != null) {
      loaded.add(module);
    }
  }
  for (  SModule module : loaded) {
    ((AbstractModule)module).onModuleLoad();
  }
}
