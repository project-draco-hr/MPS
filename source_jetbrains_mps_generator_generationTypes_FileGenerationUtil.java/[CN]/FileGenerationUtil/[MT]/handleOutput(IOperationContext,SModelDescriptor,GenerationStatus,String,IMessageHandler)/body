{
  if (outputDir == null)   throw new RuntimeException("Unspecified output path. Please specify one.");
  File outputRootDirectory=new File(outputDir);
  GeneratorManager gm=context.getProject().getComponentSafe(GeneratorManager.class);
  Map<SNode,String> outputNodeContents=new LinkedHashMap<SNode,String>();
  if (generateText(context,status,outputNodeContents,messages)) {
    System.out.println("model = " + sm.getModelUID());
    int yesNo=JOptionPane.showConfirmDialog(context.getMainFrame(),"Generated code isn't compilable." + "" + "Are you sure that you want generate file from it?","Generated Code Isn't Compilable",JOptionPane.YES_NO_OPTION);
    if (yesNo == JOptionPane.NO_OPTION)     return;
  }
  Set<File> generatedFiles=new HashSet<File>();
  Set<File> directories=new HashSet<File>();
  generateFiles(status,sm,outputRootDirectory,gm,outputNodeContents,generatedFiles,directories);
  IProjectHandler handler=context.getProject().getProjectHandler();
  if (handler != null) {
    try {
      handler.addFilesToVCS(new ArrayList<File>(generatedFiles));
    }
 catch (    RemoteException e) {
      e.printStackTrace();
    }
  }
  cleanUp(context,generatedFiles,directories);
}
