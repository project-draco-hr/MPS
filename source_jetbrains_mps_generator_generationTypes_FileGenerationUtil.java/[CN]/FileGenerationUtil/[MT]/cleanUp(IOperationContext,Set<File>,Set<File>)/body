{
  List<File> filesToDelete=new ArrayList<File>();
  for (  File dir : directories) {
    for (    File outputDirectoryFile : dir.listFiles()) {
      if (!outputDirectoryFile.isDirectory() && !outputDirectoryFile.isHidden()) {
        if (!generatedFiles.contains(outputDirectoryFile)) {
          filesToDelete.add(outputDirectoryFile);
        }
      }
    }
  }
  IProjectHandler projectHandler=context.getProject().getProjectHandler();
  if (projectHandler != null) {
    try {
      projectHandler.deleteFilesAndRemoveFromVCS(filesToDelete);
    }
 catch (    RemoteException ex) {
      GenerateFilesGenerationType.LOG.error(ex);
    }
  }
 else {
    for (    File file : filesToDelete) {
      file.delete();
    }
  }
}
