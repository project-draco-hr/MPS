{
  final Wrappers._T<SModel> model=new Wrappers._T<SModel>();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      SNode editedNode=myEditorComponent.getEditedNode();
      if (editedNode == null) {
        return;
      }
      model.value=editedNode.getModel();
      if (model.value == null) {
        return;
      }
    }
  }
);
  if (model.value == null) {
    return null;
  }
  final SNodeId affectedNodeId=change.getAffectedNodeId();
  MessageTarget messageTarget=change.getMessageTarget();
  if (affectedNodeId == null || messageTarget == null) {
    return null;
  }
  final Wrappers._T<SNode> node=new Wrappers._T<SNode>(model.value.getNodeById(affectedNodeId));
  if (node.value == null) {
    if (change.getChangeType() == ChangeType.DELETE) {
      ModelAccess.instance().runReadAction(new Runnable(){
        public void run(){
          node.value=model.value.getNodeById(myModelChangesManager.getBaseParentId(affectedNodeId));
        }
      }
);
      if (node.value == null) {
        return null;
      }
    }
 else {
      return null;
    }
  }
  final Wrappers._boolean isOurChange=new Wrappers._boolean();
  ModelAccess.instance().runReadAction(new Runnable(){
    public void run(){
      isOurChange.value=myEditorComponent.getEditedNode().isAncestorOf(node.value);
    }
  }
);
  if (!(isOurChange.value)) {
    return null;
  }
  ChangeType type=change.getChangeType();
  Color c;
  if (type == ChangeType.ADD) {
    c=HIGHLIGHT_COLOR_ADDED;
  }
 else   if (type == ChangeType.CHANGE) {
    c=HIGHLIGHT_COLOR_CHANGED;
  }
 else   if (type == ChangeType.DELETE) {
    c=HIGHLIGHT_COLOR_DELETED;
  }
 else {
    return null;
  }
  if (change instanceof AddRootChange) {
    return null;
  }
  if (MapSequence.fromMap(myChangesMessages).containsKey(change)) {
    return null;
  }
  EditorComponentChangesHighligher.ChangeEditorMessage message=new EditorComponentChangesHighligher.ChangeEditorMessage(change,node.value,c,messageTarget);
  if (myEditorComponent == null) {
    return null;
  }
  MapSequence.fromMap(myChangesMessages).put(change,message);
  return message;
}
