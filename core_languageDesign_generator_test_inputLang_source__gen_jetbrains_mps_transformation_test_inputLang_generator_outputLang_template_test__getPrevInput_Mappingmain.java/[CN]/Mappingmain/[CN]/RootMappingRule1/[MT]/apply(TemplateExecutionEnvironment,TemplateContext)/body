{
  final String mappingName="ROOT INPUT";
  if (!(QueriesGenerated.baseMappingRule_Condition_1202338801829(environment.getOperationContext(),new BaseMappingRuleContext(context.getInput(),null,null)))) {
    return null;
  }
  final SNode tnode1=new SNode(null,"jetbrains.mps.transformation.test.outputLang.structure.OutputRoot",false);
  tnode1.setProperty("name","OutputRoot_2");
  tnode1.setProperty("text","'getPrevInputTest' output root (2)");
{
    final Iterable<SNode> sourcelist2=QueriesGenerated.sourceNodesQuery_1202338467105(null,new SourceSubstituteMacroNodesContext(context.getInput(),null,null,context,null));
    final List<SNode> tlist2=new ArrayList();
    for (    SNode itnode2 : sourcelist2) {
      if (itnode2 == null) {
        continue;
      }
      TemplateContext context2=context.subContext("LEVEL 1",itnode2);
      final Iterable<SNode> sourcelist3=QueriesGenerated.sourceNodesQuery_1202338467112(null,new SourceSubstituteMacroNodesContext(context2.getInput(),null,null,context2,null));
      final List<SNode> tlist3=new ArrayList();
      for (      SNode itnode3 : sourcelist3) {
        if (itnode3 == null) {
          continue;
        }
        TemplateContext context3=context2.subContext("LEVEL 2",itnode3);
        final Iterable<SNode> sourcelist4=QueriesGenerated.sourceNodesQuery_1202338467119(null,new SourceSubstituteMacroNodesContext(context3.getInput(),null,null,context3,null));
        final List<SNode> tlist4=new ArrayList();
        for (        SNode itnode4 : sourcelist4) {
          if (itnode4 == null) {
            continue;
          }
          TemplateContext context4=context3.subContext(null,itnode4);
          final SNode tnode5=new SNode(null,"jetbrains.mps.transformation.test.outputLang.structure.OutputNode",false);
          tnode5.setProperty("text",(String)QueriesGenerated.propertyMacro_GetPropertyValue_1202338467126(null,new PropertyMacroContext(context4.getInput(),null,null,context4,null)));
{
            final SNode sourceNode6=context.getInput();
            final List<SNode> tlist6=new ArrayList();
            if (sourceNode6 != null) {
              TemplateContext context6=context4.subContext(null,sourceNode6);
              tlist6.add(environment.insertLater(new NodeMapper(){
                public SNode map(                SNode outputNode,                TemplateContext mapContext){
                  return QueriesGenerated.mapSrcMacro_mapper_1202338546473(environment.getOperationContext(),new MapSrcMacroContext(mapContext.getInput(),null,outputNode.getParent(),mapContext,null));
                }
              }
,new PostProcessor(){
                public void process(                SNode outputNode,                TemplateContext postProcessContext){
                  QueriesGenerated.mapSrcMacro_post_mapper_1225236090395(environment.getOperationContext(),new MapSrcMacroPostProcContext(postProcessContext.getInput(),null,outputNode,postProcessContext,null));
                }
              }
,context6));
            }
            for (            SNode child7 : tlist6) {
              tnode5.addChild("outputChild",child7);
            }
          }
{
            final SNode sourceNode8=context.getInput();
            final List<SNode> tlist8=new ArrayList();
            if (sourceNode8 != null) {
              TemplateContext context8=context4.subContext(null,sourceNode8);
              tlist8.add(environment.insertLater(new NodeMapper(){
                public SNode map(                SNode outputNode,                TemplateContext mapContext){
                  return QueriesGenerated.mapSrcMacro_mapper_1202338683284(environment.getOperationContext(),new MapSrcMacroContext(mapContext.getInput(),null,outputNode.getParent(),mapContext,null));
                }
              }
,null,context8));
            }
            for (            SNode child9 : tlist8) {
              tnode5.addChild("outputChild",child9);
            }
          }
{
            final SNode sourceNode10=context.getInput();
            final List<SNode> tlist10=new ArrayList();
            if (sourceNode10 != null) {
              TemplateContext context10=context4.subContext(null,sourceNode10);
              tlist10.add(environment.insertLater(new NodeMapper(){
                public SNode map(                SNode outputNode,                TemplateContext mapContext){
                  return QueriesGenerated.mapSrcMacro_mapper_1202338740199(environment.getOperationContext(),new MapSrcMacroContext(mapContext.getInput(),null,outputNode.getParent(),mapContext,null));
                }
              }
,new PostProcessor(){
                public void process(                SNode outputNode,                TemplateContext postProcessContext){
                  QueriesGenerated.mapSrcMacro_post_mapper_1225236639046(environment.getOperationContext(),new MapSrcMacroPostProcContext(postProcessContext.getInput(),null,outputNode,postProcessContext,null));
                }
              }
,context10));
            }
            for (            SNode child11 : tlist10) {
              tnode5.addChild("outputChild",child11);
            }
          }
          if (tnode5 != null) {
            tlist4.add(tnode5);
          }
        }
        if (tlist4 != null) {
          tlist3.addAll(tlist4);
        }
      }
      if (tlist3 != null) {
        tlist2.addAll(tlist3);
      }
    }
    for (    SNode child12 : tlist2) {
      tnode1.addChild("outputChild",child12);
    }
  }
  return TemplateUtil.singletonList(tnode1);
}
