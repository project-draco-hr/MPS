{
  final QueryExecutor queryExecutor=context.getEnvironment().getQueryExecutor();
  for (  CaseRuntime switchCase : getCases(context.getEnvironment())) {
    if (queryExecutor.evaluate(switchCase.condition,new InlineSwitchCaseContext(context,switchCase.nodeReference))) {
      return switchCase.consequence.processRuleConsequence(context);
    }
  }
  SNode defaultConsequence=RuleUtil.getInlineSwitch_defaultConsequence(mySwitchNode);
  if (defaultConsequence == null) {
    IGeneratorLogger log=context.getEnvironment().getLogger();
    log.error(mySwitchNode.getReference(),"no default consequence in switch",GeneratorUtil.describeInput(context));
    throw new GenerationFailureException("no default consequence in switch");
  }
 else {
    RuleConsequenceProcessor rcp=RuleConsequenceProcessor.prepare(defaultConsequence);
    return rcp.processRuleConsequence(context);
  }
}
