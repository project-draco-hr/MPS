{
  System.setProperty("sun.swing.enableImprovedDragGesture","");
  if (!isHeadless()) {
    AppUIUtil.updateFrameIcon(JOptionPane.getRootFrame());
  }
  if (SystemInfo.isWindows && !SystemInfo.isWindows9x) {
    final Logger LOG=Logger.getInstance(LOG_CATEGORY);
    try {
      if (SystemInfo.isAMD64) {
        System.loadLibrary("focuskiller64");
      }
 else {
        System.loadLibrary("focuskiller");
      }
      LOG.info("Using \"FocusKiller\" library to prevent focus stealing.");
    }
 catch (    Throwable e) {
      LOG.info("\"FocusKiller\" library not found or there were problems loading it.",e);
    }
  }
  if (IdeMain.getTestMode() == TestMode.NO_TEST) {
    LicenseManager.getInstance().startUp(new LicenseManager.StartupAction(){
      public void proceed(){
        startApplication(args);
      }
      public void cancel(){
        System.exit(-1);
      }
    }
);
  }
 else {
    startApplication(args);
  }
}
