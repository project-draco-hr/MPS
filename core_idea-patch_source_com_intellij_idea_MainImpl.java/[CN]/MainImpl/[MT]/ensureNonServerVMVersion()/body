{
  if (InternalFlag.isInternalMode())   return true;
  String vmName=System.getProperty("java.vm.name");
  if (!vmName.toLowerCase().contains("server"))   return true;
  if (isHeadless) {
    Logger LOG=Logger.getInstance(LOG_CATEGORY);
    LOG.error("MPS can't be started in headless mode under server VM: " + vmName);
    return false;
  }
  Object[] choices={"Exit","Start MPS"};
  int result=JOptionPane.showOptionDialog(null,"<html>MPS was launched under <b>server VM</b>: " + vmName + ".<br>"+ "This will result in MPS crash with PermGen space error after some time.<br> "+ "<br>"+ "Do you want to start MPS under this VM?</html>","Compatibility Error",JOptionPane.YES_NO_OPTION,JOptionPane.ERROR_MESSAGE,null,choices,choices[0]);
  return result != 0;
}
