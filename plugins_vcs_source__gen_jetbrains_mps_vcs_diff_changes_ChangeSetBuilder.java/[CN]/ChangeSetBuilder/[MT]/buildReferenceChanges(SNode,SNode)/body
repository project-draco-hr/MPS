{
  final Map<String,SReference> oldReferences=MapSequence.fromMap(new HashMap<String,SReference>());
  final Map<String,SReference> newReferences=MapSequence.fromMap(new HashMap<String,SReference>());
  Sequence.fromIterable(SNodeOperations.getReferences(oldNode)).visitAll(new IVisitor<SReference>(){
    public void visit(    SReference ref){
      MapSequence.fromMap(oldReferences).put(SLinkOperations.getRole(ref),ref);
    }
  }
);
  Sequence.fromIterable(SNodeOperations.getReferences(newNode)).visitAll(new IVisitor<SReference>(){
    public void visit(    SReference ref){
      MapSequence.fromMap(newReferences).put(SLinkOperations.getRole(ref),ref);
    }
  }
);
  for (  String role : SetSequence.fromSet(MapSequence.fromMap(oldReferences).keySet()).union(SetSequence.fromSet(MapSequence.fromMap(newReferences).keySet()))) {
    SReference oldReference=MapSequence.fromMap(oldReferences).get(role);
    SReference newReference=MapSequence.fromMap(newReferences).get(role);
    if (!(ObjectUtils.equals(check_nbyrtw_a0a2a4a1(SLinkOperations.getTargetNode(oldReference)),check_nbyrtw_b0a2a4a1(SLinkOperations.getTargetNode(newReference))))) {
      SModelReference targetModel=check_nbyrtw_a0a0c0e0b(SNodeOperations.getModel(SLinkOperations.getTargetNode(newReference)));
      if (SNodeOperations.getModel(SLinkOperations.getTargetNode(newReference)) == SNodeOperations.getModel(newNode)) {
        targetModel=null;
      }
      myChangeSet.add(new SetReferenceChange(myChangeSet,oldNode.getSNodeId(),role,targetModel,check_nbyrtw_e0a0a2a2a4a1(SLinkOperations.getTargetNode(newReference)),SLinkOperations.getResolveInfo(newReference)));
    }
  }
}
