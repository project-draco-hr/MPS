{
  Set<Pair<SModel,String>> packs=SetSequence.fromSetWithValues(new HashSet<Pair<SModel,String>>(),((List<Pair<SModel,String>>)MapSequence.fromMap(_params).get("packs")));
  Iterable<SNode> nodeFromPacks=SetSequence.fromSet(packs).translate(new ITranslator2<Pair<SModel,String>,SNode>(){
    public Iterable<SNode> translate(    final Pair<SModel,String> pack){
      return ListSequence.fromList(SModelOperations.getRoots(((SModel)pack.o1),null)).where(new IWhereFilter<SNode>(){
        public boolean accept(        SNode node){
          return SPropertyOperations.getString(node,"virtualPackage") != null && SPropertyOperations.getString(node,"virtualPackage").startsWith(pack.o2);
        }
      }
);
    }
  }
);
  return Sequence.fromIterable(nodeFromPacks).union(ListSequence.fromList(((List<SNode>)MapSequence.fromMap(_params).get("nodes")))).where(new IWhereFilter<SNode>(){
    public boolean accept(    SNode it){
      return !(check_v2o7qu_a0a0a0a2a0(it.getModel()));
    }
  }
);
}
