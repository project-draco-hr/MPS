{
  SNode newAnnotation=SConceptOperations.createNewNode("jetbrains.mps.lang.test.structure.TestCellAnnotation",null);
  EditorCell contextCell=editorContext.getContextCell();
  SPropertyOperations.set(newAnnotation,"cellId",contextCell.getCellId());
  if (contextCell instanceof EditorCell_Label) {
    SPropertyOperations.set(newAnnotation,"caretPosition","" + ((EditorCell_Label)contextCell).getCaretPosition());
  }
  SLinkOperations.setTarget(node,AttributesRolesUtil.childRoleFromAttributeRole("testNode"),newAnnotation,true);
  editorContext.select(newAnnotation);
}
