{
  if (!(module instanceof Language)) {
    return;
  }
  SModel migModel=LanguageAspect.MIGRATION.get(((Language)module));
  if (migModel == null) {
    return;
  }
  if (!(migModel.isLoaded())) {
    return;
  }
  boolean hasIncompleteScript=false;
  List<Integer> scripts=new ArrayList<Integer>();
  for (  SNode root : SModelOperations.roots(migModel,MetaAdapterFactory.getConcept(new UUID(-8037690291156860282l,-7505894832713754871l),8352104482584315555l,"jetbrains.mps.lang.migration.structure.MigrationScript"))) {
    if (root.getProperty(MetaAdapterFactory.getProperty(new UUID(-8037690291156860282l,-7505894832713754871l),8352104482584315555l,5820409521797704727l,"fromVersion")) == null) {
      hasIncompleteScript=true;
      continue;
    }
    scripts.add(SPropertyOperations.getInteger(root,MetaAdapterFactory.getProperty(new UUID(-8037690291156860282l,-7505894832713754871l),8352104482584315555l,5820409521797704727l,"fromVersion")));
  }
  if (scripts.isEmpty()) {
    return;
  }
  Integer[] scriptVersions=scripts.toArray(new Integer[scripts.size()]);
  Arrays.sort(scriptVersions);
  int currentVersion=((Language)module).getLanguageVersion();
  for (int index=1; index < scriptVersions.length; index++) {
    if (scriptVersions[index - 1].equals(scriptVersions[index])) {
      errors.add("Some scripts have the same 'from' version: " + scriptVersions[index - 1]);
    }
 else     if (scriptVersions[index - 1] + 1 != scriptVersions[index]) {
      int noscriptVersion=scriptVersions[index - 1] + 1;
      errors.add("No script found for version " + noscriptVersion);
    }
  }
  if (scriptVersions[scriptVersions.length - 1] != currentVersion - 1 && !(hasIncompleteScript)) {
    errors.add("Can't find a migration script corresponding to current language version (" + currentVersion + ")");
  }
}
