{
  Map<Tuples._2<SNodeId,String>,List<NodeGroupChange>> nodeRoleToGroupChanges=MapSequence.fromMap(new HashMap<Tuples._2<SNodeId,String>,List<NodeGroupChange>>());
  for (  NodeGroupChange change : Sequence.fromIterable(changeSet.getModelChanges(NodeGroupChange.class))) {
    Tuples._2<SNodeId,String> nodeRole=MultiTuple.<SNodeId,String>from(change.getParentNodeId(),change.getRole());
    if (!(MapSequence.fromMap(nodeRoleToGroupChanges).containsKey(nodeRole))) {
      MapSequence.fromMap(nodeRoleToGroupChanges).put(nodeRole,ListSequence.fromList(new ArrayList<NodeGroupChange>()));
    }
    ListSequence.fromList(MapSequence.fromMap(nodeRoleToGroupChanges).get(nodeRole)).addElement(change);
  }
  return nodeRoleToGroupChanges;
}
