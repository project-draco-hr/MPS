{
  File ideaPatchJar=new File(homePath + File.separator + "lib"+ File.separator+ "idea-patch.jar");
  if (ideaPatchJar.exists()) {
    classPath.add(ideaPatchJar.toURI().toURL());
  }
  File mpsJar=new File(homePath + File.separator + "lib"+ File.separator+ "mps.jar");
  if (mpsJar.exists()) {
    classPath.add(mpsJar.toURI().toURL());
  }
  String selfRoot=PathManager.getResourceRoot(ClassloaderUtil.class,"/" + ClassloaderUtil.class.getName().replace('.','/') + ".class");
  URL selfRootUrl=new File(selfRoot).getAbsoluteFile().toURI().toURL();
  File baseLanguageFolder=new File(homePath + File.separator + "core"+ File.separator+ "baseLanguage");
  ClassloaderUtil.addLibraries(classPath,baseLanguageFolder,selfRootUrl);
  File languageDesignFolder=new File(homePath + File.separator + "core"+ File.separator+ "languageDesign");
  ClassloaderUtil.addLibraries(classPath,languageDesignFolder,selfRootUrl);
}
