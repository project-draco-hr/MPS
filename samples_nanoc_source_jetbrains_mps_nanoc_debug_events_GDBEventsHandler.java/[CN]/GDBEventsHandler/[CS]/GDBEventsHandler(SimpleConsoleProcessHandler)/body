{
  myProcessHandler=gdbProcess;
  myProcessHandler.addProcessListener(new ProcessAdapter(){
    @Override public void onTextAvailable(    ProcessEvent event,    Key outputType){
      String text=event.getText();
      GDBAnswerProducer producer=new GDBAnswerProducer(text);
      GDBAnswer gdbAnswer=producer.getGDBAnswer();
      if (producer.hasError() || gdbAnswer == null) {
        return;
      }
      if (gdbAnswer instanceof AsyncAnswer) {
        AsyncAnswer answer=(AsyncAnswer)gdbAnswer;
        if (answer.isExec() && answer.isStopped()) {
          GDBValue reasonRaw=answer.getResults().getPropertyValue(REASON);
          String reason=reasonRaw instanceof StringValue ? ((StringValue)reasonRaw).getString() : null;
          if (REASON_BP_HIT.equals(reason)) {
            fireBreakpointHit(answer);
            return;
          }
          if (REASON_EXITED_NORMALLY.equals(reason) || REASON_EXITED.equals(reason)) {
            fireProcessTerminated();
            return;
          }
        }
      }
      if (gdbAnswer instanceof StreamAnswer) {
        StreamAnswer streamAnswer=(StreamAnswer)gdbAnswer;
        myPendingStreamAnswers.add(streamAnswer);
      }
      if (gdbAnswer instanceof ResultAnswer) {
        ResultAnswer resultAnswer=(ResultAnswer)gdbAnswer;
        List<StreamAnswer> receivedStreamAnswers=new ArrayList<StreamAnswer>(myPendingStreamAnswers);
        myPendingStreamAnswers.clear();
        fireResultReceived(resultAnswer,receivedStreamAnswers);
        return;
      }
    }
    @Override public void processTerminated(    ProcessEvent event){
      fireGDBProcessTerminated();
    }
  }
);
}
