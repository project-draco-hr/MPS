{
  if (deep > 16) {
    return false;
  }
  for (  SNode mpe : SNodeOperations.getDescendants(regexp,"jetbrains.mps.baseLanguage.regexp.structure.MatchParensRegexp",true,new String[]{})) {
    if (mpe == SLinkOperations.getTarget(ref,"match",false)) {
      return true;
    }
  }
  for (  SNode declref : SNodeOperations.getDescendants(regexp,"jetbrains.mps.baseLanguage.regexp.structure.RegexpDeclarationReferenceRegexp",true,new String[]{})) {
    if (SLinkOperations.getTarget(declref,"regexp",false) != null && belongs(ref,SLinkOperations.getTarget(declref,"regexp",false),deep + 1)) {
      return true;
    }
  }
  return false;
}
