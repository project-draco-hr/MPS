{
  if (dialogListener != null) {
    try {
      SwingUtilities.invokeAndWait(new Runnable(){
        public void run(){
          dialogListener.beforeDialogShown();
        }
      }
);
    }
 catch (    InterruptedException ignore) {
    }
catch (    InvocationTargetException ignore) {
    }
  }
  String[] options=Sequence.fromIterable(query.options()).<String>select(new ISelector<T,String>(){
    public String select(    T o){
      return o.getText();
    }
  }
).toGenericArray(String.class);
  int res=JOptionPane.showOptionDialog(context.getMainFrame(),query.getText(),query.getName().toString(),JOptionPane.DEFAULT_OPTION,JOptionPane.QUESTION_MESSAGE,null,options,null);
  if (res == JOptionPane.CLOSED_OPTION) {
    return query.voidOption();
  }
  return ListSequence.fromList(Sequence.fromIterable(query.options()).toListSequence()).getElement(res);
}
