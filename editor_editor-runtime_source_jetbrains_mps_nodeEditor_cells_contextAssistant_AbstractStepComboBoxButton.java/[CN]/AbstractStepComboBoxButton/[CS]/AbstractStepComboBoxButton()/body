{
  setModel(new MyButtonModel());
  setHorizontalAlignment(LEFT);
  putClientProperty("styleCombo",Boolean.TRUE);
  Insets margins=getMargin();
  setMargin(JBUI.insets(margins.top,2,margins.bottom,2));
  setFont(UIUtil.getLabelFont());
  setOpaque(true);
  InputMap inputMap=getInputMap();
  inputMap.put(KeyStroke.getKeyStroke("DOWN"),"pressed");
  inputMap.put(KeyStroke.getKeyStroke("released DOWN"),"released");
  addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (!myForcePressed) {
        IdeFocusManager.getGlobalInstance().doWhenFocusSettlesDown(new Runnable(){
          @Override public void run(){
            showPopup();
          }
        }
);
      }
    }
  }
);
  addMouseListener(new MouseAdapter(){
    @Override public void mousePressed(    final MouseEvent e){
      if (SwingUtilities.isLeftMouseButton(e)) {
        e.consume();
        doClick();
      }
    }
    @Override public void mouseReleased(    MouseEvent e){
      dispatchEventToPopup(e);
    }
  }
);
  addMouseMotionListener(new MouseMotionListener(){
    @Override public void mouseDragged(    MouseEvent e){
      mouseMoved(MouseEventAdapter.convert(e,e.getComponent(),MouseEvent.MOUSE_MOVED,e.getWhen(),e.getModifiers() | e.getModifiersEx(),e.getX(),e.getY()));
    }
    @Override public void mouseMoved(    MouseEvent e){
      dispatchEventToPopup(e);
    }
  }
);
}
