{
  ModelAccess.instance().runUndoTransparentCommand(new Runnable(){
    @Override public void run(){
      for (      Entry<NodePtr,NodePtr> rename : myRenames.entrySet()) {
        NodePtr oldNode=rename.getKey();
        NodePtr newNode=rename.getValue();
        Set<RenameHandler> usages=myUsages.get(oldNode);
        if (usages == null)         continue;
        for (        RenameHandler handler : usages) {
          handler.handleRename(oldNode,newNode);
        }
      }
    }
  }
,new MPSProject(myProject));
}
