{
  final MPSEditorStateWrapper state=new MPSEditorStateWrapper();
  if (!isDisposed() && myNodeEditor != null) {
    ModelAccess.instance().runReadAction(new Runnable(){
      @Override public void run(){
        state.setEditorState(myNodeEditor.saveState());
      }
    }
);
  }
  state.setLevel(level);
  return state;
}
