{
  Set<IRefactoring> result=new HashSet<IRefactoring>();
{
    SModel scriptsModelDescriptor=LanguageAspect.SCRIPTS.get(language);
    if (scriptsModelDescriptor != null) {
      SModel scriptsModel=scriptsModelDescriptor;
      String packageName=SNodeOperations.getModelLongName(scriptsModel);
    }
  }
  SModel refModelDescriptor=LanguageAspect.REFACTORINGS.get(language);
  if (refModelDescriptor != null) {
    SModel refactoringsModel=refModelDescriptor;
    String packageName=SNodeOperations.getModelLongName(refactoringsModel);
    for (    SNode refactoring : SModelOperations.roots(refactoringsModel,MetaAdapterFactory.getConcept(new UUID(4525410110408967646l,-8616490689189267646l),6895093993902236229l,"jetbrains.mps.lang.refactoring.structure.Refactoring"))) {
      try {
        String fqName=packageName + "." + SPropertyOperations.getString(refactoring,MetaAdapterFactory.getProperty(new UUID(-3554657779850784990l,-7236703803128771572l),1169194658468l,1169194664001l,"name"));
        Class<IRefactoring> cls=ClassLoaderManager.getInstance().getClass(language,fqName);
        if (cls == null) {
          LOG.error("Can't find " + fqName);
          continue;
        }
        Constructor<IRefactoring> constructor=cls.getConstructor();
        constructor.setAccessible(false);
        result.add(constructor.newInstance());
      }
 catch (      Throwable t) {
        LOG.error(null,t);
      }
    }
  }
  return result;
}
