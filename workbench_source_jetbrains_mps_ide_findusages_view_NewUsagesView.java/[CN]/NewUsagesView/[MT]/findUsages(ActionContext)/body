{
  CommandProcessor.instance().executeLightweightCommand(new Runnable(){
    public void run(){
      SNode semanticNode=context.getNode();
      SNode operationNode=EditorUtil.getOperationNodeWRTReference(context,semanticNode);
      FindUsagesDialog findUsagesDialog=new FindUsagesDialog(myDefaultOptions,operationNode,context);
      findUsagesDialog.showDialog();
      if (!findUsagesDialog.isCancelled()) {
        FindUsagesOptions options=findUsagesDialog.getResult();
        myDefaultOptions=options;
        IResultProvider provider=options.getOption(FindersOptions.class).getResult(operationNode,context);
        SearchQuery query=options.getOption(QueryOptions.class).getResult(operationNode,context);
        ViewOptions viewOptions=options.getOption(ViewOptions.class);
        findUsages(provider,query,true,viewOptions.myShowOneResult,viewOptions.myNewTab);
      }
    }
  }
);
}
