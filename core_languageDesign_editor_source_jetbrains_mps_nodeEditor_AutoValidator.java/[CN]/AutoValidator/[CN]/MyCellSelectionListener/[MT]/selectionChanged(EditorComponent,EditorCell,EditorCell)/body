{
  if (editor.isCellSwapInProgress())   return;
  if (oldSelection != null && (!!oldSelection.isErrorState() || oldSelection instanceof EditorCell_STHint)) {
    final SNode node=oldSelection.getSNode();
    final CellInfo cellInfo=oldSelection.getCellInfo();
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        ModelAccess.instance().runWriteActionInCommand(new Runnable(){
          public void run(){
            if (oldSelection.isErrorState()) {
              EditorCell cell=cellInfo.findCell(editor);
              if (cell != null) {
                Object memento=editor.getEditorContext().createMemento();
                cell.validate(true,false);
                editor.flushEvents();
                editor.getEditorContext().setMemento(memento);
              }
            }
            if (oldSelection instanceof EditorCell_STHint) {
              SNodeEditorUtil.removeRightTransformHint(node);
              SNodeEditorUtil.removeLeftTransformHint(node);
            }
          }
        }
);
      }
    }
);
  }
}
