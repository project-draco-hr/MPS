{
  try {
    final String oldName=RenameFileOrDirectory_Action.this.selectedFile.getName();
    final String oldNameWithoutExtension=RenameFileOrDirectory_Action.this.selectedFile.getNameWithoutExtension();
    final JTextField[] textField=new JTextField[1];
    DialogWrapper dialog=new DialogWrapper(null){
{
        this.setTitle("Rename");
        this.init();
      }
      @Nullable protected JComponent createCenterPanel(){
        JPanel result=new JPanel(new BorderLayout());
        JLabel label=new JLabel("Rename file " + oldName + " to:");
        textField[0]=new JTextField();
        textField[0].setText(oldName);
        textField[0].setSelectionStart(0);
        textField[0].setSelectionEnd(oldNameWithoutExtension.length());
        result.add(label,BorderLayout.PAGE_START);
        result.add(textField[0],BorderLayout.CENTER);
        return result;
      }
    }
;
    dialog.show();
    if (!(dialog.isOK())) {
      return;
    }
    String newName=textField[0].getText();
    if (newName.length() == 0) {
      return;
    }
    RenameFileOrDirectory_Action.this.selectedFile.rename(null,newName);
  }
 catch (  Throwable t) {
    if (log.isErrorEnabled()) {
      log.error("User's action execute method failed. Action:" + "RenameFileOrDirectory",t);
    }
  }
}
