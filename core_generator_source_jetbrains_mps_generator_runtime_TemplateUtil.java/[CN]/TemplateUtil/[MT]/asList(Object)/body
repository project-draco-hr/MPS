{
  if (nodesOrCollectionOfNodes == null || nodesOrCollectionOfNodes.length == 0) {
    return Collections.emptyList();
  }
  int size=0;
  for (  Object o : nodesOrCollectionOfNodes) {
    if (o instanceof SNode) {
      size++;
    }
 else     if (o instanceof Collection) {
      size+=((Collection)o).size();
    }
 else     if (o == null) {
    }
 else {
      throw new IllegalArgumentException("Invalid template: unknown object in list - " + o.getClass().getCanonicalName());
    }
  }
  List<SNode> result=new ArrayList<SNode>(size);
  for (  Object o : nodesOrCollectionOfNodes) {
    if (o instanceof SNode) {
      result.add((SNode)o);
    }
 else     if (o instanceof Collection) {
      result.addAll((Collection<SNode>)o);
    }
  }
  return result;
}
