{
  List<SearchResult<ModelCheckerIssue>> results=ListSequence.<SearchResult<ModelCheckerIssue>>fromList(new ArrayList<SearchResult<ModelCheckerIssue>>());
  String title="Checking " + SModelOperations.getModelName(model) + " for unresolved references...";
  for (  SNode node : ListSequence.<SNode>fromList(SModelOperations.getNodes(model,null))) {
    if (!(progressContext.checkAndUpdateIndicator(title))) {
      break;
    }
    for (    final SReference ref : Sequence.<SReference>fromIterable(SNodeOperations.getReferences(node))) {
      if ((AttributeOperations.getAttribute(node,new IAttributeDescriptor.LinkAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.ReferenceMacro"),SLinkOperations.getRole(ref))) != null)) {
        continue;
      }
      if (ref.getTargetNodeSilently() == null) {
        addIssue(results,node,"Unresolved reference: " + SLinkOperations.getResolveInfo(ref),ModelChecker.SEVERITY_ERROR,"unresolved reference",new IModelCheckerFix(){
          public boolean doFix(){
            return Resolver.resolve1(ref,operationContext);
          }
        }
);
      }
    }
  }
  return results;
}
