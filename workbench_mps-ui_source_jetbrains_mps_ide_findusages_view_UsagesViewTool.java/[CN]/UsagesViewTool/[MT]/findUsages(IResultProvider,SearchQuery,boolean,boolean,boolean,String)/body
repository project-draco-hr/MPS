{
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      final SearchResults[] searchResults=new SearchResults[1];
      final boolean[] isCancelled=new boolean[1];
      ProgressManager.getInstance().run(new Modal(getProject(),"Searching",true){
        @Override public void run(        @NotNull final ProgressIndicator indicator){
          searchResults[0]=FindUtils.getSearchResults(new ProgressMonitorAdapter(indicator),query,provider);
          isCancelled[0]=indicator.isCanceled();
        }
      }
);
      if (!isCancelled[0]) {
        SwingUtilities.invokeLater(new Runnable(){
          @Override public void run(){
            showResults(provider,query,searchResults[0],showOne,forceNewTab,isRerunnable,notFoundMsg);
          }
        }
);
      }
    }
  }
);
}
