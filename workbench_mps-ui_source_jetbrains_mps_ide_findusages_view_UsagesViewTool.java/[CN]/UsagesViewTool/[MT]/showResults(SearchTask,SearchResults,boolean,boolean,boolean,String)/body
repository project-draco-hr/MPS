{
  final jetbrains.mps.project.Project mpsProject=ProjectHelper.toMPSProject(getProject());
  int resCount=searchResults.getSearchResults().size();
  if (resCount == 0) {
    final ToolWindowManager manager=ToolWindowManager.getInstance(getProject());
    manager.notifyByBalloon(TOOL_WINDOW_ID,MessageType.INFO,notFoundMsg,null,null);
  }
 else   if (resCount == 1 && !showOne) {
    mpsProject.getModelAccess().runWriteInEDT(new Runnable(){
      @Override public void run(){
        SNode node=((SearchResult<SNode>)searchResults.getSearchResults().get(0)).getObject();
        if (node != null) {
          NavigationSupport.getInstance().openNode(mpsProject,node,true,!(node.getModel() != null && node.getParent() == null));
        }
      }
    }
);
  }
 else {
    int index=getCurrentTabIndex();
    UsagesView usagesView=createUsageView(isRerunnable ? searchTask : null);
    UsageViewData usageViewData=new UsageViewData(usagesView,isRerunnable ? searchTask : null);
    myUsageViewsData.add(usageViewData);
    usagesView.setContents(searchResults);
    Icon icon=usagesView.getIcon();
    String caption=usagesView.getCaption();
    JComponent component=usagesView.getComponent();
    Content content=addContent(component,caption,icon,true);
    getContentManager().setSelectedContent(content);
    if (!forceNewTab) {
      closeLastUnpinnedTab(index);
    }
    openTool(true);
  }
}
