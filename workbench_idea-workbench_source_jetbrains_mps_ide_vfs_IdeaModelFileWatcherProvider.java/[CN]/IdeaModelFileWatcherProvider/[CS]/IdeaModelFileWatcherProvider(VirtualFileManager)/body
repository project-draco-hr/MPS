{
  VirtualFileManager.getInstance().addVirtualFileListener(new VirtualFileAdapter(){
    public void contentsChanged(    VirtualFileEvent event){
      if (!isEventFromSave(event)) {
        VirtualFile file=event.getFile();
        while (file != null) {
          if (invalidate(file.getPath()))           break;
          file=file.getParent();
        }
      }
    }
    public void fileDeleted(    VirtualFileEvent event){
      VirtualFile file=event.getFile();
      while (file != null) {
        if (invalidate(file.getPath()))         break;
        file=file.getParent();
      }
    }
  }
);
}
