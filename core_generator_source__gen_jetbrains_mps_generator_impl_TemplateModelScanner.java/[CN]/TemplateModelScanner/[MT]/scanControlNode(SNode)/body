{
  if (safeIsInstanceOf(node,concept_rc_InlineTemplateWithContext)) {
    scanTemplateContextNode(SLinkOperations.getTarget(SNodeOperations.cast(node,"jetbrains.mps.lang.generator.structure.InlineTemplateWithContext_RuleConsequence"),"contentNode",true));
  }
 else   if (safeIsInstanceOf(node,concept_rc_InlineTemplate)) {
    scanTemplateNode(SLinkOperations.getTarget(SNodeOperations.cast(node,"jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence"),"templateNode",true));
  }
 else   if (safeIsInstanceOf(node,concept_rule_PatternReduction)) {
    SetSequence.fromSet(myQueryLanguages).addElement("jetbrains.mps.lang.pattern");
    scanControlNode(SLinkOperations.getTarget(SNodeOperations.cast(node,"jetbrains.mps.lang.generator.structure.PatternReduction_MappingRule"),"ruleConsequence",true));
    scanQueryNode(SLinkOperations.getTarget(SNodeOperations.cast(node,"jetbrains.mps.lang.generator.structure.PatternReduction_MappingRule"),"conditionFunction",true));
  }
 else {
    if ("jetbrains.mps.lang.generator".equals(node.getConcept().getLanguage().getQualifiedName())) {
      for (      SNode child : node.getChildren()) {
        scanControlNode(child);
      }
    }
 else {
      scanQueryNode(node);
    }
  }
}
