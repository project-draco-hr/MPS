{
  for (  SNode root : myTemplateModel.getRootNodes()) {
    if (safeIsInstanceOf(root,SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.MappingConfiguration"))) {
      scanControlNode(root);
    }
 else     if (safeIsInstanceOf(root,SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.TemplateSwitch"))) {
      scanControlNode(SNodeOperations.cast(root,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x10313ed7688L,"jetbrains.mps.lang.generator.structure.TemplateSwitch")));
    }
 else     if (safeIsInstanceOf(root,SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.TemplateDeclaration"))) {
      scanTemplateContextNode(SLinkOperations.getTarget(SNodeOperations.cast(root,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xfe43cb41d0L,"jetbrains.mps.lang.generator.structure.TemplateDeclaration")),MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0xfe43cb41d0L,0xfe43de823bL,"contentNode")));
      for (      SNode n : SLinkOperations.getChildren(SNodeOperations.cast(root,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0xfe43cb41d0L,"jetbrains.mps.lang.generator.structure.TemplateDeclaration")),MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0xda3dc6e5137e9b1L,0xda3dc6e5137ea56L,"parameter"))) {
        scanControlNode(n);
      }
    }
 else     if (safeIsInstanceOf(root,SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.MappingScript"))) {
      scanQueryNode(SLinkOperations.getTarget(SLinkOperations.getTarget(SNodeOperations.cast(root,MetaAdapterFactory.getConcept(0xb401a68083254110L,0x8fd384331ff25befL,0x1165958fcd6L,"jetbrains.mps.lang.generator.structure.MappingScript")),MetaAdapterFactory.getContainmentLink(0xb401a68083254110L,0x8fd384331ff25befL,0x1165958fcd6L,0x116596b2f70L,"codeBlock")),MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x108bbca0f48L,0x108bbd29b4aL,"body")));
    }
 else {
      if ((safeNodeAttribute(root,SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.RootTemplateAnnotation")) != null)) {
        scanTemplateNode(root);
      }
    }
  }
  SetSequence.fromSet(myTargetLanguages).removeElement("jetbrains.mps.lang.generator");
  if (myTemplateModel.getRootNodes().iterator().hasNext()) {
    SetSequence.fromSet(myQueryLanguages).addElement("jetbrains.mps.lang.generator");
  }
}
