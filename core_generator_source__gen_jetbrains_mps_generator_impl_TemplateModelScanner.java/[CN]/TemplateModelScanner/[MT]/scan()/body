{
  for (  SNode root : myTemplateModel.getRootNodes()) {
    if (SNodeOperations.isInstanceOf(root,"jetbrains.mps.lang.generator.structure.MappingConfiguration")) {
      scanControlNode(root);
    }
 else     if (SNodeOperations.isInstanceOf(root,"jetbrains.mps.lang.generator.structure.TemplateSwitch")) {
      scanControlNode(SNodeOperations.cast(root,"jetbrains.mps.lang.generator.structure.TemplateSwitch"));
    }
 else     if (SNodeOperations.isInstanceOf(root,"jetbrains.mps.lang.generator.structure.TemplateDeclaration")) {
      scanTemplateContextNode(SLinkOperations.getTarget(SNodeOperations.cast(root,"jetbrains.mps.lang.generator.structure.TemplateDeclaration"),"contentNode",true));
      for (      SNode n : SLinkOperations.getTargets(SNodeOperations.cast(root,"jetbrains.mps.lang.generator.structure.TemplateDeclaration"),"parameter",true)) {
        scanControlNode(n);
      }
    }
 else     if (SNodeOperations.isInstanceOf(root,"jetbrains.mps.lang.generator.structure.MappingScript")) {
      scanQueryNode(SLinkOperations.getTarget(SLinkOperations.getTarget(SNodeOperations.cast(root,"jetbrains.mps.lang.generator.structure.MappingScript"),"codeBlock",true),"body",true));
    }
 else     if (SNodeOperations.isInstanceOf(root,"jetbrains.mps.lang.generator.structure.GeneratorDescriptor")) {
    }
 else {
      if (AttributeOperations.getAttribute(root,new IAttributeDescriptor.NodeAttribute(SConceptOperations.findConceptDeclaration("jetbrains.mps.lang.generator.structure.RootTemplateAnnotation"))) != null) {
        scanTemplateNode(root);
      }
    }
  }
  SetSequence.fromSet(myTargetLanguages).removeElement("jetbrains.mps.lang.generator");
  if (IterableUtil.asCollection(myTemplateModel.getRootNodes()).size() > 0) {
    SetSequence.fromSet(myQueryLanguages).addElement("jetbrains.mps.lang.generator");
  }
}
