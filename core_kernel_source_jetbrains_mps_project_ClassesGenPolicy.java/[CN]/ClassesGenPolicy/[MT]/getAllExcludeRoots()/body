{
  final Set<VirtualFile> roots=new HashSet<VirtualFile>();
  ModelAccess.instance().runReadAction(new Runnable(){
    @Override public void run(){
      for (      IModule module : MPSModuleRepository.getInstance().getAllModules()) {
        IFile classesGen=module.getClassesGen();
        if (classesGen != null) {
          VirtualFile classesGenVF=classesGen.toVirtualFile();
          if (classesGenVF != null) {
            roots.add(classesGenVF);
          }
        }
      }
    }
  }
);
  return roots;
}
