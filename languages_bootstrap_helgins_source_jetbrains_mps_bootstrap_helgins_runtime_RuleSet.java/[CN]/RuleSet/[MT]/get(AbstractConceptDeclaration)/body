{
  if (key instanceof ConceptDeclaration) {
    ConceptDeclaration conceptDeclaration=(ConceptDeclaration)key;
    while (conceptDeclaration != null) {
      Set<T> rules=myRules.get(conceptDeclaration);
      if (rules != null) {
        if (conceptDeclaration != key) {
          myRules.put(key,rules);
        }
        return rules;
      }
      conceptDeclaration=conceptDeclaration.getExtends();
    }
  }
  HashSet<T> hashSet=new HashSet<T>(2);
  myRules.put(key,hashSet);
  return hashSet;
}
