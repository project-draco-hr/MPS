{
  SNode compType=convertTypeReference(x.type);
  if (x.initializer != null) {
    if (x.dimensions.length > 1) {
      compType=buildArrayType(compType,x.dimensions.length - 1,false);
    }
    List<SNode> initializers=new ArrayList<SNode>();
    if (x.initializer.expressions != null) {
      for (      Expression expression : x.initializer.expressions) {
        ListSequence.fromList(initializers).addElement(convertExpressionWrap(expression));
      }
    }
    SNode arrayCreator=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x10cd01b77ddL,"jetbrains.mps.baseLanguage.structure.ArrayCreatorWithInitializer"));
    for (    SNode initializer : initializers) {
      ListSequence.fromList(SLinkOperations.getChildren(arrayCreator,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x10cd01b77ddL,0x10cd01d19acL,"initValue"))).addElement(initializer);
    }
    SLinkOperations.setTarget(arrayCreator,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x10cd01b77ddL,0x10cd01cf3c4L,"componentType"),compType);
    SNode genericNewExpression=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x10ab8473cc5L,"jetbrains.mps.baseLanguage.structure.GenericNewExpression"));
    SLinkOperations.setTarget(genericNewExpression,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x10ab8473cc5L,0x10ab847b486L,"creator"),arrayCreator);
    return genericNewExpression;
  }
 else {
    List<SNode> dims=new ArrayList<SNode>();
    for (    Expression dimension : x.dimensions) {
      if (dimension == null) {
        ListSequence.fromList(dims).addElement(null);
      }
 else {
        ListSequence.fromList(dims).addElement(convertExpressionWrap(dimension));
      }
    }
    SNode arrayCreator=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x113e4952f12L,"jetbrains.mps.baseLanguage.structure.ArrayCreator"));
    for (    SNode dim : dims) {
      SNode dimensionExpression=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x113e4b2dfdaL,"jetbrains.mps.baseLanguage.structure.DimensionExpression"));
      ListSequence.fromList(SLinkOperations.getChildren(arrayCreator,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x113e4952f12L,0x113e4b36742L,"dimensionExpression"))).addElement(dimensionExpression);
      if (dim != null) {
        SLinkOperations.setTarget(dimensionExpression,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x113e4b2dfdaL,0x113e4b846d4L,"expression"),dim);
      }
    }
    SNode deepestComponentType=compType;
    while (SNodeOperations.isInstanceOf(deepestComponentType,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xf940d819f7L,"jetbrains.mps.baseLanguage.structure.ArrayType"))) {
      deepestComponentType=SLinkOperations.getTarget(SNodeOperations.cast(deepestComponentType,MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xf940d819f7L,"jetbrains.mps.baseLanguage.structure.ArrayType")),MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0xf940d819f7L,0xf940d819f8L,"componentType"));
    }
    SLinkOperations.setTarget(arrayCreator,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x113e4952f12L,0x113e49578edL,"componentType"),deepestComponentType);
    SNode genericNewExpression=SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x10ab8473cc5L,"jetbrains.mps.baseLanguage.structure.GenericNewExpression"));
    SLinkOperations.setTarget(genericNewExpression,MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L,0xa443f952ceaf5816L,0x10ab8473cc5L,0x10ab847b486L,"creator"),arrayCreator);
    return genericNewExpression;
  }
}
