{
  int index=((EditorCell_Label)editorContext.getSelectedCell()).getCaretPosition();
  String currText=SPropertyOperations.getString(node,"text");
  if (index < currText.length() && index > 0) {
    SNode newText=SModelOperations.createNewNode(SNodeOperations.getModel(node),"jetbrains.mps.build.structure.BuildTextStringPart",null);
    SPropertyOperations.set(newText,"text",currText.substring(index));
    SPropertyOperations.set(node,"text",currText.substring(0,index));
    SNodeOperations.insertNextSiblingChild(node,newText);
  }
  SNode newRef=SModelOperations.createNewNode(SNodeOperations.getModel(node),"jetbrains.mps.build.structure.BuildVarRefStringPart",null);
  if (index != 0) {
    SNodeOperations.insertNextSiblingChild(node,newRef);
  }
 else {
    SNodeOperations.insertPrevSiblingChild(node,newRef);
  }
  editorContext.selectWRTFocusPolicy(newRef);
}
