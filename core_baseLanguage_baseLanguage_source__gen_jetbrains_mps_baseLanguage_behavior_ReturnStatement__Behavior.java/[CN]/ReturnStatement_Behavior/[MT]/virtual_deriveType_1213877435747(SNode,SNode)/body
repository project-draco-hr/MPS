{
  SNode type=null;
  if (SNodeOperations.getParent(expression) == thisNode && SNodeOperations.hasRole(expression,"jetbrains.mps.baseLanguage.structure.ReturnStatement","expression")) {
    SNode ancestor=SNodeOperations.getAncestorWhereConceptInList(thisNode,new String[]{"jetbrains.mps.baseLanguage.structure.BaseMethodDeclaration","jetbrains.mps.baseLanguage.structure.ConceptFunction"},false,false);
    if (SNodeOperations.isInstanceOf(ancestor,"jetbrains.mps.baseLanguage.structure.BaseMethodDeclaration")) {
      type=SNodeOperations.copyNode(SLinkOperations.getTarget(ancestor,"returnType",true));
    }
 else {
      type=SNodeOperations.copyNode(ConceptFunction_Behavior.call_getExpectedReturnType_1213877374441(ancestor));
    }
  }
  return type;
}
