{
  int modelVersion=model.getVersion();
  int historyVersion=model.getStructureModificationLog().getLatestVersion(model.getSModelReference());
  if (modelVersion < historyVersion) {
    if (log.isErrorEnabled()) {
      log.error("updating version of " + model + " from "+ modelVersion+ " to .history version "+ historyVersion);
    }
    model.setVersion(historyVersion);
    model.setChanged(true);
  }
 else   if (modelVersion > historyVersion) {
    if (log.isErrorEnabled()) {
      log.error("history version of " + model + " is smaller than model version: "+ historyVersion+ "<"+ modelVersion);
    }
  }
}
