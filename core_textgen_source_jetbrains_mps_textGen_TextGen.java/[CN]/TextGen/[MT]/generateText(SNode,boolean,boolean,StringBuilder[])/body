{
  if (canGenerateTextFor(node)) {
    return generateText(node,withDebugInfo,buffers);
  }
 else   if (failIfNoTextgen) {
    String error="Can't generate text from " + node;
    Message m=new Message(MessageKind.ERROR,error);
    if (node != null && node.getModel() != null && !(node.getModel().getModule() instanceof TransientModelsModule)) {
      m.setHintObject(new jetbrains.mps.smodel.SNodePointer(node));
    }
    return new TextGenerationResult(node,NO_TEXTGEN,true,Collections.<IMessage>singleton(m),null,null,null,null);
  }
 else {
    return new TextGenerationResult(node,NO_TEXTGEN,false,Collections.<IMessage>emptyList(),null,null,null,null);
  }
}
