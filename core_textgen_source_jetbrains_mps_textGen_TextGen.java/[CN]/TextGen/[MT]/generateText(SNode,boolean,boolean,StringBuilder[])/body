{
  if (canGenerateTextFor(node)) {
    return generateText(node,withDebugInfo,buffers);
  }
 else   if (failIfNoTextgen) {
    String error="Can't generate text from " + node;
    Message m=new Message(MessageKind.ERROR,error);
    if (node != null) {
      m.setHintObject(node.getReference());
    }
    return new TextGenerationResult(node,NO_TEXTGEN,true,Collections.<IMessage>singleton(m),null,null,null,null);
  }
 else {
    return new TextGenerationResult(node,NO_TEXTGEN,false,Collections.<IMessage>emptyList(),null,null,null,null);
  }
}
