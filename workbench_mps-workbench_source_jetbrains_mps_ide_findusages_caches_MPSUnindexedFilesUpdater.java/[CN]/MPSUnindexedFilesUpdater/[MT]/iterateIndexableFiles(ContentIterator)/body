{
  ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  if (indicator != null) {
    indicator.setText("Scanning files to index");
  }
  Set<VirtualFile> visitedRoots=new HashSet<VirtualFile>();
  for (  VirtualFile root : CacheUtil.getIndexableRoots(myProject)) {
    if (visitedRoots.contains(root))     continue;
    visitedRoots.add(root);
    iterateRecursively(root,processor,indicator);
  }
}
