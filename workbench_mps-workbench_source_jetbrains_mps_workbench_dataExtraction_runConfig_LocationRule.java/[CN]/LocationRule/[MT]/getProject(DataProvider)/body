{
  MPSProject mpsProject=MPSDataKeys.MPS_PROJECT.getData(dataProvider);
  if (mpsProject == null) {
    Project ideaProject=MPSDataKeys.PROJECT.getData(dataProvider);
    if (ideaProject == null) {
      Frame frame=MPSDataKeys.FRAME.getData(dataProvider);
      if (frame instanceof IdeFrame) {
        ideaProject=((IdeFrame)frame).getProject();
      }
    }
    if (ideaProject == null) {
      return null;
    }
    mpsProject=ProjectHelper.fromIdeaProject(ideaProject);
  }
  return mpsProject;
}
