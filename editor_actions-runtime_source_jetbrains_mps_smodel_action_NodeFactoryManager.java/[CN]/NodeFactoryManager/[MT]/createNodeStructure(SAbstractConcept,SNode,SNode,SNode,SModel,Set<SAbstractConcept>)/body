{
  for (  SAbstractLink linkDeclaration : nodeConcept.getLinks()) {
    if (linkDeclaration.isReference() || linkDeclaration.isOptional()) {
      continue;
    }
    SAbstractConcept targetConcept=linkDeclaration.getTargetConcept();
    if (!newNode.getChildren(linkDeclaration.getRole()).iterator().hasNext()) {
      if (!visitedNonOptionalChildConcepts.contains(targetConcept)) {
        visitedNonOptionalChildConcepts.add(targetConcept);
        try {
          SNode childNode=createNode(targetConcept,sampleNode,enclosingNode,model,visitedNonOptionalChildConcepts);
          newNode.addChild(linkDeclaration.getRole(),childNode);
        }
  finally {
          visitedNonOptionalChildConcepts.remove(targetConcept);
        }
      }
 else {
        LOG.error("Cyclic containment found while initializing node: " + newNode.getNodeId() + ", containment link: "+ linkDeclaration.getName());
      }
    }
  }
}
