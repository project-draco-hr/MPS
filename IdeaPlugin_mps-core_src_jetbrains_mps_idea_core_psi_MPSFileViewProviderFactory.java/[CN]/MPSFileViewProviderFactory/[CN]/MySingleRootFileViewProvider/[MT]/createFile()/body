{
  VirtualFile virtualFile=getVirtualFile();
  if (virtualFile instanceof LightVirtualFile) {
    virtualFile=((LightVirtualFile)virtualFile).getOriginalFile();
  }
  if (virtualFile == null || virtualFile.getFileType() != MPSFileTypeFactory.MODEL_FILE_TYPE) {
    return null;
  }
  final IFile modelFile=FileSystem.getInstance().getFileByPath(virtualFile.getPath());
  FileSourcePsiFile psiFile=ModelAccess.instance().runReadAction(new Computable<FileSourcePsiFile>(){
    @Override public FileSourcePsiFile compute(){
      SModel descr=SModelFileTracker.getInstance().findModel(modelFile);
      if (descr != null) {
        return createAndUpdatePsiFile(descr);
      }
      return null;
    }
  }
);
  return psiFile;
}
