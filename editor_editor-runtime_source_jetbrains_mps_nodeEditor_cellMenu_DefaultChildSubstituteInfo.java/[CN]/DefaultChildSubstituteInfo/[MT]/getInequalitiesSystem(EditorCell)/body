{
  HashMap<SNode,SNode> mapping=new HashMap<SNode,SNode>();
  CopyUtil.copy(Arrays.asList(myParentNode.getTopmostAncestor()),mapping).get(0);
  boolean holeIsAType=SModelUtil.isAssignableConcept(NameUtil.nodeFQName(SModelUtil.getLinkDeclarationTarget(myLinkDeclaration)),"jetbrains.mps.lang.core.structure.IType");
  SNode hole=null;
  SNode parent=mapping.get(myParentNode);
  String role=SModelUtil.getGenuineLinkRole(myLinkDeclaration);
  hole=SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.core.structure.BaseConcept",null,GlobalScope.getInstance());
  if (myCurrentChild != null) {
    SNode child=mapping.get(myCurrentChild);
    parent.insertChild(role,hole,parent.getPrevChild(child));
    parent.removeChild(child);
  }
 else {
    parent.addChild(role,hole);
  }
  InequalitySystem inequationsForHole=TypeChecker.getInstance().getInequalitiesForHole(hole,holeIsAType);
  inequationsForHole.replaceRefs(mapping);
  return inequationsForHole;
}
