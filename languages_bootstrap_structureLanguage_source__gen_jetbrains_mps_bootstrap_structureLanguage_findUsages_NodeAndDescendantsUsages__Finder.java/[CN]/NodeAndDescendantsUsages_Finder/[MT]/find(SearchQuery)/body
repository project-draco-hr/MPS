{
  SearchResults results=new SearchResults();
{
    Set<SNode> nodes=new HashSet<SNode>();
    results.getSearchedNodePointers().add(searchQuery.getNodePointer());
    nodes.add(searchQuery.getNodePointer().getNode());
    for (    SNode node : searchQuery.getNodePointer().getNode().allChildren()) {
      results.getSearchedNodePointers().add(new SNodePointer(node));
      nodes.add(node);
    }
    Set<SReference> resRefs=FindUsagesManager.getInstance().findUsages(nodes,searchQuery.getScope(),null);
    for (    SReference reference : resRefs) {
      if (!(nodes.contains(reference.getSourceNode()))) {
        results.getSearchResults().add(new SearchResult(new SNodePointer(reference.getSourceNode()),"Node Usages"));
      }
    }
  }
  return results;
}
