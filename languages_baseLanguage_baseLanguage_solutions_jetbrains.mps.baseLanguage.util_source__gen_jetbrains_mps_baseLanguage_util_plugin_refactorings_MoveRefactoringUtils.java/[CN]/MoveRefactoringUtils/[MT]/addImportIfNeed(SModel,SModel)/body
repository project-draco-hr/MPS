{
  if (model == null || toImport == null) {
    return;
  }
  SModelReference ref=toImport.getReference();
  if (model == toImport || SModelOperations.getImportedModelUIDs(model).contains(ref)) {
    return;
  }
  ((SModelInternal)model).addModelImport(ref,false);
  SModule module=model.getModule();
  if (module instanceof Language) {
    Iterable<SDependency> declaredDependencies=module.getDeclaredDependencies();
    for (    SDependency dependency : Sequence.fromIterable(declaredDependencies)) {
      if (dependency.getTarget() == toImport.getModule()) {
        return;
      }
    }
    ((Language)module).addDependency(toImport.getModule().getModuleReference(),false);
  }
}
