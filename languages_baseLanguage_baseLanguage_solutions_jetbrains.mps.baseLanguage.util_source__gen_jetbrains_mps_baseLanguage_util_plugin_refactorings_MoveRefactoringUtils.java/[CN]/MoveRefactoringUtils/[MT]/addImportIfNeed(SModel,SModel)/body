{
  if (model == null || toImport == null) {
    return;
  }
  SModelReference ref=toImport.getReference();
  if (model == toImport || SModelOperations.getImportedModelUIDs(model).contains(ref)) {
    return;
  }
  ((SModelInternal)model).addModelImport(ref,false);
  SModule module=model.getModule();
  if (module instanceof Language) {
    SModuleReference module2import=toImport.getModule().getModuleReference();
    Iterable<SDependency> declaredDependencies=module.getDeclaredDependencies();
    for (    SDependency dependency : Sequence.fromIterable(declaredDependencies)) {
      if (dependency.getTargetModule().equals(module2import)) {
        return;
      }
    }
    ((Language)module).addDependency(module2import,false);
  }
}
